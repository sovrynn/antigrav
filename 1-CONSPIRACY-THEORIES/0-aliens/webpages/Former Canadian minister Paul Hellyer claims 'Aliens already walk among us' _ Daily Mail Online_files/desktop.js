/*! For license information please see desktop.js.LICENSE.txt */
(()=>{var e={3995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1169),i=n(8027),a=n(8680),s=n(323),c=n(1404),l=(r=c)&&r.__esModule?r:{default:r},u=n(3314);var d=n.g,p=d.Element,f=(p=void 0===p?{}:p).prototype,m=(f=void 0===f?{}:f).scrollIntoView,_=f.scrollIntoViewIfNeeded,h=d.scroll,E=d.scrollBy,g=d.scrollByLines,v=d.scrollByPages,y=d.scrollTo,w=function(){(0,s.dispatchCustomEvent)("scrollutilsblock")},b=function(e){(0,o.setClientPosition)(e.clientX,e.clientY),(0,o.updateMouseOverIframe)()},I=function(e,t){var n=function(){e.resetJudgement(),(0,o.updatePosition)()};(0,o.isInteracting)()?n():((0,o.updateScrollDirection)(),(0,o.updateMouseOverIframe)(),(0,o.isMouseOverIframe)()?n():(e.notify(),w(),(0,o.resetScroll)()))},O=function(){(0,o.isInteracting)()||(0,o.goingBack)()?(0,o.setHash)(n.g.location.hash):(w(),(0,i.goBack)(),(0,o.resetScroll)())};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.recursiveConsideration,r=(t=void 0===t?{}:t).frequency,c=void 0===r?2:r,d=t.timeout,p=void 0===d?500:d,f=e.recursiveInterventionThreshold,S=void 0===f?5:f,T=e.wheelInteractionTimeout,A=void 0===T?30:T,C=e.mouseupInteractionTimeout,L=void 0===C?30:C;if(void 0===n.g.pageYOffset||u.IS_SAFARI)return a.noop;var P=new l.default({intervene:function(){return(0,s.dispatchCustomEvent)("scrollutilsintervention")},interventionThreshold:S,frequency:c,timeout:p}),R=I.bind(null,P),N=a.Debouncer.debounce(o.endInteraction,A),M=a.Debouncer.debounce(o.endInteraction,L),D=function(e){var t=e.endWheelInteraction,r=e.endKeyMouseUpInteraction,i=e.monitoredScrollHandler,a=n.g.document,s=a.body,c=a.documentElement,l=[s,c],u=s.doScroll;return function e(){s.doScroll=u,n.g.Element.prototype.scrollIntoView=m,n.g.Element.prototype.scrollIntoViewIfNeeded=_,n.g.scroll=h,n.g.scrollBy=E,n.g.scrollByLines=g,n.g.scrollByPages=v,n.g.scrollTo=y,n.g.removeEventListener("scrollutilsintervention",e),n.g.removeEventListener("wheel",o.startInteraction,!0),n.g.removeEventListener("wheel",t,!1),n.g.removeEventListener("keydown",o.startInteraction,!0),n.g.removeEventListener("keyup",r,!0),n.g.removeEventListener("mousedown",o.startInteraction,!0),n.g.removeEventListener("mouseup",r,!0),n.g.removeEventListener("dragstart",o.startInteraction,!0),n.g.removeEventListener("dragend",o.endInteraction,!0),n.g.removeEventListener("scroll",i,!0),n.g.removeEventListener("touchstart",o.startInteraction,!0),n.g.removeEventListener("touchend",o.endInteraction,!0),n.g.removeEventListener("touchmove",i,!0),n.g.removeEventListener("mousemove",b,!1),n.g.removeEventListener("hashchange",O,!1);var a=!0,c=!1,d=void 0;try{for(var p,f=l[Symbol.iterator]();!(a=(p=f.next()).done);a=!0){var w=p.value;delete w.scrollTop,delete w.scrollLeft,w.scrollTop=(0,o.getScrollTop)(),w.scrollLeft=(0,o.getScrollLeft)()}}catch(e){c=!0,d=e}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}}}({endWheelInteraction:N,endKeyMouseUpInteraction:M,monitoredScrollHandler:R});return(0,o.setHash)(n.g.location.hash),(0,o.updatePosition)(),function(e){var t=e.endWheelInteraction,r=e.endKeyMouseUpInteraction,a=e.monitoredScrollHandler,s=e.reenableWindowScrollMethods,c=n.g.document,l=c.body,u=[l,c.documentElement];l.doScroll=w,n.g.Element.prototype.scrollIntoView=w,n.g.Element.prototype.scrollIntoViewIfNeeded=w,n.g.scroll=h&&w,n.g.scrollBy=E&&w,n.g.scrollByLines=g&&w,n.g.scrollByPages=v&&w,n.g.scrollTo=w,n.g.addEventListener("scrollutilsintervention",s),n.g.addEventListener("wheel",o.startInteraction,!0),n.g.addEventListener("wheel",t,!1),n.g.addEventListener("keydown",o.startInteraction,!0),n.g.addEventListener("keyup",r,!0),n.g.addEventListener("mousedown",o.startInteraction,!0),n.g.addEventListener("mouseup",r,!0),n.g.addEventListener("dragstart",o.startInteraction,!0),n.g.addEventListener("dragend",o.endInteraction,!0),n.g.addEventListener("scroll",a,!0),n.g.addEventListener("touchstart",o.startInteraction,!0),n.g.addEventListener("touchend",o.endInteraction,!0),n.g.addEventListener("touchmove",a,!0),n.g.addEventListener("mousemove",b,!1),n.g.addEventListener("hashchange",O,!1);var d=function(e){Object.defineProperty(e,"scrollTop",{configurable:!0,get:function(){return(0,i.getScrollTop)(e)},set:w}),Object.defineProperty(e,"scrollLeft",{configurable:!0,get:function(){return(0,i.getScrollLeft)(e)},set:w})},p=!0,f=!1,m=void 0;try{for(var _,y=u[Symbol.iterator]();!(p=(_=y.next()).done);p=!0)d(_.value)}catch(e){f=!0,m=e}finally{try{!p&&y.return&&y.return()}finally{if(f)throw m}}}({endWheelInteraction:N,endKeyMouseUpInteraction:M,monitoredScrollHandler:R,reenableWindowScrollMethods:D}),D}},323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dispatchCustomEvent=n.g.dispatchEvent?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g,r=new n.g.CustomEvent(e);t.dispatchEvent(r)}:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g,r=n.g.createEventObject();t.fireEvent("on"+r,r)}},416:(e,t,n)=>{"use strict";var r=n(3995);Object.defineProperty(t,"io",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}});var o=n(8027);Object.defineProperty(t,"gW",{enumerable:!0,get:function(){return o.createInteractionMethod}}),Object.defineProperty(t,"v_",{enumerable:!0,get:function(){return o.getScrollLeft}}),Object.defineProperty(t,"hY",{enumerable:!0,get:function(){return o.getScrollTop}}),Object.defineProperty(t,"hd",{enumerable:!0,get:function(){return o.setHash}}),Object.defineProperty(t,"ND",{enumerable:!0,get:function(){return o.setScrollLeft}}),Object.defineProperty(t,"LR",{enumerable:!0,get:function(){return o.setScrollTop}}),Object.defineProperty(t,"W2",{enumerable:!0,get:function(){return o.scroll}}),Object.defineProperty(t,"HN",{enumerable:!0,get:function(){return o.scrollBy}}),Object.defineProperty(t,"M$",{enumerable:!0,get:function(){return o.scrollByLines}}),Object.defineProperty(t,"Tw",{enumerable:!0,get:function(){return o.scrollByPages}}),Object.defineProperty(t,"VG",{enumerable:!0,get:function(){return o.scrollTo}}),Object.defineProperty(t,"PA",{enumerable:!0,get:function(){return o.scrollToElement}}),Object.defineProperty(t,"Dn",{enumerable:!0,get:function(){return o.scrollToElementIfNeeded}})},1404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t){var n=t.intervene,r=t.timeout,o=t.frequency,i=t.interventionThreshold;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.intervene=n,this.timeout=r,this.frequency=o,this.interventionThreshold=i,this.makeJudgement=this.makeJudgement.bind(this),this.calls=0,this.resetNum=0}return n(e,[{key:"notify",value:function(){this.calls++,this.id||(this.id=setTimeout(this.makeJudgement,this.timeout))}},{key:"makeJudgement",value:function(){this.calls>=this.frequency?this.resetJudgement():this.stopTimer(),this.resetNum>=this.interventionThreshold&&(this.startOver(),this.intervene())}},{key:"stopTimer",value:function(){this.id=clearTimeout(this.id)}},{key:"resetJudgement",value:function(){this.id=clearTimeout(this.id),this.calls=0,this.resetNum++}},{key:"startOver",value:function(){this.resetJudgement(),this.resetNum=0}}]),e}();t.default=r},8027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goBack=t.setHash=t.scrollByPages=t.scrollByLines=t.scrollBy=t.scroll=t.doScroll=t.setScrollLeft=t.getScrollLeft=t.setScrollTop=t.getScrollTop=t.scrollToElementIfNeeded=t.scrollToElement=t.scrollTo=t.createInteractionMethod=void 0;var r=n(1169),o=n(8680);var i=n.g,a=i.Element,s=(a=void 0===a?{}:a).prototype,c=(s=void 0===s?{}:s).scrollIntoView,l=s.scrollIntoViewIfNeeded,u=s.doScroll,d=i.scroll,p=i.scrollBy,f=i.scrollByLines,m=i.scrollByPages,_=i.scrollTo,h=function(e){var t=n.g.document;return[t.body,t.documentElement].includes(e)},E=t.createInteractionMethod=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return(0,r.startInteraction)(),Promise.resolve(e.apply(t,i)).then((function(){return(0,o.nextTick)((function(){(0,r.updatePosition)(),(0,r.endInteraction)()}))}))}},g=t.scrollTo=E(_,n.g);t.scrollToElement=E((function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=c||e.scrollIntoView).call.apply(t,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r)))})),t.scrollToElementIfNeeded=E((function(e,t){return l.call(e,t)})),t.getScrollTop=function(e){return h(e)?(0,r.getScrollTop)():e.scrollTop},t.setScrollTop=function(e,t){h(e)?g((0,r.getScrollLeft)(),t):e.scrollTop=t},t.getScrollLeft=function(e){return h(e)?(0,r.getScrollLeft)():e.scrollLeft},t.setScrollLeft=function(e,t){h(e)?g(t,(0,r.getScrollTop)()):e.scrollLeft=t},t.doScroll=function(e,t){u.call(e,t)},t.scroll=E(d,n.g),t.scrollBy=E(p,n.g),t.scrollByLines=E(f,n.g),t.scrollByPages=E(m,n.g),t.setHash=E((function(e){n.g.location.hash=e})),t.goBack=E((function(){n.g.history.replaceState({},n.g.document.title,n.g.location.pathname+(0,r.getHash)())}))},1169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goingBack=t.resetScroll=t.setClientPosition=t.setPosition=t.updatePosition=t.updateMouseOverIframe=t.updateScrollDirection=t.getScrollLeft=t.getScrollTop=t.endInteraction=t.startInteraction=t.isMouseOverIframe=t.isInteracting=t.getHash=t.setHash=t.setHoveringOverIframe=void 0;var r=n(8027),o=n(8680),i={clientX:0,clientY:0,history:[],interacting:!1,loading:!0,mouseOverIframe:!1,scrollXDirection:0,scrollYDirection:0,scrollLeft:0,scrollTop:0},a=t.setHoveringOverIframe=function(e){i.mouseOverIframe=e},s=(t.setHash=function(e){i.history.push(e)},t.getHash=function(){return i.history[i.history.length-1]},t.isInteracting=function(){return i.interacting||i.loading},t.isMouseOverIframe=function(){return i.mouseOverIframe}),c=(t.startInteraction=function(){i.interacting=!0},t.endInteraction=function(){i.interacting=!1},t.getScrollTop=function(){return i.scrollTop},t.getScrollLeft=function(){return i.scrollLeft},function(e,t){switch(t){case 1:return e-1;case-1:return e+1;default:return e}}),l=function(e,t){return e>t?1:e<t?-1:0},u=(t.updateScrollDirection=function(){i.scrollXDirection=l(n.g.pageXOffset,i.scrollLeft),i.scrollYDirection=l(n.g.pageYOffset,i.scrollTop)},new o.Debouncer({ms:400,fn:function(){c(i.clientX,i.scrollXDirection),c(i.clientY,i.scrollYDirection);var e=n.g.document.elementFromPoint(i.clientX-1,i.clientY-1),t=n.g.document.elementFromPoint(i.clientX+1,i.clientY+1),r=e&&"IFRAME"===e.nodeName||t&&"IFRAME"===t.nodeName;a(r)}})),d=(t.updateMouseOverIframe=function(){s()?u.call():u.force()},t.updatePosition=function(){d(n.g.pageXOffset,n.g.pageYOffset)},t.setPosition=function(e,t){i.scrollLeft=e,i.scrollTop=t});t.setClientPosition=function(e,t){i.clientX=e,i.clientY=t},t.resetScroll=function(){(0,r.scrollTo)(i.scrollLeft,i.scrollTop)},t.goingBack=function(){return i.history[i.history.length-2]===n.g.location.hash};n.g.addEventListener("load",(function(){(0,o.nextTick)((function(){i.loading=!1}))}))},3314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.IS_SAFARI=/^((?!chrome|android).)*safari/i.test(n.g.navigator.userAgent)},8680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=t.T=function(){return!0},i=t.noop=function(){};t.nextTick=function(e){return new Promise((function(t){setTimeout((function(){e(),t()}))}))},t.Debouncer=function(){function e(t){var n=t.fn,r=t.ms,a=t.head,s=void 0!==a&&a,c=t.filter,l=void 0===c?o:c,u=t.tail,d=void 0===u?!s:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ms=r,this.filter=l,this.head=s?n:i,this.tail=d?n:i,this.call=this.call.bind(this),this.cancel=this.cancel.bind(this)}return n(e,null,[{key:"debounce",value:function(t,n){return new e({fn:t,ms:n}).call}}]),n(e,[{key:"call",value:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];this.filter.apply(this,r(n))&&(this.id?this.cancel():this.head.apply(this,r(n)),this.id=setTimeout((function(){return e.tail.apply(e,r(n))}),this.ms))}},{key:"force",value:function(){this.cancel(),this.head.apply(this,arguments),this.tail.apply(this,arguments)}},{key:"cancel",value:function(){this.id=this.id&&clearTimeout(this.id)}}]),e}()},2304:e=>{var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=24)}([function(e,t,n){var r,o,i;i=function(){return function(){return function(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var o=e[r];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(r>0&&(o=o.replace(/^[\/]+/,"")),o=r<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var i=t.join("/"),a=(i=i.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a.shift()+(a.length>0?"?":"")+a.join("&")}("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fRetry=t.FetchError=void 0;var l=c(n(10)),u=c(n(14)),d=n(5),p=function(e){function t(n,r,o,i,a){var s=e.call(this,n)||this;return Object.setPrototypeOf?Object.setPrototypeOf(s,t.prototype):s.__proto__=t.prototype,s.url=r,s.method=o,s.requestBody=i,s.responseStatus=a,s}return o(t,e),t}(Error);t.FetchError=p,t.fRetry=function(e){return function(t,n,r,o){return void 0===r&&(r=!0),a(void 0,void 0,void 0,(function(){var c,f;return s(this,(function(m){return c=(0,u.default)(d.trackClientErrors,500),f=function(e){return a(void 0,void 0,void 0,(function(){var a,l,u,d,f,m,_,h,E,g,v,y,w,b,I;return s(this,(function(s){switch(s.label){case 0:return n&&n.method&&"GET"!==n.method.toUpperCase()&&n.headers&&"string"==typeof n.body&&(a=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("content-type"===r.toLowerCase())return e[r]}return null}(n.headers),a&&"application/json"===a.toLowerCase()&&"object"==typeof(l=JSON.parse(n.body))&&(n.body=JSON.stringify(i({__numberOfAttempts:e},l)))),u="string"==typeof t?t:t.url,d=n&&n.method||"string"!=typeof t&&t.method||"get",_=(m=JSON).parse,(h=n&&n.body)?[3,3]:(E="string"!=typeof t)?[4,t.clone().text()]:[3,2];case 1:E=s.sent(),s.label=2;case 2:h=E,s.label=3;case 3:f=_.apply(m,[h.toString()])||void 0,s.label=4;case 4:return s.trys.push([4,8,9,10]),[4,fetch(t,i(i({},n),{credentials:(null==n?void 0:n.credentials)||"omit"}))];case 5:return g=s.sent(),(y=o)?[4,o(g)]:[3,7];case 6:y=!s.sent(),s.label=7;case 7:if(v=y,!g.ok||v)throw w=v?"Failed response validation":g.statusText,new p(w,u,d,f,g.status);return[2,g];case 8:if((b=s.sent())instanceof p)throw b;throw new p(b.message||"Unexpected fetch error",u,d,f);case 9:return r&&c(null===(I=null==n?void 0:n.headers)||void 0===I?void 0:I.Authorization),[7];case 10:return[2]}}))}))},[2,(0,l.default)(f,e)]}))}))}};var f=(0,t.fRetry)({retries:5});t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=localStorage),this.name=e,this.storage=t}return e.prototype.get=function(){try{var e=this.storage.getItem(this.name);if(null!==e)return JSON.parse(e)}catch(e){console.error(e)}return null},e.prototype.set=function(e){try{this.storage.setItem(this.name,JSON.stringify(e))}catch(e){console.error(e)}},e.prototype.clear=function(){try{this.storage.removeItem(this.name)}catch(e){console.error(e)}},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearStatus=t.getStatus=t.setStatus=void 0;var o=new(r(n(2)).default)("MOL-FE-WEB-PUSH_SUBSCRIPTION_STATUS");t.setStatus=function(e,t){o.set({metadata:t,state:e})},t.getStatus=function(){return o.get()},t.clearStatus=function(){return o.clear()}},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,a=7*i,s=365.25*i;function c(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var l,u,d=typeof e;if("string"===d&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}(e);if("number"===d&&isFinite(e))return t.long?(l=e,(u=Math.abs(l))>=i?c(l,u,i,"day"):u>=o?c(l,u,o,"hour"):u>=r?c(l,u,r,"minute"):u>=n?c(l,u,n,"second"):l+" ms"):function(e){var t=Math.abs(e);return t>=i?Math.round(e/i)+"d":t>=o?Math.round(e/o)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.trackClientErrors=t.clear=t.addError=t.getErrors=t.setBaseEndpoint=void 0;var c,l=n(7),u=s(n(0)),d=s(n(2)),p=s(n(1)),f=new d.default("MOL-FE-WEB-PUSH_CLIENT_SUBSCRIPTION_ERRORS",sessionStorage);t.setBaseEndpoint=function(e){return c=e},t.getErrors=function(){return f.get()},t.addError=function(e){var n=(0,l.serializeError)(e),r=(0,t.getErrors)();(null==r?void 0:r.find((function(e){return JSON.stringify(e)===JSON.stringify(n)})))||f.set(a(a([],r||[],!0),[n],!1))},t.clear=function(){return f.clear()},t.trackClientErrors=function(e){return o(void 0,void 0,void 0,(function(){var n,o,a,s,l;return i(this,(function(i){switch(i.label){case 0:if(!(n=(0,t.getErrors)())||0===n.length)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),o=(0,u.default)(c,"analytics/client/error"),a={body:JSON.stringify({errors:n}),headers:{"Content-type":"application/json"},method:"post"},e&&(a.headers=r(r({},a.headers),{Authorization:e})),[4,(0,p.default)(o,a,!1)];case 2:if(!(s=i.sent()).ok)throw new Error(s.statusText);return(0,t.clear)(),[3,4];case 3:return l=i.sent(),console.error("Track Client Errors",l),[3,4];case 4:return[2]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceSubscription=t.updatePushSubscription=t.requestPushPermissionAndSubscribe=t.requestPushNotificationPermission=t.subscribePushNotifications=t.registerPushSubscription=t.willExpireSoon=t.needsMigration=t.isWebPushSupported=void 0;var s=a(n(15)),c=a(n(1)),l=a(n(8));t.isWebPushSupported=function(){return"serviceWorker"in navigator&&"PushManager"in window},t.needsMigration=function(e,t){return e.options.applicationServerKey instanceof ArrayBuffer&&!(0,s.default)(t,new Uint8Array(e.options.applicationServerKey,0))},t.willExpireSoon=function(e){return!!e.expirationTime&&e.expirationTime<Date.now()+6048e5},t.registerPushSubscription=function(e,t,n){var a=t.subscription,s=t.metadata;return o(void 0,void 0,void 0,(function(){var t,o;return i(this,(function(i){return function(e){var t,n;try{t=e.getKey("auth"),n=e.getKey("p256dh")}catch(t){return console.error("Unable to get auth and p256dh keys, subscription ".concat(JSON.stringify(e,null,2))),!1}return null!==t&&null!==n}(a)?(t={metadata:r(r({},s),{browserLanguage:navigator.language,subscribedUrl:location.href}),subscription:a},o={body:JSON.stringify(t),headers:{"Content-type":"application/json"},method:"POST",mode:"cors"},n&&(o.headers=r(r({},o.headers),{Authorization:"ApiKey ".concat(n)})),[2,(0,c.default)(e,o)]):[2,void 0]}))}))},t.subscribePushNotifications=function(e){var n=e.apiKey,r=e.appServerKey,a=e.metadata,s=e.subscriptionEndpoint,c=e.registration;return o(void 0,void 0,void 0,(function(){var e,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,c.pushManager.subscribe({applicationServerKey:r,userVisibleOnly:!0})];case 1:return e=i.sent(),[4,(0,t.registerPushSubscription)(s,{metadata:a,subscription:e},n)];case 2:return i.sent(),[2,e];case 3:throw o=i.sent(),new l.default(o.message,"register",o);case 4:return[2]}}))}))},t.requestPushNotificationPermission=function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,new Promise((function(e,t){var n=Notification.requestPermission((function(t){e(t)}));n instanceof Promise&&n.then(e,t)}))]}))}))},t.requestPushPermissionAndSubscribe=function(e){return o(void 0,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return[4,(0,t.requestPushNotificationPermission)()];case 1:return"granted"!==(n=o.sent())?[3,3]:[4,(0,t.subscribePushNotifications)(r({},e))];case 2:o.sent(),o.label=3;case 3:return[2,n]}}))}))},t.updatePushSubscription=function(e,t,n){var a=t.subscription,s=t.metadata;return o(void 0,void 0,void 0,(function(){var t,o,u;return i(this,(function(i){switch(i.label){case 0:t={metadata:r(r({},s),{browserLanguage:navigator.language,subscribedUrl:location.href}),subscription:a},o={body:JSON.stringify(t),headers:{"Content-type":"application/json"},method:"PATCH",mode:"cors"},n&&(o.headers=r(r({},o.headers),{Authorization:"ApiKey ".concat(n)})),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,c.default)(e,o)];case 2:return i.sent(),[3,4];case 3:throw u=i.sent(),new l.default(u.message,"update",u);case 4:return[2]}}))}))},t.replaceSubscription=function(e){var n=e.apiKey,r=e.appServerKey,a=e.metadata,s=e.registration,c=e.subscription,l=e.subscriptionEndpoint;return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,c.unsubscribe()];case 1:return e.sent(),[2,(0,t.subscribePushNotifications)({apiKey:n,appServerKey:r,metadata:a,registration:s,subscriptionEndpoint:l})]}}))}))}},function(e,t,n){"use strict";class r extends Error{constructor(e){super(r._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,r)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch(t){return String(e)}}}const o=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],i=({from:e,seen:t,to_:n,forceEnumerable:r})=>{const a=n||(Array.isArray(e)?[]:{});t.push(e);for(const[n,o]of Object.entries(e))"function"!=typeof o&&(o&&"object"==typeof o?t.includes(e[n])?a[n]="[Circular]":a[n]=i({from:e[n],seen:t.slice(),forceEnumerable:r}):a[n]=o);for(const{property:t,enumerable:n}of o)"string"==typeof e[t]&&Object.defineProperty(a,t,{value:e[t],enumerable:!!r||n,configurable:!0,writable:!0});return a};e.exports={serializeError:e=>"object"==typeof e&&null!==e?i({from:e,seen:[],forceEnumerable:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e,deserializeError:e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=new Error;return i({from:e,seen:[],to_:t}),t}return new r(e)}}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(n,r,o){var i=e.call(this,n)||this;return Object.setPrototypeOf?Object.setPrototypeOf(i,t.prototype):i.__proto__=t.prototype,i.type=r,i.cause=o,i}return o(t,e),t}(Error);t.default=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(29));t.default=function(e,t,n){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(0,a.default)(e,t,n)];case 1:return o.sent(),[3,3];case 2:return r=o.sent(),console.error("TrackEvent Error",r),[3,3];case 3:return[2]}}))}))}},function(e,t,n){"use strict";const r=n(11);class o extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const i=(e,t)=>new Promise(((n,i)=>{t={onFailedAttempt:()=>{},retries:10,...t};const a=r.operation(t);a.attempt((async r=>{try{n(await e(r))}catch(e){if(!(e instanceof Error))return void i(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof o)a.stop(),i(e.originalError);else if(e instanceof TypeError)a.stop(),i(e);else{((e,t,n)=>{const r=n.retries-(t-1);e.attemptNumber=t,e.retriesLeft=r})(e,r,t);try{await t.onFailedAttempt(e)}catch(e){return void i(e)}a.retry(e)||i(a.mainError())}}}))}));e.exports=i,e.exports.default=i,e.exports.AbortError=o},function(e,t,n){e.exports=n(12)},function(e,t,n){var r=n(13);t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],o=0;o<t.retries;o++)r.push(this.createTimeout(o,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(o,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*t.minTimeout*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},t.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var o in r=[],e)"function"==typeof e[o]&&r.push(o);for(var i=0;i<r.length;i++){var a=r[i],s=e[a];e[a]=function(r){var o=t.operation(n),i=Array.prototype.slice.call(arguments,1),a=i.pop();i.push((function(e){o.retry(e)||(e&&(arguments[0]=o.mainError()),a.apply(this,arguments))})),o.attempt((function(){r.apply(e,i)}))}.bind(e,s),e[a].options=n}}},function(e,t){function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),n=this._timeouts.shift()}var r=this,o=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n);return this._options.unref&&o.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var o=this._errors[r],i=o.message,a=(e[i]||0)+1;e[i]=a,a>=n&&(t=o,n=a)}return t}},function(e,t,n){"use strict";e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0,o=void 0,i=void 0,a=[];return function(){var c=function(e){return"function"==typeof e?e():e}(t),l=(new Date).getTime(),u=!r||l-r>c;r=l;for(var d=arguments.length,p=Array(d),f=0;f<d;f++)p[f]=arguments[f];if(u&&n.leading)return n.accumulate?Promise.resolve(e.call(this,[p])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(p)));if(o?clearTimeout(i):o=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}(),a.push(p),i=setTimeout(s.bind(this),c),n.accumulate){var m=a.length-1;return o.promise.then((function(e){return e[m]}))}return o.promise};function s(){var t=o;clearTimeout(i),Promise.resolve(n.accumulate?e.call(this,a):e.apply(this,a[a.length-1])).then(t.resolve,t.reject),a=[],o=null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n!==e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.handleRegisterError=void 0;var o=n(7),i=n(5);t.handleRegisterError=function(e,t){var n=t.emit,a=t.metadata,s=t.rawAppServerKey,c=r(r({},(0,o.serializeError)(e)),{organisation:null==a?void 0:a.organisation,rawAppServerKey:s,userAgent:navigator.userAgent});(0,i.addError)(c),n("error",c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"production":return"https://hulkprod.anm.co.uk/api/web-push-notification";case"integration":return"https://hulkint.anm.co.uk/api/web-push-notification";default:return"/public"}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(37),t),o(n(38),t),o(n(39),t),o(n(40),t),o(n(41),t)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e){"interactive"===document.readyState&&Boolean(document.body)||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",(function(){e()}))}))]}))}));t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(8)),i=n(3),a=n(16);t.default=function(e,t){if(e instanceof o.default){var n=t.metadata;"register"===e.type?(0,i.setStatus)("register_pending",n):"update"===e.type&&(0,i.setStatus)("update_pending",n)}(0,a.handleRegisterError)(e,t)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SetIntervalAsyncTimer=void 0;var a=function(){function e(){this.timeout=void 0,this.promise=void 0,this.stopped=!1}return e.startTimer=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var a=Math.min(Math.max(Math.trunc(n),10),2147483647),s=new e;return s.scheduleTimeout.apply(s,i([t,a,a],r,!1)),s},e.stopTimer=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e.stopped=!0,e.timeout&&clearTimeout(e.timeout),e.promise?[4,e.promise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.scheduleTimeout=function(e,t,n){for(var a=this,s=[],c=3;c<arguments.length;c++)s[c-3]=arguments[c];this.timeout=setTimeout((function(){return r(a,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.timeout=void 0,this.promise=this.runHandlerAndScheduleTimeout.apply(this,i([e,t],s,!1)),[4,this.promise];case 1:return n.sent(),this.promise=void 0,[2]}}))}))}),n)},e.prototype.runHandlerAndScheduleTimeout=function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,e.apply(void 0,n)];case 1:case 2:return r.sent(),[3,4];case 3:return this.stopped||this.scheduleTimeout.apply(this,i([e,t,t],n,!1)),[7];case 4:return[2]}}))}))},e}();t.SetIntervalAsyncTimer=a},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteOldClickRecords=t.getAll=t.clear=t.wasTrackedBefore=t.markAsTracked=t.storage=void 0;var i=o(n(4)),a=o(n(2));t.storage=new a.default("MOL-FE-WEB-PULL_NOTIFICATION_CLICKS"),t.markAsTracked=function(e,n){var o=t.storage.get()||[];return t.storage.set(r(r([],o,!0),[{campaignId:e,crossOrgUserId:n,epoch:Date.now()}],!1))},t.wasTrackedBefore=function(e,n){return(t.storage.get()||[]).some((function(t){return t.campaignId===e&&t.crossOrgUserId===n}))},t.clear=function(){return t.storage.clear()},t.getAll=function(){return t.storage.get()||[]},t.deleteOldClickRecords=function(){var e=t.storage.get()||[];t.storage.set(e.filter((function(e){var t=e.epoch;return Date.now()-t<(0,i.default)("24h")})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(44);t.default=function(e){var t=(0,r.getISOStringParts)(e).map((function(e){return parseInt(e,10)})),n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=t[6];return new Date(Date.UTC(n,o-1,i,a,s,c,l||0))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Register=void 0;var l=c(n(0)),u=c(n(25)),d=c(n(26)),p=c(n(28)),f=c(n(31)),m=c(n(17)),_=n(6),h=c(n(32)),E=n(33),g=n(55),v=function(e){function t(t){var n=e.call(this)||this;n.appServerKey=null,n.registration=null;var r=t.environment?(0,m.default)(t.environment):t.baseEndpoint||"";return n.options=(0,h.default)(i({},t)),n.baseEndpoint=(0,l.default)(r,"/v1/organisation",n.options.metadata.organisation),n.subscriptionEndpoint=(0,l.default)(n.baseEndpoint,"subscription"),n}return o(t,e),t.isWebPushSupported=function(){return(0,_.isWebPushSupported)()},t.prototype.getAppServerKey=function(e){return void 0===e&&(e=!1),a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return null===this.appServerKey||e?(t=this,[4,(0,d.default)((0,l.default)(this.subscriptionEndpoint,"publicKey"),this.options.apiKey)]):[3,2];case 1:t.appServerKey=n.sent(),n.label=2;case 2:return[2,this.appServerKey]}}))}))},t.prototype.getCrossOrgUserId=function(){return a(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:return this.crossOrguserId?[3,2]:(e=this,[4,(0,g.getCrossOrgUserId)(this.options.metadata,(function(e,n){return t.emit(e,n)}))]);case 1:e.crossOrguserId=n.sent(),n.label=2;case 2:return[2,this.crossOrguserId]}}))}))},t.prototype.init=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,o,a,c,l=this;return s(this,(function(s){switch(s.label){case 0:return[4,this.getAppServerKey()];case 1:return e=s.sent()||{},t=e.parsed,n=e.raw,r=this,o=p.default,a=[i({},this.options)],c={appServerKey:t,baseEndpoint:this.baseEndpoint},[4,this.getCrossOrgUserId()];case 2:return[4,o.apply(void 0,[i.apply(void 0,a.concat([(c.crossOrgUserId=s.sent(),c.emit=function(e,t){return l.emit(e,t)},c.rawAppServerKey=n,c.subscriptionEndpoint=this.subscriptionEndpoint,c)]))])];case 3:return r.registration=s.sent(),[2,this.registration]}}))}))},t.prototype.initPullNotifications=function(e){var t=e.renderPullNotification,n=e.canRender;return a(this,void 0,void 0,(function(){var e,r,o=this;return s(this,(function(a){switch(a.label){case 0:if("function"!=typeof t)throw new TypeError("Missing required option `renderPullNotification` function");if(n&&"function"!=typeof n)throw new TypeError("Optional `canRender` option must be a function");return e=E.init,r={apiKey:this.options.apiKey,baseEndpoint:this.baseEndpoint,canRender:n},[4,this.getCrossOrgUserId()];case 1:return[4,e.apply(void 0,[(r.crossOrgUserId=a.sent(),r.emit=function(e,t){return o.emit(e,t)},r.metadata=i({geo:"ALL"},this.options.metadata),r.renderPullNotification=t,r)])];case 2:return a.sent(),[2,this]}}))}))},t.prototype.showPrompt=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o=this;return s(this,(function(a){switch(a.label){case 0:return[4,this.getAppServerKey()];case 1:if(t=a.sent()||{},n=t.parsed,r=t.raw,null===this.registration)throw new Error("Init must be called before attempting to call showPrompt");return[2,(0,f.default)(this.registration,i(i({},this.options),{appServerKey:n,baseEndpoint:this.baseEndpoint,emit:function(e,t){return o.emit(e,t)},rawAppServerKey:r,renderPrePrompt:e,subscriptionEndpoint:this.subscriptionEndpoint}))]}}))}))},t}(u.default);t.Register=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.events={},this.logger=e||console}return e.prototype.on=function(e,t){var n=this.events;return(n[e]||(n[e]=[])).push(t),this},e.prototype.removeListener=function(e,t){var n=this.events,r=n[e]||(n[e]=[]);return n[e]=r.filter((function(e){return e!==t})),this},e.prototype.removeAllListeners=function(e){return e?this.events[e]=null:this.events={},this},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.events,i=o[e]||(o[e]=[]),a=i.length>0,s=n;try{s=JSON.parse(JSON.stringify(n))}catch(e){}return i.forEach((function(e){try{e.apply(void 0,s)}catch(e){t.logger.error(e,e.stack)}})),a},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(27)),s=i(n(1));t.default=function(e,t){return r(void 0,void 0,void 0,(function(){var n,i;return o(this,(function(c){switch(c.label){case 0:return n={mode:"cors"},t&&(n.headers={Authorization:"ApiKey ".concat(t)}),[4,(0,s.default)(e,n,!0,(function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,e.clone().text()];case 1:return[2,""!==t.sent().trim()]}}))}))}))];case 1:return[4,c.sent().text()];case 2:return i=c.sent(),[2,{parsed:(0,a.default)(i),raw:i}]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=function(){try{return window.atob(),!0}catch(e){return!1}}()?function(e){var t,n,r,o={},i=0,a=0,s="",c=e.length;for(t=0;t<64;t++)o["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)]=t;for(n=0;n<c;n++)for(i=(i<<6)+(t=o[e.charAt(n)]),a+=6;a>=8;)((r=255&i>>>(a-=8))||c-2>n)&&(s+=String.fromCharCode(r));return s}(t):window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(19)),l=n(6),u=n(3),d=s(n(20)),p=n(5),f=s(n(9)),m=n(30),_=function(e){var t;if(e&&"object"==typeof e&&0!==Object.keys(e).length)return{impression:null===(t=e.impression)||void 0===t?void 0:t.filter((function(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}))}};t.default=function(e){return o(void 0,void 0,void 0,(function(){var t,n,o,s,h,E,g,v,y,w,b,I,O,S,T,A,C,L,P,R,N,M,D,k,x,U,B,W,V,G,F,K;return i(this,(function(i){switch(i.label){case 0:t=e.apiKey,n=e.appServerKey,o=e.notificationMacros,s=e.emit,h=e.metadata,E=e.baseEndpoint,g=e.swUrl,v=e.subscriptionEndpoint,y=e.rawAppServerKey,w=e.crossOrgUserId,b=Array.isArray(h.visitorIds)?h.visitorIds[0]:void 0,I=h.userAgent,i.label=1;case 1:return i.trys.push([1,20,,21]),[4,c.default];case 2:return i.sent(),(0,m.deleteOldClickRecords)(),O=new URLSearchParams(window.location.search),S=O.get("ito"),(0,p.setBaseEndpoint)(E),T=(0,u.getStatus)(),A=w?[w]:void 0,h.crossOrgUserIds=A,"push-notification"!==S?[3,4]:(C=O.get("ci"),L=O.get("cri")||"",P=O.get("si"),R=O.get("ai"),N=O.get("xi"),C&&P?(M=function(e){var t=e.sharedCrossOrgUserId,n=e.crossOrgUserId,r=e.campaignId,o=e.subscriptionId;return t?n!==t?"click_page_share":(0,m.wasTrackedBefore)(r,o)?"click_page_refresh":"click":"click"}({campaignId:C,crossOrgUserId:w,sharedCrossOrgUserId:N,subscriptionId:P}),D={action:M,campaignId:C,campaignRunId:L,crossOrgUserId:w,organisation:h.organisation,platform:h.platform,subscriptionId:P,type:"notification",userAgent:I,visitorId:b},R&&(D.assetId=R),s("notification_click",D),[4,(0,f.default)(E,r(r({},D),{action:"click"===M?"click_page_load":M}),t)]):[3,4]);case 3:i.sent(),(0,m.markAsTracked)(C,P),i.label=4;case 4:if(!g)return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,navigator.serviceWorker.register(g,{scope:"/"})];case 6:return i.sent(),[3,8];case 7:return k=i.sent(),console.error("ServiceWorker registration failed: ",k),[3,8];case 8:return[4,navigator.serviceWorker.ready];case 9:return[4,(x=i.sent()).pushManager.getSubscription()];case 10:return U=i.sent(),B=!!U&&(0,l.needsMigration)(U,n),T=(0,u.getStatus)(),W={apiKey:t,baseEndpoint:E,crossOrgUserId:w,navigatorPlatform:window.navigator.platform,notificationMacros:_(o),organisation:h.organisation,permission:Notification.permission,subscription:B?null:U,type:"web-push-sw-init-data",userAgent:h.userAgent,visitorId:b},x.active.postMessage(JSON.stringify(W)),T&&"undecided"===T.state&&"granted"===Notification.permission&&((0,u.setStatus)("register_pending",T.metadata),T=(0,u.getStatus)()),T&&"undecided"!==T.state&&T.metadata&&(T.metadata.userAgent!==h.userAgent||T.metadata.profilingAllowed!==h.profilingAllowed||(T.metadata.visitorIds||[]).join(",")!==(h.visitorIds||[]).join(",")||(T.metadata.crossOrgUserIds||[]).join(",")!==(A||[]).join(",")||"push-notification"===S)&&(G=r(r({},T.metadata),{crossOrgUserIds:Array.from(new Set(a(a([],T.metadata.crossOrgUserIds||[],!0),A||[],!0))),keywords:Array.from(new Set(a(a([],T.metadata.keywords||[],!0),h.keywords||[],!0))),profilingAllowed:h.profilingAllowed,userAgent:h.userAgent,visitorIds:Array.from(new Set(a(a([],T.metadata.visitorIds||[],!0),h.visitorIds||[],!0)))}),V="ready"===T.state?"update_pending":T.state,(0,u.setStatus)(V,G),T=(0,u.getStatus)()),U?(G=T?T.metadata:h,B||(0,l.willExpireSoon)(U)?[4,(0,l.replaceSubscription)({apiKey:t,appServerKey:n,metadata:r(r({},h),{migrated:B,migratedSubscriptionEndpoint:B?U.endpoint:void 0}),registration:x,subscription:U,subscriptionEndpoint:v})]:[3,12]):[3,17];case 11:return i.sent(),[3,16];case 12:return T&&"register_pending"===T.state?[4,(0,l.registerPushSubscription)(v,{metadata:G,subscription:U},t)]:[3,14];case 13:return i.sent(),[3,16];case 14:return T&&"update_pending"===T.state||!T?[4,(0,l.updatePushSubscription)(v,{metadata:G,subscription:U},t)]:[3,16];case 15:i.sent(),i.label=16;case 16:return(0,u.setStatus)("ready",h),[3,19];case 17:return"granted"!==Notification.permission?[3,19]:(F=T?T.metadata:h,[4,(0,l.subscribePushNotifications)({apiKey:t,appServerKey:n,metadata:F,registration:x,subscriptionEndpoint:v})]);case 18:i.sent(),(0,u.setStatus)("ready",F),i.label=19;case 19:return[2,x];case 20:return K=i.sent(),(0,d.default)(K,{emit:s,metadata:h,rawAppServerKey:y}),[3,21];case 21:return[2,null]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(0)),c=a(n(1));t.default=function(e,t,n){return o(void 0,void 0,void 0,(function(){var o,a,l,u;return i(this,(function(i){return o=t.type,a=t.action,l=(0,s.default)(e,"analytics/track",o,a),u={body:JSON.stringify(t),headers:{"Content-type":"application/json"},method:"post",mode:"cors"},n&&(u.headers=r(r({},u.headers),{Authorization:"ApiKey ".concat(n)})),[2,(0,c.default)(l,u)]}))}))}},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteOldClickRecords=t.getAll=t.clear=t.wasTrackedBefore=t.markAsTracked=t.storage=void 0;var i=o(n(4)),a=o(n(2));t.storage=new a.default("MOL-FE-WEB-PUSH_NOTIFICATION_CLICKS"),t.markAsTracked=function(e,n){var o=t.storage.get()||[];return t.storage.set(r(r([],o,!0),[{campaignId:e,epoch:Date.now(),subscriptionId:n}],!1))},t.wasTrackedBefore=function(e,n){return(t.storage.get()||[]).some((function(t){return t.campaignId===e&&t.subscriptionId===n}))},t.clear=function(){return t.storage.clear()},t.getAll=function(){return t.storage.get()||[]},t.deleteOldClickRecords=function(){var e=t.storage.get()||[];t.storage.set(e.filter((function(e){var t=e.epoch;return Date.now()-t<(0,i.default)("24h")})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_PROMPT_EPOCH=void 0;var s=a(n(4)),c=n(6),l=n(3),u=a(n(9)),d=a(n(20));t.LAST_PROMPT_EPOCH="mol-fe-browser-notifications-last-prompt-epoch",t.default=function(e,n){return o(void 0,void 0,void 0,(function(){var a,p,f,m,_,h,E,g,v,y,w,b,I,O,S,T,A,C,L,P,R,N,M,D,k;return i(this,(function(x){switch(x.label){case 0:a=n.apiKey,p=n.appServerKey,f=n.emit,m=n.metadata,_=n.baseEndpoint,h=n.subscriptionEndpoint,E=n.promptFrequency,g=n.rawAppServerKey,v=n.renderPrePrompt,x.label=1;case 1:return x.trys.push([1,12,,13]),y=m.channels,w=m.crossOrgUserIds,b=m.platform,I=m.subChannels,O=m.userAgent,S=m.visitorIds,T=Array.isArray(S)?S[0]:void 0,A=Array.isArray(w)?w[0]:void 0,C=Array.isArray(y)?y[0]:void 0,L=Array.isArray(I)?I[0]:void 0,P=function(e){return r({channel:C,crossOrgUserId:A,organisation:m.organisation,platform:b,subChannel:L,type:"prompt",userAgent:O,visitorId:T},e)},R=function(e){return o(void 0,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=e.action,n=P(e),f("".concat("prompt","_").concat(t),n),[4,(0,u.default)(_,n,a)];case 1:return r.sent(),[2]}}))}))},function(e){if(!e)return!0;var n=(0,s.default)(e);if("number"!=typeof n)throw new TypeError("Prompt frequency must be a valid string like `1d` or `1h`");if(!("localStorage"in window))return!0;var r=JSON.parse(window.localStorage.getItem(t.LAST_PROMPT_EPOCH)||"0");return Date.now()-r>=n}(E)?[3,2]:(f("prompt_discarded",P({action:"discarded",permission:Notification.permission,type:"prompt"})),[3,11]);case 2:return"default"!==Notification.permission?[3,8]:(N=function(){return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,R({action:"impression",permission:Notification.permission})];case 1:return n.sent(),[4,(0,c.requestPushPermissionAndSubscribe)({apiKey:a,appServerKey:p,metadata:m,registration:e,subscriptionEndpoint:h})];case 2:return t=n.sent(),[4,R({action:"click",permission:t})];case 3:return n.sent(),[2]}}))}))},"function"!=typeof v?[3,5]:[4,R({action:"pre_prompt_impression",permission:Notification.permission})]);case 3:return x.sent(),[4,new Promise((function(e){v((function(t){return o(void 0,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,R({action:"pre_prompt_click",permission:t?"granted":"denied"})];case 1:return n.sent(),t?[4,N()]:[3,3];case 2:n.sent(),n.label=3;case 3:return e(t),[2]}}))}))}))}))];case 4:return x.sent(),[3,7];case 5:return[4,N()];case 6:x.sent(),x.label=7;case 7:"localStorage"in window&&window.localStorage.setItem(t.LAST_PROMPT_EPOCH,JSON.stringify(Date.now())),x.label=8;case 8:return"granted"!==Notification.permission?[3,10]:[4,e.pushManager.getSubscription()];case 9:return M=x.sent(),D={subscription:M,type:"web-push-sw-subscription-ready"},e.active.postMessage(JSON.stringify(D)),(0,l.setStatus)("ready",m),[3,11];case 10:"default"===Notification.permission?(0,l.setStatus)("undecided",m):(0,l.clearStatus)(),x.label=11;case 11:return[3,13];case 12:return k=x.sent(),(0,d.default)(k,{emit:f,metadata:m,rawAppServerKey:g}),[3,13];case 13:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===e.length||t&&t<e.length},o=function(e){return!Array.isArray(e)||e.length&&e.map(r).every(Boolean)},i=["organisation","platform","profilingAllowed","userAgent"];t.default=function(e){var t,n,a,s,c,l,u,d,p,f,m,_,h,E;if(function(e,t){if(null!==e&&"object"==typeof e){var n=Object.keys(e),r=t&&t.map((function(e){return n.includes(e)})).filter(Boolean).length===t.length;return!n.length||!r}return!0}(e.metadata,i))throw new Error("metadata is required and must be object containing the following required fields ".concat(i.join(", "),"."));if(r(null===(t=e.metadata)||void 0===t?void 0:t.organisation))throw new Error("metadata.organisation is required and must be a non empty string.");if(r(null===(n=e.metadata)||void 0===n?void 0:n.platform))throw new Error("metadata.platform is required and must be a non empty string.");if("boolean"!=typeof(null===(a=e.metadata)||void 0===a?void 0:a.profilingAllowed))throw new Error("metadata.profilingAllowed is required and must be a boolean.");if(r(null===(s=e.metadata)||void 0===s?void 0:s.userAgent))throw new Error("metadata.userAgent is required and must be a non empty string.");if(void 0!==e.swUrl&&r(e.swUrl))throw new Error("swUrl is optional but must be non empty string when provided.");if(void 0!==(null===(c=e.metadata)||void 0===c?void 0:c.visitorIds)&&o(null===(l=e.metadata)||void 0===l?void 0:l.visitorIds))throw new Error("metadata.visitorIds is optional but must be a non empty string array.");if(void 0!==(null===(u=e.metadata)||void 0===u?void 0:u.crossOrgUserIds)&&o(null===(d=e.metadata)||void 0===d?void 0:d.crossOrgUserIds))throw new Error("metadata.crossOrgUserIds is optional but must be a non empty string array.");if(void 0!==(null===(p=e.metadata)||void 0===p?void 0:p.keywords)&&o(null===(f=e.metadata)||void 0===f?void 0:f.keywords))throw new Error("metadata.keywords is optional but must be a non empty string array when provided.");if(void 0!==(null===(m=e.metadata)||void 0===m?void 0:m.channels)&&o(null===(_=e.metadata)||void 0===_?void 0:_.channels))throw new Error("metadata.channels is optional but must be a non empty string array when provided.");if(void 0!==(null===(h=e.metadata)||void 0===h?void 0:h.subChannels)&&o(null===(E=e.metadata)||void 0===E?void 0:E.subChannels))throw new Error("metadata.subChannels is optional but must be a non empty string array when provided.");return e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var a=i(n(4)),s=i(n(19)),c=n(34),l=n(16),u=n(22),d=n(36),p=n(54);t.init=function(e){return r(void 0,void 0,void 0,(function(){var t,n,i,f,m,_,h,E;return o(this,(function(g){switch(g.label){case 0:t=(0,d.pullNotifierFactory)(e).showPullNotification,n=null,i=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),n=(0,c.setIntervalAsync)(t,(0,a.default)("30s")),[2]}}))}))},f=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n?[4,(0,c.clearIntervalAsync)(n)]:[3,2];case 1:e.sent(),n=null,e.label=2;case 2:return[2]}}))}))},m=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return"hidden"!==document.visibilityState?[3,2]:[4,f()];case 1:e.sent(),e.label=2;case 2:return"visible"!==document.visibilityState||n?[3,4]:[4,i()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},_=function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return document.removeEventListener("visibilitychange",m),[4,f()];case 1:return e.sent(),[2]}}))}))},g.label=1;case 1:return g.trys.push([1,7,,8]),[4,s.default];case 2:return g.sent(),(0,u.deleteOldClickRecords)(),"pull-notification"!==(h=new URLSearchParams(window.location.search)).get("ito")?[3,4]:[4,(0,p.trackPullNotificationClickLoad)(h,e)];case 3:g.sent(),g.label=4;case 4:return"visible"!==document.visibilityState?[3,6]:[4,i()];case 5:g.sent(),g.label=6;case 6:return document.addEventListener("visibilitychange",m),[3,8];case 7:return E=g.sent(),(0,l.handleRegisterError)(E,{emit:e.emit,metadata:e.metadata}),[3,8];case 8:return[2,{cleanup:_}]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.setIntervalAsync=t.clearIntervalAsync=void 0;var o=n(35);Object.defineProperty(t,"clearIntervalAsync",{enumerable:!0,get:function(){return o.clearIntervalAsync}});var i=n(21);t.setIntervalAsync=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if("function"!=typeof e)throw new TypeError("First argument is not a function");if("number"!=typeof t)throw new TypeError("Second argument is not a number");return i.SetIntervalAsyncTimer.startTimer.apply(i.SetIntervalAsyncTimer,r([e,t],n,!1))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearIntervalAsync=void 0;var i=n(21);t.clearIntervalAsync=function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:if(!(e instanceof i.SetIntervalAsyncTimer))throw new TypeError("First argument is not an instance of SetIntervalAsyncTimer");return[4,i.SetIntervalAsyncTimer.stopTimer(e)];case 1:return t.sent(),[2]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pullNotifierFactory=void 0;var a=n(18),s=i(n(4)),c=n(42),l=i(n(9)),u=n(43),d=n(53),p=function(e,t,n,i,s){return function(){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return r={action:e,campaignId:s.campaignId,crossOrgUserId:s.crossOrgUserId,organisation:s.organisation,platform:s.platform,type:"pull-notification",userAgent:navigator.userAgent},e!==a.PullNotificationEventAction.CLICK?[3,2]:[4,(0,l.default)(n,r,i)];case 1:o.sent(),o.label=2;case 2:return t("pull_notification_".concat(e),r),[2]}}))}))}};t.pullNotifierFactory=function(e){var t=e.apiKey,n=e.baseEndpoint,i=e.metadata,l=e.crossOrgUserId,f=e.renderPullNotification,m=e.emit,_=e.canRender,h=void 0===_?function(){return!0}:_,E=new c.HashStorage("hulk_pull-notification_shown_campaigns",(0,s.default)("24h"),1e3);return{showPullNotification:function(){return r(void 0,void 0,void 0,(function(){var e,r,c,_;return o(this,(function(o){switch(o.label){case 0:return[4,(0,u.getLatestPullCampaign)(n,i,t)];case 1:return(e=o.sent())&&!E.get(e.id)&&"visible"===document.visibilityState&&h(e)?(r=(0,d.getPullNotificationData)(i,e,l),c=p(a.PullNotificationEventAction.IMPRESSION,m,n,t,r),_=p(a.PullNotificationEventAction.CLICK,m,n,t,r),[4,f(r,{onClick:_})]):[3,4];case 2:return o.sent(),[4,c()];case 3:o.sent(),E.set(e.id,!0,(0,s.default)("24h")),o.label=4;case 4:return[2]}}))}))},storage:E}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisDB=void 0,function(e){e[e.MAIN=0]="MAIN",e[e.REDLOCK=1]="REDLOCK",e[e.SESSION=2]="SESSION"}(t.RedisDB||(t.RedisDB={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsLogLevel=void 0,function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(t.MetricsLogLevel||(t.MetricsLogLevel={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullNotificationEventAction=t.PullCampaignStatus=t.PullCampaignType=void 0,function(e){e.DEFAULT="DEFAULT",e.SCHEDULED="SCHEDULED"}(t.PullCampaignType||(t.PullCampaignType={})),function(e){e.SCHEDULED="SCHEDULED",e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.FINISHED="FINISHED"}(t.PullCampaignStatus||(t.PullCampaignStatus={})),function(e){e.IMPRESSION="impression",e.CLICK="click",e.CLICK_PAGE_LOAD="click_page_load",e.CLICK_PAGE_SHARE="click_page_share",e.CLICK_PAGE_REFRESH="click_page_refresh"}(t.PullNotificationEventAction||(t.PullNotificationEventAction={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pipeline=t.CampaignRunType=t.CampaignType=t.CampaignStatus=t.SubscriptionStatus=t.SubscriptionMigrationStatus=void 0,function(e){e[e.PENDING=1]="PENDING",e[e.PARTIAL=2]="PARTIAL",e[e.DONE=3]="DONE"}(t.SubscriptionMigrationStatus||(t.SubscriptionMigrationStatus={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.ZOMBIE="ZOMBIE"}(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.READY="READY",e.STARTED="STARTED",e.CANCELED="CANCELED",e.SEARCHING="SEARCHING",e.DELIVERING="DELIVERING",e.FINISHED="FINISHED",e.SCHEDULED="SCHEDULED",e.SAMPLE_PROBING="SAMPLE_PROBING",e.AB_TESTING="AB_TESTING",e.WAITING="WAITING",e.CANCELED_BY_PROBE="CANCELED_BY_PROBE"}(t.CampaignStatus||(t.CampaignStatus={})),function(e){e.DEFAULT="DEFAULT",e.SCHEDULED_SAMPLE_PROBING="SCHEDULED_SAMPLE_PROBING",e.SAMPLE_PROBING="SAMPLE_PROBING",e.SCHEDULED_AB_TESTING="SCHEDULED_AB_TESTING",e.SCHEDULED_AB_TESTING_SAMPLE_PROBING="SCHEDULED_AB_TESTING_SAMPLE_PROBING",e.AB_TESTING_SAMPLE_PROBING="AB_TESTING_SAMPLE_PROBING",e.AB_TESTING="AB_TESTING",e.SCHEDULED="SCHEDULED",e.PING="PING"}(t.CampaignType||(t.CampaignType={})),function(e){e.DEFAULT="DEFAULT",e.SAMPLE_PROBE="SAMPLE_PROBE",e.AB_PROBE="AB_PROBE",e.PING="PING"}(t.CampaignRunType||(t.CampaignRunType={})),function(e){e.USER_AGENT="USER_AGENT"}(t.Pipeline||(t.Pipeline={}))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HashStorage=void 0;var o=r(n(4)),i=r(n(2)),a=function(){function e(e,t,n){void 0===t&&(t=(0,o.default)("24h")),void 0===n&&(n=1e3),this.name=e,this.storage=new i.default(e),this.defaultTTL=t,this.entriesLimit=n,this.syncHash()}return e.prototype.getHash=function(){return this.storage.get()||{}},e.prototype.syncHash=function(){for(var e=this.getHash(),t={},n=0,r=0,o=Object.entries(e).sort((function(e,t){return t[1].epoch-e[1].epoch}));r<o.length;r++){var i=o[r],a=i[0],s=i[1];Date.now()-s.epoch<s.ttl&&n<this.entriesLimit&&(t[a]=s,n+=1)}this.storage.set(t)},e.prototype.get=function(e){var t=this.getHash()[e];return t?t.data:null},e.prototype.set=function(e,t,n){var r=this.getHash(),o={data:t,epoch:Date.now(),ttl:n};r[e]=o,this.storage.set(r),this.syncHash()},e.prototype.clear=function(){this.storage.clear()},e}();t.HashStorage=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLatestPullCampaign=void 0;var a=i(n(23)),s=n(45);t.getLatestPullCampaign=function(e,t,n){return r(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,(0,s.fetchSegmentedPullCampaigns)(e,t,n)];case 1:return[2,r.sent().sort((function(e,t){var n=(0,a.default)(e.triggerTime||e.creationTimestamp).getTime();return(0,a.default)(t.triggerTime||t.creationTimestamp).getTime()-n}))[0]]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getISOStringParts=void 0,t.getISOStringParts=function(e){return e.split(/\D+/)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchSegmentedPullCampaigns=void 0;var i=n(46),a=n(48),s=n(49);t.fetchSegmentedPullCampaigns=function(e,t,n){return r(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,(0,i.fetchPullCampaigns)(e,t,n)];case 1:return[2,r.sent().filter((function(e){return(0,a.isActive)(t.platform,e)&&(0,s.matchesSegments)(t,e.segments)}))]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPullCampaigns=void 0;var a=i(n(1)),s=n(47);t.fetchPullCampaigns=function(e,t,n){return r(void 0,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return r={mode:"cors"},n&&(r.headers={Authorization:"ApiKey ".concat(n)}),[4,(0,a.default)((0,s.buildPullCampaignsEndpoint)(e,t),r,!0)];case 1:return[2,o.sent().json()||[]]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildPullCampaignsEndpoint=void 0;var o=r(n(0));t.buildPullCampaignsEndpoint=function(e,t){var n=t.geo,r=t.channels,i=t.subChannels;if(!n)throw new TypeError("Missing required `geo` to generate PullCampaigns request endpoint");var a=(0,o.default)(e,"pull-campaign");return a=(0,o.default)(a,n),r&&1===r.length&&(a=(0,o.default)(a,r[0]),i&&1===i.length&&(a=(0,o.default)(a,i[0]))),a}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isActive=void 0;var o=n(18),i=r(n(23));t.isActive=function(e,t){if(!t.ttl)return!1;var n=1e3*("desktop"===e?t.ttl.desktop:t.ttl.mobile),r=t.type===o.PullCampaignType.SCHEDULED?t.triggerTime:t.creationTimestamp,a=(0,i.default)(r).getTime(),s=new Date(a+n).getTime();return Date.now()<=s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesSegments=void 0;var r=n(50);t.matchesSegments=function(e,t){var n=t.exclude,o=t.include;if(n)for(var i=0,a=n;i<a.length;i++){var s=a[i];if((0,r.matchesSegment)(e,s))return!1}for(var c=0,l=o;c<l.length;c++)if(s=l[c],(0,r.matchesSegment)(e,s))return!0;return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesSegment=void 0;var r=n(51);t.matchesSegment=function(e,t){for(var n=0,o=t.criteria.and;n<o.length;n++){var i=o[n];if(!(0,r.matchesAndCriteria)(e,i))return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesAndCriteria=void 0;var r=n(52);t.matchesAndCriteria=function(e,t){return t.or.some((function(t){return(0,r.matchesCriterion)(e,t)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesCriterion=void 0;var r=function(e){switch(e){case"channel":return"channels";case"subchannel":return"subChannels";case"geo":return"geo";case"keyword":return"keywords";case"platform":return"platform"}},o=function(e,t){var n=e[r(t.property)];return n?(Array.isArray(n)?n:[n]).some((function(e){return e===t.value})):"ALL"===t.value},i=function(e,t){var n=e[r(t.property)];if(!n)return!1;var o=Array.isArray(n)?n:[n],i=Array.isArray(t.value)?t.value:[t.value];return o.some((function(e){return i.includes(e)}))},a={eq:o,neq:function(e,t){return!o(e,t)},not_one_of:function(e,t){return!i(e,t)},one_of:i};t.matchesCriterion=function(e,t){return(0,a[t.operator])(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPullNotificationData=void 0,t.getPullNotificationData=function(e,t,n){var r=t.assetId,o=t.body,i=t.clickThroughUrl,a=t.id,s=t.organisation,c=t.title,l=t.image,u=e.geo,d=e.platform,p=new URL(i);return p.searchParams.has("ito")||p.searchParams.append("ito","pull-notification"),p.searchParams.append("ci","".concat(t.id)),n&&p.searchParams.append("xi","".concat(n)),r&&p.searchParams.append("ai","".concat(r)),{assetId:r,body:o,campaignId:a,clickThroughUrl:p.href,geo:u,image:l,organisation:s,platform:d,title:c,type:"pull-notification",userAgent:navigator.userAgent}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.trackPullNotificationClickLoad=void 0;var a=n(18),s=n(22),c=i(n(9));t.trackPullNotificationClickLoad=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,i,l,u,d,p,f,m,_;return o(this,(function(o){switch(o.label){case 0:return n=t.crossOrgUserId,r=t.metadata,i=t.emit,l=t.baseEndpoint,u=t.apiKey,d=e.get("ci"),p=e.get("ai"),f=e.get("xi"),d?(m=function(e){var t=e.sharedCrossOrgUserId,n=e.crossOrgUserId,r=e.campaignId;return t?n!==t?a.PullNotificationEventAction.CLICK_PAGE_SHARE:(0,s.wasTrackedBefore)(r,t)?a.PullNotificationEventAction.CLICK_PAGE_REFRESH:a.PullNotificationEventAction.CLICK_PAGE_LOAD:a.PullNotificationEventAction.CLICK_PAGE_LOAD}({campaignId:d,crossOrgUserId:n,sharedCrossOrgUserId:f}),_={action:m,campaignId:d,crossOrgUserId:n,organisation:r.organisation,platform:r.platform,type:"pull-notification",userAgent:navigator.userAgent},p&&(_.assetId=p),[4,(0,c.default)(l,_,u)]):[3,2];case 1:o.sent(),i("pull_notification_click",_),(0,s.markAsTracked)(d,n||"unknown"),o.label=2;case 2:return[2]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCrossOrgUserId=void 0;var i=n(56),a=n(16),s=n(3);t.getCrossOrgUserId=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,c,l;return o(this,(function(o){switch(o.label){case 0:n=(0,s.getStatus)(),r=e.organisation,c=n&&Array.isArray(n.metadata.crossOrgUserIds)?n.metadata.crossOrgUserIds:[],o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,i.getCrossOrgUserIdFromCentral)(r)];case 2:return[2,o.sent()||void 0];case 3:return l=o.sent(),(0,a.handleRegisterError)(l,{emit:t,metadata:e}),[3,4];case 4:return[2,c[c.length-1]]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCrossOrgUserIdFromCentral=t.API_ROOT_BY_ENV=void 0;var i=n(57);t.API_ROOT_BY_ENV={development:{central:"".concat(location.protocol,"//").concat(location.host,"/public/v1/static/latest/mol-fe-web-push-browser-register")},integration:{central:"https://hulkint.anm.co.uk/api/web-push-notification/v1/static/latest/mol-fe-web-push-browser-register"},production:{central:"https://hulkprod.anm.co.uk/api/web-push-notification/v1/static/latest/mol-fe-web-push-browser-register"}};var a={inews:["inews.co.uk"],metro:["metro.co.uk"],mol:["www.dailymail.co.uk","a.dailymail.co.uk","b.dailymail.co.uk","c.dailymail.co.uk"],newzit:["www.newzit.com"]};t.getCrossOrgUserIdFromCentral=function(e){return r(void 0,void 0,void 0,(function(){var n,r,s;return o(this,(function(o){switch(o.label){case 0:return n=function(e,t){var n=new URL(t).hostname;if("localhost"===n||n.endsWith("ngrok.io"))return"development";if(!a[e])throw new Error("No hostnames for organisation: ".concat(e));return a[e].includes(n)?"production":"integration"}(e,location.href),r="".concat(t.API_ROOT_BY_ENV[n].central,"/crossOrgInlinedMin.html?command=getCrossOrgUserId"),[4,(0,i.loadIframeAndWaitForMessage)(r,"mol-fe-web-push-cross-org-user-id")];case 1:return[2,(s=o.sent())&&s.crossOrgUserId]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadIframeAndWaitForMessage=void 0,t.loadIframeAndWaitForMessage=function(e,t){return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){return n=new URL(e).origin,[2,new Promise((function(r,o){var i,a=null,s=function(e){e.data.scope===t&&e.origin===n&&(window.removeEventListener("message",s),i&&clearTimeout(i),void 0!==e.data.data?r(e.data.data):o(new Error("Invalid data posted back from crossOrg iframe")),a&&a.remove())};window.addEventListener("message",s),(a=document.createElement("iframe")).style.width="0px",a.style.height="0px",a.style.border="none",a.src=e,document.body.appendChild(a),i=window.setTimeout((function(){window.removeEventListener("message",s),o(new Error("crossOrg iframe timed out")),a&&a.remove()}),1e4)}))]}))}))}}])},e.exports=t()},6660:(e,t,n)=>{e.exports=n(8226)},8427:(e,t,n)=>{"use strict";var r=n(4345),o=n(6435),i=n(5905),a=n(3025),s=n(3916),c=n(6135),l=n(6923),u=n(3201),d=n(5400),p=n(5220),f=n(733);e.exports=function(e){return new Promise((function(t,n){var m,_=e.data,h=e.headers,E=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m)}r.isFormData(_)&&r.isStandardBrowserEnv()&&delete h["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(y+":"+w)}var b=s(e.baseURL,e.url);function I(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,i={data:E&&"text"!==E&&"json"!==E?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};o((function(e){t(e),g()}),(function(e){n(e),g()}),i),v=null}}if(v.open(e.method.toUpperCase(),a(b,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=I:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(I)},v.onabort=function(){v&&(n(new d("Request aborted",d.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,e,v,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new d(t,r.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,v)),v=null},r.isStandardBrowserEnv()){var O=(e.withCredentials||l(b))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;O&&(h[e.xsrfHeaderName]=O)}"setRequestHeader"in v&&r.forEach(h,(function(e,t){void 0===_&&"content-type"===t.toLowerCase()?delete h[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),E&&"json"!==E&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(m=function(e){v&&(n(!e||e&&e.type?new p:e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m))),_||(_=null);var S=f(b);S&&-1===["http","https","file"].indexOf(S)?n(new d("Unsupported protocol "+S+":",d.ERR_BAD_REQUEST,e)):v.send(_)}))}},8226:(e,t,n)=>{"use strict";var r=n(4345),o=n(5063),i=n(9560),a=n(4816);var s=function e(t){var n=new i(t),s=o(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n(6075));s.Axios=i,s.CanceledError=n(5220),s.CancelToken=n(5912),s.isCancel=n(6945),s.VERSION=n(9978).version,s.toFormData=n(4195),s.AxiosError=n(5400),s.Cancel=s.CanceledError,s.all=function(e){return Promise.all(e)},s.spread=n(8127),s.isAxiosError=n(8568),e.exports=s,e.exports.default=s},5912:(e,t,n)=>{"use strict";var r=n(5220);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},5220:(e,t,n)=>{"use strict";var r=n(5400);function o(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(4345).inherits(o,r,{__CANCEL__:!0}),e.exports=o},6945:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},9560:(e,t,n)=>{"use strict";var r=n(4345),o=n(3025),i=n(546),a=n(1617),s=n(4816),c=n(3916),l=n(6552),u=l.validators;function d(e){this.defaults=e,this.interceptors={request:new i,response:new i}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!o){var d=[a,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(c),i=Promise.resolve(t);d.length;)i=i.then(d.shift(),d.shift());return i}for(var p=t;r.length;){var f=r.shift(),m=r.shift();try{p=f(p)}catch(e){m(e);break}}try{i=a(p)}catch(e){return Promise.reject(e)}for(;c.length;)i=i.then(c.shift(),c.shift());return i},d.prototype.getUri=function(e){e=s(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(s(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},5400:(e,t,n)=>{"use strict";var r=n(4345);function o(e,t,n,r,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}r.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=o.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){a[e]={value:e}})),Object.defineProperties(o,a),Object.defineProperty(i,"isAxiosError",{value:!0}),o.from=function(e,t,n,a,s,c){var l=Object.create(i);return r.toFlatObject(e,l,(function(e){return e!==Error.prototype})),o.call(l,e.message,t,n,a,s),l.name=e.name,c&&Object.assign(l,c),l},e.exports=o},546:(e,t,n)=>{"use strict";var r=n(4345);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},3916:(e,t,n)=>{"use strict";var r=n(4860),o=n(7825);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},1617:(e,t,n)=>{"use strict";var r=n(4345),o=n(7638),i=n(6945),a=n(6075),s=n(5220);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},4816:(e,t,n)=>{"use strict";var r=n(4345);e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function c(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||i,o=t(e);r.isUndefined(o)&&t!==c||(n[e]=o)})),n}},6435:(e,t,n)=>{"use strict";var r=n(5400);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},7638:(e,t,n)=>{"use strict";var r=n(4345),o=n(6075);e.exports=function(e,t,n){var i=this||o;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},6075:(e,t,n)=>{"use strict";var r=n(4345),o=n(2327),i=n(5400),a=n(3201),s=n(4195),c={"Content-Type":"application/x-www-form-urlencoded"};function l(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,d={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(u=n(8427)),u),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return l(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=r.isObject(e),a=t&&t["Content-Type"];if((n=r.isFileList(e))||i&&"multipart/form-data"===a){var c=this.env&&this.env.FormData;return s(n?{"files[]":e}:e,c&&new c)}return i||"application/json"===a?(l(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||o&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i.from(e,i.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(1685)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){d.headers[e]=r.merge(c)})),e.exports=d},3201:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},9978:e=>{e.exports={version:"0.27.2"}},5063:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},3025:(e,t,n)=>{"use strict";var r=n(4345);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},7825:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},5905:(e,t,n)=>{"use strict";var r=n(4345);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4860:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},8568:(e,t,n)=>{"use strict";var r=n(4345);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},6923:(e,t,n)=>{"use strict";var r=n(4345);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},2327:(e,t,n)=>{"use strict";var r=n(4345);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},1685:e=>{e.exports=null},6135:(e,t,n)=>{"use strict";var r=n(4345),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},733:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8127:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4195:(e,t,n)=>{"use strict";var r=n(4345);e.exports=function(e,t){t=t||new FormData;var n=[];function o(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,a){if(r.isPlainObject(i)||r.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+a);n.push(i),r.forEach(i,(function(n,i){if(!r.isUndefined(n)){var s,c=a?a+"."+i:i;if(n&&!a&&"object"==typeof n)if(r.endsWith(i,"{}"))n=JSON.stringify(n);else if(r.endsWith(i,"[]")&&(s=r.toArray(n)))return void s.forEach((function(e){!r.isUndefined(e)&&t.append(c,o(e))}));e(n,c)}})),n.pop()}else t.append(a,o(i))}(e),t}},6552:(e,t,n)=>{"use strict";var r=n(9978).version,o=n(5400),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new o(i(r," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!a[r]&&(a[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],s=t[a];if(s){var c=e[a],l=void 0===c||s(c,a,e);if(!0!==l)throw new o("option "+a+" must be "+l,o.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new o("Unknown option "+a,o.ERR_BAD_OPTION)}},validators:i}},4345:(e,t,n)=>{"use strict";var r,o=n(5063),i=Object.prototype.toString,a=(r=Object.create(null),function(e){var t=i.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return a(t)===e}}function c(e){return Array.isArray(e)}function l(e){return void 0===e}var u=s("ArrayBuffer");function d(e){return null!==e&&"object"==typeof e}function p(e){if("object"!==a(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var f=s("Date"),m=s("File"),_=s("Blob"),h=s("FileList");function E(e){return"[object Function]"===i.call(e)}var g=s("URLSearchParams");function v(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var y,w=(y="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return y&&e instanceof y});e.exports={isArray:c,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||i.call(e)===t||E(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:d,isPlainObject:p,isUndefined:l,isDate:f,isFile:m,isBlob:_,isFunction:E,isStream:function(e){return d(e)&&E(e.pipe)},isURLSearchParams:g,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:v,merge:function e(){var t={};function n(n,r){p(t[r])&&p(n)?t[r]=e(t[r],n):p(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)v(arguments[r],n);return t},extend:function(e,t,n){return v(t,(function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,o,i,a={};t=t||{};do{for(o=(r=Object.getOwnPropertyNames(e)).length;o-- >0;)a[i=r[o]]||(t[i]=e[i],a[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(l(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:w,isFileList:h}},6654:(e,t,n)=>{var r,o;!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(r.read||r)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[l]=c,e===l)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},1340:(e,t,n)=>{var r=n(2393),o=n(2049),i=n(7144),a=n(7452),s=n(3964);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},1623:(e,t,n)=>{var r=n(8942).Uint8Array;e.exports=r},6912:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},9968:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},9847:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},5111:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},4810:(e,t,n)=>{var r=n(7073),o=n(6285);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},3422:(e,t,n)=>{var r=n(7073),o=n(6285),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},7034:(e,t,n)=>{var r=n(6285);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},7930:(e,t,n)=>{var r=n(9032),o=n(1211);e.exports=function(e,t){return e&&r(t,o(t),e)}},125:(e,t,n)=>{var r=n(9032),o=n(5288);e.exports=function(e,t){return e&&r(t,o(t),e)}},7073:(e,t,n)=>{var r=n(2532);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9334:(e,t,n)=>{var r=n(1340),o=n(9968),i=n(3422),a=n(7930),s=n(125),c=n(7099),l=n(4354),u=n(3546),d=n(4733),p=n(393),f=n(3650),m=n(8486),_=n(7350),h=n(424),E=n(5964),g=n(3142),v=n(5853),y=n(7681),w=n(1580),b=n(3943),I=n(1211),O=n(5288),S="[object Arguments]",T="[object Function]",A="[object Object]",C={};C[S]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[A]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[T]=C["[object WeakMap]"]=!1,e.exports=function e(t,n,L,P,R,N){var M,D=1&n,k=2&n,x=4&n;if(L&&(M=R?L(t,P,R,N):L(t)),void 0!==M)return M;if(!w(t))return t;var U=g(t);if(U){if(M=_(t),!D)return l(t,M)}else{var B=m(t),W=B==T||"[object GeneratorFunction]"==B;if(v(t))return c(t,D);if(B==A||B==S||W&&!R){if(M=k||W?{}:E(t),!D)return k?d(t,s(M,t)):u(t,a(M,t))}else{if(!C[B])return R?t:{};M=h(t,B,D)}}N||(N=new r);var V=N.get(t);if(V)return V;N.set(t,M),b(t)?t.forEach((function(r){M.add(e(r,n,L,r,t,N))})):y(t)&&t.forEach((function(r,o){M.set(o,e(r,n,L,o,t,N))}));var G=U?void 0:(x?k?f:p:k?O:I)(t);return o(G||t,(function(r,o){G&&(r=t[o=r]),i(M,o,e(r,n,L,o,t,N))})),M}},9747:(e,t,n)=>{var r=n(1580),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},4570:(e,t,n)=>{var r=n(7170),o=n(5770)(r);e.exports=o},4661:(e,t,n)=>{var r=n(4570);e.exports=function(e,t){var n=[];return r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}},5636:(e,t,n)=>{var r=n(6596)();e.exports=r},7170:(e,t,n)=>{var r=n(5636),o=n(1211);e.exports=function(e,t){return e&&r(e,t,o)}},7923:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},7379:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2478:e=>{e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},3334:e=>{e.exports=function(e){return e}},195:(e,t,n)=>{var r=n(3766)(Object.keys,Object);e.exports=r},1393:(e,t,n)=>{var r=n(4570),o=n(6529);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},91:(e,t,n)=>{var r=n(1340),o=n(4810),i=n(5636),a=n(6885),s=n(1580),c=n(5288),l=n(8763);e.exports=function e(t,n,u,d,p){t!==n&&i(n,(function(i,c){if(p||(p=new r),s(i))a(t,n,c,u,e,d,p);else{var f=d?d(l(t,c),i,c+"",t,n,p):void 0;void 0===f&&(f=i),o(t,c,f)}}),c)}},6885:(e,t,n)=>{var r=n(4810),o=n(7099),i=n(2264),a=n(4354),s=n(5964),c=n(3283),l=n(3142),u=n(5406),d=n(5853),p=n(3655),f=n(1580),m=n(8360),_=n(8666),h=n(8763),E=n(4207);e.exports=function(e,t,n,g,v,y,w){var b=h(e,n),I=h(t,n),O=w.get(I);if(O)r(e,n,O);else{var S=y?y(b,I,n+"",e,t,w):void 0,T=void 0===S;if(T){var A=l(I),C=!A&&d(I),L=!A&&!C&&_(I);S=I,A||C||L?l(b)?S=b:u(b)?S=a(b):C?(T=!1,S=o(I,!0)):L?(T=!1,S=i(I,!0)):S=[]:m(I)||c(I)?(S=b,c(b)?S=E(b):f(b)&&!p(b)||(S=s(I))):T=!1}T&&(w.set(I,S),v(S,I,g,y,w),w.delete(I)),r(e,n,S)}}},3945:(e,t,n)=>{var r=n(2053),o=n(5234),i=n(796);e.exports=function(e,t){return i(o(e,t,r),e+"")}},3905:(e,t,n)=>{var r=n(5111);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},3997:e=>{e.exports=function(e){return e}},8898:(e,t,n)=>{var r=n(1623);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},7099:(e,t,n)=>{e=n.nmd(e);var r=n(8942),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},2264:(e,t,n)=>{var r=n(8898);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},4354:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},9032:(e,t,n)=>{var r=n(3422),o=n(7073);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=i?i(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),a?o(n,l,u):r(n,l,u)}return n}},3546:(e,t,n)=>{var r=n(9032),o=n(7979);e.exports=function(e,t){return r(e,o(e),t)}},4733:(e,t,n)=>{var r=n(9032),o=n(5832);e.exports=function(e,t){return r(e,o(e),t)}},7848:(e,t,n)=>{var r=n(3945),o=n(4535);e.exports=function(e){return r((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,a)}return t}))}},5770:(e,t,n)=>{var r=n(6529);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&!1!==o(s[a],a,s););return n}}},6596:e=>{e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}},2532:(e,t,n)=>{var r=n(4715),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},4967:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},393:(e,t,n)=>{var r=n(3766)(Object.keys,Object);e.exports=r},3650:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},4715:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4784:(e,t,n)=>{var r=n(3766)(Object.getPrototypeOf,Object);e.exports=r},7979:e=>{e.exports=function(){return[]}},5832:e=>{e.exports=function(){return[]}},8486:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7350:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},424:e=>{e.exports=function(e){return e}},5964:(e,t,n)=>{var r=n(9747),o=n(4784),i=n(4882);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},4535:e=>{e.exports=function(){return!1}},4882:e=>{e.exports=function(){return!1}},2393:e=>{e.exports=function(){this.__data__=[],this.size=0}},2049:(e,t,n)=>{var r=n(7034),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},7144:(e,t,n)=>{var r=n(7034);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7452:(e,t,n)=>{var r=n(7034);e.exports=function(e){return r(this.__data__,e)>-1}},3964:(e,t,n)=>{var r=n(7034);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},3766:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5234:(e,t,n)=>{var r=n(6912),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=o(i.length-t,0),c=Array(s);++a<s;)c[a]=i[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=i[a];return l[t]=n(c),r(e,this,l)}}},8942:(e,t,n)=>{var r=n(4967),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},8763:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},796:e=>{e.exports=function(e){return e}},3029:(e,t,n)=>{var r=n(7642);e.exports=function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e),function(){if(--e<1)return t.apply(this,arguments)}}},149:(e,t,n)=>{var r=n(9032),o=n(7848),i=n(5288),a=o((function(e,t){r(t,i(t),e)}));e.exports=a},6108:(e,t,n)=>{var r=n(9334);e.exports=function(e){return r(e,5)}},6238:e=>{e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o}},2784:(e,t,n)=>{var r=n(1580),o=n(4495),i=n(6131),a=Math.max,s=Math.min;e.exports=function(e,t,n){var c,l,u,d,p,f,m=0,_=!1,h=!1,E=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=c,r=l;return c=l=void 0,m=t,d=e.apply(r,n)}function v(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-m>=u}function y(){var e=o();if(v(e))return w(e);p=setTimeout(y,function(e){var n=t-(e-f);return h?s(n,u-(e-m)):n}(e))}function w(e){return p=void 0,E&&c?g(e):(c=l=void 0,d)}function b(){var e=o(),n=v(e);if(c=arguments,l=this,f=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(y,t),_?g(e):d}(f);if(h)return clearTimeout(p),p=setTimeout(y,t),g(f)}return void 0===p&&(p=setTimeout(y,t)),d}return t=i(t)||0,r(n)&&(_=!!n.leading,u=(h="maxWait"in n)?a(i(n.maxWait)||0,t):u,E="trailing"in n?!!n.trailing:E),b.cancel=function(){void 0!==p&&clearTimeout(p),m=0,c=f=l=p=void 0},b.flush=function(){return void 0===p?d:w(o())},b}},4642:(e,t,n)=>{e.exports=n(3657)},6285:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},4015:(e,t,n)=>{e.exports=n(149)},7581:(e,t,n)=>{var r=n(9847),o=n(4661),i=n(3334),a=n(3142);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},3657:(e,t,n)=>{var r=n(9968),o=n(4570),i=n(3997),a=n(3142);e.exports=function(e,t){return(a(e)?r:o)(e,i(t))}},6123:(e,t,n)=>{var r=n(7923);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},2103:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},2053:e=>{e.exports=function(e){return e}},7526:(e,t,n)=>{var r=n(2478),o=n(6529),i=n(8138),a=n(7642),s=n(9817),c=Math.max;e.exports=function(e,t,n,l){e=o(e)?e:s(e),n=n&&!l?a(n):0;var u=e.length;return n<0&&(n=c(u+n,0)),i(e)?n<=u&&e.indexOf(t,n)>-1:!!u&&r(e,t,n)>-1}},3283:e=>{e.exports=function(){return!1}},3142:e=>{var t=Array.isArray;e.exports=t},6529:(e,t,n)=>{var r=n(3655),o=n(5387);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},5406:(e,t,n)=>{var r=n(6529),o=n(547);e.exports=function(e){return o(e)&&r(e)}},5853:e=>{e.exports=function(){return!1}},3514:(e,t,n)=>{var r=n(195),o=n(8486),i=n(3283),a=n(3142),s=n(6529),c=n(5853),l=n(4882),u=n(8666),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||u(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},3655:(e,t,n)=>{var r=n(7379),o=n(1580);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},5387:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7681:e=>{e.exports=function(){return!1}},1580:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},547:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},8360:(e,t,n)=>{var r=n(7379),o=n(4784),i=n(547),a=Function.prototype,s=Object.prototype,c=a.toString,l=s.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}},3943:e=>{e.exports=function(){return!1}},8138:(e,t,n)=>{var r=n(7379),o=n(3142),i=n(547);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==r(e)}},8666:e=>{e.exports=function(){return!1}},1211:(e,t,n)=>{var r=n(3766)(Object.keys,Object);e.exports=r},5288:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},105:(e,t,n)=>{var r=n(5111),o=n(3334),i=n(1393),a=n(3142);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},2451:(e,t,n)=>{var r=n(91),o=n(7848)((function(e,t,n){r(e,t,n)}));e.exports=o},4495:(e,t,n)=>{var r=n(8942);e.exports=function(){return r.Date.now()}},7331:(e,t,n)=>{var r=n(2784),o=n(1580);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}},7642:e=>{e.exports=function(e){return e}},6131:e=>{e.exports=function(e){return e}},4207:(e,t,n)=>{var r=n(9032),o=n(5288);e.exports=function(e){return r(e,o(e))}},9817:(e,t,n)=>{var r=n(3905),o=n(1211);e.exports=function(e){return null==e?[]:r(e,o(e))}},5934:function(e,t,n){var r,o;r=function(e){"use strict";var t,n,r,o,i=function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(t in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],t)&&(e[t]=arguments[n][t]);return e},a={template:"[%t] %l:",timestampFormatter:function(e){return e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},levelFormatter:function(e){return e.toUpperCase()},nameFormatter:function(e){return e||"root"}},s=function(e,o){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(t&&r!==e.methodFactory)throw new Error("You can't reassign a plugin after appling another plugin");return t=e,o=i({},a,o),n=n||e.methodFactory,r=function(e,t,r){var i=n(e,t,r),a=-1!==o.template.indexOf("%t"),s=-1!==o.template.indexOf("%l"),c=-1!==o.template.indexOf("%n");return function(){for(var t=o.template,n=arguments.length,l=Array(n),u=0;u<n;u++)l[u]=arguments[u];a&&(t=t.replace(/%t/,o.timestampFormatter(new Date))),s&&(t=t.replace(/%l/,o.levelFormatter(e))),c&&(t=t.replace(/%n/,o.nameFormatter(r))),l.length&&"string"==typeof l[0]?l[0]=t+" "+l[0]:l.unshift(t),i.apply(void 0,l)}},e.methodFactory=r,e.setLevel(e.getLevel()),e},c={apply:s,disable:function(){if(!t)throw new Error("You can't disable a not appled plugin");if(r!==t.methodFactory)throw new Error("You can't disable a plugin after appling another plugin");t.methodFactory=n,t.setLevel(t.getLevel()),n=void 0,t=void 0}};return e&&(o=e.prefix,c.noConflict=function(){return e.prefix===c&&(e.prefix=o),c}),c},void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o)},5880:function(e,t,n){var r,o;!function(){"use strict";r=function(){var e=function(){},t="undefined",n=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(n){return"debug"===n&&(n="log"),typeof console!==t&&(void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e)}function i(t,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function a(e,n,r){return function(){typeof console!==t&&(i.call(this,n,r),this[e].apply(this,arguments))}}function s(e,t,n){return o(e)||a.apply(this,arguments)}function c(e,r,o){var a,c=this,l="loglevel";function u(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[l]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+r+";"}catch(e){}}}function d(){var e;if(typeof window!==t){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(l)+"=");r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===c.levels[e]&&(e=void 0),e}}e&&(l+=":"+e),c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=o||s,c.getLevel=function(){return a},c.setLevel=function(n,r){if("string"==typeof n&&void 0!==c.levels[n.toUpperCase()]&&(n=c.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(a=n,!1!==r&&u(n),i.call(c,n,e),typeof console===t&&n<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(e){d()||c.setLevel(e,!1)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)};var p=d();null==p&&(p=null==r?"WARN":r),c.setLevel(p,!1)}var l=new c,u={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new c(e,l.getLevel(),l.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=d),l},l},void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o)}()},1359:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)if(n.call(e,i)){if((r=e[i])||null!=r&&!isNaN(r)||(r=""),i=o(i),r=o(r),null===i||null===r)continue;a.push(i+"="+r)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,o={};t=n.exec(e);){var i=r(t[1]),a=r(t[2]);null===i||null===a||i in o||(o[i]=a)}return o}},8989:e=>{!function(t){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",l=t.regeneratorRuntime;if(l)e.exports=l;else{(l=t.regeneratorRuntime=e.exports).wrap=v;var u="suspendedStart",d="suspendedYield",p="executing",f="completed",m={},_={};_[a]=function(){return this};var h=Object.getPrototypeOf,E=h&&h(h(P([])));E&&E!==r&&o.call(E,a)&&(_=E);var g=I.prototype=w.prototype=Object.create(_);b.prototype=g.constructor=I,I.constructor=b,I[c]=b.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(g),e},l.awrap=function(e){return{__await:e}},O(S.prototype),S.prototype[s]=function(){return this},l.AsyncIterator=S,l.async=function(e,t,n,r){var o=new S(v(e,t,n,r));return l.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},O(g),g[c]="Generator",g[a]=function(){return this},g.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return s.type="throw",s.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function v(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new L(r||[]);return i._invoke=function(e,t,n){var r=u;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return R()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=y(e,t,n);if("normal"===c.type){if(r=n.done?f:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function b(){}function I(){}function O(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){function t(n,r,i,a){var s=y(e[n],e,r);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&o.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,i,a)}),(function(e){t("throw",e,i,a)})):Promise.resolve(l).then((function(e){c.value=e,i(c)}),a)}a(s.arg)}var n;this._invoke=function(e,r){function o(){return new Promise((function(n,o){t(e,r,n,o)}))}return n=n?n.then(o,o):o()}}function T(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,T(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=y(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},3062:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},2225:(e,t,n)=>{"use strict";var r=n(3062),o=n(1359),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(i,"")}var p=[["#","hash"],["?","query"],function(e,t){return _(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function m(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},o={},i=typeof(e=e||r);if("blob:"===e.protocol)o=new E(unescape(e.pathname),{});else if("string"===i)for(t in o=new E(e,{}),f)delete o[t];else if("object"===i){for(t in e)t in f||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function _(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function h(e,t){e=(e=d(e)).replace(a,""),t=t||{};var n,r=l.exec(e),o=r[1]?r[1].toLowerCase():"",i=!!r[2],s=!!r[3],c=0;return i?s?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):s?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===o?c>=2&&(n=n.slice(2)):_(o)?n=r[4]:o?i&&(n=n.slice(2)):c>=2&&_(t.protocol)&&(n=r[4]),{protocol:o,slashes:i||_(o),slashesCount:c,rest:n}}function E(e,t,n){if(e=(e=d(e)).replace(a,""),!(this instanceof E))return new E(e,t,n);var i,s,c,l,f,g,v=p.slice(),y=typeof t,w=this,b=0;for("object"!==y&&"string"!==y&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),i=!(s=h(e||"",t=m(t))).protocol&&!s.slashes,w.slashes=s.slashes||i&&t.slashes,w.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!_(w.protocol)))&&(v[3]=[/(.*)/,"pathname"]);b<v.length;b++)"function"!=typeof(l=v[b])?(c=l[0],g=l[1],c!=c?w[g]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(w[g]=e.slice(0,f),e=e.slice(f+l[2])):(w[g]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(w[g]=f[1],e=e.slice(0,f.index)),w[g]=w[g]||i&&l[3]&&t[g]||"",l[4]&&(w[g]=w[g].toLowerCase())):e=l(e,w);n&&(w.query=n(w.query)),i&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&_(w.protocol)&&(w.pathname="/"+w.pathname),r(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(f=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,f),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(f+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&_(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}E.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),i[e]=t;break;case"port":i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,c.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";i[e]=t.charAt(0)!==a?a+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(i.username=t.slice(0,s),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(s+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(i[u[1]]=i[u[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&_(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,r=n.host,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var a=i+(n.protocol&&n.slashes||_(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&_(n.protocol)&&!r&&"/"!==n.pathname&&(a+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),a+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a}},E.extractProtocol=h,E.location=m,E.trimLeft=d,E.qs=o,e.exports=E},5715:()=>{},9371:()=>{},6527:()=>{}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";n(8989)})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{Deferred:()=>T,PubSub:()=>S,bus:()=>D,later:()=>M});var t={};n.r(t),n.d(t,{getArticleFeatures:()=>H,getPageCriteria:()=>K,getPageMetadata:()=>G,getPaywallGeo:()=>j,setPageMetadata:()=>F});var r={};n.r(r),n.d(r,{default:()=>ne,getLogger:()=>te,log:()=>ee,logger:()=>Y()});var o={};n.r(o),n.d(o,{getExperiments:()=>Ce,getStickyNumber:()=>Te});var i={};n.r(i),n.d(i,{LocalStorage:()=>Ne,createLocalStorage:()=>Me,getItem:()=>Le,removeItem:()=>Re,setItem:()=>Pe});var a={};n.r(a),n.d(a,{addArticleRead:()=>Be,addChannelCount:()=>Ge,getChannelCounts:()=>Fe,isArticleInRead:()=>We});var s={};n.r(s),n.d(s,{manager:()=>un,reader:()=>rn});var c={};n.r(c),n.d(c,{addInstance:()=>fo,getConfig:()=>ro,getInstances:()=>co,onAddInstance:()=>lo,onRemoveInstance:()=>uo,removeInstance:()=>po,setConfig:()=>oo});var l={};n.r(l),n.d(l,{loadDeferredImgs:()=>wo,loadScript:()=>bo,loadStyle:()=>ho,onDocReady:()=>Io,scrollUtils:()=>To});var u={};n.r(u),n.d(u,{getHostname:()=>Po,getPathname:()=>Ro});var d={};n.r(d),n.d(d,{getConfig:()=>No});var p={};n.r(p),n.d(p,{config:()=>Nt,fireBidmaxTrackingEvent:()=>qs,googleAnalytics:()=>$s,moduleTracking:()=>Gt,nielsen:()=>$t,pageEvents:()=>ht,ted:()=>Qr});var f={};n.r(f),n.d(f,{hideSpinner:()=>Js,initLoadingSpinner:()=>ec,showSpinner:()=>Zs});var m={};n.r(m),n.d(m,{after:()=>nc(),clone:()=>oc(),compact:()=>ac(),contains:()=>cc(),debounce:()=>uc(),each:()=>pc(),extend:()=>mc(),filter:()=>hc(),forEach:()=>gc(),get:()=>bc(),has:()=>yc(),isEmpty:()=>Oc(),isObject:()=>Tc(),keys:()=>Cc(),map:()=>Pc(),merge:()=>Dc(),throttle:()=>Nc()});var _={};n.r(_),n.d(_,{default:()=>il,deviceData:()=>kc,disableScroll:()=>nl,enableScroll:()=>tl,getMobileVersion:()=>Xc,getZoom:()=>Jc,isAndroid:()=>Fc,isAndroidPhone:()=>$c,isAndroidStock:()=>zc,isAndroidTablet:()=>Yc,isChrome:()=>Kc,isFirefox:()=>jc,isIDevice:()=>Wc,isIPad:()=>Gc,isIPhone:()=>Vc,isKindleSilk:()=>Hc,isLandscape:()=>Qc,isMobile:()=>qc,isPortrait:()=>el,isWindows:()=>Bc,isZoomed:()=>Zc,onTouchEnd:()=>ol,parseUserAgent:()=>Uc,setupMobileClass:()=>rl});var h={};n.r(h),n.d(h,{addCookieToReinforce:()=>Tl,reinforceCookies:()=>Pl,removeCookieAndStopReinforcing:()=>Ll,setCookieAndReinforce:()=>Cl,stopReinforcingCookie:()=>Al});var E={};n.r(E),n.d(E,{loaded:()=>ru,smartBanner:()=>tu});var g={};n.r(g),n.d(g,{replaceRelatedElement:()=>yu});var v={};n.r(v),n.d(v,{listenToEvents:()=>Su});var y={};n.r(y),n.d(y,{getCLSEntries:()=>Zd,getLCPEntries:()=>Jd,getStandard:()=>qd,getUpdated:()=>zd,webVitals:()=>Xd});var w={};n.r(w),n.d(w,{expandArticle:()=>rp,truncateArticle:()=>ip});var b={};n.r(b),n.d(b,{init:()=>Cp,paywallUtils:()=>Lp});var I={};n.r(I),n.d(I,{retrieveXpModuleBody:()=>xp,retrieveXpModuleHeadJson:()=>Dp});var O={};n.r(O),n.d(O,{Log:()=>Y(),Nielsen60:()=>$t,externalLinkTracker:()=>mf,getPageMetadata:()=>G,later:()=>M,loadCSS:()=>ho,loadDeferredImgs:()=>wo,log:()=>ee,molFeArticleRead:()=>a,molFeArticleTruncation:()=>w,molFeAsync:()=>e,molFeClientLogger:()=>r,molFeComponents:()=>c,molFeCookieReinforcer:()=>h,molFeDomHelpers:()=>l,molFeLoadingSpinner:()=>f,molFeLocalStorage:()=>i,molFeMiniLodash:()=>m,molFeMobileutils:()=>_,molFeMultivariant:()=>o,molFePageMetadata:()=>t,molFePaywallMasthead:()=>b,molFeRelatedReplace:()=>g,molFeRemixd:()=>v,molFeSegmentation:()=>s,molFeSmartBanner:()=>E,molFeTracking:()=>p,molFeWebVitals:()=>y,molFeXpModuleDataUtils:()=>I,onDocReady:()=>Io,pageEvents:()=>ht,setPageMetadata:()=>F,ted:()=>Qr,trackSwipe:()=>_f});const S=class{constructor(){this.listeners=new Map}subscribe(e,t){if(!e)throw new Error('Missing required parameter "eventName"');if("function"!=typeof t)throw new Error('Parameter "handler" is not a function');return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),{unsubscribe:()=>this.unsubscribe(e,t)}}unsubscribe(e,t){if(!e)throw new Error('Missing required parameter "eventName"');if("function"!=typeof t)throw new Error('Parameter "handler" is not a function');if(this.listeners.has(e)){const n=this.listeners.get(e).filter((e=>e!==t));this.listeners.set(e,n)}}publish(e,...t){if(!e)throw new Error('Missing required parameter "eventName"');this.listeners.has(e)&&setTimeout((()=>{this.listeners.get(e).forEach((n=>n(e,...t)))}),0)}};const T=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},A=function(e,t){return e.has(t)||e.set(t,new T),e.get(t)},C=new Promise((e=>{const t=document.querySelector("#mobile-content .scrollable-content article img");window.PageCriteria&&"article"===window.PageCriteria.pageType&&t?t.complete?e():(t.addEventListener("load",(()=>{e()})),t.addEventListener("error",e)):e()})),L=new Map,P=()=>{},R=function(e,t=P){if("function"!=typeof t)throw new Error('Parameter "callback" is not a function');if(!e)throw new Error('Missing required parameter "eventNames"');let n;if(n=Array.isArray(e)?e:[e],n.some((e=>"string"!=typeof e)))throw new Error('Required parameter "events" is not a string or an array of strings');const r=n.map((e=>A(L,e).promise));return Promise.all([...r,C]).then(t)},N=function(e){A(L,e).resolve()};if(R.go=N,window.DMPlaceholder&&window.DMPlaceholder.laterQueue&&window.DMPlaceholder.laterQueue.length)for(const e of window.DMPlaceholder.laterQueue)R(e.eventNames,e.callback);N("ads");const M=R,D=new S;let k={};const x="AU",U="US",B="CA",W="MX",V="NZ",G=function(e){return Object.assign({},k,e)},F=function(e){k=e,M.go("PAGE_METADATA_SET")},K=function(){return Object.assign({},window.PageCriteria)},j=()=>{const{geo:e}=K();return[x,V].includes(e)?x:[U,B,W].includes(e)?U:"GB"},H=function(){const e=[],{liveBlog:t,hasLiveBlogHeaderXpmodule:n,hasVideoHeroXpmodule:r}=window.PageCriteria;return t&&e.push("liveBlog"),n&&e.push("hasLiveBlogHeaderXpmodule"),r&&e.push("hasVideoHeroXpmodule"),e.join(",")};var $=n(5880),Y=n.n($),q=n(5934),z=n.n(q);const X=Object.keys(Y().levels),J=X.reduce(((e,t)=>(e[Y().levels[t]]=t,e)),{}),Z=function(e){const t=window.location.href,n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t)||[];try{return n&&n.length>1?decodeURIComponent(n[2].replace(/\+/g," ")):"object"==typeof localStorage?localStorage[e]:null}catch(e){}return null}("logLevel")||"",Q=K().logLevel||"";z().apply(Y(),{nameFormatter:e=>e||"mol-fe",template:"[%n] %l:"}),Y().setDefaultLevel(Y().levels.ERROR),Y().setLevel(Y().levels.ERROR),X.includes(Z.toUpperCase())?Y().setLevel(Z,!1):X.includes(Q.toUpperCase())&&Y().setLevel(Q,!1),console.info(`Current log level: ${J[Y().getLevel()]}`),Y().log=Y().debug;const ee=Y().log.bind(Y()),te=(...e)=>{const t=Y().getLogger(...e);return t.setLevel(Y().getLevel()),t},ne=Y();let re=null,oe=null,ie=null;const ae=e=>{if(clearTimeout(re),re=null,ie&&(ie.style.display="none",ie=null),oe=e.currentTarget,!oe)return void Y().error("No currentTarget on menuHover with event: ",e);oe.children[0].classList.add("link-ccox");const t=oe.querySelector(".nav-secondary-container");t?t.style.display="block":Y().error("No secondary nav container on menuHover for currentTarget: ",oe)},se=e=>{oe=e.currentTarget,oe?(oe.children[0].classList.remove("link-ccox"),ie=oe.querySelector(".nav-secondary-container"),ie?re=setTimeout((()=>{ie.style.display="none",ie=null,oe=null}),500):Y().error("No secondary nav container on menuUnHover for currentTarget: ",oe)):Y().error("No currentTarget on menuUnHover")};M("DOM_READY",(()=>{const e=document.querySelector("div.page-header");if(window.DM.isLoggedIn){const t=e.querySelectorAll("ul[data-logout-comp]"),n=e.querySelectorAll("ul[data-login-comp]");t.forEach((e=>{e.style.display="block"})),n.forEach((e=>{e.style.display="none"}))}const t=e.querySelector("ul.nav-primary");if(!t)return;t.querySelectorAll("li[data-has-menu-on-hover]").forEach((e=>{e.addEventListener("mouseover",ae,!1),e.addEventListener("mouseout",se,!1),e.addEventListener("touchstart",ae,!1),e.addEventListener("touchend",se,!1)}))}));var ce=n(2225),le=n.n(ce);const ue="mol-fe-came-from-mol-session",de=()=>(e=>{try{if(!("localStorage"in window))return null;const t=window.localStorage.getItem(e);if(t)return JSON.parse(t)}catch(e){}return null})(ue),pe=e=>((e,t)=>{try{if(!("localStorage"in window))return;window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}})(ue,e),fe=()=>{const{renderPlatform:e}=G(),{subchannel:t}=K();return`tim_${e}_${t}`},me=(e,t)=>{const n=new(le())(e,!0),r=n.query||{};return r.ico=t,n.set("query",r),n.href},_e=/dailymail(int)?\.(co\.uk|com)/,he=async e=>{const{renderPlatform:t}=G(),n=document.querySelector(".page-header .masthead, .tim-mobile header");window.timCameFromMolUrl=(e=>{try{return me(e,fe())}catch(t){return e}})(e),document.documentElement.classList.add("came-from-mol"),window.adverts||(window.adverts={}),window.adverts.queue||(window.adverts.queue=[]),window.adverts.queue.push({data:{referrer:"dailymail"},scope:"metadata"}),n||await M("DOM_READY"),"mobile"===t?(e=>{const t=Array.from(document.querySelectorAll(".tim-mobile header nav ul li"));if(!t||!t[1])return;const n=t[1],r=document.createElement("li"),o=me(e,fe()),{geo:i}=K(),a=i&&["us","au"].includes(i.toLowerCase());r.classList.add("back-to-mol-button"),r.innerHTML=`<a href="${o}"></a>`,a&&r.classList.add("back-to-mol-dm"),n.after(r)})(e):"desktop"===t&&(e=>{const t=document.querySelector(".page-header .masthead");if(!t)return;const n=document.createElement("li"),r=me(e,fe()),{geo:o}=K(),i=o&&["us","au"].includes(o.toLowerCase());n.classList.add("back-to-mol-button"),n.innerHTML=`<a href="${r}"></a>`,i&&n.classList.add("back-to-mol-dm"),t.append(n)})(e)},Ee=()=>{const e=Array.from(document.querySelectorAll(['a[href*="www.thisismoney"][href*="ico=mol_"]:not([data-mutated-tim-url-param])','a[href*="www.thisismoney"][href*="ico=topics_pagination_"]:not([data-mutated-tim-url-param])','a[href*="www.thisismoney"][href*="ico=authors_pagination_"]:not([data-mutated-tim-url-param])'].join(", ")));for(const t of e){const e=t.getAttribute("href"),n=new(le())(e,!0),r=n.query,o=`${r.ico}-newtab`;r.ico=o,r.molReferrerUrl=location.href,n.set("query",r),t.setAttribute("href",n.href),t.dataset.mutatedTimUrlParam=!0,t.target="_blank";const i=t.parentNode.querySelector(".comments-count > a:not([data-mutated-tim-url-param])");if(i){const e=i.getAttribute("href").split("#")[1];i.setAttribute("href",`${n.href}#${e}`),i.dataset.mutatedTimUrlParam=!0,i.target="_blank"}}setTimeout(Ee,1e3)},ge=()=>{const{domain:e}=G();"thisismoney"!==e&&Ee()},ve=()=>{const{domain:e}=G();if("thisismoney"!==e)return;const t=de(),{updated:n,referrers:r,origin:o}=t||{},i=r&&document.referrer&&r.includes(document.referrer),a=r&&r.includes(location.href),s=o&&document.referrer&&document.referrer===o;if((i||a||s)&&n&&Date.now()-n<18e5){he(o);const e=a?r:[...r,location.href].slice(-50);return void pe({...t,referrers:e,updated:Date.now()})}const c=new(le())(window.location.href,!0),l=c&&c.query&&c.query.molReferrerUrl||document.referrer,u=l?new(le())(l,!0):null,d=c&&c.query?c.query.ico:null;u&&u.hostname.match(_e)&&d&&(d.startsWith("mol_")||d.startsWith("topics_pagination_")||d.startsWith("authors_pagination_"))&&(pe({origin:l,referrers:[location.href],updated:Date.now()}),he(l))};try{M("PAGE_METADATA_SET",ve),M("DOM_READY",ge)}catch(e){Y().error("Error initialising came-from-mol",e)}const ye={articleTruncationReadNext:{criteriaCheck:e=>!["US","GB","AU"].includes(e.geo)||location.search.includes("debugSkipArticleTruncationReadNextGeoCheck=true"),percentage:.5},morePaywalledRelatedReplace:{criteriaCheck:()=>window.getIsPaywallEligible&&window.getIsPaywallEligible(),percentage:.05}},we="mol-fe-multivariant-",be=e=>{try{if(!("localStorage"in window))return null;const t=window.localStorage.getItem(`${we}${e}`);if(t)return JSON.parse(t)}catch(e){}return null},Ie=1e6,Oe="numbers",Se=(e,t)=>{let n=be(Oe);n&&"object"==typeof n||(n={}),n[e]=t,((e,t)=>{try{if(!("localStorage"in window))return;window.localStorage.setItem(`${we}${e}`,JSON.stringify(t))}catch(e){}})(Oe,n)},Te=e=>{if(!e)return console.error("[mol-fe-multivariant]","Tried to get sticky number for falsy experimentName"),null;const t=(e=>{try{const t=new URLSearchParams(location.search),n=`debugMV_${e}`,r=t.get(n);if(r)return Number(r)}catch(e){}return null})(e);if("number"==typeof t)return Se(e,t),t;const n=(e=>{const t=be(Oe);return t&&"object"==typeof t&&"number"==typeof t[e]?t[e]:null})(e);if("number"==typeof n)return n;const r=Math.floor(Math.random()*Ie);return Se(e,r),r};let Ae=null;const Ce=(e=null)=>{const{renderPlatform:t}=e||G(),{geo:n}=e||K(),r={geo:n,renderPlatform:t};if(!Ae){Ae=[];const e=Object.keys(ye);for(const t of e){const{criteriaCheck:e,percentage:n,subSegments:o}=ye[t];if(!e||Boolean(e(r))){const e=Te(t),r=o?o.length:1,i=Ie*n*r;if(e<i)if(o){const n=o[Math.floor(e/i*o.length)];Ae.push(`${t}${n}`)}else Ae.push(t);else e>=i&&e<Ie*n*(r+1)&&Ae.push(`${t}Control`)}}}return Ae||null},Le=e=>{try{if(!("localStorage"in window))return null;const t=window.localStorage.getItem(e);if(t)return JSON.parse(t)}catch(e){Y().error(e)}return null},Pe=(e,t)=>{try{if(!("localStorage"in window))return;window.localStorage.setItem(e,JSON.stringify(t))}catch(e){Y().error(e)}},Re=e=>{try{if(!("localStorage"in window))return;window.localStorage.removeItem(e)}catch(e){Y().error(e)}};class Ne{constructor(e){this.namespace=e,this.getItem=this.getItem.bind(this),this.setItem=this.setItem.bind(this),this.removeItem=this.removeItem.bind(this),this.clear=this.clear.bind(this)}getItem(e){return Le(`${this.namespace}${e}`)}setItem(e,t){return Pe(`${this.namespace}${e}`,t)}removeItem(e){return Re(`${this.namespace}${e}`)}clear(){try{if(!("localStorage"in window))return;Object.keys(window.localStorage).filter((e=>e.startsWith(this.namespace))).forEach((e=>window.localStorage.removeItem(e)))}catch(e){Y().error(e)}}}const Me=e=>new Ne(e),De=Me("mol-fe-article-read-"),ke=e=>De.getItem(e),xe=(e,t)=>De.setItem(e,t),Ue="articles",Be=e=>{const t=Number(e),n=ke(Ue)||[];if(n.includes(t))return;let r=[...n,t];r.length>100&&(r=r.slice(r.length-100)),xe(Ue,r)},We=e=>Boolean((ke(Ue)||[]).includes(Number(e))),Ve="channels",Ge=e=>{const t=ke(Ve)||{};t[e]=(t[e]||0)+1,xe(Ve,t)},Fe=()=>ke(Ve)||{},Ke="topics",je=e=>{const t=((e,t)=>{const n=new Set(t),r=Object.entries(e).map((([e,t])=>{const r=n.has(e)?1:0;n.delete(e);const o=t*(1-(e.startsWith("commerce")?.05:.1))+r;return[e,Math.floor(1e3*o)/1e3]}));return n.forEach((e=>{r.push([e,1])})),r.sort(((e,t)=>t[1]-e[1])).slice(0,1e3).reduce(((e,[t,n])=>(e[t]=n,e)),{})})(ke(Ke)||{},e);xe(Ke,t)},He=()=>{try{const e=K();if("article"!==e.pageType)return;const{articleId:t,channel:n}=e,{topics:r}=G();Be(Number(t)),Ge(n),je(r)}catch(e){Y().error("Error initialising mol-fe-article-read",e)}};try{M("PAGE_METADATA_SET",He)}catch(e){Y().error("Error initialising mol-fe-article-read",e)}var $e=n(6660),Ye=n.n($e);const qe="/api/mol-fe-feeds/v2/articles/rankedForAutoPuff",ze={AU:"/auhome",GB:"/home",US:"/ushome"},Xe=async({channel:e=null,isUKHome:t=!1}={})=>{try{let n=e&&"string"==typeof e?(e=>`/api/mol-fe-feeds/v2/articles/rankedPaywalled/channel/${e}/withXpModules/true/geo/${j()}`)(e):`/api/mol-fe-feeds/v2/articles/rankedPaywalled/withXpModules/true/geo/${j()}`;t&&(n=`${qe}/geo/gb/paywalledOnly/true`);const r=await Ye().get(n);if(!r||!r.data||!r.data.articles)return[];const{articles:o}=r.data,i=t?o:o.filter((e=>!We(e.articleId)));return i.length>=15?i:o}catch(e){Y().error("Error fetching paywalled articles for autopuff",e)}return[]},Je=async()=>{const{articleId:e,geo:t}=K(),n=`/api/mol-fe-feeds/v2/articles/rankedByChannel/sport/geo/${j()}/period/30/size/150`,r=await Ye().get(n);if(!r||!r.data||!r.data.articles)throw new Error("[mol-fe-auto-puff] Invalid sports ranked articles response");const{articles:o}=r.data;return o.filter((n=>!We(n.articleId)&&n.articleId!==e&&!((e,t)=>t.subChannel&&"AFL"===t.subChannel&&"AU"!==e)(t,n)))},Ze=[4,6,8],Qe=async({isUKHome:e=!1}={})=>{const{articleId:t,geo:n}=K(),{domain:r,environment:o}=G(),i="thisismoney"===r?`https://www.dailymail${"production"===o?"":"int"}.co.uk`:"";let a=`${i}/api/mol-fe-feeds/v2/articles/rankedByChannelReferrer${`${ze[n]||ze.GB}/withXpModules/true`}`;e&&(a=`${i}${qe}/geo/gb`);const s=await Ye().get(a);if(!s||!s.data||!s.data.articles)throw new Error("[mol-fe-auto-puff] Invalid ranked articles response");const{articles:c}=s.data;if(!e)return c.filter((e=>!We(e.articleId)&&e.articleId!==t)).slice(0,50);let l=c.filter((e=>Date.now()-new Date(e.firstPubDate).getTime()<18e6)).slice(0,5);l.length<5&&(l=c.slice().sort(((e,t)=>new Date(e.firstPubDate).getTime()-new Date(t.firstPubDate).getTime())).slice(0,5));const u=l.map((e=>e.articleId)),d=c.filter((e=>!u.includes(e.articleId)));let p=d.filter((e=>Date.now()-new Date(e.firstPubDate).getTime()<432e5)).slice(0,10);p.length<10&&(p=d.slice().sort(((e,t)=>new Date(e.firstPubDate).getTime()-new Date(t.firstPubDate).getTime())).slice(0,10));const f=p.map((e=>e.articleId)),m=d.filter((e=>!f.includes(e.articleId))),_=[...l,...p,...m].slice(0,100);try{const e=`${i}/api/mol-fe-feeds/v2/articles/recentForAutoPuff/geo/gb`,t=await Ye().get(e),{articles:n}=t.data,r=_.map((e=>e.articleId));if(n){const e=n.filter((e=>!r.includes(e.articleId)));let t=0;for(const n of Ze)e[t]&&_[n]&&(_.splice(n,0,e[t]),t++)}}catch(e){Y().error("Error fetching recent articles for autopuff",e)}return _},et=(e,{headlineMaxLength:t=160,useSocialHeadline:n=!1}={},r)=>{const{domain:o,environment:i,renderPlatform:a}=G(),{channel:s}=K(),c=r?document.createElement("li",{is:"ad-marker-li"}):document.createElement("li");r&&(c.dataset.adMarkerGroup="puff-list"),c.dataset.autoPuffItem=!0,Array.isArray(e.xpModulesUsed)&&e.xpModulesUsed.some((e=>e.startsWith("mol-fe-xpmodule-video-hero")))&&c.classList.add("video-led");let l=n?e.headline:e.fullHeadline||e.headline;l.length>t&&(l=l.substring(0,t)+"...");let u=e.url;if("money"===e.channel&&"thisismoney"!==o){u=`https://www.thisismoney${"integration"===i?"int":""}.co.uk${u}?ico=${`mol_${a}_${s}`}`}if("money"!==e.channel&&"thisismoney"===o){u=`https://www.dailymail${"integration"===i?"int":""}.co.uk${u}?ico=${`tim_autopuff_${a}_${s}`}`}c.innerHTML=`\n    <a href="${u}">\n      <img src="${e.puffImage||e.imgUrl}" height="115" width="154" alt="" loading="lazy">\n      <span class="pufftext">\n        <span class="arrow-small-r"></span>\n        <strong>\n          ${e.isPaywalled?'<span class="is-paywalled"></span>':""}${l}\n        </strong>\n      </span>\n    </a>\n  `;const{paywalledCountries:d}=e,p=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry({paywalledCountries:d});return e.isPaywalled&&p&&(c.dataset.isPaywalled=!0),c},tt=e=>{try{const t=e.querySelector("a");if(!t)return null;const n=t.href.match(/\/article-(\d+)\//)[1];return Number(n)||null}catch(e){return null}};let nt=!1;const rt={sport:"STARS OF SPORT"},ot=(e,t,n=!1)=>{if(!nt){nt=!0;try{if(e.dataset.trackModule=e.dataset.trackModule.replace(/\^puff/,"^autopuff"),n)return;e.parentNode.classList.remove("femail"),e.parentNode.classList.remove("travel"),e.parentNode.classList.add(t||"home"),e.parentNode.dataset.channelColor=t||"home",e.querySelector("h3").innerHTML=t&&rt[t]||"TOP STORIES";const r=document.querySelectorAll(".puff ul")[1];r&&r.parentNode.parentNode.classList.contains("tvshowbiz")&&(r.parentNode.parentNode.classList.remove("tvshowbiz"),r.parentNode.parentNode.classList.add("femail"),r.parentNode.parentNode.dataset.channelColor="femail",r.parentNode.querySelector("h3").innerHTML="DON'T MISS")}catch(e){}}},it=e=>{const t=e.cloneNode(!0);try{const e=t.querySelector("img");e.dataset.src&&(e.loading="lazy",e.src=e.dataset.src,delete e.dataset.src)}catch(e){}return t},at=["news","property","health","sciencetech","travel","sport"],st=["property"],ct=async()=>{try{const{articleStyle:e,channel:t,pageType:n,subchannel:r}=K(),{renderPlatform:o,domain:i}=G(),a=Ce(),s=a&&a.includes("autoPuffHome"),c="channel"===n&&"home"===t&&"home"===r&&"desktop"===o&&s;if(!c&&("article"!==n||"desktop"!==o||"wide"!==e))return;if("thisismoney"===i){if("moneycars"!==r)return;if(!document.referrer||!document.referrer.match(/^https:\/\/(www|a|b)\d?\.dailymail(int)?\.co\.uk/i))return}else if(!c&&!at.includes(t)&&!st.includes(r))return;const l=window.getIsPaywallEligible&&window.getIsPaywallEligible();let u;u="sport"===t?[Je(),l?Xe({channel:t}):[]]:[Qe({isUKHome:c}),l?Xe({isUKHome:c}):[]],u.push(M("DOM_READY"));const[d,p]=await Promise.all(u);if(!d||!d.length)return;((e,t=[],n,r=!1)=>{if(!e||!e.length)return;let o=".puff ul li:not([data-is-sponsored]):not(.exclusive):not(:has(.is-exclusive,.is-breaking-news))",i=".puff ul li[data-is-sponsored],.puff ul li.exclusive,.puff ul li:has(.is-exclusive,.is-breaking-news)";r&&(o=".puff ul li:not([data-is-sponsored])",i=".puff ul li[data-is-sponsored]");const a=document.querySelectorAll(o),s=document.querySelectorAll(i),c=Array.from(a).filter((e=>!(e.closest(".royal_wedding")||r&&e.closest(".sport")))).filter((e=>e&&e.children&&e.children[0]&&"A"===e.children[0].tagName));if(!c.length)return;const l=Array.from(s).map(tt).filter(Boolean);let u=e.slice().filter((e=>!l.includes(e.articleId))),d=u.map((e=>e.articleId));const p=c.map(tt).filter(Boolean),f=[];let m=t.filter((e=>!l.includes(e.articleId))).filter((e=>!d.includes(e.articleId)));if(r&&m.length<4&&t.length){m=t.filter((e=>!l.includes(e.articleId)));const e=m.map((e=>e.articleId));u=u.filter((t=>!e.includes(t.articleId))),d=u.map((e=>e.articleId))}let _=1;for(const e of c){const t=Array.from(document.querySelectorAll(".puff ul li")).filter((e=>e&&e.children&&e.children[0]&&"A"===e.children[0].tagName)).indexOf(e)+1,o=(r?t%4==0:(_-3)%4==0)&&u.length>0&&m.length>0?m.shift():u.shift(),i=tt(e),a=o&&Number(o.articleId);if(!e.dataset.autoPuffReorder)if(o&&a!==i){const t=et(o,{},r);if(!nt){const t=e.closest(".puff");ot(t,n,r)}if(p.includes(a)){const t=c.find((e=>e.querySelector("a").getAttribute("href")===o.url));if(t){const n=it(t);t.dataset.autoPuffReorderSource=!0,n.dataset.autoPuffReorderTarget=!0,e.dataset.autoPuffReorderSource||d.includes(i)||f.push(e),e.replaceWith(n)}}else e.dataset.autoPuffReorderSource||d.includes(i)||f.push(e),e.replaceWith(t)}else if(f.length&&!o){const t=f.shift();t.dataset.autoPuffMoved=!0,e.dataset.autoPuffReorderSource||f.push(e),e.replaceWith(t)}_++}})(d,p,"sport"===t?t:null,c)}catch(e){Y().error("Error initialising mol-fe-auto-puff",e)}},lt=async({iteration:e=1,topic:t,exclude:n=[]}={})=>{const r=e>1?`/api/mol-fe-feeds/v2/articles/topicArticles/puff/${t}/page/${e-1}/size/200/withXpModules/true`:`/api/mol-fe-feeds/v2/articles/rankedByTopicGroup/${t}/size/200/withXpModules/true/geo/${j()}`,{domain:o,environment:i}=G(),a=`${"thisismoney"===o?`https://www.dailymail${"production"===i?"":"int"}.co.uk`:""}${r}`,s=await Ye().get(a);if(!s||!s.data||!s.data.articles)throw new Error("Invalid topic puff articles response");const{articles:c}=s.data;return c.filter((e=>!n.includes(e.articleId)))},ut=[{puffSelectorsByEnv:{integration:['.puff[data-track-module="llg-115099675^puff"]','.puff[data-track-module="llg-115970151^puff"]'],production:['.puff[data-track-module="llg-115970151^puff"]']},topic:"royals"}],dt=async()=>{try{const{environment:e,renderPlatform:t}=G(),{pageType:n}=K();if("desktop"!==t)return;for(const{puffSelectorsByEnv:t,topic:r}of ut){const o=t[e]||t.production,i=Array.from(document.querySelectorAll(o.join(",")));let a=[],s=1,c=await lt({iteration:s,topic:r});a=a.concat(c.map((e=>e.articleId)));let l=0;for(const e of i){const t=e.closest(".beta"),o=t.parentNode.querySelector(".alpha"),i=Array.from(e.querySelectorAll(0===l?"ul li:not([data-is-sponsored]):not(.exclusive)":"ul li")).filter((e=>e&&e.children&&e.children[0]&&"A"===e.children[0].tagName)),u=o?o.offsetHeight-t.offsetHeight:0;let d=Math.min(Math.ceil(u/120)+i.length,1e3);for("article"===n&&(d=Math.max(d,200));d>c.length;){s++;const e=await lt({exclude:a,iteration:s,topic:r});if(!e||!e.length||s>10)break;a=a.concat(e.map((e=>e.articleId))),c=c.concat(e)}if(i.length>d)for(let e=i.length-1;e>=d;e--)i[e].remove();let p=!0,f=0;for(;d>0;){const r=c.shift();if(i[f]){const e=et(r,{headlineMaxLength:90,useSocialHeadline:!0},!1);i[f].replaceWith(e)}else if("article"===n||t.offsetHeight<o.offsetHeight+100){const n=et(r,{headlineMaxLength:90,useSocialHeadline:!0},p);e.querySelector("ul").appendChild(n);const i=o?o.offsetHeight-t.offsetHeight:0;d=i<=0?0:Math.min(Math.ceil(i/120),1e3),i<625&&(p=!1)}f++}l++}}}catch(e){Y().error("Error initialising mol-fe-auto-puff royals",e)}};try{M("PAGE_METADATA_SET",ct),M("DOM_READY",dt)}catch(e){Y().error("Error initialising mol-fe-auto-puff",e)}M("DOM_READY",(()=>{const{geo:e=""}=K()||{},t=e&&`data-href-geo-${e.toLowerCase()}`,n=t&&document.querySelectorAll(`a[${t}]`);n&&n.forEach((e=>{const n=e.getAttribute(t);n&&e.setAttribute("href",n)}))})),M("DOM_READY").then((()=>{const e=document.body.querySelectorAll('a[href="#top"]:not(.back-to-top)');return Array.from(e).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo(0,0)}))})),null})).catch((e=>Y().error("There was an error loading scrollToTop extension",e)));var pt=n(6654),ft=n.n(pt);const mt=class extends S{constructor(e={}){super(),Object.assign(this,e),this.eventsMap=Object.keys(e).reduce(((t,n)=>(t[e[n]]?Y().warn(`Conflicting event value for events "${n}" and "map[events[key]]"`):t[e[n]]=n,t)),{})}subscribe(e,t){return e&&!this.eventsMap[e]&&Y().warn(`Subscribing to non-standard event "${e}"`),super.subscribe(e,t)}publish(e,t){if(!e)throw new Error('Missing required parameter "eventName"');e&&!this.eventsMap[e]&&Y().warn(`Publishing non-standard event "${e}"`),Y().trace(`Published PageEvent "${e}"`,t),this.listeners.get(e)&&this.listeners.get(e).forEach((n=>{try{n(e,t)}catch(e){Y().error(e)}}))}listen(e,t,n){Y().warn('"pageEvents.listen(eventName, function(observable, eventName, data) {...}, context)" has been deprecated.\n  Please use "pageEvents.subscribe(eventName, (eventName, data) => {...})" instead');return this.subscribe(e,((...e)=>{t.call(n,this,...e)}))}fireEvent(e,t){return Y().warn('"pageEvents.fireEvent(eventName, data)" has been deprecated. Please use "pageEvents.publish(eventName, data)" instead'),this.publish(e,t)}},_t={AD_BILLBOARD_CLOSED:"ad_billboard-closed",AD_SLOT_LOADED_ON_PAGE:"adslot.loaded_on_page",AFFILIATE_CAROUSEL_CLICK:"affiliate.carousel_click",AFFILIATE_CAROUSEL_IMPRESSION:"affiliate.carousel_impression",AFFILIATE_CAROUSEL_VIEWABLE:"affiliate.carousel_viewable",ARTICLE_HERO_AUTHOR_TWITTER_LINK_CLICK:"article_hero.author_twitter_link_click",ARTICLE_HERO_LOZENGE_LINK_CLICK:"article_hero.lozenge_link_click",ARTICLE_PREVIEW_XP_CLICK:"article.preview.xp.click",ARTICLE_PREVIEW_XP_IMPRESSION:"article.preview.xp.impression",ARTICLE_PREVIEW_XP_VIEWABLE:"article.preview.xp.viewable",ARTICLE_RECOMMENDATION_XP_CLICK:"article.recommendation.xp.click",ARTICLE_RECOMMENDATION_XP_IMPRESSION:"article.recommendation.xp.impression",ARTICLE_RECOMMENDATION_XP_VIEWABLE:"article.recommendation.xp.viewable",ARTICLE_TRUNCATION_EXPAND:"article.truncation.expand",ARTICLE_TRUNCATION_INELIGIBLE:"article.truncation.ineligible",ARTICLE_TRUNCATION_READ_NEXT:"article.truncation.read_next",ARTICLE_TRUNCATION_TRUNCATE:"article.truncation.truncate",ARTICLE_TRUNCATION_VIEWABLE:"article.truncation.viewable",BF_BUY_NOW_CAROUSEL_CLICKED:"bf.buy_now_carousel_clicked",BF_BUY_NOW_HEADER_CLICKED:"bf.buy_now_header_clicked",BF_CAROUSEL_IN_VIEW:"bf.carousel_in_view",BF_CAROUSEL_ROTATE_CLICKED:"bf.carousel_clicked",BF_IMPRESSION:"bf.impression",BF_SHOW_MORE_CLICKED:"bf.show_more_clicked",CMP_LEVEL_ONE_ACCEPT:"cmp.cmp_level_1_accept",CMP_LEVEL_ONE_CONVERSION:"cmp.cmp_level_1_conversion",CMP_LEVEL_ONE_LOGIN:"cmp.cmp_level_1_login",CMP_LEVEL_ONE_PRIVACY_SETTINGS:"cmp.cmp_level_1_privacy_settings",CMP_LEVEL_ONE_SUBSCRIBE:"cmp.cmp_level_1_subscribe",CMP_LEVEL_TWO_CONVERSION:"cmp.cmp_level_2_conversion",CMP_LEVEL_TWO_SAVE_EXIT:"cmp.cmp_level_2_save_exit",CMP_LEVEL_TWO_SUBSCRIBE:"cmp.cmp_level_2_subscribe",COMMENT_CTA_CLICK:"commentcta.click",COMMENT_CTA_IMPRESSION:"commentcta.impression",COMMENTS_ADD_COMMENT_CLICK:"comments.add-comment-click",COMMENTS_CLEAR:"comments.clear",COMMENTS_CLICK:"comments.click",COMMENTS_DOWNVOTE:"comments.downvote",COMMENTS_IMPRESSION:"comments.impression",COMMENTS_LOAD_TIME:"comments.load-time",COMMENTS_LOGIN_REDIRECT:"comments.login-redirect",COMMENTS_NEW_COMMENT_CLICK:"comments.new-comment-click",COMMENTS_OVERLAY_CLOSE:"comments.overlay-close",COMMENTS_OVERLAY_OPEN:"page.comments-overlay-open",COMMENTS_PAGINATION_CLICK:"comments.pagination-click",COMMENTS_PROFILE_CLICK:"comments.profile-click",COMMENTS_REPLY_CLICK:"comments.reply-click",COMMENTS_REPLY_SUBMIT:"comments.reply-submit",COMMENTS_REPLY_SUBMIT_SUCCESS:"comments.reply-submit-success",COMMENTS_REPORT_CLICK:"comments.report-click",COMMENTS_SHOW_MORE_CLICK:"comments.show-more-click",COMMENTS_SUBMIT_COMMENT:"comments.submit-comment",COMMENTS_SUBMIT_SUCCESS:"comments.submit-success",COMMENTS_UPVOTE:"comments.upvote",COMMENTS_VIEW:"comments.view",COMMENTS_VIEW_ALL:"comments.view-all",COMMERCE_XP_CLICK:"commerce_xp.click",COMMERCE_XP_IMPRESSION:"commerce_xp.impression",COMMERCE_XP_VIEW_MORE:"commerce_xp.view_more",COMMERCE_XP_VIEWABLE:"commerce_xp.viewable",COMPANY_REVIEW_IMPRESSION:"company_review.impression",COMPANY_REVIEW_LEARN_MORE_CLICKED:"company_review.learn_more_clicked",COMPANY_REVIEW_LESS_CONTENT_CLICKED:"company_review.less_content_clicked",COMPANY_REVIEW_MORE_CONTENT_CLICKED:"company_review.more_content_clicked",CONTACT_FORM_CAPTCHA_VALID:"mol_fe_contact_form.captcha-valid",CONTACT_FORM_FILE_ADDED:"mol_fe_contact_form.file-added",CONTACT_FORM_FILE_ERROR_CLIENT:"mol_fe_contact_form.file-error-client",CONTACT_FORM_FILE_ERROR_SERVER:"mol_fe_contact_form.file-error-server",CONTACT_FORM_SUBMIT_CLICK:"mol_fe_contact_form.submit-click",CONTACT_FORM_SUBMIT_ERROR:"mol_fe_contact_form.submit-error",CONTACT_FORM_SUBMIT_SUCCESS:"mol_fe_contact_form.submit-success",DESKTOP_HOME_PAGE_OVERLAY:"page.desktop_home_page_overlay",ERROR_RENDER_STARTED:"error-page.render-started",ESSENTIAL_ACCOUNT_LINK_COMPLETE:"cmp.essential_account_link_complete",ESSENTIAL_ACCOUNT_LINK_HELP_CLICK:"cmp.essential_account_link_help_click",ESSENTIAL_ACCOUNT_LINK_PROMPT:"cmp.essential_account_link_prompt",ESSENTIAL_ACCOUNT_LINK_RESEND:"cmp.essential_account_link_resend_email_click",ESSENTIAL_RESTORE_PURCHASE_CLICK:"cmp.essential_restore_purchase_click",FACTBOX_READ_MORE_CLICK:"factbox.read-more-click",FEATURE_ARTICLE:"page.feature_article",FIDELITY_CAMPAIGN_EVENT:"fidelity-campaign.event",FIREWORK_VIDEO_CAROUSEL_ERROR:"firework-video-carousel.error",FIREWORK_VIDEO_CAROUSEL_IMPRESSION:"firework-video-carousel.impression",FIREWORK_VIDEO_CAROUSEL_PLAYER_NAVIGATION:"firework-video-carousel.player-navigation",FIREWORK_VIDEO_CAROUSEL_PLAYER_QUIT:"firework-video-carousel.player-quit",FIREWORK_VIDEO_CAROUSEL_PLAYER_TRANSITION:"firework-video-carousel.player-transition",FIREWORK_VIDEO_CAROUSEL_READY:"firework-video-carousel.ready",FIREWORK_VIDEO_CAROUSEL_THUMBNAIL_CLICK:"firework-video-carousel.thumbnail-click",FIREWORK_VIDEO_CAROUSEL_VIDEO_CLICK_CTA:"firework-video-carousel.video-click-cta",FIREWORK_VIDEO_CAROUSEL_VIDEO_CLICK_SHARE:"firework-video-carousel.video-click-share",FIREWORK_VIDEO_CAROUSEL_VIDEO_COMPLETE:"firework-video-carousel.video-complete",FIREWORK_VIDEO_CAROUSEL_VIDEO_FIRST_QUARTILE:"firework-video-carousel.video-first-quartile",FIREWORK_VIDEO_CAROUSEL_VIDEO_IMPRESSION:"firework-video-carousel.video-impression",FIREWORK_VIDEO_CAROUSEL_VIDEO_MID_POINT:"firework-video-carousel.video-mid-point",FIREWORK_VIDEO_CAROUSEL_VIDEO_SESSION:"firework-video-carousel.video-session",FIREWORK_VIDEO_CAROUSEL_VIDEO_START:"firework-video-carousel.video-start",FIREWORK_VIDEO_CAROUSEL_VIDEO_THIRD_QUARTILE:"firework-video-carousel.video-third-quartile",FLOATING_BUTTONS_BACK_TO_TOP:"back-to-top",FOR_YOU_SAVE_PREFERENCES_CLICK:"for-you.save_preferences_click",FRAGMENT_LOADED:"page.fragment-loaded",GALLERY_ADVERT_STATS:"gallery.advert-stats",GALLERY_ADVERT_VIEWED:"gallery.advert.viewed",GALLERY_CLOSED:"gallery.closed",GALLERY_IMAGE_VIEWED:"gallery.image-viewed",GALLERY_OPENED:"gallery.opened",GDPR_EMBEDDED_VIDEO_ACCEPTED:"gdpr.embedded_video_accepted",GDPR_EMBEDDED_VIDEO_DISPLAYED:"gdpr.embedded_video_displayed",GDPR_EMBEDDED_VIDEO_SETTINGS:"gdpr.embedded_video_settings",GDPR_MOBILE_HOME_ACCEPTED:"gdpr.mobile_home_accepted",GDPR_MOBILE_HOME_DISPLAYED:"gdpr.mobile_home_displayed",GDPR_MOBILE_HOME_SETTINGS:"gdpr.mobile_home_settings",GDPR_OVERLAY_ACCEPT_BY_CLICK_SITE:"gdpr.overlay_accept_by_click_site",GDPR_OVERLAY_ACCEPTED:"gdpr.overlay_accepted",GDPR_OVERLAY_DISPLAYED:"gdpr.overlay_displayed",GDPR_OVERLAY_PRIVACY:"gdpr.overlay_privacy",GDPR_SETTINGS_ADVERTISING_ALLOW_ALL:"gdpr.settings_advertising_allow_all",GDPR_SETTINGS_ADVERTISING_LINK_CLICKED:"gdpr.settings_advertising_link_clicked",GDPR_SETTINGS_ADVERTISING_TAB_CLICKED:"gdpr.settings_advertising_tab_clicked",GDPR_SETTINGS_CONFIRMATION_ALLOW:"gdpr.settings_confirmation_allow",GDPR_SETTINGS_CONFIRMATION_DISALLOW:"gdpr.settings_confirmation_disallow",GDPR_SETTINGS_DISALLOW_ADVERTISING_PARTNERS:"gdpr.settings_disallow_advertising_partners",GDPR_SETTINGS_FUNCTION_ALLOW_ALL:"gdpr.settings_function_allow_all",GDPR_SETTINGS_FUNCTION_TAB_CLICKED:"gdpr.settings_function_tab_clicked",GDPR_SETTINGS_POLICY_LINK_CLICKED:"gdpr.settings_policy_link_clicked",GEO_TARGETED_HOMEPAGE_XP_CLICK:"geo.targeted.homepage.xp.click",GEO_TARGETED_HOMEPAGE_XP_IMPRESSION:"geo.targeted.homepage.xp.impression",GEO_TARGETED_HOMEPAGE_XP_VIEWABLE:"geo.targeted.homepage.xp.viewable",GUESTBOOK_IMPRESSION:"guestbook.impression",GUESTBOOK_LOADING_ERROR:"guestbook.loading_error",GUESTBOOK_SUBMIT_ERROR:"guestbook.submit_error",GUESTBOOK_SUBMIT_SUCCESS:"guestbook.submit_success",IFRAME_EMAIL_IMPRESSION:"iframe.email.impression",IFRAME_EMAIL_SUBMIT:"iframe.email.submit",IFRAME_EMAIL_SUBMIT_NO_EMAIL:"iframe.email.submit_no_email",IFRAME_EMAIL_VIEWABLE:"iframe.email.viewable",LINK_CLICK:"link.click",MASTHEAD_CLICK:"masthead_click",MOBILE_HOME_PAGE_NAV:"page.mobile_home_page_nav",MOBILE_HOME_PAGE_OVERLAY:"page.mobile_home_page_overlay",MOBILE_HOME_PAGE_SIGNPOST_CLICK:"page.mobile_home_page_signpost_click",MOBILE_HOME_PAGE_SIGNPOST_DISMISS:"page.mobile_home_page_signpost_dismiss",MOBILE_HOME_PAGE_SIGNPOST_DISPLAY:"page.mobile_home_page_signpost_display",MOBILE_HOME_PAGE_SWIPE:"page.mobile_home_page_swipe",MOBILE_HOME_PAGE_VIEW:"page.mobile_home_page_view",MOBILE_MENU_COMMENT:"menu.mobile_menu_comment",MOBILE_MENU_DESKTOP_SITE:"menu.mobile_menu_desktop_site",MODULE_IMPRESSION:"module.impression",MODULE_INTERACT:"module.interact",MODULE_VIEW:"module.view",MOST_COMMENTED_ARTICLE_CLICKED:"page.most_commented_article_clicked",MOST_COMMENTED_CLOSE_CLICKED:"page.most_commented_close_clicked",MOST_COMMENTED_RADIO_CLICKED:"page.most_commented_radio_clicked",MOST_COMMENTED_SHOWMORE_CLICKED:"page.most_commented_showmore_clicked",NEWSLETTER_ERROR:"newsletter.error",NEWSLETTER_POPUP_SHOW:"newsletter-popup.show",NEWSLETTER_POPUP_SUBMIT:"newsletter-popup.submit",NEWSLETTER_PRIVACY_CLICK:"newsletter-privacy.click",NEWSLETTER_SHOW:"newsletter.show",NEWSLETTER_SUBMIT:"newsletter.submit",NEWZIT_NOTIFICATION_PROMO_CLOSE:"newzit-notification-promo.close",NEWZIT_NOTIFICATION_PROMO_OPEN:"newzit-notification-promo.open",OPENWEB_DELETE_MESSAGE:"openweb.delete_message",OPENWEB_DOWNVOTE:"openweb.downvote",OPENWEB_EDIT_MESSAGE:"openweb.edit_message",OPENWEB_FLOATING_CLICK:"openweb.floating_click",OPENWEB_FLOATING_DISMISS:"openweb.floating_dismiss",OPENWEB_IMPRESSION:"openweb.impression",OPENWEB_LOAD_ERROR:"openweb.load_error",OPENWEB_LOAD_TIME:"openweb.load_time",OPENWEB_LOGIN_START:"openweb.login_start",OPENWEB_OPEN_PROFILE:"openweb.open_profile",OPENWEB_POST_LOGIN_SUCCESS:"openweb.post_login_success",OPENWEB_SEND_FAIL:"openweb.send_fail",OPENWEB_SEND_SUCCESS:"openweb.send_success",OPENWEB_SHARE_TYPE:"openweb.share_type",OPENWEB_SORT_OPEN:"openweb.sort_open",OPENWEB_SORT_SELECT:"openweb.sort_select",OPENWEB_UPVOTE:"openweb.upvote",OPENWEB_VIEWABLE:"openweb.viewable",PAGE_AD_DISPLAYED:"page.ad-displayed",PAGE_AD_ERRORS:"page.ad-errors",PAGE_AD_STATS:"page.ad-stats",PAGE_AUTOREFRESH_EVENT:"page.autorefresh-event",PAGE_COMMENT_FUNNEL_PROGRESSED:"page.comment-funnel-progressed",PAGE_COMMENT_TAB_SWAPPED:"page.comment-tab-swapped",PAGE_EXTERNAL_LINK_CLICKED:"page.external-link-clicked",PAGE_EXTERNAL_LINK_CLICKED_GA:"page.external-link-clicked-ga",PAGE_FOOTBALL_FIXTURES_TAB_SWAPPED:"page.football-fixtures-tab-swapped",PAGE_FURNITURE_CLICKED:"page.furniture-clicked",PAGE_IMAGE_ENLARGED:"page.image-enlarged",PAGE_LOGIN_BUTTON_CLICKED:"page.login-button-clicked",PAGE_LOGIN_OPENED:"page.login-opened",PAGE_MOBILE_TAB_CHANGE:"page.mobile.tab.change",PAGE_MODULE_CLICKED:"page.module-clicked",PAGE_NEWSLETTERS_OPENED:"page.newsletters-opened",PAGE_RENDER_STARTED:"page.render-started",PAYWALL_ACCOUNT_LINK_COMPLETE:"paywall.account-link-complete",PAYWALL_ACCOUNT_LINK_HELP:"paywall.account-link-help",PAYWALL_ACCOUNT_LINK_PROMPT:"paywall.account-link-prompt",PAYWALL_ACCOUNT_LINK_RESEND:"paywall.account-link-resend",PAYWALL_CONVERSION:"paywall.conversion",PAYWALL_CONVERSION_BANNER:"paywall.conversion-banner",PAYWALL_CONVERSION_PROFILE:"paywall.conversion-profile",PAYWALL_HOMEMODULE_ARTICLE_CLICK:"paywall.homemodule-article-click",PAYWALL_HOMEMODULE_ARTICLE_COMMENTS_CLICK:"paywall.homemodule-article-comments-click",PAYWALL_HOMEMODULE_CHANNEL_CLICK:"paywall.homemodule-channel-click",PAYWALL_HOMEMODULE_SIGNUP_CLICK:"paywall.homemodule-signup-click",PAYWALL_IMPRESSION:"paywall.impression",PAYWALL_LOGIN_CLICK:"paywall.login-click",PAYWALL_MASTHEAD_ARTICLE_CLICK:"paywall.masthead-article-click",PAYWALL_MASTHEAD_SIGNUP_CLICK:"paywall.masthead-signup-click",PAYWALL_MASTHEAD_SUBSCRIBED_CLICK:"paywall.masthead-subscribed-click",PAYWALL_PROFILE_SIGNUP_CLICK:"paywall.profile-signup",PAYWALL_RESTORE_PURCHASE_CLICK:"paywall.restore-purchase-click",PAYWALL_SIGN_UP:"paywall.signup",PAYWALL_VIEWABLE:"paywall.viewable",PAYWALL_ZEPHR_FAIL_OPEN:"paywall.zephr-fail-open",PRODUCT_BUTTON_LINK:"product.button-link",PRODUCT_IMAGE_LINK:"product.image-link",PRODUCT_PRICE_LINK:"product.price-link",PRODUCT_TITLE_LINK:"product.title-link",PROMOTIONAL_SLOT_EVENT:"promotional.slot-event",PROMOTIONS_XP_CLICK:"promotions.xp.click",PROMOTIONS_XP_IMPRESSION:"promotions.xp.impressions",PROMOTIONS_XP_VIEW_MORE:"promotions.xp.view.more",PROMOTIONS_XP_VIEWABLE:"promotions.xp.viewable",PUZZLE_COMPLETE:"puzzle.complete",PUZZLE_STARTED:"puzzle.started",RC_TAB_SELECT:"rc.tab_select",RELATED_REPLACE_CLICK:"related-replace.click",RELATED_REPLACE_IMPRESSION:"related-replace.impression",RELATED_REPLACE_VIEWABLE:"related-replace.viewable",REMIXD_COMPLETE:"remixd.complete",REMIXD_ERROR:"remixd.error",REMIXD_IMPRESSION:"remixd.impression",REMIXD_MUTE:"remixd.mute",REMIXD_PAUSE:"remixd.pause",REMIXD_PLAY:"remixd.play",SAFARI_NEWSLETTER_BAD_SUBMIT:"safari-newsletter.bad-submit",SAFARI_NEWSLETTER_CONFIRM:"safari-newsletter.confirm",SAFARI_NEWSLETTER_DISMISS:"safari-newsletter.dismiss",SAFARI_NEWSLETTER_SHOW:"safari-newsletter.show",SAFARI_NEWSLETTER_SUBMIT:"safari-newsletter.submit",SCREENSAVER_DOWNLOADED:"page.screensaver_downloaded",SITE_SEARCH:"site-search",SMART_BANNER_CLICKED:"smart-banner.clicked",SMART_BANNER_SHOWN:"smart-banner.shown",SOCIAL_BUTTON_CLICKED:"social.button-clicked",SOCIAL_LIGHTBOX_BUTTON_CLICKED:"social.lightbox-button-clicked",SOCIAL_SHARE_CLICKED:"social.share-clicked",SOCIAL_SHARE_COMMENTS:"social_share.comments",SWIPE_BAR_SHOWN:"swipe_bar.shown",SWIPE_TUTORIAL_CLOSE:"swipe_tutorial.close",SWIPE_TUTORIAL_SHOWN:"swipe_tutorial.shown",SYNDSHARE_POST:"page.syndshare_post",TIM_AFFILIATE_BOTTOM_LINK_CLICKED:"timAffiliate.bottom_link_clicked",TIM_AFFILIATE_IMPRESSION:"timAffiliate.impression",TIM_AFFILIATE_LEARN_MORE_CLICKED:"timAffiliate.learn_more_clicked",TIM_ANCHOR_LINK_CLICKED:"tim.anchor.link-clicked",TOAST_OVERLAY_CLICK:"toast-overlay.click",TOAST_OVERLAY_DISMISS:"toast-overlay.dismiss",TOAST_OVERLAY_VIEW:"toast-overlay.view",TOP_STORIES_XP_CLICK:"top.stories.xp.click",TOP_STORIES_XP_IMPRESSION:"top.stories.xp.impression",TOP_STORIES_XP_VIEW_MORE:"top.stories.xp.view.more",TOP_STORIES_XP_VIEWABLE:"top.stories.xp.viewable",USER_AUTH_SITE_REG_ERROR_ONCE:"user_auth.site-reg-error-once",VIDEO_ADVERT_ABORTED:"video.advert-aborted",VIDEO_ADVERT_COMPLETED:"video.advert-completed",VIDEO_ADVERT_FAILED:"video.advert-failed",VIDEO_ADVERT_IMPRESSION:"video.ad-impression",VIDEO_ADVERT_NOT_SHOWN:"video.no-ad-shown",VIDEO_ADVERT_STARTED:"video.advert-started",VIDEO_BRANDED_CONTENT_PROGRESS:"video.branded-content.progress",VIDEO_CAROUSEL_CLICK:"video.carousel-click",VIDEO_CAROUSEL_CLICKED:"video.carousel-clicked",VIDEO_CAROUSEL_SWIPE:"video.carousel-swipe",VIDEO_CLICKED:"video.clicked",VIDEO_CONFIG_CHANGE:"page.video-config-change",VIDEO_CONTENT_ABORTED:"video.content-aborted",VIDEO_CONTENT_COMPLETED:"video.content-completed",VIDEO_CONTENT_STARTED:"video.content-started",VIDEO_DATA_READY:"video.data-ready",VIDEO_EXTRA:"extra",VIDEO_FULLSCREEN_CHANGE:"video.fullscreen-change",VIDEO_PAUSED:"video.paused",VIDEO_PLAYER_READY:"video.player-ready",VIDEO_PROGRESS:"video.progress",VIDEO_RESUMED:"video.resumed",VIDEO_STREAM_FAILED:"video.stream-failed",VIDEO_STREAM_STARTED:"video.stream-started",VIDEO_THUMBNAIL_CLICK:"video.thumbnail-click",VIDEO_VOLUME_CHANGE:"video.volume-change",WEB_PULL_NOTIFICATION_CLICK:"web-pull.notification-click",WEB_PUSH_NOTIFICATION_CLICK:"web-push.notification-click",WEB_PUSH_PRE_PROMPT_CLICK:"web-push.pre-prompt-click",WEB_PUSH_PRE_PROMPT_IMPRESSION:"web-push.pre-prompt-impression",WEB_PUSH_PROMPT_CLICK:"web-push.prompt-click",WEB_PUSH_PROMPT_IMPRESSION:"web-push.prompt-impression",WEB_SEARCH:"web-search",XP_POLLS_CLICK:"xp.polls.click",XP_POLLS_IMPRESSION:"xp.polls.impression",XP_POLLS_SUBSCRIBED:"xp.polls.subscribed",XP_POLLS_VIEW:"xp.polls.show",XP_POLLS_VOTED:"xp.polls.voted"},ht=new mt(_t),Et={".mol-desktop #addCommentButton, .mol-desktop #addCommentNarrowButton":"bottom add comment",".mol-desktop #articleIconLinksContainer .comments-count":"top comments click",".mol-desktop #floating-share-bar-container .comments-count":"floating comments click",".mol-mobile .social.bottom .comments-count":"bottom comment click",".mol-mobile .social.top .comments-count":"top comment click"},gt="mol-fe-puzzle-tracking",vt=()=>{try{return JSON.parse(window.localStorage.getItem(gt))}catch(e){}return null},yt=e=>{try{window.localStorage.setItem(gt,JSON.stringify(e))}catch(e){}},wt=()=>{try{const e=vt();if(!e)return"undefined";return e.last-e.first>=72e5?"repeat player":"first time player"}catch(e){}return"undefined"},bt={PuzzleComplete:ht.PUZZLE_COMPLETE,PuzzleStarted:ht.PUZZLE_STARTED},It=function(e,t){const n=Object.keys(t).filter((n=>{let r=!1;return _t[n]?(ht.subscribe(_t[n],t[n]),r=!0):Y().error(`${e}: Subscribing to invalid event ${n}`),r}));Y().debug(`${e}: successfully loaded`,n)},Ot=()=>{window.adverts&&window.adverts.queue&&window.adverts.queue.push((()=>{window.fbq&&window.fbq("track","Subscribe",{currency:"GBP",value:"1.99"})}))},St=()=>{window.adverts&&window.adverts.queue&&window.adverts.queue.push((()=>{window.fbq&&window.fbq("trackCustom","SubscribeButtonClicked")}))},Tt=[{PAYWALL_CONVERSION:Ot,PAYWALL_CONVERSION_BANNER:Ot,PAYWALL_CONVERSION_PROFILE:Ot,PAYWALL_MASTHEAD_SIGNUP_CLICK:St,PAYWALL_PROFILE_SIGNUP_CLICK:St,PAYWALL_SIGN_UP:St}];for(const e of Tt)It("googleAnalytics",e);const At="javascript:,dmgt.net,dailymail.co.uk,mailonsunday.co.uk,mailonline.co.uk,localhost,"+location.hostname,Ct=new RegExp(At.replace(/\./g,"\\.").replace(/,/g,"|"),"i"),Lt=K(),Pt=Lt.isTablet,Rt=Lt.isMobile&&!Pt,Nt={geo:Lt.geo,internalDomains:At,internalDomainsRegex:Ct,isMobile:Rt,isTablet:Pt},Mt=e=>{let t=e.offsetTop,n=e.offsetParent;for(;n;)Number.isNaN(n.offsetTop)||(t+=n.offsetTop),n=n.offsetParent;return t},Dt=["alpha","beta","gamma"],kt=Dt.map((e=>`.${e}`)).join(","),xt=function(e){const t=e.hostname||window.location.hostname;return Nt.internalDomainsRegex.test(t)},Ut=function(e){return!xt(e)},Bt=function(e){if(!e||1!==e.nodeType)return null;const t=Dt.find((t=>e.classList.contains(t)));if(!t)return"other";return`${t}-${Array.from(document.querySelectorAll("."+t)).indexOf(e)+1}`},Wt=function({interaction:e,link:t,moduleElement:n,target:r,trackAs:o,trackLinks:i}){const a=n.closest(kt),s={element:t,fromLink:t,interaction:e,linkType:"IMG"===r.nodeName?"image":"text",listPosition:i.indexOf(t)+1,moduleName:n.getAttribute("data-track-module"),position:n.getAttribute("data-track-pos")||Bt(a)||"other",trackingType:o||t.getAttribute("data-track-type")||n.getAttribute("data-track-type")||"ck",videoId:t.getAttribute("data-videoid")};return r.closest(".sponsored")&&(s.moduleName=s.moduleName.replace("^","_sponsored^")),(e=>{if("article"!==K().pageType||"desktop"!==G().renderPlatform||!e||!e.closest(".puff"))return!1;const t=document.querySelector(".article-text .shareArticles"),n=Mt(t);return Mt(e)>n})(r)&&(s.moduleName+="AfterArticle"),s},Vt=function(e){const{moduleElement:t,shouldProceed:n,target:r}=e,o=t.getAttribute("data-track-selector")||"a",i=Array.from(t.querySelectorAll(o)),a=i.find((e=>e===r||e.contains(r)));if(a&&n(a)){const t=Wt(Object.assign({link:a,trackLinks:i},e));Y().debug("moduleTracking",t),ht.publish(ht.PAGE_MODULE_CLICKED,t)}};document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".mol-para-with-font a, .imageCaption a");if(e){const t=[...e].map((e=>e.getAttribute("href").startsWith("/")?e:null)).filter(Boolean);if(t.length>0)for(const e of t)e.outerHTML=`<span data-track-module="internal-body-link">${e.outerHTML}</span>`}})),document.addEventListener("click",(e=>{const t=e.target.closest("[data-track-module]");if(t){const n=t.getAttribute("data-track-external")?Ut:xt;Vt({interaction:"link-click",moduleElement:t,shouldProceed:n,target:e.target})}}));const Gt={externalLinkTracker:function(e,t="el"){const n=document.getElementById(e);Array.from(n.querySelectorAll("a.js-tl")).forEach((e=>e.addEventListener("click",(e=>Vt({interaction:"link-click",moduleElement:n,shouldProceed:Ut,target:e.target,trackAs:t})))))},trackSwipe:function(e,t){Vt({interaction:"swipe",moduleElement:e,shouldProceed:xt,target:t})}},Ft=function(e,t){window.trac.slideEvent(t.contentType+"-"+t.threadId)},Kt={GALLERY_ADVERT_VIEWED:Ft,GALLERY_CLOSED:Ft,GALLERY_IMAGE_VIEWED:Ft,GALLERY_OPENED:Ft},jt={PAGE_COMMENT_TAB_SWAPPED:function(e,t){window.trac.slideEvent(t.contentType+"-"+t.tab)}},Ht=Object.assign({},Kt,jt),$t={init:function(){window.trac?It("Nielsen",Ht):Y().error('Nielsen: trying to load nielsen tracking but "trac" global is not present')}},Yt={cookieClientSegment:"dm_clientsegment",DMPageMetadataKey:"clientSegmentation",queryOverrideClientSegment:"segment",storageKey:"mol-fe-segmentation.data"},qt={getItem:e=>ft().get(e),removeItem:e=>ft().remove(e),setItem:(e,t,n)=>ft().set(e,t,n)};let zt={getItem:()=>null,removeItem:()=>null,setItem:()=>null};try{zt=window.localStorage}catch(e){}const Xt={getItem:e=>function(e){try{return JSON.parse(e)}catch(t){return e}}(zt.getItem(e)),removeItem:e=>zt.removeItem(e),setItem:(e,t)=>zt.setItem(e,function(e){return JSON.stringify(e)}(t))},Jt=function(){try{const e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}()?Xt:qt,Zt=Jt,Qt=function(e,t){const n=new RegExp("[?&]"+e.replace(/[[\]]/g,"\\$&")+"(=([^&#]*)|&|#|$)").exec(t||window.location.href);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};let en;const tn=function(e){return Qt(Yt.queryOverrideClientSegment,e)||null},nn=function(){return en=tn()||qt.getItem(Yt.cookieClientSegment),en},rn={getActiveSegment:function(){return en||nn()},getSegmentOverride:tn,setActiveSegment:nn},on=function(){return G()[Yt.DMPageMetadataKey]||{}},an=function(e={}){const t=Object.keys(e).reduce(((t,n)=>t+e[n].weight),0);return Math.random()*t},sn=function(e={}){const t=e.segments;let n;if(t){const e=an(t);let r;r=0,n=Object.keys(t).find((n=>(r+=t[n].weight,e<r)))}return n},cn=function(e,t){return e.shuffleNumber!==t.shuffleNumber&&(Number(e.shuffleNumber)||-1/0)<(Number(t.shuffleNumber)||1/0)},ln={getRandomSegmentFromConfig:sn,getRandomSegmentWeight:an,run:function(){const e=rn.getActiveSegment(),t=qt.getItem(Yt.cookieClientSegment),n=Zt.getItem(Yt.storageKey)||{},r=on(),o=cn(n,r),i=e!==t;if(o||i||!t){const t=o?r:n,a=i?e:sn(t);a?qt.setItem(Yt.cookieClientSegment,a,{expires:1e3}):qt.removeItem(Yt.cookieClientSegment),t!==n&&Zt.setItem(Yt.storageKey,t)}},storedConfigIsOutdated:cn},un=ln;M("PAGE_METADATA_SET",(()=>un.run()));const dn=function(){return rn.getActiveSegment()||"default"},pn={geo(){},ito:window.RTA?window.RTA.ito:function(){},tedEvent(e,t={}){t.clientSegment=dn(),this.i&&(t.ito=this.i),Object.assign(t,function(){const e={},t=G(),n=t&&t.authorName&&t.authorName.split(";");return n&&n.length&&(e.authors=n),e}()),Object.assign(t,function(){const e={},t=G();return e.rp=t.renderPlatform,e}()),t.title||Object.assign(t,function(){const e={},t=G();if(t.articleId){const n=document.head.querySelector('meta[property="twitter:title"]')||document.head.querySelector('meta[property="og:title"]');e.title=n?n.getAttribute("content"):t.articleTitle}return e}()),function(e,t){window.RTA&&window.RTA.tedEvent(e,t)}(e,t)}},fn=function(e){return function(t,n){pn.tedEvent("page_event",{action:"store",name:e,value:n})}},mn={CONTACT_FORM_CAPTCHA_VALID:fn("mol-fe-contact-form-captcha-valid"),CONTACT_FORM_FILE_ADDED:fn("mol-fe-contact-form-file-added"),CONTACT_FORM_FILE_ERROR_CLIENT:fn("mol-fe-contact-form-file-error-client"),CONTACT_FORM_FILE_ERROR_SERVER:fn("mol-fe-contact-form-file-error-server"),CONTACT_FORM_SUBMIT_CLICK:fn("mol-fe-contact-form-submit-click"),CONTACT_FORM_SUBMIT_ERROR:fn("mol-fe-contact-form-submit-error"),CONTACT_FORM_SUBMIT_SUCCESS:fn("mol-fe-contact-form-submit-success")},_n={FIDELITY_CAMPAIGN_EVENT:function(e,t,n){pn.tedEvent("page_event",{action:n.action,name:n.name,value:n.value})}},hn={FLOATING_BUTTONS_BACK_TO_TOP:function(e,t){pn.tedEvent("page_event",{action:"set",name:"backToTop",value:t.value})}},En=function(e){pn.tedEvent("page_event",{action:"store",name:e,value:!0})},gn={GDPR_EMBEDDED_VIDEO_ACCEPTED:En,GDPR_EMBEDDED_VIDEO_DISPLAYED:En,GDPR_EMBEDDED_VIDEO_SETTINGS:En,GDPR_MOBILE_HOME_ACCEPTED:En,GDPR_MOBILE_HOME_DISPLAYED:En,GDPR_MOBILE_HOME_SETTINGS:En,GDPR_OVERLAY_ACCEPT_BY_CLICK_SITE:En,GDPR_OVERLAY_ACCEPTED:En,GDPR_OVERLAY_DISPLAYED:En,GDPR_OVERLAY_PRIVACY:En,GDPR_SETTINGS_ADVERTISING_ALLOW_ALL:En,GDPR_SETTINGS_ADVERTISING_LINK_CLICKED:En,GDPR_SETTINGS_ADVERTISING_TAB_CLICKED:En,GDPR_SETTINGS_CONFIRMATION_ALLOW:En,GDPR_SETTINGS_CONFIRMATION_DISALLOW:En,GDPR_SETTINGS_DISALLOW_ADVERTISING_PARTNERS:En,GDPR_SETTINGS_FUNCTION_ALLOW_ALL:En,GDPR_SETTINGS_FUNCTION_TAB_CLICKED:En,GDPR_SETTINGS_POLICY_LINK_CLICKED:En},vn=function(e){const t=document.referrer,n=G(),r=new RegExp(`#${e}(\\?.*)?$`);if(/.html([?#].*)?$/.test(t)&&r.test(window.location.hash)&&"article"===n.contentType){const e=t.split("/");return e[e.length-2]}return null},yn=ft().get("autorefresh");ft().remove("autorefresh");const wn=()=>yn,bn=()=>{try{if("localStorage"in window){const e=window.localStorage.getItem("mol-fe-swipe-funnel-status");if(e){const t=JSON.parse(e);if(t&&"string"==typeof t)return t}}}catch(e){}return null},In=()=>{const e=ft().get("mol-home"),{renderPlatform:t}=G();return"mobile"===t||e?"-no-overlay":""},On=()=>{const e=In();try{const t=ft().get("mol-home");if(t)return`${t}${e}`}catch(e){}return e?`undefined${e}`:null},Sn=e=>{try{if(!("localStorage"in window))return null;const t=window.localStorage.getItem(`mol-fe-home-channel-${e}`);if(t)return JSON.parse(t)}catch(e){}return null},Tn=()=>{const{isPaywalled:e,hasBeenPaywalled:t,pageType:n}=K(),r=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),o=window.getIsPaywallEligible&&window.getIsPaywallEligible();if("article"===n)return e||t?!e&&t?"hasBeenPaywalled":e&&o&&!r?"isPaywalledForOthers":e&&o&&r?"isPaywalled":e&&!o?"isRestricted":"invalid":"none"},An=()=>{try{if(window.getIsPaywallSubscriber&&window.getIsPaywallSubscriber())return"subscriber";if(window.DM.isLoggedIn)return"registered"}catch(e){Y().error("Error determining user paywall status",e)}return"none"},Cn=()=>{try{return window.getPaywallEntitlements&&window.getPaywallEntitlements()||null}catch(e){Y().error("Error determining user paywall entitlements",e)}return null};let Ln,Pn,Rn,Nn=!1;const Mn=()=>{try{"localStorage"in window&&!Nn&&(Ln=window.localStorage.getItem("module_tracking"),Pn=window.localStorage.getItem("module_tracking_name"),Rn=window.localStorage.getItem("module_tracking_list_position"),Nn=!0,Ln&&window.localStorage.removeItem("module_tracking"),Pn&&window.localStorage.removeItem("module_tracking_name"),Rn&&window.localStorage.removeItem("module_tracking_list_position"))}catch(e){}return{moduleListPosition:Rn,moduleName:Pn,moduleTracking:Ln}};let Dn=!1;const kn=()=>{try{if("visibilityState"in document&&"visible"===document.visibilityState)return 1}catch(e){}return 2},xn=function(e,t){const n=G(),r=n.dmtvEpisode||null;let o={};wn()&&!Dn&&(Dn=!0,o={autoRefresh:kn()});const i=[],a=Ce();if(a&&a.length)for(const e of a)i.push(`track:${e}`);n.feTag&&i.push(`feTag:${n.feTag}`);const s=bn();s&&i.push(`swipe:${s}`);const c=On();c&&i.push(`track:mobilehometab${c}`);Sn("signpost-last")&&i.push("track:signpost-shown");const{geo:l,region:u}=K();"GB"===l&&"SC"===u&&i.push("region:scotland"),window.getIsPaywallPuzzlesUser&&window.getIsPaywallPuzzlesUser()&&i.push("track:mailplus-puzzles-user");const d=An();if("home"===n.contentType||"topic"===n.contentType){let e=n.subChannel;if(n.channel===n.subChannel&&["/home","/ushome","/auhome"].includes(n.channel)&&"mobile"===n.renderPlatform){e+="showbiz"===(t&&t.mobileHomeTabActive||ft().get("mol-home")||"news")?"/tvshowbiz":""}pn.tedEvent("cview",{channel:e,dmtvEpisode:r,tags:i.join(","),userStatus:d,...o})}else if("article"===n.contentType){const e=Nt.isMobile||Nt.isTablet?null:vn("video"),{articleType:t,liveBlog:a,openwebEnabled:s,sources:c,sponsored:l}=K(),u="true"===l||!0===l,p=Tn();n.isFeatureArticle?i.push("feature-article"):"permabox"===t?i.push("permabox"):a?i.push("live-blog"):i.push("normal-article"),i.push(e?"videos-link":"no-links"),s&&i.push("track:openwebEnabled"),u&&i.push("sponsored");const f=(()=>{try{const{moduleTracking:e}=Mn(),t=e&&e.match(/\^(swipe(bar|tutorial)?)\^/);return t&&t[1]||null}catch(e){return null}})();f&&i.push(`track:${f}`),pn.tedEvent("view",{dmtvEpisode:r,openwebEnabled:s?1:0,paywallStatus:p,tags:i.join(","),userStatus:d,...o,...c?{sources:c}:{}})}else"profile"!==n.contentType&&"login"!==n.contentType||(i.push(n.contentType),pn.tedEvent("cview",{authors:[n.authorName],tags:i,...o}))},Un={FEATURE_ARTICLE:function(e,t){pn.tedEvent("page_event",{actions:[{action:"max",name:"feature-article-page",value:Number(t.pageNumber.split("/")[0])},{action:"set",name:"feature-article-length",value:Number(t.pageNumber.split("/")[1])}]})},GALLERY_ADVERT_STATS:function(e,t){pn.tedEvent("ad-tracking",{adverts:t.stats,type:t.type})},PAGE_AUTOREFRESH_EVENT:()=>{pn.tedEvent("page_event",{action:"store",name:"autorefresh",value:"event"})},PAGE_COMMENT_TAB_SWAPPED:function(e,t){pn.tedEvent("page_event",{action:"store",name:"rc_tab_select",value:{tab:t.tab}})},PAGE_MOBILE_TAB_CHANGE:xn,PAGE_RENDER_STARTED:xn},Bn={PAGE_AD_DISPLAYED(e,t){pn.tedEvent("ad-tracking",{type:t.type})},PAGE_AD_ERRORS(e,t){Y().debug("TED Ad Error Event",t),pn.tedEvent("ad-errors",{errorMsg:JSON.stringify(t),type:"ad-errors"})},PAGE_AD_STATS(e,t){pn.tedEvent("ad-stats",{stats:JSON.stringify(t),type:"ad-stats"})}},Wn=function(e){return(e||"").replace(/[\W_]+/g,"").toLowerCase()},Vn=function(e){return e&&!isNaN(e)?e:null},Gn=function(e){return{googleplus:"google",gplus:"google",plusone:"google"}[e]||Wn(e)},Fn={SOCIAL_BUTTON_CLICKED(e,t){pn.tedEvent("social-event",{"social-event":t.type})},SOCIAL_SHARE_CLICKED(e,t){const n={article:Vn(t.articleId),loc:Wn(t.placement),on:Gn(t.site)};t.videoId&&(n.videoId=t.videoId),t.referenceId&&(n.referenceId=t.referenceId),pn.tedEvent("share",n)},SYNDSHARE_POST(e,t){pn.tedEvent("share",{article:Vn(t.article),loc:"syndshare",on:"synd_"+t.on})}},Kn=function(e,t){const n=t.dmtvEpisode||null;"chromeless"!==t.trackingType&&pn.tedEvent("video-event",{action:e,adBlockStatus:t.adBlockStatus||"UNKNOWN",adErrorCode:t.adErrorCode,adErrorData:t.adErrorData,adSdk:t.adSDK,autoplay:t.autoplay,currentSrc:t.currentSrc,currentType:t.currentType,dmtvEpisode:n,duration:t.offset,errorMessage:t.errorMessage,id:t.videoId,initial:t.initialVideo,ito:t.ito,module:t.trackingType,percent:0===t.duration?0:t.offset/t.duration*100,play:t.play,recommendationModel:t.recommendationModel,referenceId:t.referenceId,title:t.displayName,version:t.version,videoChannel:t.videoChannel,videoPlayerType:t.playerId})},jn={VIDEO_ADVERT_ABORTED:Kn,VIDEO_ADVERT_COMPLETED:Kn,VIDEO_ADVERT_FAILED:Kn,VIDEO_ADVERT_STARTED:Kn,VIDEO_BRANDED_CONTENT_PROGRESS:Kn,VIDEO_CONFIG_CHANGE:function(e,t){"chromeless"!==t.trackingType&&pn.tedEvent("page_event",{action:"set",name:e,play:t.play,value:t.value})},VIDEO_CONTENT_ABORTED:Kn,VIDEO_CONTENT_COMPLETED:Kn,VIDEO_CONTENT_STARTED:Kn,VIDEO_EXTRA:function(e,t){"chromeless"!==t.trackingType&&pn.tedEvent("video-event",{action:e,adBlockStatus:t.adBlockStatus||"UNKNOWN",adSdk:t.adSDK,autoplay:t.autoplay,currentSrc:t.currentSrc,currentType:t.currentType,duration:t.offset,extra:{advertPlaying:t.advertPlaying,articleLinkClicked:t.articleLinkClicked,articleLinkHovered:t.articleLinkHovered,articleUrl:t.articleUrl,contentPlaying:t.contentPlaying,expand:t.fullscreen,mute:t.muted,playerClosed:t.playerClosed,timeSinceStartOfPlayer:t.timeSinceStartOfPlayer},id:t.videoId,initial:t.initialVideo,module:t.trackingType,percent:0===t.duration?0:t.offset/t.duration*100,play:t.play,referenceId:t.referenceId,title:t.displayName,version:t.version,videoChannel:t.videoChannel,videoPlayerType:t.playerId})},VIDEO_PROGRESS:function(e,t){"chromeless"!==t.trackingType&&t&&0!==t.ratio&&pn.tedEvent("video-event",{action:e,duration:t.offset,id:t.videoId,ito:t.ito,module:t.trackingType,percent:100*t.ratio,play:t.play,recommendationModel:t.recommendationModel,title:t.displayName,version:t.version,videoPlayerType:t.playerId})},VIDEO_STREAM_FAILED:Kn,VIDEO_STREAM_STARTED:Kn},Hn={},$n="carousel_swipe",Yn=(e,t)=>(n,r)=>{Hn[t]||(Hn[t]=0),Hn[t]++;const o={video_player_type:"mobile up next"};t===$n?o.swipes=Hn[t]:(r&&r.videoPosition&&(o.module_click_list_position=Number(r.videoPosition)),o.clicks=Hn[t]),pn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:o})},qn={VIDEO_CAROUSEL_CLICK:Yn("video","carousel_click"),VIDEO_CAROUSEL_SWIPE:Yn("video",$n),VIDEO_THUMBNAIL_CLICK:Yn("video","thumbnail_click")},zn=function(e,t){pn.tedEvent("push",t)},Xn={WEB_PULL_NOTIFICATION_CLICK:function(e,t){pn.tedEvent("pull",t)},WEB_PUSH_NOTIFICATION_CLICK:zn,WEB_PUSH_PRE_PROMPT_CLICK:zn,WEB_PUSH_PRE_PROMPT_IMPRESSION:zn,WEB_PUSH_PROMPT_CLICK:zn,WEB_PUSH_PROMPT_IMPRESSION:zn},Jn=e=>{pn.tedEvent("page_event",{action:"set",name:`remixd_${e}`,value:Date.now()})},Zn={REMIXD_COMPLETE:()=>Jn("complete"),REMIXD_ERROR:()=>Jn("error"),REMIXD_IMPRESSION:()=>Jn("impression"),REMIXD_MUTE:()=>Jn("mute"),REMIXD_PAUSE:()=>Jn("pause"),REMIXD_PLAY:()=>Jn("play")},Qn=(e,t)=>(n,r)=>{const{campaignId:o}=r;pn.tedEvent("page_event",{action:"set",name:`${e}_${o}_${t}`,value:Date.now()})},er={GUESTBOOK_IMPRESSION:Qn("guestbook","impression"),GUESTBOOK_LOADING_ERROR:Qn("guestbook","loading_error"),GUESTBOOK_SUBMIT_ERROR:Qn("guestbook","submit_error"),GUESTBOOK_SUBMIT_SUCCESS:Qn("guestbook","submit_success")},tr={},nr=e=>(t,n)=>((e,t)=>{tr[e]||(tr[e]=0),tr[e]++,pn.tedEvent("page_event",{action:"set",name:`openweb_${e}`,value:t&&void 0!==t.value?t.value:tr[e]})})(e,n),rr={OPENWEB_DELETE_MESSAGE:nr("delete_message"),OPENWEB_DOWNVOTE:nr("downvote"),OPENWEB_EDIT_MESSAGE:nr("edit_message"),OPENWEB_FLOATING_CLICK:nr("floating_click"),OPENWEB_FLOATING_DISMISS:nr("floating_dismiss"),OPENWEB_IMPRESSION:nr("impression"),OPENWEB_LOAD_ERROR:nr("load_error"),OPENWEB_LOAD_TIME:nr("load_time"),OPENWEB_LOGIN_START:nr("login_start"),OPENWEB_OPEN_PROFILE:nr("open_profile"),OPENWEB_POST_LOGIN_SUCCESS:nr("post_login_success"),OPENWEB_SEND_FAIL:nr("send_fail"),OPENWEB_SEND_SUCCESS:nr("submit_success"),OPENWEB_SHARE_TYPE:nr("share_type"),OPENWEB_SORT_OPEN:nr("sort_open"),OPENWEB_SORT_SELECT:nr("sort_select"),OPENWEB_UPVOTE:nr("upvote"),OPENWEB_VIEWABLE:nr("viewable")},or={PROMOTIONAL_SLOT_EVENT:(e,t)=>{if(!t||"string"!=typeof t.xpModuleName||"string"!=typeof t.eventName)return Y().error("[mol-fe/mol-fe-tracking] ted.promotionalSlot.createHandler.invalidProps",t),null;const n=t.xpModuleName.substring(0,t.xpModuleName.indexOf("@")),{eventName:r}=t;return pn.tedEvent("page_event",{action:"set",name:`promotional_slot_${n}_${r}`,value:Date.now()}),!0}},ir=(e,t)=>()=>{pn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:Date.now()})},ar={SWIPE_BAR_SHOWN:ir("swipe_bar","shown"),SWIPE_TUTORIAL_CLOSE:ir("swipe_tutorial","close"),SWIPE_TUTORIAL_SHOWN:ir("swipe_tutorial","shown")},sr={},cr=e=>(t,n)=>((e,t)=>{sr[e]||(sr[e]=0),sr[e]++,pn.tedEvent("page_event",{action:"set",name:`comments_${e}`,value:t&&void 0!==t.value?t.value:sr[e]})})(e,n),lr={COMMENTS_ADD_COMMENT_CLICK:cr("add_comment_click"),COMMENTS_CLEAR:cr("clear"),COMMENTS_CLICK:cr("click"),COMMENTS_DOWNVOTE:cr("downvote"),COMMENTS_IMPRESSION:cr("impression"),COMMENTS_LOAD_TIME:cr("load_time"),COMMENTS_LOGIN_REDIRECT:cr("login_redirect"),COMMENTS_NEW_COMMENT_CLICK:cr("new_comment_click"),COMMENTS_OVERLAY_CLOSE:cr("overlay_close"),COMMENTS_OVERLAY_OPEN:cr("overlay_open"),COMMENTS_PAGINATION_CLICK:cr("pagination_click"),COMMENTS_PROFILE_CLICK:cr("profile_click"),COMMENTS_REPLY_CLICK:cr("reply_click"),COMMENTS_REPLY_SUBMIT:cr("reply_submit"),COMMENTS_REPLY_SUBMIT_SUCCESS:cr("reply_submit_success"),COMMENTS_REPORT_CLICK:cr("report"),COMMENTS_SHOW_MORE_CLICK:cr("show_more"),COMMENTS_SUBMIT_COMMENT:cr("submit"),COMMENTS_SUBMIT_SUCCESS:cr("submit_success"),COMMENTS_UPVOTE:cr("upvote"),COMMENTS_VIEW:cr("view"),COMMENTS_VIEW_ALL:cr("view_all"),SOCIAL_SHARE_COMMENTS:cr("added")};var ur,dr;const pr={MASTHEAD_CLICK:(ur="masthead",dr="click",(e,t)=>{const{mastheadName:n}=t;pn.tedEvent("page_event",{action:"set",name:`${ur}_${n}_${dr}`,value:Date.now()})})},fr=(e,t)=>(n,r)=>{const{value:o}=r||{};pn.tedEvent("page_event",{action:"set",name:`${e}_${t}${o?`_${o}`:""}`,value:Date.now()})},mr={COMMERCE_XP_CLICK:fr("commerce_xp","click"),COMMERCE_XP_IMPRESSION:fr("commerce_xp","impression"),COMMERCE_XP_VIEW_MORE:fr("commerce_xp","view_more"),COMMERCE_XP_VIEWABLE:fr("commerce_xp","viewable")},_r=(e,t)=>()=>{pn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:Date.now()})},hr={COMMENT_CTA_CLICK:_r("commentcta","click"),COMMENT_CTA_IMPRESSION:_r("commentcta","impression")},Er={},gr=e=>(t,n)=>{return Er[r=e]||(Er[r]=0),Er[r]++,void pn.tedEvent("page_event",{action:"set",name:`mobile_menu_${r}`,value:Er[r]});var r},vr={MOBILE_MENU_COMMENT:gr("comment"),MOBILE_MENU_DESKTOP_SITE:gr("desktop_site")},yr={},wr={PAGE_FURNITURE_CLICKED:(e,t)=>{const n=t&&t.furnitureName;if(!n)return;const r=n.replace(/\s/g,"_");yr[r]||(yr[r]=0),yr[r]++,pn.tedEvent("page_event",{action:"set",name:`furniture_${r}`,value:yr[r]})}},br={},Ir=(e,t)=>(n,r)=>{br[t]||(br[t]=0),br[t]++;let o=t;"ineligible"===t&&r&&r.reason&&(o=`${t}_${r.reason.replace(/ /g,"_")}`),pn.tedEvent("page_event",{action:"set",name:`${e}_${o}`,value:br[t]})},Or={ARTICLE_TRUNCATION_EXPAND:Ir("article_truncation","expand"),ARTICLE_TRUNCATION_INELIGIBLE:Ir("article_truncation","ineligible"),ARTICLE_TRUNCATION_READ_NEXT:Ir("article_truncation","read_next"),ARTICLE_TRUNCATION_TRUNCATE:Ir("article_truncation","truncate"),ARTICLE_TRUNCATION_VIEWABLE:Ir("article_truncation","viewable")},Sr={},Tr=e=>{Sr[e]||(Sr[e]=0),Sr[e]++,pn.tedEvent("page_event",{action:"set",name:`mobile_homepage_${e}`,value:Sr[e]})},Ar={MOBILE_HOME_PAGE_NAV:(e,t)=>{const{action:n}=t;Tr(`puff_module_${n.replace(/\s/g,"_")}`)},MOBILE_HOME_PAGE_OVERLAY:()=>Tr("overlay_display"),MOBILE_HOME_PAGE_SIGNPOST_CLICK:()=>Tr("signpost_click"),MOBILE_HOME_PAGE_SIGNPOST_DISMISS:()=>Tr("signpost_dismiss"),MOBILE_HOME_PAGE_SIGNPOST_DISPLAY:()=>Tr("signpost_display"),MOBILE_HOME_PAGE_SWIPE:(e,t)=>{const{action:n,label:r}=t;Tr(`${n}_${r}`)},MOBILE_HOME_PAGE_VIEW:(e,t)=>{const{actionSource:n}=t,r=ft().get("mol-home"),o=ft().get("mol-home-default-channel");Tr(`${n||"overlay"}_choice_${r}${o?`_geo_${o.toLowerCase()}`:""}`)}},Cr=Ar,Lr={},Pr=e=>(t,n)=>((e,t)=>{Lr[e]||(Lr[e]=0),Lr[e]++,pn.tedEvent("page_event",{...t,action:"set",name:`firework_video_carousel_${e}`,value:Lr[e]})})(e,n),Rr={FIREWORK_VIDEO_CAROUSEL_ERROR:Pr("error"),FIREWORK_VIDEO_CAROUSEL_IMPRESSION:Pr("carousel_impression"),FIREWORK_VIDEO_CAROUSEL_PLAYER_NAVIGATION:Pr("player_navigation"),FIREWORK_VIDEO_CAROUSEL_PLAYER_QUIT:Pr("player_quit"),FIREWORK_VIDEO_CAROUSEL_PLAYER_TRANSITION:Pr("player_transition"),FIREWORK_VIDEO_CAROUSEL_READY:Pr("carousel_ready"),FIREWORK_VIDEO_CAROUSEL_THUMBNAIL_CLICK:Pr("thumbnail_click"),FIREWORK_VIDEO_CAROUSEL_VIDEO_CLICK_CTA:Pr("video_click_cta"),FIREWORK_VIDEO_CAROUSEL_VIDEO_CLICK_SHARE:Pr("video_click_share"),FIREWORK_VIDEO_CAROUSEL_VIDEO_COMPLETE:Pr("video_complete"),FIREWORK_VIDEO_CAROUSEL_VIDEO_FIRST_QUARTILE:Pr("video_first_quartile"),FIREWORK_VIDEO_CAROUSEL_VIDEO_IMPRESSION:Pr("video_impression"),FIREWORK_VIDEO_CAROUSEL_VIDEO_MID_POINT:Pr("video_mid_point"),FIREWORK_VIDEO_CAROUSEL_VIDEO_SESSION:Pr("video_session"),FIREWORK_VIDEO_CAROUSEL_VIDEO_START:Pr("video_start"),FIREWORK_VIDEO_CAROUSEL_VIDEO_THIRD_QUARTILE:Pr("video_third_quartile")},Nr={},Mr=(e,t)=>()=>{Nr[t]||(Nr[t]=0),Nr[t]++,pn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:Nr[t]})},Dr={PUZZLE_COMPLETE:Mr("puzzle","complete"),PUZZLE_STARTED:Mr("puzzle","started")},kr=(e,t)=>(n,r)=>{const{value:o}=r||{};pn.tedEvent("page_event",{action:"set",name:`${e}_${t}${o?`_${o}`:""}`,value:Date.now()})},xr={ARTICLE_PREVIEW_XP_CLICK:kr("article_preview_xp","click"),ARTICLE_PREVIEW_XP_IMPRESSION:kr("article_preview_xp","impression"),ARTICLE_PREVIEW_XP_VIEWABLE:kr("article_preview_xp","viewable")},Ur={},Br=(e,t)=>(n,r)=>{Ur[t]||(Ur[t]=0),Ur[t]++,pn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:r||Ur[t]})},Wr={RELATED_REPLACE_CLICK:Br("related_replace","click"),RELATED_REPLACE_IMPRESSION:Br("related_replace","impression"),RELATED_REPLACE_VIEWABLE:Br("related_replace","viewable")},Vr={},Gr=e=>()=>{Vr[e]||(Vr[e]=0),Vr[e]++,pn.tedEvent("page_event",{action:"set",name:e,value:Vr[e]})},Fr={...{CMP_LEVEL_ONE_ACCEPT:Gr("cmp_level_1_accept"),CMP_LEVEL_ONE_CONVERSION:Gr("cmp_level_1_conversion"),CMP_LEVEL_ONE_LOGIN:Gr("cmp_level_1_login"),CMP_LEVEL_ONE_PRIVACY_SETTINGS:Gr("cmp_level_1_privacy_settings"),CMP_LEVEL_ONE_SUBSCRIBE:Gr("cmp_level_1_subscribe"),CMP_LEVEL_TWO_CONVERSION:Gr("cmp_level_2_conversion"),CMP_LEVEL_TWO_SAVE_EXIT:Gr("cmp_level_2_save_exit"),CMP_LEVEL_TWO_SUBSCRIBE:Gr("cmp_level_2_subscribe")},...{ESSENTIAL_ACCOUNT_LINK_COMPLETE:Gr("essential_account_link_complete"),ESSENTIAL_ACCOUNT_LINK_HELP_CLICK:Gr("essential_account_link_help_click"),ESSENTIAL_ACCOUNT_LINK_PROMPT:Gr("essential_account_link_prompt"),ESSENTIAL_ACCOUNT_LINK_RESEND:Gr("essential_account_link_resend_email_click"),ESSENTIAL_RESTORE_PURCHASE_CLICK:Gr("essential_restore_purchase_click")}},Kr={},jr=(e,t)=>()=>{Kr[t]||(Kr[t]=0),Kr[t]++,pn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:Kr[t]})},Hr={PAYWALL_ACCOUNT_LINK_COMPLETE:jr("paywall","account_link_complete"),PAYWALL_ACCOUNT_LINK_HELP:jr("paywall","account_link_help"),PAYWALL_ACCOUNT_LINK_PROMPT:jr("paywall","account_link_prompt"),PAYWALL_ACCOUNT_LINK_RESEND:jr("paywall","account_link_resend"),PAYWALL_CONVERSION:jr("paywall","conversion"),PAYWALL_CONVERSION_BANNER:jr("paywall","conversion"),PAYWALL_CONVERSION_PROFILE:jr("paywall","conversion"),PAYWALL_HOMEMODULE_ARTICLE_CLICK:jr("paywall","article_click"),PAYWALL_HOMEMODULE_ARTICLE_COMMENTS_CLICK:jr("paywall","article_comments_click"),PAYWALL_HOMEMODULE_CHANNEL_CLICK:jr("paywall","channel_click"),PAYWALL_HOMEMODULE_SIGNUP_CLICK:jr("paywall","signup_homemodule"),PAYWALL_IMPRESSION:jr("paywall","impression"),PAYWALL_LOGIN_CLICK:jr("paywall","login_click"),PAYWALL_MASTHEAD_SIGNUP_CLICK:jr("paywall","signup_masthead"),PAYWALL_PROFILE_SIGNUP_CLICK:jr("paywall","signup_profile"),PAYWALL_RESTORE_PURCHASE_CLICK:jr("paywall","restore_purchase_click"),PAYWALL_SIGN_UP:jr("paywall","signup_article"),PAYWALL_VIEWABLE:jr("paywall","viewable"),PAYWALL_ZEPHR_FAIL_OPEN:jr("paywall","zephr_fail_open")},$r={},Yr={FACTBOX_READ_MORE_CLICK:((e,t)=>(n,r)=>{$r[t]||($r[t]=0),$r[t]++,pn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:r||$r[t]})})("factbox","read_more_click")},qr=Yr,zr={},Xr=(e,t)=>(n,r)=>{zr[t]||(zr[t]=0),zr[t]++,pn.tedEvent("page_event",{action:"set",name:`${e}_${t}`,value:r||zr[t]})},Jr={IFRAME_EMAIL_IMPRESSION:Xr("iframe_email","impression"),IFRAME_EMAIL_SUBMIT:Xr("iframe_email","submit"),IFRAME_EMAIL_SUBMIT_NO_EMAIL:Xr("iframe_email","submit_no_email"),IFRAME_EMAIL_VIEWABLE:Xr("iframe_email","viewable")},Zr=Object.assign({},mn,_n,hn,Rr,gn,Un,Bn,Fn,jn,qn,Xn,Zn,er,rr,or,pr,mr,ar,lr,hr,vr,wr,Or,Cr,Dr,xr,Hr,Wr,Fr,qr,Jr);It("TED",Zr);const Qr=pn,eo=function(e,t){return e[t]||(e[t]=new T),e[t]},to=function(e,t,n){if(typeof t!==n)throw new Error(`Missing or invalid param ${e}`)},no={},ro=function(e){return to("projectName",e,"string"),eo(no,e).promise},oo=function(e,t){t&&eo(no,e).resolve(t)},io=new S,ao={},so=[],co=function(e){return to("componentName",e,"string"),ao[e]||(ao[e]=[]),ao[e]},lo=function(e,t){to("componentName",e,"string"),to("cb",t,"function");const n=io.subscribe(`${e}.add`,((e,n)=>t(n)));return so.push(n),n},uo=function(e,t){to("componentName",e,"string"),to("cb",t,"function");const n=io.subscribe(`${e}.remove`,((e,n)=>t(n)));return so.push(n),n},po=function(e,t){to("componentName",e,"string"),t&&ao[e]&&(ao[e]=ao[e].filter((e=>e!==t)),io.publish(`${e}.remove`,t))},fo=function(e,t){return to("componentName",e,"string"),ao[e]||(ao[e]=[]),t&&!ao[e].includes(t)&&(ao[e].push(t),io.publish(`${e}.add`,t)),{remove:()=>po(e,t)}},mo=()=>{(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?M.go("DOM_READY"):(document.addEventListener("DOMContentLoaded",(()=>M.go("DOM_READY"))),window.addEventListener("load",(()=>M.go("DOM_READY"))))},_o=()=>{document.body?M.go("BODY_READY"):setTimeout(_o,5)};mo(),_o();const ho=function(e,t={}){if(!e)throw new Error('loadStyle: Missing required "href" parameter');const n=function(e,t="all"){return Array.from(document.styleSheets).find((({href:n,ownerNode:r})=>n===e&&r.media===t))}(e,t.media);return n?Promise.resolve(n.ownerNode):new Promise(((n,r)=>{const o=document.createElement("link"),i=t.before||document.querySelector("script");o.media="only x",o.rel="stylesheet",o.href=e;const a=()=>{Array.from(document.styleSheets).some((({ownerNode:e})=>e===o))?n(o):setTimeout(a,10)};o.onload=()=>n(o),o.onerror=()=>r(new URIError(`The stylesheet "${e}" is not accessible.`)),M("BODY_READY",(()=>{i.parentNode.insertBefore(o,i)})),a()})).then((e=>(e.media=t.media||"all",e)))},Eo=()=>{Array.from(document.querySelectorAll("link[rel=preload][as=style]")).forEach((e=>{e.rel=null,ho(e.href,{before:e}).then((()=>e.parentNode.removeChild(e))).catch((e=>Y().error(e)))}))},go=()=>{if((()=>{try{return document.createElement("link").relList.supports("preload")}catch(e){return!1}})())return Y().debug('"Resource Hints: preload" is supported'),!1;if(Y().debug('Polyfilling "Resource Hints: preload"'),Eo(),"complete"!==document.readyState){const e=setInterval(Eo,100);window.addEventListener("load",(()=>clearInterval(e)))}return!0},vo=function(e){Y().warn(`${e} has been deprecated`)},yo=function(){vo("loadDeferredImgs")};yo.pause=function(){vo("loadDeferredImgs.pause")},yo.resume=function(){vo("loadDeferredImgs.resume")},yo.load=function(){vo("loadDeferredImgs.load")},yo.imagesCache={getImages(){vo("loadDeferredImgs.imagesCache.getImages")},popImages(){vo("loadDeferredImgs.imagesCache.popImages")},resetCache(){vo("loadDeferredImgs.imagesCache.resetCache")}};const wo=yo,bo=function(e,t={}){if(!e)throw new Error('loadScript: Missing required "src" parameter');return new Promise(((n,r)=>{const o=document.createElement("script");let i;o.type=t.type||"text/javascript",t.async&&(o.async=!0),t.defer&&(o.defer=!0),o.onerror=()=>r(new URIError(`The script ${e} is not accessible.`)),o.onload=()=>n(o),i=t.beforeCurrentScript&&document.currentScript?document.currentScript:document.querySelector("script"),i.parentNode.insertBefore(o,i),o.src=e}))};mo(),_o();const Io=e=>(Y().warn('"onDocReady" has been deprecated. please use "later(\'DOM_READY\', callback);" instead'),M("DOM_READY",e));var Oo=n(416);let So=()=>{};Promise.all([ro("molFeDomHelperScroll"),M("DOM_READY")]).then((([e])=>{e.enableTracking&&(So=(0,Oo.io)())})).catch((e=>{throw new Error(e)}));const To={createInteractionMethod:Oo.gW,createLegacyInteractionMethod:async e=>{try{So(),await e;const{enableTracking:t}=await ro("molFeDomHelperScroll");t&&(So=(0,Oo.io)())}catch(e){throw new Error(e)}},getScrollLeft:Oo.v_,getScrollTop:Oo.hY,reenableWindowScrollMethods:So,scroll:Oo.W2,scrollBy:Oo.HN,scrollByLines:Oo.M$,scrollByPages:Oo.Tw,scrollTo:Oo.VG,scrollToElement:Oo.PA,scrollToElementIfNeeded:Oo.Dn,setHash:Oo.hd,setScrollLeft:Oo.ND,setScrollTop:Oo.LR};mo(),_o(),go();const Ao="G-C9F47K6NW6",Co=`https://www.googletagmanager.com/gtag/js?id=${Ao}&l=molFeDataLayer`,Lo="http://fbia.facebook.com/",Po=e=>{try{if("string"==typeof e){return new URL(e).hostname}}catch(e){Y().error("Failed to get hostname",e)}},Ro=e=>{try{if("string"==typeof e){return new URL(e).pathname}}catch(e){Y().error("Failed to get pathname",e)}},No=()=>new Promise((e=>{M("GA_CONFIG_READY",(()=>{e(ro("GA_CONFIG_PROPS"))}))})),Mo=Me("mol-fe-tracking-"),{getHostname:Do,getPathname:ko}=u,xo="lastNonInternalReferrer",Uo="referrer-session",Bo="referrer-external-session",Wo=e=>{if(!e)return!1;const t=Do(e);return!(!t||!t.match(/^www\d?\.(thisismoney|dailymail|thisismoneyint|dailymailint)\./i))||Do(location.href)===t},Vo=()=>{const e=document.referrer;if(Wo(e))return Mo.getItem(xo)||null;const t=e||"undefined";return Mo.setItem(xo,t),t},Go=()=>{const e=document.referrer;if(!Wo(e))return;return ko(e).split("/")[1]||void 0},Fo="google",Ko=["duckduckgo","yahoo","bing"],jo=[Fo,...Ko],Ho=["instagram","reddit","pinterest","/t.co/","facebook","snapchat"],$o=["dailymail","thisismoney","mailonsunday","mymailaccount","mailsubscriptions"],Yo="news.google",qo="com.google",zo=["drudgereport","upday","newsnow","flipboard","msn"],Xo="Search",Jo="Direct",Zo="Internal Traffic",Qo="Other Websites",ei={bing:"bing",duckduckgo:"duckduckgo",google:"google websearch",googleApp:"google app",googleNews:"google news",pushNotifications:"push notifications",widgetNotifications:"widget notifications",yahoo:"yahoo"},ti={"/t.co/":"twitter",facebook:"facebook",instagram:"instagram",pinterest:"pinterest",reddit:"reddit",snapchat:"snapchat"},ni=e=>e?e.includes("windows-widget")?ei.widgetNotifications:e.includes("push-notif")?ei.pushNotifications:null:null,ri=(e,t,n)=>t.includes(e)||n.includes(e),oi=e=>{const t=document.referrer||"",n=Vo()||"",r=((e,t)=>{let n=null;return Ko.some((r=>!!ri(r,e,t)&&(n=ei[r],!0))),n||(ri(qo,e,t)?ei.googleApp:ri(Yo,e,t)?ei.googleNews:ri(Fo,e,t)&&![qo,Yo].some((n=>ri(n,e,t)))?ei.google:n)})(n,t),o=((e,t)=>{let n=null;return Ho.some((r=>!!ri(r,e,t)&&(n=ti[r],!0))),n})(n,t),i=ni(e);return i||(r||(o||($o.some((e=>t.includes(e)))?Zo:document.referrer||e?((e,t)=>{for(const n of zo)if(ri(n,e,t))return n;return Qo})(n,t):Jo)))},ii=e=>{const t=(()=>{const e=Mo.getItem(Uo);if(!e)return null;const{updatedAt:t}=e;return Date.now()-t>18e5?null:e})(),n=(()=>{const e=Mo.getItem(Bo);if(!e)return null;const{updatedAt:t}=e;return Date.now()-t>15552e6?null:e})();var r;if((r=document.referrer)&&r.match(/^https:\/\/www\.dailymail(int)?\.co\.uk\/.*\/amp\/.*/i)){const e=Xo,t=ei.google;return Mo.setItem(Uo,{createdAt:Date.now(),referrerGroup:t,referrerType:e,updatedAt:Date.now()}),Mo.setItem(Bo,{...n||{createdAt:Date.now()},referrerGroup:t,referrerType:e,updatedAt:Date.now()}),{referrerGroup:t,referrerType:e}}if(t){if(t.updatedAt=Date.now(),Mo.setItem(Uo,t),![Zo,Jo].includes(t.referrerType)||!n)return Mo.setItem(Bo,{...n||{createdAt:Date.now()},referrerGroup:t.referrerGroup,referrerType:t.referrerType,updatedAt:Date.now()}),{referrerGroup:t.referrerGroup,referrerType:t.referrerType};if(n)return{referrerGroup:n.referrerGroup,referrerType:n.referrerType}}const o=oi(e),i=(e=>{const t=document.referrer||"",n=Vo()||"",r=e=>ri(e,n,t);return ni(e)?"Push Channels":jo.some(r)?Xo:Ho.some(r)?"Social":$o.some((e=>t.includes(e)))?Zo:document.referrer||e?Qo:Jo})(e),a=Date.now();return Mo.setItem(Uo,{createdAt:a,referrerGroup:o,referrerType:i,updatedAt:a}),[Zo,Jo].includes(i)&&n?{referrerGroup:n.referrerGroup,referrerType:n.referrerType}:(Mo.setItem(Bo,{...n||{createdAt:Date.now()},referrerGroup:o,referrerType:i,updatedAt:a}),{referrerGroup:o,referrerType:i})},ai="mol-fe-previous-render-platform";let si=null;const ci=()=>{if(si)return si;si=Wo(document.referrer)?(()=>{try{return window.localStorage.getItem(ai)}catch(e){}return null})():null;const e=navigator.userAgent.match(/snapchat/i),t=navigator.userAgent.match(/BytedanceWebview/i);let{renderPlatform:n}=G();return e&&(n="snapchat"),t&&(n="tiktok"),(e=>{try{window.localStorage.setItem(ai,e)}catch(e){}})(n),si},li=(e,t=[])=>{if("object"!=typeof e||null===e||Array.isArray(e))return"string"==typeof e?e.toLowerCase():e;const n={};let r=t=>{n[t]=li(e[t])};return Array.isArray(t)&&t.length&&(r=r=>{t.includes(r)?n[r]=e[r]:n[r]=li(e[r])}),Object.keys(e).forEach(r),n},ui=e=>"string"!=typeof e||e.startsWith("/")?e:`/${e.trim()}`,di=()=>{const e=new Date,t=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2);return`${e.getFullYear()}-${n}-${t} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}:${("0"+e.getSeconds()).slice(-2)}`};var pi=n(2304);const fi=()=>{if(pi.Register.isWebPushSupported())switch(Notification.permission){case"default":return"eligible";case"denied":return"denied";case"granted":return"subscribed"}return"not_supported"},mi="FB Logged-In User",_i="FB Logged-out User",hi="FB Registering User",Ei="Google Logged-In User",gi="Google Logged-out User",vi="Google Registering User",yi="Guest",wi="Twitter Logged-In User",bi="Twitter Logged-out User",Ii="Twitter Registering User",Oi=function(){return ft().get("_as")||yi},Si=function(){switch(Oi()){case mi:case _i:case hi:return"facebook";case Ei:case gi:case vi:return"google";case wi:case bi:case Ii:return"twitter";default:return"default"}},Ti=()=>`${Oi()}|${ft().get("_rs")||""}`,Ai="mol-fe-last-user-id",Ci=()=>{let e=null;return window.DM&&window.DM.userId?(e=window.DM.userId,((e,t)=>{try{"localStorage"in window&&window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}})(Ai,e)):e=(e=>{let t=null;try{"localStorage"in window&&(t=JSON.parse(window.localStorage.getItem(e)))}catch(e){}return t})(Ai),e},Li=e=>{if(e){const{asyncBundleVersion:t,bundleVersion:n,feTag:r,syncBundleVersion:o,videoBundleVersion:i,renderPlatform:a}=e,s="mobile"===a;return`${s?"":n}:${o}:${t}:${i}:${r}:${s?n:""}`}return":::::"},Pi=e=>{if(e instanceof Date)return e.toISOString().split("T")[0]},Ri=e=>{if(e instanceof Date)return e.toISOString().split("T")[1].split(":")[0]},Ni=()=>{try{const e=new URLSearchParams(window.location.search).get("searchPhrase");if("string"==typeof e)return e.toLowerCase()}catch(e){}},Mi=(e,t)=>{if(t<0)throw new RangeError("Exponent must be positive");if(!t)return t+window.BigInt(1);let n=e,r=t;for(;--r;)n*=e;return n},Di=e=>{let t=e;const n=(e=>e.includes(":")?6:e.includes(".")?4:null)(t);let r=window.BigInt(0),o=window.BigInt(0);if(4===n){for(const e of t.split(".").map(Number).reverse())r+=window.BigInt(e)*Mi(window.BigInt(2),window.BigInt(o)),o+=window.BigInt(8);return{number:r,version:n}}if(6===n){const e={};if(t.includes(".")&&(e.ipv4mapped=!0,t=t.split(":").map((e=>{if(e.includes(".")){const t=e.split(".").map((e=>Number(e).toString(16).padStart(2,"0")));return`${t[0]}${t[1]}:${t[2]}${t[3]}`}return e})).join(":")),t.includes("%")){let n;[,t,n]=/(.+)%(.+)/.exec(t),e.scopeid=n}const i=t.split(":"),a=i.indexOf("");if(-1!==a)for(;i.length<8;)i.splice(a,0,"");for(const e of i.map((e=>e?`0x${e}`:"0")).map(Number).reverse())r+=window.BigInt(e)*Mi(window.BigInt(2),window.BigInt(o)),o+=window.BigInt(16);return e.number=r,e.version=n,e}return null},ki=[["8.27.67.23","223"],["104.28.4.1","33623"],["146.75.128.0","32256"],["172.224.224.0","97285"],["2606:54c0:180::","425542349672951312235364352"],["2606:54c0:400::","425541906951093543206125568"],["2606:54c0:680::","6615242103377994917701746688"],["2606:54c0:1d00::","14507110001396246759860076544"],["2606:54c0:4d80::","14042882486664229156772904960"],["2a02:26f7:b3c0:4000::","22370038001675620477608919040"],["2a04:4e41:0000:0000::","94298445985973994482827264"]],xi=()=>{const{clientIP:e}=K();return(e=>{try{if(!("BigInt"in window))return!1;const{number:t,version:n}=Di(e)||{};if(!t)return!1;for(const e of ki.filter((([e])=>e.includes(":")===(6===n)))){const[n,r]=e,{number:o}=Di(n),i=o+window.BigInt(r);if(t>o&&t<i)return!0}}catch(e){}return!1})(e)},Ui=()=>{try{const e=new URLSearchParams(window.location.search),t=e.get("trackingPagePath"),n=e.get("trackingPageTitle");if(!t&&!n||window.parent===window||!document.referrer)return null;const r={};return t&&(r.page_location=`${document.referrer}${t.replace(/^\//,"")}`),n&&(r.page_title=n),r}catch(e){}return null},Bi=()=>{try{return Object.entries(window.adsMVTResults.selectedScenarios).map((([e,t])=>`${e}=${t}`)).join(",")}catch(e){Y().error("Error getting ads test scenario for GA",e)}return null},Wi=async()=>{if("cookieDeprecationLabel"in navigator){return await navigator.cookieDeprecationLabel.getValue()}},Vi=Me("mol-fe-tracking-sailthru-"),Gi="session",Fi=()=>{const e=(()=>{const e=Vi.getItem(Gi);return!e||!e.updatedAt||Date.now()-e.updatedAt>18e5?null:e})(),t=new URLSearchParams(window.location.search),n=t.get("st_profile")||e&&e.sailthruUserId||void 0,r=t.get("st_blast")||e&&e.sailthruBlastId||void 0;return(n||r)&&(({sailthruBlastId:e,sailthruUserId:t})=>{const n=Vi.getItem(Gi);Vi.setItem(Gi,{...n||{createdAt:Date.now()},sailthruBlastId:e,sailthruUserId:t,updatedAt:Date.now()})})({sailthruBlastId:r,sailthruUserId:n}),{sailthruBlastId:r,sailthruUserId:n}},{getHostname:Ki}=u,ji=async()=>{const e=G(),{articleId:t,articleTitle:n,authorName:r,channel:o,contentType:i,domain:a,loggedInStatus:s,partnerSite:c,publishedDate:l,subChannel:u,subChannel2:d,subChannel3:p,topics:f}=e,{openwebEnabled:m,pageType:_,paywalledCountries:h,sponsored:E,sponsorLabel:g,sponsorName:v}=K();let y=e.renderPlatform;const w=navigator.userAgent.match(/snapchat/i),b=navigator.userAgent.match(/BytedanceWebview/i);y=location.href.includes("/embed/gamp-video/")?"mobile amp":y,y=location.href.includes("/embed/fbia-video/")?"mobile fbia":y,w&&(y="snapchat"),b&&(y="tiktok");const I="true"===E||!0===E,O=y&&"mobile fbia"===y.toLowerCase(),S=O?Lo:document.referrer,T=O&&Lo||Vo()||S,{ico:A,ito:C,utm_source:L}=(()=>{try{const e=location.href;return new(le())(e,!0).query||{}}catch(e){return{}}})();let P,R;C&&!L&&(P={medium:"ito",source:C});const N=xi();window.applePrivateRelay=N;const{moduleName:M,moduleTracking:D,moduleListPosition:k}=Mn(),{referrerType:x,referrerGroup:U}=ii(C),B=Mo.getItem(Uo),{sailthruBlastId:W,sailthruUserId:V}=Fi(),F=Ce();try{if("channel"===_&&o===u&&["/home","/ushome","/auhome"].includes(o)&&"mobile"===y){R=ft().get("mol-home")||"news";const e=document.querySelector(".home-tabs-container");e&&"showbiz"===e.dataset.selectedHpTab&&(R="showbiz")}}catch(e){}const j=m||"article"!==_,$={ads_mvt_test_scenario:Bi(),article_status:Tn(),article_features:H(),article_id:t,article_title:n,author_name:r,bundle_version:Li(e),campaign:P,url_channel:ui(o),chrome_sandbox_label:await Wi(),content_group1:i,content_type:i,domain:a,ico_internal_hit:A,internal_search_terms:Ni(),ito_external_hit:C,last_referrer_group:B&&B.referrerGroup||"undefined",last_referrer_type:B&&B.referrerType||"undefined",logged_in_status:(Y=s,Y&&Y.replace(/\s+/g,"")),icoInternalHit:A,icoInternalSession:A,itoExternalHit:C,itoExternalSession:C,mobile_home_tab_active:R,mobile_home_tab_choice:On()||"undefined",module_click_list_position:k,module_name:M,module_tracking:D,multivariant_experiments:F&&F.length?F.join(","):"undefined",openweb_enabled:j?"true":"false",page_url:location.href||"",partner_site:c||void 0,previous_page_rendered_platform:ci()||"undefined",article_published_date:Pi(l),article_published_hour:Ri(l),puzzle_user_type:wt(),referrer:S,referrer_type:x,referrer_group:U,referring_channel:Go()?ui(Go()):"undefined",registration_id:Ci()||"undefined",rendered_platform:y,sailthru_blast_id:W,sailthru_user_id:V,sponsor_name:v||g||I&&"sponsored"||void 0,url_subchannel_level_1:ui(u),url_subchannel_level_2:ui(d),url_subchannel_level_3:ui(p),referringDomain:"undefined"===T?T:Ki(T),referringUrl:T,subscription_entitlements:Cn()||"undefined",swipe_funnel_status:bn()||"undefined",article_tags:f&&f.length>0?f.sort(((e,t)=>e.localeCompare(t))).join(","):void 0,user_type:An(),user_agent:navigator.userAgent,user_login_details:Ti(),user_local_server_date:di(),push_notification_status:fi(),paywall_countries:h&&h.length&&h.join(",")||"undefined",...Ui()||{}};var Y;for(const e of["ito_external_hit","ito_external_session","referring_url","referring_domain","itoExternalHit","itoExternalSession","referringUrl","referringDomain"])$[e]||($[e]="undefined");return(e=>{for(const t of Object.keys(e))e[t]||delete e[t];return e})($)},Hi=e=>new Promise((t=>{Yi("get",e,"client_id",(e=>{t(e)}))})),$i=()=>{const e=navigator.userAgent.match(/snapchat/i),t=navigator.userAgent.match(/BytedanceWebview/i);return e||t?{ga4Id:"G-K7GKTZV547"}:{ga4Id:Ao,ga4IdInDigital:"AW-670087309"}},Yi=function(){window.molFeDataLayer.push(arguments)},qi=e=>{Yi("set","user_properties",e)},zi=async()=>{const{ga4Id:e,ga4IdInDigital:t}=$i(),n=await ji(),r=li(n,["referrer_type","last_referrer_type"]),{environment:o}=G(),i="production"===o?["dailymail.co.uk","thisismoney.co.uk","mailsubscriptions.co.uk","themailsubscriptions.co.uk","mymailaccount.co.uk"]:["dailymailint.co.uk","thisismoneyint.co.uk","stagingmailplussubs.coderush.io","uat-dlv.nonprod-mailsubscriptions.gcpp.io","main-mma-preprod.coderush.io"],{registration_id:a,puzzle_user_type:s,sailthru_user_id:c,...l}=r,u=await(e=>{try{return Promise.race([Hi(e),(t=1e3,new Promise((e=>setTimeout(e,t))))])}catch(e){return void Y().error("Error getting client id",e)}var t})(e),d=(()=>{try{const e=Le("MOL-FE-WEB-PUSH_SUBSCRIPTION_STATUS");if(e){const{state:t,metadata:{crossOrgUserIds:n}}=e;if("ready"===t&&Array.isArray(n)&&n.length)return n[n.length-1]}return null}catch(e){return Y().error("Error getting cross org user id",e),null}})();Yi("config",e,{clientId:u,linker:{accept_incoming:!0,domains:i},send_page_view:!1,user_properties:{client_id:u,puzzle_user_type:s,registration_id:a,sailthru_user_id:c,...d?{push_notif_user_id:d}:{}},...l}),oo("molFeGAProps",r),t&&Yi("config",t),r.puzzle_user_type&&qi({puzzle_user_type:r.puzzleUserType})};let Xi=null;const Ji=()=>(Xi||(Xi=zi()),Xi),Zi=async e=>{const{ga4Id:t}=$i();await Ji(),Yi("event","page_view",{...li(e),send_to:t})},Qi=async(e,t,n,r)=>{const{ga4Id:o}=$i();await Ji();let i=n;if(!i){const n=t&&t.event_category||"unknown";i=`${n}_${e}`.replace(/\s/g,"_"),i.length>40&&(i=i.substring(0,40))}i&&(r?Yi("event",i,{...li(t),send_to:o}):setTimeout((()=>{Yi("event",i,{...li(t),send_to:o})}),500))},ea=()=>{try{return"visibilityState"in document?document.visibilityState:"unsupported"}catch(e){return"unsupported"}},ta=(e,t)=>{const n=wn(),{contentType:r}=G(),{pageType:o}=K(),i="article"===o||"article"===r?1:void 0,a=(()=>{const{pageType:e}=K();if("article"!==e)return;return{hasBeenPaywalled:"has_been_paywalled_article_views",isPaywalled:"paywall_article_views",isPaywalledForOthers:"is_paywalled_for_others_article_views",isRestricted:"is_restricted_article_views",none:"free_article_views"}[Tn()]})();if(n){const e={auto_refreshes:1,event_category:"auto refresh",visibility_state:ea()};Qi(`auto refresh ${n}`,e,`auto_refresh_${n}`)}else Zi({article_views:i,mobile_home_tab_active:t&&t.mobileHomeTabActive,...a?{[a]:1}:{}})},na={PAGE_MOBILE_TAB_CHANGE:ta,PAGE_RENDER_STARTED:ta},ra={SOCIAL_SHARE_CLICKED:function(e,t){const n=G(),r=t.pageMetadata||{},o=t.site+"_share_article-"+t.placement,i=r.articleTitle||t.articleTitle,a=r.articleId||t.articleId,s=r.channel||n.channel,c=r.channel||n.subChannel;let l,u,d,p,f;if(t.version&&"videoplayer"===t.placement&&(l="videoplayer_"+t.version),t.id&&t.nthPosition&&(u="image "+(t.nthPosition-1)+" image share",d=t.id),t.videoTitle&&(p=t.videoTitle),t.videoId&&(f=t.videoId),"video-lead"===t.placement&&!p&&!f)try{const e=document.querySelector(".video-lead-info .video-headline"),t=e&&e.querySelector("a"),n=t?t.getAttribute("href"):window.location.href;p=e.innerText.trim().replace("Video: ",""),f=n&&n.match(/video-(\d+)/)[1]}catch(e){}Qi("click",{article_id:a,article_title:i,channel:s,event_category:"social share",event_label:o,gallery_image_action:u,gallery_image_id:d,non_interaction:!1,social_share_clicks:1,social_share_type:o,url_channel:s,url_subchannel_level_1:c,video_internal_id:f,video_player_version:l,video_title:p},"social_share")}},oa=e=>{let t=`${e.playerType} ${e.playerId}`;e.fullscreen&&(t+="-fullscreen");const n=e.autoplay?"autoplay":"click to play",r=e.displayName,o=e.referenceId,i=e.videoId,a=e.adsEnabled?"true":"false";let s,c,l,u,d,p,f;const m=e.animatedPreviewEnabled?"withpreview":"nopreview",_=e.initialVideo?"inline":"related",h=e.pageMetadata.articleId?"article":"non-article";return"gampembedded"===e.playerId&&(s="mobile amp"),"fbiaembedded"===e.trackingType&&(s="mobile fbia",c=Lo),e.version&&(l="videoplayer_"+e.version),"thirdPartyEmbedded"===e.trackingType?(u="video_module^embedded^"+_+"^offsite",d="offsite^"+_,c=document.referrer,s="Offsite"):"image_gallery"===e.trackingType?(d=e.pageMetadata.channel+"^"+e.pageMetadata.articleId,u="video_module^"+h+"^"+e.trackingType+"^"+e.pageMetadata.subChannel):e.playlist||"commercialVideoPlayer"===e.trackingType||"editorialVideoPlayer"===e.trackingType||"autoplayInlineVideoPlayer"===e.trackingType?(d=e.pageMetadata.channel+"^"+e.trackingType,u="video_module^"+e.trackingType+"^"+e.channelShortName+"^"+e.pageMetadata.subChannel):(d=e.pageMetadata.channel+"^"+(""===e.pageMetadata.articleId?_:e.pageMetadata.articleId),u="video_module^"+h+"^"+_+"^"+e.pageMetadata.subChannel),u?u.includes("^"+m)||(u+="^"+m):u="video_module^"+m,"dmtv-promo-xp-module"!==e.trackingType||u.includes("^dmtv-promo-xp-module")||(u+="^dmtv-promo-xp-module"),e.pageMetadata.articleId&&("embedded"===e.trackingType||u.match(/\^article\^(inline|image_gallery)\^/))?(p=e.pageMetadata.articleId,f=e.pageMetadata.articleTitle):(p="video not embedded within the article",f="video not embedded within the article"),{article_id:p,article_title:f,content_type:"video",event_category:"video",event_label:n,non_interaction:!0,play_method:n,referrer:c,rendered_platform:s,video_ads_enabled:a,video_channel_article_id:d,video_external_id:i,video_internal_id:o,video_module:u,video_player_type:t,video_player_version:l,video_title:r}},ia={"M:25-50":"25","M:50-100":"50"},aa={"M:25-50":"video_25_views","M:50-100":"video_50_views"},sa={"M:25-50":"video25Increase","M:50-100":"video50Increase"},ca=["M:25-50","M:50-100"],la=(e=>{const t={};for(const n of Object.keys(e))t[n]=(t,r)=>{"string"==typeof r.trackingType&&r.trackingType.includes("chromeless")||e[n](t,r)};return t})({VIDEO_ADVERT_ABORTED:function(e,t){const n=oa(t);Qi("advert abort",n)},VIDEO_ADVERT_COMPLETED:function(e,t){const n=oa(t);Qi("advert complete",n)},VIDEO_ADVERT_STARTED:function(e,t){const n=oa(t);Qi("advert start",{...n,video_advert_starts:1})},VIDEO_CONTENT_ABORTED:function(e,t){const n=oa(t);Qi("abort",n)},VIDEO_CONTENT_COMPLETED:function(e,t){const n=oa(t);Qi("content complete",{...n,video_completes:1})},VIDEO_CONTENT_STARTED:function(e,t){const n=oa(t);Qi("content start",n)},VIDEO_PROGRESS:function(e,t){if(!t.segment||!ca.includes(t.segment))return;const n=ia[t.segment],r=oa(t),o=aa[t.segment],i=sa[t.segment];Qi(n,{...r,[o]:1,[i]:1})},VIDEO_STREAM_STARTED:function(e,t){const n=t.continuePlayList?"stream continuous play":"stream start",r=oa(t);Qi(n,{...r,non_interaction:!t.autoplay,video_views:1})}}),ua=e=>(t,n={})=>{const r={event_category:"video",non_interaction:!1},{videoPlayerType:o,videoPosition:i}=n;o&&(r.video_player_type=o),i&&(r.module_click_list_position=Number(i)),Qi(e,r)},da={VIDEO_CAROUSEL_CLICK:ua("carousel click"),VIDEO_CAROUSEL_SWIPE:ua("carousel swipe"),VIDEO_THUMBNAIL_CLICK:ua("thumbnail click")},pa=function(){if(pi.Register.isWebPushSupported())switch(Notification.permission){case"default":return"eligible";case"denied":return"denied";case"granted":return"subscribed"}return"not_supported"},fa=e=>{const t={...e,event_category:"push notif",push_notification_status:pa()};return delete t.__numberOfAttempts,delete t.channel,delete t.subChannel,JSON.parse(JSON.stringify(t))},ma={WEB_PULL_NOTIFICATION_CLICK:function(e,t){const n={...t,event_category:"pull notif"};delete n.__numberOfAttempts,delete n.channel,delete n.subChannel,Qi("click",{...n,event_label:`${t.campaignId}:${t.crossOrgUserId}`,non_interaction:!1,pull_notification_campaign_id:t.campaignId})},WEB_PUSH_NOTIFICATION_CLICK:function(e,t){const n=`${t.campaignId}:${t.subscriptionId}`;Qi("click",{...fa(t),event_label:n,non_interaction:!1,push_notification_campaign_id:t.campaignId,push_notification_id:n})},WEB_PUSH_PRE_PROMPT_CLICK:function(e,t){const n="granted"===t.permission?"granted":"closed";Qi("pre prompt choice",{...fa(t),event_label:n,non_interaction:!1,pre_prompt_choice:n})},WEB_PUSH_PRE_PROMPT_IMPRESSION:function(e,t){Qi("pre prompt impression",{...fa(t),non_interaction:!0})},WEB_PUSH_PROMPT_CLICK:function(e,t){const n="default"===t.permission?"closed":t.permission;Qi("prompt choice",{...fa(t),event_label:n,non_interaction:!1,prompt_choice:n})},WEB_PUSH_PROMPT_IMPRESSION:function(e,t){Qi("prompt impression",{...fa(t),non_interaction:!0})}},_a={AFFILIATE_CAROUSEL_CLICK:(e=>(t,n)=>{Qi(n.hrefTxt,{event_category:e,event_label:n.hrefUrl,link_text:n.hrefTxt,link_url:n.hrefUrl,non_interaction:!1},"affiliate_click")})("affiliate click")},ha=(e,t)=>{var n;return{fff_actions:["BF",t,e.bfSource||"",(n=e.position,parseFloat(n)||0),"",e.mainProductId||"",e.relatedProductId||"",e.category||"","","",""].join("^").replace(/\^+$/,""),fff_layout:["inline",e.bfSource||"",e.articleId||""].join("^").replace(/\^+$/,"")}},Ea=(e,t,n)=>(r,o)=>{Qi(t,{event_category:e,non_interaction:Boolean(n),...ha(o,t)})},ga={BF_BUY_NOW_CAROUSEL_CLICKED:Ea("bf","alternative product buynow clicked"),BF_BUY_NOW_HEADER_CLICKED:Ea("bf","main product buynow click"),BF_CAROUSEL_IN_VIEW:Ea("bf","product view",!0),BF_CAROUSEL_ROTATE_CLICKED:Ea("bf","carousel use"),BF_IMPRESSION:Ea("bf","product impression",!0),BF_SHOW_MORE_CLICKED:Ea("bf","showmore click")},va={AD_BILLBOARD_CLOSED:((e,t)=>()=>{Qi(t,{event_category:e,non_interaction:!1})})("billboard ad","close")},ya={FIDELITY_CAMPAIGN_EVENT:(e=>(t,n)=>{const r=n.name.replace("fidelity-campaign-","").replaceAll("_"," ").replaceAll("-"," ");Qi(r,{event_category:e,event_label:n.value,non_interaction:!1,type_of_fidelity_campaign:n.value},"fidelity_campaign_click")})("fidelity campaign click")},wa={SCREENSAVER_DOWNLOADED:((e,t)=>()=>{Qi(t,{event_category:e,non_interaction:!1})})("screensaver","download click")},ba=(e,t)=>(n,r)=>{let o={event_category:e,event_label:r.searchTerm,non_interaction:!1,search_term:r.searchTerm};"site search"===e&&(o={...o,internal_search_terms:r.searchTerm,internal_searches:1}),Qi(e,o,t)},Ia={SITE_SEARCH:ba("site search","site_search"),WEB_SEARCH:ba("web search","web_search")},Oa=(e,t,n)=>()=>{Qi(t,{event_category:e,non_interaction:Boolean(n)})},Sa={REMIXD_COMPLETE:Oa("remixd audio player","complete",!0),REMIXD_ERROR:Oa("remixd audio player","error",!0),REMIXD_IMPRESSION:Oa("remixd audio player","present on page",!0),REMIXD_MUTE:Oa("remixd audio player","mute"),REMIXD_PAUSE:Oa("remixd audio player","pause"),REMIXD_PLAY:Oa("remixd audio player","play")},Ta=(e,t,n,r)=>(o,i)=>{Qi(t,{event_category:e,event_label:i&&i.newsletterName||n,non_interaction:Boolean(r),type_of_newsletter:i&&i.newsletterName||n})},Aa={NEWSLETTER_ERROR:Ta("newsletter","submit error","generic newsletter"),NEWSLETTER_POPUP_SHOW:Ta("newsletter","impression","newsletter popup",!0),NEWSLETTER_POPUP_SUBMIT:Ta("newsletter","submit success","newsletter popup"),NEWSLETTER_PRIVACY_CLICK:Ta("newsletter","privacy click","generic newsletter"),NEWSLETTER_SHOW:Ta("newsletter","impression","generic newsletter",!0),NEWSLETTER_SUBMIT:Ta("newsletter","submit success","generic newsletter"),SAFARI_NEWSLETTER_SHOW:Ta("newsletter","impression","safari popup",!0),SAFARI_NEWSLETTER_SUBMIT:Ta("newsletter","submit success","safari popup")},Ca={PAGE_MODULE_CLICKED:(e,t)=>{if(!("localStorage"in window))return;const{element:n,moduleName:r,position:o,interaction:i,linkType:a,listPosition:s,trackingType:c,videoId:l}=t,u=[],d=G(),p=c||"ck";if(u.push(r,o,d.channel),u.push(d.subChannel||""),u.push(d.subChannel2||""),u.push(d.pageName),u.push(s||""),u.push(a||""),u.push(d.contentType||""),u.push(l?"video":d.articleId||""),u.push(i||""),"el"!==p){const e=n.href.split("/");u.push(e.slice(3,6).join("/"))}else n&&n.href?u.push(n.href):u.push("");window.localStorage.setItem("module_tracking",u.join("^")),window.localStorage.setItem("module_tracking_name",r),s&&window.localStorage.setItem("module_tracking_list_position",s)}},La=(e,t)=>(n,r)=>{const o={event_category:r.contentType,gallery_image_action:r.galleryTitle,gallery_image_id:r.threadId,gallery_image_swipe_count:r.galleryId,non_interaction:!1};"image"===r.contentType&&(o.image_views=1);const i="videoimage"===r.contentType?"video_image":r.contentType;Qi(e,o,`gallery_${i}_${t||e}`)},Pa={GALLERY_IMAGE_VIEWED:La("view",null),GALLERY_OPENED:La("start view","view_start")},Ra=(e,t)=>()=>{Qi(t,{event_category:e,non_interaction:!1})},Na={NEWZIT_NOTIFICATION_PROMO_CLOSE:Ra("newzit promo","close"),NEWZIT_NOTIFICATION_PROMO_OPEN:Ra("newzit promo","open")},Ma=(e,t,n=!1)=>()=>{Qi(t,{event_category:e,non_interaction:n})},Da={DESKTOP_HOME_PAGE_OVERLAY:Ma("desktop homepage overlay","display",!0),MOBILE_HOME_PAGE_NAV:(e,t)=>{const{action:n,label:r}=t;Qi(n,{event_category:"mobile homepage nav",event_label:r,non_interaction:!1,selected_value:r},"bell icon click"===t.action&&"mobile_bell_icon_click"),"bell icon click"===n&&Zi({mobile_home_tab_active:"alerts-overlay"})},MOBILE_HOME_PAGE_OVERLAY:Ma("mobile homepage overlay","display",!0),MOBILE_HOME_PAGE_SIGNPOST_CLICK:Ma("mobile homepage signpost","click"),MOBILE_HOME_PAGE_SIGNPOST_DISMISS:Ma("mobile homepage signpost","dismiss"),MOBILE_HOME_PAGE_SIGNPOST_DISPLAY:Ma("mobile homepage signpost","display",!0),MOBILE_HOME_PAGE_SWIPE:(e,t)=>{const{action:n,label:r}=t;Qi("choice",{event_action:n,event_category:"mobile homepage nav",event_label:r,non_interaction:!1,selected_value:r},"mobile_homepage_nav_choice_"+("news"===r?"news":"showbiz"))},MOBILE_HOME_PAGE_VIEW:(e,t)=>{const n=t.swipe||ft().get("mol-home"),r=ft().get("mol-home-default-channel");let o="Mobile Landing Homepage";switch(n){case"news":o="Just the News";break;case"showbiz":o="Just the Showbiz";break;case"desktop":o="Full Homepage",r&&(o+=` ${r}-CA`)}t.actionSource&&(o+=` ${t.actionSource}`),Qi("choice",{event_category:"mobile homepage overlay",event_label:o,mobile_home_preference:o,non_interaction:!1,selected_value:o})}},ka="Successfully Logged In",xa="Registration Activated",Ua="Registration Started",Ba="Registration Submitted",Wa={PAGE_RENDER_STARTED:()=>{const e=G(),t=Si(),n={event_category:"account",event_label:t,non_interaction:!1,registration_method:t};switch(e.registrationEntry){case xa:Qi("activate registration",n);break;case Ua:Qi("new registration",n);break;case Ba:Qi("submit registration",n);break;case ka:Qi("login success",n)}},USER_AUTH_SITE_REG_ERROR_ONCE:((e,t)=>()=>{Qi(t,{event_category:e,event_label:Si(),non_interaction:!1})})("account","registration error")},Va=(e,t,n=!1)=>(r,o)=>{const i={event_category:e,event_label:o&&o.tab||o&&o.label||void 0,non_interaction:n,selected_value:o&&o.tab||o&&o.label||void 0};o&&void 0!==o.value&&(i.value=o.value,"load time"===t&&(i.load_time=o.value)),Qi(t,i)},Ga={COMMENTS_ADD_COMMENT_CLICK:Va("comment","add comment click"),COMMENTS_CLEAR:Va("comment","clear"),COMMENTS_CLICK:Va("comment","click"),COMMENTS_DOWNVOTE:Va("comment","downvote"),COMMENTS_IMPRESSION:Va("comment","impression",!0),COMMENTS_LOAD_TIME:Va("comment","load time",!0),COMMENTS_LOGIN_REDIRECT:Va("comment","login redirect"),COMMENTS_NEW_COMMENT_CLICK:Va("comment","new comment click"),COMMENTS_OVERLAY_CLOSE:Va("comment","overlay close"),COMMENTS_OVERLAY_OPEN:Va("comment","overlay open"),COMMENTS_PAGINATION_CLICK:Va("comment","pagination click"),COMMENTS_PROFILE_CLICK:Va("comment","profile click"),COMMENTS_REPLY_CLICK:Va("comment","reply click"),COMMENTS_REPLY_SUBMIT:Va("comment","reply submit"),COMMENTS_REPLY_SUBMIT_SUCCESS:Va("comment","reply submit success"),COMMENTS_REPORT_CLICK:Va("comment","report"),COMMENTS_SHOW_MORE_CLICK:Va("comment","show more"),COMMENTS_SUBMIT_COMMENT:Va("comment","submit"),COMMENTS_SUBMIT_SUCCESS:Va("comment","submit success"),COMMENTS_UPVOTE:Va("comment","upvote"),COMMENTS_VIEW:Va("comment","view"),COMMENTS_VIEW_ALL:Va("comment","view all click"),PAGE_COMMENT_TAB_SWAPPED:Va("comment tab","view"),SOCIAL_SHARE_COMMENTS:Va("comment","added")},Fa={PAGE_EXTERNAL_LINK_CLICKED_GA:(e,t)=>{Qi(t.innerText,{event_category:"outbound click",event_label:t.href,link_text:t.innerText,link_url:t.href,non_interaction:!1},"outbound_click")}},Ka=(e,t,n)=>(t,r)=>{const{productName:o,location:i}=r;Qi("bar"===i?"product bar click":"product click",{event_category:e,event_label:o,non_interaction:Boolean(n)})},ja={PRODUCT_BUTTON_LINK:Ka("product",0,!1),PRODUCT_IMAGE_LINK:Ka("product",0,!1),PRODUCT_PRICE_LINK:Ka("product",0,!1),PRODUCT_TITLE_LINK:Ka("product",0,!1)},Ha={PAGE_RENDER_STARTED:()=>{const{betwayBannerPresent:e}=G();e&&Qi("display betway breaking news",{event_category:"banner",non_interaction:!0})}},$a=(e,t,n)=>(r,o)=>{Qi(t,{event_category:e,event_label:o.type,non_interaction:Boolean(n),type_of_smart_banner:o.type})},Ya={SMART_BANNER_CLICKED:$a("smart banner","click"),SMART_BANNER_SHOWN:$a("smart banner","impression",!0)},qa=(e,t,n)=>(r,o)=>{const{campaignId:i}=o;Qi(t,{campaign_id:i,event_category:e,event_label:i,non_interaction:Boolean(n)})},za={GUESTBOOK_IMPRESSION:qa("guestbook","impression",!0),GUESTBOOK_LOADING_ERROR:qa("guestbook","load error",!0),GUESTBOOK_SUBMIT_ERROR:qa("guestbook","submit error"),GUESTBOOK_SUBMIT_SUCCESS:qa("guestbook","submit success")},Xa=(e,t,n,r)=>(o,i)=>{const a={event_category:e,non_interaction:Boolean(n)};i&&void 0!==i.value&&(a.value=i.value,"load time"===t&&(a.load_time=i.value)),i&&i.label&&(a.event_label=i.label,a.selected_value=i.label),i&&i.moduleType&&(a.openweb_module_type=i.moduleType),Qi(t,a,r)},Ja={OPENWEB_DELETE_MESSAGE:Xa("openweb","comment delete"),OPENWEB_DOWNVOTE:Xa("openweb","downvote"),OPENWEB_EDIT_MESSAGE:Xa("openweb","edit message",!1,"openweb_comment_edit"),OPENWEB_FLOATING_CLICK:Xa("openweb","floating click"),OPENWEB_FLOATING_DISMISS:Xa("openweb","floating dismiss"),OPENWEB_IMPRESSION:Xa("openweb","impression",!0),OPENWEB_LOAD_ERROR:Xa("openweb","load error",!0),OPENWEB_LOAD_TIME:Xa("openweb","load time",!0),OPENWEB_LOGIN_START:Xa("openweb","login start"),OPENWEB_OPEN_PROFILE:Xa("openweb","open profile",!1,"openweb_open_profile_user"),OPENWEB_POST_LOGIN_SUCCESS:Xa("openweb","login success"),OPENWEB_SEND_FAIL:Xa("openweb","submit error"),OPENWEB_SEND_SUCCESS:Xa("openweb","submit success"),OPENWEB_SHARE_TYPE:Xa("openweb","share type",!1,"openweb_comment_share"),OPENWEB_SORT_OPEN:Xa("openweb","sort open"),OPENWEB_SORT_SELECT:Xa("openweb","sort select"),OPENWEB_UPVOTE:Xa("openweb","upvote"),OPENWEB_VIEWABLE:Xa("openweb","view",!0)},Za=["click","viewable"],Qa=["impression","viewable"],es={PROMOTIONAL_SLOT_EVENT:(e,t)=>{const{eventName:n,xpModuleName:r,campaignId:o}=t;if(Qa.includes(n))return;const i=`${r}${o?`|${o}`:""}`;Qi(n,{event_category:"promotional slot click",event_label:i,non_interaction:Boolean(!Za.includes(n)),type_of_promotional_slot:i})}},ts=(e,t,n)=>(r,o)=>{const{promotion:i,urlClicked:a,articlePosition:s}=o;Qi(t,{article_position:s,event_category:e,event_label:i,non_interaction:Boolean(n),type_of_promotions_module:i,url_clicked:a})},ns={PROMOTIONS_XP_CLICK:ts("promotions module","click"),PROMOTIONS_XP_VIEW_MORE:ts("promotions module","view more")},rs=(e,t,n,r)=>(o,i)=>{const{company:a,headline:s}=i;Qi(t,{event_category:e,event_label:r||"impression"===t?s:a,non_interaction:Boolean(n),type_of_tim_affiliate:r||"impression"===t?s:a})},os={TIM_AFFILIATE_BOTTOM_LINK_CLICKED:rs("timAffiliate","click",!1,!0),TIM_AFFILIATE_IMPRESSION:rs("timAffiliate","impression",!0),TIM_AFFILIATE_LEARN_MORE_CLICKED:rs("timAffiliate","click",!1)},is=(e,t,n)=>(r,o)=>{const{company:i}=o;Qi(t,{company_name:i,event_category:e,event_label:i,non_interaction:Boolean(n)})},as={COMPANY_REVIEW_IMPRESSION:is("companyReview","impression",!0),COMPANY_REVIEW_LEARN_MORE_CLICKED:is("companyReview","click"),COMPANY_REVIEW_LESS_CONTENT_CLICKED:is("companyReview","click"),COMPANY_REVIEW_MORE_CONTENT_CLICKED:is("companyReview","click")},ss=(e,t,n)=>(r,o)=>{const{label:i}=o;Qi(t,{event_category:e,event_label:i,non_interaction:Boolean(n),type_of_article_hero:i})},cs={ARTICLE_HERO_AUTHOR_TWITTER_LINK_CLICK:ss("articleHero","click"),ARTICLE_HERO_LOZENGE_LINK_CLICK:ss("articleHero","click")},ls=(e,t,n)=>(r,o)=>{const{label:i,value:a,modulePixelDepth:s}=o||{};Qi(t,{event_category:e,event_label:i,module_pixel_depth:s,non_interaction:Boolean(n),value:a})},us={COMMERCE_XP_CLICK:ls("commercexp","click"),COMMERCE_XP_IMPRESSION:ls("commercexp","impression",!0),COMMERCE_XP_VIEW_MORE:ls("commercexp","view more"),COMMERCE_XP_VIEWABLE:ls("commercexp","view",!0)},ds=(e,t,n)=>(r,o)=>{const{channel:i,urlClicked:a,articlePosition:s}=o;Qi(t,{article_position:s,event_category:e,event_label:i,non_interaction:Boolean(n),url_clicked:a})},ps={TOP_STORIES_XP_CLICK:ds("top stories module","click"),TOP_STORIES_XP_IMPRESSION:ds("top stories module","impression",!0),TOP_STORIES_XP_VIEW_MORE:ds("top stories module","view more"),TOP_STORIES_XP_VIEWABLE:ds("top stories module","view",!0)},fs={AD_SLOT_LOADED_ON_PAGE:((e,t,n)=>(r,o)=>{const{slotType:i}=o;Qi(t,{event_category:e,event_label:i,non_interaction:Boolean(n)})})("ad slot","load",!0)},ms=(e,t,n)=>()=>{Qi(t,{event_category:e,non_interaction:Boolean(n)})},_s={SWIPE_TUTORIAL_CLOSE:ms("swipe tutorial","dismiss"),SWIPE_TUTORIAL_SHOWN:ms("swipe tutorial","impression",!0)},hs={TIM_ANCHOR_LINK_CLICKED:((e,t)=>(n,r)=>{const{linkText:o}=r;Qi(t,{event_category:e,event_label:o,link_text:o,non_interaction:!1})})("decisionary anchor","click")},Es=(e,t,n)=>()=>{Qi(t,{event_category:e,non_interaction:Boolean(n)})},gs={COMMENT_CTA_CLICK:Es("comment cta","click"),COMMENT_CTA_IMPRESSION:Es("comment cta","impression",!0)},vs=(e,t,n)=>()=>{Qi(t,{event_category:e,non_interaction:Boolean(n)})},ys={MOBILE_MENU_COMMENT:vs("mobile menu","comment click"),MOBILE_MENU_DESKTOP_SITE:vs("mobile menu","desktop site")},ws={PAGE_FURNITURE_CLICKED:(e,t)=>{const n=t&&t.furnitureName;if(!n)return;Qi(n,{event_category:"furniture",furniture_name:n,non_interaction:!1})}},bs=(e,t,n)=>(r,o)=>{const{urlClicked:i,articlePosition:a}=o;Qi(t,{article_position:a,event_category:e,non_interaction:Boolean(n),url_clicked:i})},Is={ARTICLE_RECOMMENDATION_XP_CLICK:bs("article recommendation module","click"),ARTICLE_RECOMMENDATION_XP_IMPRESSION:bs("article recommendation module","impression",!0),ARTICLE_RECOMMENDATION_XP_VIEWABLE:bs("article recommendation module","view",!0)},Os=(e,t,n)=>(r,o)=>{let i=t;"ineligible"===t&&o&&o.reason&&(i=`${t} ${o.reason}`),Qi(i,{event_category:e,non_interaction:Boolean(n)})},Ss={ARTICLE_TRUNCATION_EXPAND:Os("article truncation","expand"),ARTICLE_TRUNCATION_INELIGIBLE:Os("article truncation","ineligible",!0),ARTICLE_TRUNCATION_READ_NEXT:Os("article truncation","read next",!1),ARTICLE_TRUNCATION_TRUNCATE:Os("article truncation","truncate",!0),ARTICLE_TRUNCATION_VIEWABLE:Os("article truncation","view",!0)},Ts=(e,t,n)=>(r,o)=>{const{pollId:i,question:a,answer:s,href:c,channel:l}=o||{};Qi(t,{answer:s,channel:l,event_category:e,event_label:"newsletter"===e?"poll":a,href:c,non_interaction:Boolean(n),poll_id:i?String(i):i,poll_name:a,url_channel:l},"newsletter"===e?"newsletter_poll_submit_success":void 0)},As={XP_POLLS_CLICK:Ts("poll","click"),XP_POLLS_IMPRESSION:Ts("poll","impression",!0),XP_POLLS_SUBSCRIBED:Ts("newsletter","successful submits"),XP_POLLS_VIEW:Ts("poll","view",!0),XP_POLLS_VOTED:Ts("poll","submit success")},Cs=(e,t,n)=>(r,o)=>{const{channel:i,clickUrl:a,position:s}=o;Qi(t,{click_url:a,event_category:e,event_label:i,non_interaction:Boolean(n),position:s})},Ls={GEO_TARGETED_HOMEPAGE_XP_CLICK:Cs("scotland section","click"),GEO_TARGETED_HOMEPAGE_XP_IMPRESSION:Cs("scotland section","impression",!0),GEO_TARGETED_HOMEPAGE_XP_VIEWABLE:Cs("scotland section","view",!0)},Ps=(e,t,n)=>(r,o)=>{qi({puzzle_user_type:wt()}),Qi(t,{event_category:e,event_label:o&&o.puzzleName,non_interaction:Boolean(n),puzzle_name:o&&o.puzzleName,puzzle_user_type:wt()})},Rs={PUZZLE_COMPLETE:Ps("puzzle","complete"),PUZZLE_STARTED:Ps("puzzle","started")},Ns=(e,t,n)=>(r,o)=>{Qi(t,{event_category:e,module_name:o&&o.moduleName||void 0,non_interaction:Boolean(n)})},Ms={MODULE_IMPRESSION:Ns("module","impression",!0),MODULE_INTERACT:Ns("module","interact"),MODULE_VIEW:Ns("module","view",!0)},Ds=(e,t,n)=>(r,o)=>{const{label:i,value:a,modulePixelDepth:s}=o||{};Qi(t,{event_category:e,event_label:i,module_pixel_depth:s,non_interaction:Boolean(n),value:a})},ks={ARTICLE_PREVIEW_XP_CLICK:Ds("article preview xp","click"),ARTICLE_PREVIEW_XP_IMPRESSION:Ds("article preview xp","impression",!0),ARTICLE_PREVIEW_XP_VIEWABLE:Ds("article preview xp","viewable",!0)},xs=(e,t,n,r)=>(o,i)=>{const{paywallOutcomeLabel:a,referringModule:s,referringPageType:c,flowVariant:l,productType:u}=i||{},d={event_category:e,non_interaction:Boolean(n)};a&&(d.paywall_variant=a),s&&(d.referring_module=s),c&&(d.referring_page_type=c),l&&(d.flow_variant=l),u&&(d.product_type=u),"paywall impression"===t&&(d.paywall_impressions=1),"paywall viewable"===t&&(d.paywall_views=1),"paywall click"===t&&(d.paywall_clicks=1),"paywall conversion"===t&&(d.paywall_conversions=1),"account conversion"===t&&(d.account_conversions=1),"banner conversion"===t&&(d.banner_conversions=1),"module"===e&&(d.product_type="mailplus",d.referring_module="homemodule"),Qi(t,d,r,!0)},Us={PAYWALL_ACCOUNT_LINK_COMPLETE:xs("mailplus","account link complete"),PAYWALL_ACCOUNT_LINK_HELP:xs("mailplus","account link help click"),PAYWALL_ACCOUNT_LINK_PROMPT:xs("mailplus","account link prompt"),PAYWALL_ACCOUNT_LINK_RESEND:xs("mailplus","account link resend email click"),PAYWALL_CONVERSION:xs("mailplus","paywall conversion"),PAYWALL_CONVERSION_BANNER:xs("mailplus","banner conversion"),PAYWALL_CONVERSION_PROFILE:xs("mailplus","account conversion"),PAYWALL_HOMEMODULE_ARTICLE_CLICK:xs("module","article click"),PAYWALL_HOMEMODULE_ARTICLE_COMMENTS_CLICK:xs("module","article comments click"),PAYWALL_HOMEMODULE_CHANNEL_CLICK:xs("module","channel click"),PAYWALL_HOMEMODULE_SIGNUP_CLICK:xs("module","masthead click"),PAYWALL_IMPRESSION:xs("mailplus","paywall impression",!0),PAYWALL_LOGIN_CLICK:xs("mailplus","paywall login click"),PAYWALL_MASTHEAD_SIGNUP_CLICK:xs("mailplus","masthead click"),PAYWALL_PROFILE_SIGNUP_CLICK:xs("mailplus","profile click"),PAYWALL_RESTORE_PURCHASE_CLICK:xs("mailplus","restore purchase click"),PAYWALL_SIGN_UP:xs("mailplus","paywall click"),PAYWALL_VIEWABLE:xs("mailplus","paywall viewable",!0),PAYWALL_ZEPHR_FAIL_OPEN:xs("mailplus","zephr fail open",!0)},Bs=()=>{(async(e,t,n=null)=>{const{ga4IdInDigital:r}=$i();r&&(await Ji(),Yi("event",e,{...t,send_to:`${r}${n||""}`}))})("conversion",{currency:"GBP",non_interaction:!1,value:1.99},"/MGkxCJf_5sQZEI3xwr8C")},Ws={PAYWALL_CONVERSION:Bs,PAYWALL_CONVERSION_BANNER:Bs,PAYWALL_CONVERSION_PROFILE:Bs},Vs=(e,t)=>(n,r)=>{const{productType:o}=r||{},i={event_category:"cmp",non_interaction:!1};o&&(i.product_type=o),Qi(e,i,e.replace(/\s/g,"_"),t)},Gs={...{CMP_LEVEL_ONE_ACCEPT:Vs("cmp level 1 accept"),CMP_LEVEL_ONE_CONVERSION:Vs("cmp level 1 conversion"),CMP_LEVEL_ONE_LOGIN:Vs("cmp level 1 login",!0),CMP_LEVEL_ONE_PRIVACY_SETTINGS:Vs("cmp level 1 privacy settings"),CMP_LEVEL_ONE_SUBSCRIBE:Vs("cmp level 1 subscribe",!0),CMP_LEVEL_TWO_CONVERSION:Vs("cmp level 2 conversion"),CMP_LEVEL_TWO_SAVE_EXIT:Vs("cmp level 2 save exit",!0),CMP_LEVEL_TWO_SUBSCRIBE:Vs("cmp level 2 subscribe",!0)},...{ESSENTIAL_ACCOUNT_LINK_COMPLETE:Vs("essential account link complete"),ESSENTIAL_ACCOUNT_LINK_HELP_CLICK:Vs("essential account link help click"),ESSENTIAL_ACCOUNT_LINK_PROMPT:Vs("essential account link prompt"),ESSENTIAL_ACCOUNT_LINK_RESEND:Vs("essential account link resend email click"),ESSENTIAL_RESTORE_PURCHASE_CLICK:Vs("essential restore purchase click")}},Fs={FOR_YOU_SAVE_PREFERENCES_CLICK:((e,t,n,r)=>()=>{Qi(t,{event_category:e,event_label:n,non_interaction:!1},r)})("for you","click","save preferences","for_you_save_preferences_click")},Ks=(e,t)=>()=>{Qi(t,{event_category:e,non_interaction:!1})},js=[_a,ks,ga,Ha,va,ya,Pa,Ca,Aa,Na,Ja,Ga,Fa,na,Da,ja,Sa,wa,Ia,Ya,ra,{TOAST_OVERLAY_CLICK:Ks("toast overlay","click"),TOAST_OVERLAY_DISMISS:Ks("toast overlay","dismiss"),TOAST_OVERLAY_VIEW:Ks("toast overlay","view")},Wa,la,da,ma,za,es,ns,os,cs,as,us,ps,fs,_s,hs,gs,ys,ws,Is,Ss,As,Ls,Rs,Ms,Us,Ws,Gs,Fs],Hs=(e,t,n,r)=>{let o=e;for(;o&&o!==t;){const e=o.getAttribute(n);if(e)return e;o=o.parentElement}return o&&o.getAttribute(n)||r};(async()=>{window.molFeDataLayer=window.molFeDataLayer||[],window.gtag=Yi,Yi("js",new Date);try{await bo(Co)}catch(e){Y().error("Error loading gtag JS",e)}})().catch();for(const e of js)It("googleAnalytics",e);document.addEventListener("click",(e=>{const t=e.Element||e.srcElement,n=t&&(e=>{let t=e;for(;t&&"A"!==t.tagName.toUpperCase()&&"BODY"!==t.tagName.toUpperCase();)t=t.parentElement;return t&&"A"===t.tagName.toUpperCase()?t:null})(t);if(n){const e=Hs(t,n,"data-tracking-href",n.href),r=Hs(t,n,"data-tracking-inner-text",n.innerText);(e=>{try{return new URL(e).hostname!==window.location.hostname}catch(e){return!1}})(e)&&ht.fireEvent(ht.PAGE_EXTERNAL_LINK_CLICKED_GA,{href:e,innerText:r})}}),!1);const $s={gtag:Yi};M("PAGE_METADATA_SET",(async()=>{const e=await ji();oo("GA_CONFIG_PROPS",e),M.go("GA_CONFIG_READY")}));const Ys=["impression","click","viewable"],qs=(e,t,n={})=>{if(Ys.includes(e))if(t&&"string"==typeof t)try{const{environment:r,renderPlatform:o}=G(),i={environment:r,event:e,module:t,renderPlatform:o,...n};window.postMessage(`__bidmax\n${JSON.stringify(i)}`,"*")}catch(e){Y().error(`[mol-fe-tracking] Unable to fire bidmax tracking for ${t}`,e)}else Y().error("[mol-fe-tracking] Module name is required ");else Y().error(`[mol-fe-tracking] Event name has to be one of 'impression', 'click', 'viewable', event name provided: ${e}`)};(()=>{try{document.addEventListener("click",(e=>{const t=Object.keys(Et).find((t=>e.target.closest(t)));if(!t)return;const n=Et[t];ht.publish(ht.PAGE_FURNITURE_CLICKED,{furnitureName:n})}))}catch(e){Y().error("Error initialising furniture tracking",e)}})(),(()=>{try{window.addEventListener("message",(e=>{if(!e||!e.data||"object"!=typeof e.data||"puzzles track event"!==e.data.msg)return;const{eventData:t,eventName:n}=e.data,r=t&&t.PuzzleName||"unknown",o=bt[n];o?("PuzzleStarted"===n&&(()=>{try{const e=vt();if(!e)return void yt({first:Date.now(),last:Date.now()});yt({...e,last:Date.now()})}catch(e){}})(),ht.publish(o,{puzzleName:r})):Y().warn("Unknown puzzle event name",n)}))}catch(e){Y().error("Error initialising puzzle tracking",e)}})(),(()=>{try{const e=new URLSearchParams(location.search);if("tiktok-comments"!==e.get("ito"))return;!function(e,t,n){e.TiktokAnalyticsObject=n;var r=e[n]=e[n]||[];r.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],r.setAndDefer=function(e,t){e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}};for(var o=0;o<r.methods.length;o++)r.setAndDefer(r,r.methods[o]);r.instance=function(e){for(var t=r._i[e]||[],n=0;n<r.methods.length;n++)r.setAndDefer(t,r.methods[n]);return t},r.load=function(e,t){var o="https://analytics.tiktok.com/i18n/pixel/events.js";r._i=r._i||{},r._i[e]=[],r._i[e]._u=o,r._t=r._t||{},r._t[e]=+new Date,r._o=r._o||{},r._o[e]=t||{};var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=o+"?sdkid="+e+"&lib="+n;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(i,a)},r.load("CP67633C77U51CVDQIUG"),r.page()}(window,document,"ttq")}catch(e){Y().error("Error loading Tiktok Pixel",e)}})(),(()=>{try{window.addEventListener("message",(e=>{if(!e.data||"object"!=typeof e.data)return;const t=e.data;if("@mol-fe/mol-fe-cmp"===t.ns)switch(t.action){case"cmp_level_1_accept":ht.publish(ht.CMP_LEVEL_ONE_ACCEPT);break;case"cmp_level_2_save_exit":ht.publish(ht.CMP_LEVEL_TWO_SAVE_EXIT);break;case"cmp_level_1_privacy_settings":ht.publish(ht.CMP_LEVEL_ONE_PRIVACY_SETTINGS);break;case"cmp_level_1_login":ht.publish(ht.CMP_LEVEL_ONE_LOGIN);break;case"cmp_level_1_subscribe":ht.publish(ht.CMP_LEVEL_ONE_SUBSCRIBE);break;case"cmp_level_2_subscribe":ht.publish(ht.CMP_LEVEL_TWO_SUBSCRIBE)}}))}catch(e){Y().error("Error initialising mol-fe-cmp tracking",e)}})();let zs=1;const Xs="mol-fe-loading-spinner",Js=()=>{const e=document.getElementById(Xs);e&&e.remove()},Zs=e=>{let t=document.getElementById(Xs);t||(t=document.createElement("div"),t.id=Xs,t.className=Xs,document.body.appendChild(t),"number"==typeof e&&setTimeout((()=>Js()),e))},Qs=["travel","femail"],ec=()=>{const{channel:e}=K();Qs.includes(e)&&document.addEventListener("click",(e=>{e.target.closest('.article a[href*="/article-"],.article-preview a[href*="/article-"],.puff a[href*="/article-"],.mol-fe-related-replace a[href*="/article-')&&Zs(3e3)}))};var tc=n(3029),nc=n.n(tc),rc=n(6108),oc=n.n(rc),ic=n(6238),ac=n.n(ic),sc=n(7526),cc=n.n(sc),lc=n(2784),uc=n.n(lc),dc=n(4642),pc=n.n(dc),fc=n(4015),mc=n.n(fc),_c=n(7581),hc=n.n(_c),Ec=n(3657),gc=n.n(Ec),vc=n(2103),yc=n.n(vc),wc=n(6123),bc=n.n(wc),Ic=n(3514),Oc=n.n(Ic),Sc=n(1580),Tc=n.n(Sc),Ac=n(1211),Cc=n.n(Ac),Lc=n(105),Pc=n.n(Lc),Rc=n(7331),Nc=n.n(Rc),Mc=n(2451),Dc=n.n(Mc);const kc={},xc=(e,t)=>{let n=(e.match(t)||[])[1]||"";return n=n.split(/[._]/g),{build:parseInt(n[2]||-1,10),major:parseInt(n[0]||-1,10),minor:parseInt(n[1]||-1,10)}},Uc=()=>{const e=navigator.userAgent;kc.ua=e,kc.isWindows=Boolean(e.match(/Windows Phone|iemobile|WPDesktop/i));try{kc.isIPad=(Boolean(e.match(/iPad/i))||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&"ontouchend"in document)&&!kc.isWindows}catch(e){kc.isIPad=!1}kc.isIDevice=(Boolean(e.match(/(iPad|iPhone|iPod)/i))||kc.isIPad)&&!kc.isWindows,kc.isIPhone=Boolean(e.match(/iPhone/i))&&!kc.isWindows,kc.isAndroid=Boolean(e.match(/Android/i))&&!kc.isWindows,kc.isChrome=Boolean(e.match(/Chrome/i)),kc.isFirefox=Boolean(e.match(/Firefox/i)),kc.isKindleSilk=Boolean(e.match(/Silk|Kindle/i)),kc.isAndroidPhone=kc.isAndroid&&Boolean(e.match(/Mobile/i)),kc.isAndroidTablet=kc.isAndroid&&!Boolean(e.match(/Mobile/i)),kc.isMobile=kc.isIDevice||kc.isAndroid||kc.isWindows,kc.isAndroidStock=kc.isAndroid&&!kc.isChrome&&!kc.isFirefox&&!kc.isKindleSilk;try{kc.isIDevice?(kc.mobileName=e.match(/(iPad|iPhone|iPod)/i)?e.match(/(iPad|iPhone|iPod)/i)[0]:"iPad",kc.mobileVersion=xc(e,/OS ((?:\d+[._]?)+)/i)):kc.isAndroid?(kc.mobileName="Android",kc.mobileVersion=xc(e,/Android ((?:\d+[._]?)+)/i)):kc.isWindows?(kc.mobileName="Windows Phone",kc.mobileVersion=xc(e,/Windows Phone ((?:\d+[._]?)+)/i)):(kc.mobileName=null,kc.mobileVersion={build:-1,major:-1,minor:-1})}catch(e){Y().error("Failed to parse mobile name and version",e),kc.mobileName="unknown"}},Bc=()=>kc.isWindows,Wc=()=>kc.isIDevice,Vc=()=>kc.isIPhone,Gc=()=>kc.isIPad,Fc=()=>kc.isAndroid,Kc=()=>kc.isChrome,jc=()=>kc.isFirefox,Hc=()=>kc.isKindleSilk,$c=()=>kc.isAndroidPhone,Yc=()=>kc.isAndroidTablet,qc=()=>kc.isMobile,zc=()=>kc.isAndroidStock,Xc=()=>kc.mobileVersion,Jc=()=>{if(Y().warn('"getZoom" function has been deprecated as it does not provide reliable values'),screen.deviceXDPI&&screen.logicalXDPI)return screen.deviceXDPI/screen.logicalXDPI;if(document.width)return document.width/window.innerWidth;if(screen.width&&window.innerWidth)return screen.width/window.innerWidth;return Math.max(document.documentElement.clientWidth,document.body.offsetWidth,document.body.scrollWidth)/(window.innerWidth||document.documentElement.clientWidth)},Zc=()=>Jc()>1,Qc=()=>window.matchMedia?window.matchMedia("(orientation:landscape)").matches:(window.innerWidth||document.documentElement.clientWidth)>(window.innerHeight||document.documentElement.clientHeight),el=()=>!Qc(),tl=()=>{document.body.style.overflow="auto",document.ontouchmove=()=>!0},nl=()=>{document.body.style.overflow="hidden",document.ontouchmove=e=>e.preventDefault()},rl=()=>{if(Y().warn('"setupMobileClass" has been deprecated and "features detection" should be prefered over "device detection"'),kc.mobileName){const e=kc.mobileName.toLowerCase().replace(/ /,"-");document.body.classList.add(e)}},ol=e=>(setTimeout(e,400),e());try{Uc(),kc.isAndroidStock&&(Y().debug("Executing Android Stock browser Orientation bug fix"),window.addEventListener("orientationchange",(()=>{const e=document.querySelector("meta[name=viewport]");if(e){const t=e.getAttribute("content");e.setAttribute("content","width=10000, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"),setTimeout((()=>{e.setAttribute("content",t)}),0)}})))}catch(e){Y().error("Error parsing user agent",e)}const il={deviceData:kc,disableScroll:nl,enableScroll:tl,getMobileVersion:Xc,getZoom:Jc,isAndroid:Fc,isAndroidPhone:$c,isAndroidStock:zc,isAndroidTablet:Yc,isChrome:Kc,isFirefox:jc,isIDevice:Wc,isIPad:Gc,isIPhone:Vc,isKindleSilk:Hc,isLandscape:Qc,isMobile:qc,isPortrait:el,isWindows:Bc,isZoomed:Zc,onTouchEnd:ol,parseUserAgent:Uc,setupMobileClass:rl},al=()=>{const e=document.head,t=document.createElement("link");t.rel="preconnect",t.href="https://fonts.googleapis.com";const n=document.createElement("link");n.rel="preconnect",n.href="https://fonts.gstatic.com",n.crossOrigin=!0;const r=document.createElement("link");r.href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",r.rel="stylesheet",e.appendChild(t),e.appendChild(n),e.appendChild(r)};(()=>{al()})();const sl=e=>{try{if("localStorage"in window){const t=window.localStorage.getItem(`mol-fe-paywall-${e}`);return t?JSON.parse(t):null}}catch(e){}return null},cl=2592e5,ll=()=>{const e=sl("entitlement");if(!e)return!1;const{allow_access:t,storedAt:n,registeredUserId:r}=e;return!(Date.now()-n>cl||"DM"in window&&"isLoggedIn"in window.DM&&r!==window.DM.userId)&&(t||!1)},ul=["IN","IR","CU","KP","SY","VE","AF","BY","BI","CF","CN","HK","CD","EG","ER","ET","IQ","LB","LY","ML","MM","NI","GN","GW","RU","SO","SS","SD","TN","TR","UA","YE","ZW"],dl=()=>{try{return window.PageCriteria&&window.PageCriteria.geo&&!ul.includes(window.PageCriteria.geo)||(()=>{try{if(location.hostname&&location.hostname.startsWith("cc"))return!0;if("about:srcdoc"===location.href)return!0}catch(e){}return!1})()}catch(e){}return!1},pl=()=>{const e=sl("entitlement");return e&&e.entitlements||null},fl=["mailplus-puzzles","mailplus-puzzles-experiment"],ml=()=>{const e=pl();return ll()&&e&&fl.some((t=>e.includes(t)))},_l=()=>"/puzzles/index.html?mailpluspuzzlesentitled=true",hl=()=>{const e=sl("entitlement"),t=dl(),n=window.mailplusPurchaseOutcome||location.search.includes("mailplusPurchaseOutcome"),r="DM"in window&&"isLoggedIn"in window.DM&&window.DM.isLoggedIn||location.search.includes("login"),o="DM"in window&&"userId"in window.DM&&e&&e.registeredUserId!==window.DM.userId;return!!t&&(!!n||(!!(r&&!e||o)||!!(e&&Date.now()-e.storedAt>cl)))},El=()=>{const e=pl(),t=ll(),n=e&&e.includes("mailplus-ad-lite");return t?n?"subscriber-ad-lite":"subscriber":"none"},gl=({paywalledCountries:e}={})=>{if(!window.PageCriteria)return!0;const t=e||window.PageCriteria.paywalledCountries,n=window.PageCriteria.geo&&window.PageCriteria.geo.toLowerCase(),r=!["gb","us","au","nz","ca","mx"].includes(n);return!t||!t.length||t.includes(n)||t.includes("us")&&"ca"===n||t.includes("us")&&"mx"===n||t.includes("au")&&"nz"===n||r&&t.includes("gb")},vl=async()=>{try{return await Promise.race([(e=1e3,new Promise((t=>{setTimeout(t,e)}))),new Promise((e=>{window.__uspapi?window.__uspapi("getUSPData",1,(t=>{const{uspString:n}=t||{};if(!n)return void e(null);const r=["usp",n].join("-_-");e({cmp:r})})):window.__tcfapi?window.__tcfapi("hasUserConsentedToAll",2,(t=>{window.__tcfapi("getTCData",2,(n=>{const{molGvlVersion:r,acmVersion:o,nrvVersion:i,tcString:a}=n||{};if(!a)return void e(null);const s=["tcf",r,o,i,t].join("-_-");e({cmp:s})}))})):e(null)}))])}catch(e){return null}var e},yl=async e=>{const t=await vl();try{const n=e&&new URL(e,location.origin);if(n&&t&&Object.keys(t).length)for(const e of Object.keys(t))n.searchParams.set(e,t[e]);return n&&n.href||e}catch(t){return e}};n(9371),n(6527),n(5715);const wl=e=>{if(!e.href)return!1;try{const t=new URL(e.href),n=/.*amazon./;return Boolean(t.hostname.match(n)&&t.searchParams.has("tag"))}catch(e){return!1}},bl=(e,t,n)=>{const r=new URLSearchParams(e),o=((e,t)=>Boolean(e&&e.startsWith(t)))(t,n),i=o?"internal":"external",a=r.get("ico"),s=r.get("ito"),c=r.get("utm_source");if(a)return`${i}_ico_${a}`;if(s)return`${i}_ito_${s}`;if(c)return`${i}_${c}`;if(t){if(n&&o){return`${i}_${new URL(t).pathname}`}return`${i}_${Po(t)}`}return"direct"},Il=(e,t)=>{const{referrer:n}=t;return{asc_campaign:(r=e,r&&r.tagName&&"a"===r.tagName.toLowerCase()&&Boolean(r.closest(".mol-product"))?"product":"standard"),asc_refurl:location.href,asc_source:bl(location.search,n,location.origin)};var r},{getConfig:Ol}=d;M("DOM_READY",(async()=>{try{const e=Array.from(document.getElementsByTagName("a")).filter(wl),t=await Ol();for(const n of e){const e=await Il(n,t),r=new URL(n.href);for(const t in e)e[t]&&!r.searchParams.has(t)&&r.searchParams.set(t,e[t]);n.href=r.href}}catch(e){Y().error("Error adding asc params to the amazon links",e)}})),(()=>{try{window.OBREvents=window.OBREvents||[],window.OBREvents.push({callback:e=>{requestAnimationFrame((()=>(e=>{const{element:t}=e,{renderPlatform:n}=G(),r=document.getElementById("reader-comments");if(!((window.location.hash&&window.location.hash.startsWith("#comments")||window.location.search&&window.location.search.match(/openWebLoggedIn/)||window.location.search&&window.location.search.match(/spot_im_scroll_to_comments=true/)||window.location.search&&window.location.search.match(/spot_im_highlight_immediate=true/))&&t&&t.parentNode&&r&&"desktop"===n))return;const{top:o,height:i}=t.getBoundingClientRect();if(o>window.innerHeight)return;const{top:a}=r.getBoundingClientRect();if(o>a)return;const s=i+24;s>a||(window.scrollTo(0,window.pageYOffset+s),requestAnimationFrame((()=>{const{bottom:e,top:t}=r.getBoundingClientRect();(e<300||t>window.innerHeight-300)&&(r.scrollIntoView(),window.scrollTo(0,window.pageYOffset-100))})))})(e)))},name:"rendered",widgetId:"all"})}catch(e){Y().error("Error initialising outbrain comments scroll fix",e)}})();const Sl="mol-fe-cookie-reinforcer",Tl=(e,t,n=null)=>{try{if(!("localStorage"in window))return;const r=JSON.parse(window.localStorage.getItem(Sl)||"{}");r[e]={expireDate:n,value:t},window.localStorage.setItem(Sl,JSON.stringify(r))}catch(e){Y().error("Error adding cookie to reinforce",e)}},Al=e=>{try{if(!("localStorage"in window))return;const t=JSON.parse(window.localStorage.getItem(Sl)||"{}");delete t[e],window.localStorage.setItem(Sl,JSON.stringify(t))}catch(e){Y().error("Error removing cookie from reinforcer",e)}},Cl=(e,t,n=null)=>{try{ft().set(e,t,{expires:n,path:"/"}),Tl(e,t,n)}catch(e){Y().error("Error setting cookie and adding to reinforce list",e)}},Ll=e=>{try{ft().remove(e),Al(e),"mol-home"===e&&window.localStorage.setItem("mol-fe-home-channel-actioned-last",Date.now())}catch(e){Y().error("Error removing cookie and stopping reinforcement",e)}},Pl=()=>{try{if(!("localStorage"in window))return;const e=JSON.parse(window.localStorage.getItem(Sl)||"{}"),t={};for(const n of Object.keys(e)){const{expireDate:r,value:o}=e[n],i=r&&new Date(r);"mol-home"===n&&"desktop"===o||(!i||i.getTime()>Date.now())&&(ft().set(n,o,{expires:i,path:"/"}),t[n]={expireDate:i,value:o})}window.localStorage.setItem(Sl,JSON.stringify(t))}catch(e){Y().error("Error reinforcing cookies",e)}};Pl();const Rl="smartBanner_ZE1ll",Nl="view_m0SUe",Ml="timLogo_kYALc logo_ITOxq",Dl="molLogo_DCFLV logo_ITOxq",kl="molffLogo_B8cW6 logo_ITOxq",xl="close_MJ3Qe",Ul="info_a32mm",Bl="ratings_E1GCv",Wl="starFull_YHjpN rating_PWCKS",Vl="starHalf_cxw3z rating_PWCKS",Gl="starEmpty_lCzIQ rating_PWCKS",Fl="name_C8GmV",Kl="price_RWtSj",jl=function(){const e=/(Windows *[a-zA-Z]*) ([^; )]+)/i.exec(navigator.userAgent);return e&&e.length>1&&"windows nt"===e[1].toLowerCase()&&parseFloat(e[2])>=6.4},Hl=function(){return document.body.classList.contains("mol-desktop")},$l="fantasyfootball",Yl="tim",ql="smart-banner",zl={inited:!1},Xl=function(){try{return(jl()?"windows10":kc.mobileName.toLowerCase())+" banner"}catch(e){return"unknown banner"}},Jl=function(){Y().debug("smartBanner: hiding"),document.body.classList.remove("smart-banner")},Zl=function(){(ft().get(ql)||!jl()&&Qc())&&document.body.classList.contains("smart-banner")&&Jl(),ft().get(ql)||!jl()&&Qc()||document.body.classList.contains("smart-banner")||(Y().debug("smartBanner: showing"),document.body.classList.add("smart-banner-shown"),document.body.classList.add("smart-banner"),ht.publish(ht.SMART_BANNER_SHOWN,{type:Xl()}))},Ql=uc()(Zl,50),eu=function(e){if(!e)return null;if(window.location.search&&window.location.search.match(/[?&]source=newzit\.app/))return null;const t=(jl()?"windows10":kc.mobileName.toLowerCase())+"_banner",n=`\n<a data-google-interstitial="false" class="${xl}"></a>\n<div class="${(e=>{let t;switch(e){case $l:t=kl;break;case Yl:t=Ml;break;default:t=Dl}return t})(e.app)}"></div>\n<div class="${Ul}">\n  <div class="${Fl}">${e.trackCensoredName}</div>\n  <div class="${Bl}">${function(e){if(e.averageUserRating>=3){const t=Math.floor(e.averageUserRating),n=e.averageUserRating%1>=.25?1:0;return[{class:Wl,count:t},{class:Vl,count:n},{class:Gl,count:5-(t+n)}].reduce(((e,t)=>e+`<span class="${t.class}"></span>`.repeat(t.count)),"")}return""}(e)}</div>\n  <div class="${Kl}">${e.formattedPrice}</div>\n</div>\n<a href="${e.storeUrl}" rel="noskim" data-google-interstitial="false" class="${Nl} js-tl">View</a>`,r=document.createElement("div");let o;return r.setAttribute("id","smartBanner"),r.setAttribute("data-track-module",t+"^smart-banner"),r.setAttribute("data-track-pos","static"),r.setAttribute("data-track-type","cl"),r.setAttribute("data-track-selector",`a.${Nl}`),r.classList.add(Rl),r.innerHTML=n,document.body.appendChild(r),Gt.externalLinkTracker("smartBanner"),zl.banner=r,zl.bannerName=t,zl.inited=!0,zl.banner=r,Hl()&&(o=setInterval(Zl,1e3)),r.querySelector(`.${xl}`).addEventListener("click",(e=>{e.preventDefault(),function(){const e=new Date(Date.now()+2592e6);Cl(ql,"closed",e)}(),Jl(),o&&(clearInterval(o),o=null)})),r.querySelector(`.${Nl}`).addEventListener("click",(()=>{ht.publish(ht.SMART_BANNER_CLICKED,{type:Xl()})})),window.addEventListener("orientationchange",Ql),Zl(),Y().info("###### SMARTBANNER RENDERED"),zl.banner};zl.init=function(e){return Y().info("###### INIT SMARTBANNER",e),zl.initPromise||(zl.initPromise=M("BODY_READY").then((()=>eu(e)))),zl.initPromise};const tu=zl,nu=/^https?:\/\/t\.co(\/.*)?$/.test(document.referrer),ru=ro("molFeSmartBanner").then((e=>kc.isMobile&&nu?null:tu.init(e))),ou={AU:"/auhome",GB:"/home",US:"/ushome"},iu=["sport"];let au=[];const su=e=>Boolean(e.url&&e.imgUrl&&e.headline),cu=(e,t)=>String(e.articleId)!==String(t),lu=e=>{const{articleId:t}=K();return cu(e,t)&&su(e)&&!We(e.articleId)&&!au.includes(e.articleId)},uu=async({useSimilarArticles:e=!1,topicGroup:t=null,paywalled:n=!1})=>{const{articleId:r,geo:o,channel:i}=K(),{topics:a}=G(),s=a&&a.length?"hasTopics":"noTopics";let c=`/api/mol-fe-feeds/v2/articles/rankedByChannelReferrer${ou[o]||ou.GB}`;const l=iu.includes(i);n?c=`/api/mol-fe-feeds/v2/articles/rankedPaywalled/geo/${j()}`:e?c=`/api/mol-fe-feeds/v2/articles/rankedSimilar/geo/${j()}/${r}/${s}${l?`/${i}`:""}`:t?c=`/api/mol-fe-feeds/v2/articles/rankedByTopicGroup/${encodeURIComponent(t)}/geo/${j()}`:l&&(c=`/api/mol-fe-feeds/v2/articles/rankedByChannel/${i}/geo/${j()}/period/1440`);const u=await Ye().get(c);if(!u||!u.data||!u.data.articles)throw new Error("[mol-fe-related-replace] Invalid ranked articles response");const{articles:d}=u.data,p=d.filter((e=>e.url.startsWith(`/${i}`))),f=d.filter((e=>!e.url.startsWith(`/${i}`))),m=p.concat(f).filter(lu).slice(0,5);if(m.length<5&&(e||t)&&!n){const e=m.map((e=>e.articleId)),t=await uu({topicGroup:null,useSimilarArticles:!1});for(let n=0;m.length<5&&n<t.length;n++){const r=t[n];e.includes(r.articleId)||m.push(r)}}return m.length<1&&n?p.concat(f).filter((e=>cu(e,r)&&su(e))).slice(0,5):m},du="mol-fe-related-replace";let pu=!1;const fu=()=>{const{renderPlatform:e}=G(),{articleStyle:t}=K();return"desktop"===e&&"extraWide"===t?5:3},mu=e=>{e&&e.classList.contains("related-replace-placeholder")&&e.remove()},_u=({relatedElement:e,articles:t,instanceIndex:n=0,topicGroup:r=null,isInlinePaywall:o=!1})=>{const i=fu();if(!e||!t||!t.length||t.length<i)return void mu(e);const a=(({articles:e,instanceIndex:t=0,topicGroup:n=null,isInlinePaywall:r=!1})=>{const o=fu(),i=document.createElement("div"),a=document.createElement("div");let s="related-replace"+(t>0?`-${t+1}`:"");a.classList.add("mol-fe-related-replace"),a.classList.add("ccox"),5===o&&a.classList.add("related-replace-desktop-xwide"),"royals"===n&&i.classList.add("royal_wedding"),r&&(s="related-replace-paywall",i.classList.add("home"),i.classList.add("related-replace-paywall")),a.dataset.trackModule=s;const c=e.slice(0,o).map((e=>(({article:e})=>{const{imgUrl:t,url:n,headline:r,viewCountTrending:o,isPaywalled:i}=e,a=[];return i&&a.push('<span class="is-paywalled"></span>'),`\n    <a class="related-replace-article" href="${n}">\n      <div class="related-replace-image">\n        <img src="${t}" alt="" width="636" height="382" loading="lazy" />\n      </div>\n      <div class="related-replace-info">\n        <div class="related-replace-headline">${a.join("")}${r}</div>\n        ${o?`\n        <div class="related-replace-count-wrap">\n          <div class="related-replace-count wocc">${s=o,s<1e3?s:`${(s/1e3).toFixed(1).replace(/\.0$/,"")}k`} viewing now</div>\n        </div>\n        `:""}\n      </div>\n    </a>\n  `;var s})({article:e}))).join("");return a.innerHTML=`\n    <div class="related-replace-title wocc">${t>0?"MORE ":""}TRENDING</div>\n    <div class="related-replace-articles">\n      ${c}\n    </div>\n  `,Array.from(a.children[1].children).forEach(((e,t)=>{e.addEventListener("click",(()=>{const n={clickUrl:e.href,position:t+1};qs("click",du,n),ht.publish(ht.RELATED_REPLACE_CLICK,n)}))})),i.appendChild(a),new IntersectionObserver(((e,t)=>{for(const n of e)n.isIntersecting&&(pu||(qs("viewable",du),ht.publish(ht.RELATED_REPLACE_VIEWABLE),pu=!0),t.unobserve(a))})).observe(a),i})({articles:t,instanceIndex:n,isInlinePaywall:o,topicGroup:r});var s;e.replaceWith(a),s=t.slice(0,i).map((e=>e.articleId)),au=au.concat(s)},hu=(e=null)=>{const t=document.querySelector('#mobile-content .scrollable-content > article, #page-container .article-text [itemprop="articleBody"]');if(!t)return null;const{renderPlatform:n}=G(),r="mobile"===n;let o=0,i=r&&!e?-1:0,a=null,s=Array.from(t.children);if(e){const t=s.findIndex((t=>t===e||t.contains(e)));-1!==t&&(s=s.slice(t+1))}const c=document.documentElement.classList.contains("fb-webview")&&!e;let l=0;for(const e of s){const t=e.matches("figure, .image-wrap, .mol-img, .mol-img-group"),n=e.matches("p, .mol-para-with-font"),s=!r&&e.matches(".floatRHS, .floatLHS, .halfRHS, .halfLHS, .floatXWHalfRHS, .floatXWHalfLHS"),u=e.querySelector(".vjs-video-container")||e.matches(".vjs-video-container"),d=e.matches(":empty")&&!e.id&&(!e.className||"clear"===e.className);if(s&&(l=e.offsetHeight+32),t&&c&&i>=0)return a;if(o>=4&&i>=1&&!t&&!u&&!d&&a&&l<=0)return a;n&&o++,t&&i++,l>0&&!s&&(l-=e.offsetHeight+(t?4:16)),a=e}return null},Eu=(e=null,t=null)=>{const n=t||hu(e);if(!n)return null;const r=document.createElement("div");return r.classList.add("related-replace-placeholder"),n.after(r),r},gu=(e,t,n=!1)=>{let r=0,o=t;for(let i=t;n?i>0:i<e.length;n?i--:i++){if(e[i].matches("p, .mol-para-with-font")&&(r++,o=i),r>=4)break}return o},vu=e=>{const t=(()=>{const{renderPlatform:e}=G(),{articleStyle:t,geo:n}=K(),r=["US","AU"].includes(n)?`_${n.toLowerCase()}`:"",o=document.createElement("div");o.dataset.trackModule="royals-promo-related";let i=358,a=465,s="mobile";"desktop"===e&&("wide"===t&&(i=636,a=184,s="wide"),"extraWide"===t&&(i=964,a=184,s="xwide"));const c=`https://i.dailymail.co.uk/static/mol-fe/static/royals/promo/${s}${r}.jpg`;return o.innerHTML=`\n    <a class="royals-promo-related" href="/news/royals/index.html">\n      <img width="${i}" height="${a}" loading="lazy" src="${c}">\n    </a>\n  `,o})();e.replaceWith(t)},yu=async({relatedElement:e,useSimilarArticles:t=!1,instanceIndex:n=0,topicGroup:r=null,isInlinePaywall:o=!1})=>{if("royals"===r&&1===n)return void vu(e);const i=await(async({useSimilarArticles:e=!1,topicGroup:t=null})=>{const n=window.getIsPaywallEligible&&window.getIsPaywallEligible(),{isPaywalled:r,articleStyle:o}=K(),{renderPlatform:i}=G(),a=Ce(),s="desktop"===i&&"extraWide"===o?5:3,c=r&&a&&a.includes("morePaywalledRelatedReplace"),l=c?"desktop"===i&&"extraWide"===o?3:2:1,u=c,d=[n?uu({paywalled:!0}).catch((()=>[])):[]];d.unshift(uu({topicGroup:t,useSimilarArticles:e}));const[p,f]=await Promise.all(d);if(!p.length)return f;if(!f.length)return p;const m=[];let _=f.slice(),h=p.slice(),E=0;for(let e=0;e<s;e++){const t=(u?e%2==0:e%2!=0)&&_.length&&E<l,n=t?_.shift():h.shift();if(t&&E++,!n)break;m.push(n);const r=m.map((e=>e.articleId));_=_.filter((e=>!r.includes(e.articleId))),h=h.filter((e=>!r.includes(e.articleId)))}return m})({topicGroup:r,useSimilarArticles:t});_u({articles:i,instanceIndex:n,isInlinePaywall:o,relatedElement:e,topicGroup:r})},wu=["Mail Best","Mail Best US"],bu=["sportsbets"],Iu=async()=>{try{const{articleType:e,pageType:t,channel:n,sponsored:r,subchannel:o}=K(),{domain:i,topics:a,publishedDate:s}=G();if("article"!==t||"feature"===e||"thisismoney"===i||"money"===n||"true"===r||!0===r)return;if(bu.includes(o))return;if(a&&wu.some((e=>a.includes(e))))return;if("home"===n&&"home"===o)return;await M("DOM_READY");const c=((e=2,t=[])=>{const n=t||[];for(let t=n.length;t<e;t++){const e=Eu(n[t-1]||null);if(!e)break;n.push(e)}return n})(1,Array.from(document.querySelectorAll(".related-with-thumbs, .related-carousel")));if(!c.length)return;const l=s&&s.getTime()||0,u=Date.now()-l<2592e6,d=a&&a.includes("Royals")?"royals":null,p=!d&&u&&a&&a.length;c.forEach(((e,t)=>{if(t>0&&(e=>{const t=document.querySelector('#mobile-content .scrollable-content > article, #page-container .article-text [itemprop="articleBody"]');if(!t)return!1;const n=t.querySelector(".molad_mpu_mobile_promotions");if(!n)return!1;const r=Array.from(t.children),o=r.indexOf(n.parentNode),i=r.indexOf(e),a=gu(r,o,!1);return i>gu(r,o,!0)&&i<a})(e))return void mu(e);qs("impression",du),ht.publish(ht.RELATED_REPLACE_IMPRESSION);const n=p&&0===t;new IntersectionObserver(((r,o)=>{for(const i of r)if(i.isIntersecting)return yu({instanceIndex:t,relatedElement:e,topicGroup:d,useSimilarArticles:n}),void o.unobserve(e)}),{rootMargin:"2000px"}).observe(e)}))}catch(e){Y().error("[mol-fe-related-replace] Error initialising ",e)}};try{M("PAGE_METADATA_SET",Iu)}catch(e){Y().error("Error initialising mol-fe-related-replace",e)}const Ou={"remixd-player-complete":ht.REMIXD_COMPLETE,"remixd-player-error":ht.REMIXD_ERROR,"remixd-player-impression":ht.REMIXD_IMPRESSION,"remixd-player-mute":ht.REMIXD_MUTE,"remixd-player-pause":ht.REMIXD_PAUSE,"remixd-player-play":ht.REMIXD_PLAY},Su=()=>{try{window.addEventListener("message",(e=>{if(!e.data||"remixd"!==e.data.scope||!e.data.data)return;const t=e.data.data,n=t&&String(t.event),r=t&&String(t.error),o=Ou[n];o&&ht.publish(o,{errorMessage:r})}))}catch(e){Y().error("Error initialising Remixd event listener",e)}};Su();var Tu,Au,Cu,Lu,Pu,Ru=-1,Nu=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Ru=t.timeStamp,e(t))}),!0)},Mu=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Du=function(){var e=Mu();return e&&e.activationStart||0},ku=function(e,t){var n=Mu(),r="navigate";return Ru>=0?r="back-forward-cache":n&&(document.prerendering||Du()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},xu=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Uu=function(e,t,n,r){var o,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Bu=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Wu=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Vu=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Gu=-1,Fu=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ku=function(e){"hidden"===document.visibilityState&&Gu>-1&&(Gu="visibilitychange"===e.type?e.timeStamp:0,Hu())},ju=function(){addEventListener("visibilitychange",Ku,!0),addEventListener("prerenderingchange",Ku,!0)},Hu=function(){removeEventListener("visibilitychange",Ku,!0),removeEventListener("prerenderingchange",Ku,!0)},$u=function(){return Gu<0&&(Gu=Fu(),ju(),Nu((function(){setTimeout((function(){Gu=Fu(),ju()}),0)}))),{get firstHiddenTime(){return Gu}}},Yu=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},qu=[1800,3e3],zu=function(e,t){t=t||{},Yu((function(){var n,r=$u(),o=ku("FCP"),i=xu("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<r.firstHiddenTime&&(o.value=Math.max(e.startTime-Du(),0),o.entries.push(e),n(!0)))}))}));i&&(n=Uu(e,o,qu,t.reportAllChanges),Nu((function(r){o=ku("FCP"),n=Uu(e,o,qu,t.reportAllChanges),Bu((function(){o.value=performance.now()-r.timeStamp,n(!0)}))})))}))},Xu=[.1,.25],Ju=function(e,t){t=t||{},zu(Vu((function(){var n,r=ku("CLS",0),o=0,i=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],n=i[i.length-1];o&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,i.push(e)):(o=e.value,i=[e])}})),o>r.value&&(r.value=o,r.entries=i,n())},s=xu("layout-shift",a);s&&(n=Uu(e,r,Xu,t.reportAllChanges),Wu((function(){a(s.takeRecords()),n(!0)})),Nu((function(){o=0,r=ku("CLS",0),n=Uu(e,r,Xu,t.reportAllChanges),Bu((function(){return n()}))})),setTimeout(n,0))})))},Zu={passive:!0,capture:!0},Qu=new Date,ed=function(e,t){Tu||(Tu=t,Au=e,Cu=new Date,rd(removeEventListener),td())},td=function(){if(Au>=0&&Au<Cu-Qu){var e={entryType:"first-input",name:Tu.type,target:Tu.target,cancelable:Tu.cancelable,startTime:Tu.timeStamp,processingStart:Tu.timeStamp+Au};Lu.forEach((function(t){t(e)})),Lu=[]}},nd=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){ed(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,Zu),removeEventListener("pointercancel",r,Zu)};addEventListener("pointerup",n,Zu),addEventListener("pointercancel",r,Zu)}(t,e):ed(t,e)}},rd=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,nd,Zu)}))},od=[100,300],id=function(e,t){t=t||{},Yu((function(){var n,r=$u(),o=ku("FID"),i=function(e){e.startTime<r.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),n(!0))},a=function(e){e.forEach(i)},s=xu("first-input",a);n=Uu(e,o,od,t.reportAllChanges),s&&Wu(Vu((function(){a(s.takeRecords()),s.disconnect()}))),s&&Nu((function(){var r;o=ku("FID"),n=Uu(e,o,od,t.reportAllChanges),Lu=[],Au=-1,Tu=null,rd(addEventListener),r=i,Lu.push(r),td()}))}))},ad=0,sd=1/0,cd=0,ld=function(e){e.forEach((function(e){e.interactionId&&(sd=Math.min(sd,e.interactionId),cd=Math.max(cd,e.interactionId),ad=cd?(cd-sd)/7+1:0)}))},ud=function(){return Pu?ad:performance.interactionCount||0},dd=function(){"interactionCount"in performance||Pu||(Pu=xu("event",ld,{type:"event",buffered:!0,durationThreshold:0}))},pd=[200,500],fd=0,md=function(){return ud()-fd},_d=[],hd={},Ed=function(e){var t=_d[_d.length-1],n=hd[e.interactionId];if(n||_d.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};hd[r.id]=r,_d.push(r)}_d.sort((function(e,t){return t.latency-e.latency})),_d.splice(10).forEach((function(e){delete hd[e.id]}))}},gd=function(e,t){t=t||{},Yu((function(){var n;dd();var r,o=ku("INP"),i=function(e){e.forEach((function(e){e.interactionId&&Ed(e),"first-input"===e.entryType&&!_d.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Ed(e)}));var t,n=(t=Math.min(_d.length-1,Math.floor(md()/50)),_d[t]);n&&n.latency!==o.value&&(o.value=n.latency,o.entries=n.entries,r())},a=xu("event",i,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=Uu(e,o,pd,t.reportAllChanges),a&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&a.observe({type:"first-input",buffered:!0}),Wu((function(){i(a.takeRecords()),o.value<0&&md()>0&&(o.value=0,o.entries=[]),r(!0)})),Nu((function(){_d=[],fd=ud(),o=ku("INP"),r=Uu(e,o,pd,t.reportAllChanges)})))}))},vd=[2500,4e3],yd={},wd=function(e,t){t=t||{},Yu((function(){var n,r=$u(),o=ku("LCP"),i=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(o.value=Math.max(t.startTime-Du(),0),o.entries=[t],n())},a=xu("largest-contentful-paint",i);if(a){n=Uu(e,o,vd,t.reportAllChanges);var s=Vu((function(){yd[o.id]||(i(a.takeRecords()),a.disconnect(),yd[o.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return setTimeout(s,0)}),!0)})),Wu(s),Nu((function(r){o=ku("LCP"),n=Uu(e,o,vd,t.reportAllChanges),Bu((function(){o.value=performance.now()-r.timeStamp,yd[o.id]=!0,n(!0)}))}))}}))},bd=[800,1800],Id=function e(t){document.prerendering?Yu((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Od=function(e,t){t=t||{};var n=ku("TTFB"),r=Uu(e,n,bd,t.reportAllChanges);Id((function(){var o=Mu();if(o){var i=o.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-Du(),0),n.entries=[o],r(!0),Nu((function(){n=ku("TTFB",0),(r=Uu(e,n,bd,t.reportAllChanges))(!0)}))}}))};const Sd=e=>{try{"adverts"in window&&"DM"in window&&(e=>{const t={...e,module:"webVitalsCls"};window.postMessage("__bidmax\n"+JSON.stringify(t),"*")})(e)}catch(e){}},Td={CLS:null,FCP:null,FID:null,INP:null,LCP:null,TTFB:null},Ad={CLS:null,FCP:null,FID:null,INP:null,LCP:null,TTFB:null},Cd=["CLS","LCP"];let Ld=!1,Pd=!1;const Rd=({name:e,value:t})=>{Ad[e]=t,Pd||(!Ld&&Cd.includes(e)&&(Ld=!0,M.go("mol-fe-web-vitals-partial")),Td[e]=t)},Nd=e=>{const t=e.id?`#${e.id.substr(0,15)}`:"",n=Array.from(e.classList),r=n.length?`.${n.join(".")}`:"";return`${e.tagName.toLowerCase()}${t}${r}`.substr(0,30)};let Md=!1;const Dd=({name:e,value:t,entries:n})=>{Rd({name:e,value:t});try{const e=n&&n[0]&&n[0].target;if(t&&t>=100&&!Md&&e){Md=!0;const t=`${e.parentNode?Nd(e.parentNode):"null"} > ${Nd(e)}`;Sd({event:"fidElement",fidElementSelector:t,fidValue:Ad.FID})}}catch(e){}};let kd=!1;const xd=({name:e,value:t,entries:n})=>{Rd({name:e,value:t});try{const e=n&&n[0]&&n[0].target;if(t&&!kd&&e){kd=!0;const t=`${e.parentNode?Nd(e.parentNode):"null"} > ${Nd(e)}`;Sd({event:"inpElement",inpElementSelector:t,inpValue:Ad.INP})}}catch(e){}};let Ud=[];const Bd=({name:e,value:t,entries:n})=>{Rd({name:e,value:t}),Ud=n};let Wd=0,Vd=0;const Gd=()=>{try{return window.location.hash||"none"}catch(e){return"none"}},Fd=()=>{if(!(Wd>=2))try{const e=.08;if(Ad.CLS&&Ad.CLS>e&&Ad.CLS>Vd&&Ad.CLS-Vd>.1){Vd=Ad.CLS;const e=.01;for(const t of Ud.filter((t=>t.value>=e&&!t.hadRecentInput))){const e=t.sources.slice(0,2).map((e=>Nd(e.node))).join(",");Sd({clsElementSelector:e,clsElementValue:t.value,clsHash:Gd(),clsSendCount:Wd,clsTotal:Ad.CLS,event:"clsElement"})}Wd++}}catch(e){}};let Kd=[];const jd=({name:e,value:t,entries:n})=>{Rd({name:e,value:t}),Kd=n};let Hd=0,$d=0;const Yd=()=>{if(!(Hd>=2))try{const e=2400;if(Ad.LCP&&Ad.LCP>e&&Ad.LCP>$d&&Ad.LCP-$d>1e3){$d=Ad.LCP;const e=Kd[Kd.length-1];if(!e)return;const t=e.element&&Nd(e.element)||e.url||"unknown";Sd({event:"lcpElement",lcpElementSelector:t,lcpSendCount:Hd,lcpValue:Ad.LCP}),Hd++}}catch(e){}},qd=()=>Td,zd=()=>Ad,Xd={getCLS:Ju,getFCP:zu,getFID:id,getLCP:wd,getTTFB:Od,onCLS:Ju,onFCP:zu,onFID:id,onINP:gd,onLCP:wd,onTTFB:Od},Jd=()=>Kd,Zd=()=>Ud;(async()=>{try{Ju(Bd,{reportAllChanges:!0}),id(Dd,{reportAllChanges:!0}),wd(jd,{reportAllChanges:!0}),gd(xd,{reportAllChanges:!0}),Od(Rd,{reportAllChanges:!0}),zu(Rd,{reportAllChanges:!0}),await M("DOM_READY"),setInterval(Fd,1e4),setInterval(Yd,1e4),await(e=1e4,new Promise((t=>{setTimeout(t,e)}))),Pd=!0,M.go("mol-fe-web-vitals-standard")}catch(e){Y().error("Error initialising mol-fe-web-vitals",e)}var e})();const Qd=()=>document.querySelector('#mobile-content .scrollable-content > article, #page-container .article-text [itemprop="articleBody"]'),ep="mol-fe-article-truncation-",tp=new IntersectionObserver(((e,t)=>{for(const n of e)if(n.isIntersecting){const e=n.target;ht.publish(ht.ARTICLE_TRUNCATION_VIEWABLE),t.unobserve(e)}}),{threshold:.5});let np=!1;const rp=({nonInteraction:e=!1}={})=>{const t=Qd();if(!t||!t.classList.contains("article-truncated"))return;t.style.maxHeight="",t.classList.remove("article-truncated");const n=document.querySelector(".article-truncation-box");n&&(tp.unobserve(n),n.remove()),ht.publish(ht.ARTICLE_TRUNCATION_EXPAND),e||(np=!0)},op=async()=>{const{renderPlatform:e}=G(),t="mobile"===e;try{if(t){const e=document.querySelector('#next-stories li[data-idx="1"] > a'),t=document.querySelector("#next-stories li > a");return e&&e.href||t&&t.href}{const e=await ro("molFePrevNextNavigation");return e&&e.nextArticle&&e.nextArticle.url}}catch(e){return null}},ip=({nonInteraction:e=!1}={})=>{const t=Qd();if(!t)return;if(np&&e)return;const n=t.classList.contains("article-truncated"),{renderPlatform:r}=G(),o=(()=>{try{const e=Qd();if(!e)return null;const{renderPlatform:t}=G(),n=4500;let r=n;const o=Array.from(e.children),i=o.findIndex((e=>e.offsetTop>=r)),a=e.scrollHeight;if(!i)return null;let s=0;const c=o.slice(i);for(const e of c)if(e.matches("p, .mol-para-with-font")){s++;const t=e.offsetTop+Math.floor(e.offsetHeight/2);if(t+1e3<=a&&t<=n+2e3&&(r=t,s>=3))return r}if(s&&r+1e3<=a&&r<=n+2e3)return r}catch(e){}return null})()||4500;t.style.maxHeight=`${o}px`,t.classList.add("article-truncated");let i=document.querySelector(".article-truncation-box");if(!i){i=document.createElement("div"),i.classList.add("article-truncation-box"),i.innerHTML='<div class="article-truncation-box__button-wrap">\n      <button class="article-truncation-box__button" data-article-truncation-expand-button>Continue Reading</button>\n      </div>';i.querySelector("[data-article-truncation-expand-button]").addEventListener("click",(()=>rp())),t.appendChild(i),tp.observe(i),(async e=>{const{renderPlatform:t}=G(),n="mobile"===t,r=Ce();if(!r||!r.includes("articleTruncationReadNext"))return;const o=document.createElement("a"),i=await op();if(!i)return;o.classList.add("article-truncation-next-story__button"),o.innerHTML="Read Next Article >>",o.addEventListener("click",(()=>{ht.publish(ht.ARTICLE_TRUNCATION_READ_NEXT)})),o.href=i;const a=e.querySelector(".article-truncation-box__button-wrap");a.dataset.trackModule="article-truncation-read-next",a.appendChild(o),n&&setInterval((async()=>{const e=await op();e&&(o.href=e)}),2e3)})(i).catch((()=>{}))}n||(((e,t)=>{try{if(!("localStorage"in window))return;window.localStorage.setItem(`${ep}${e}`,JSON.stringify(t))}catch(e){}})("last",Date.now()),ht.publish(ht.ARTICLE_TRUNCATION_TRUNCATE))},ap=()=>{try{const{geo:e,articleType:t,pageType:n,sponsored:r,channel:o}=K(),{renderPlatform:i}=G();location.search.match(/debugSkipArticleTruncationGeoCheck=true/);return void 0}catch(e){Y().error("Error initialising mol-fe-article-truncation",e)}};try{M("DOM_READY",ap)}catch(e){Y().error("Error initialising mol-fe-article-truncation",e)}const sp="mol-fe-paywall-",cp=(e,t)=>{try{"localStorage"in window&&window.localStorage.setItem(`${sp}${e}`,JSON.stringify(t))}catch(e){}},lp=()=>"/snippet/money/investing/header.html"===location.pathname,up=()=>{const{domain:e}=G();return"thisismoney"===e||lp()},dp={integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/111204/get-more-from-dailymail.com",production:"https://www.mailsubscriptions.co.uk/info/403015/get-more-from-dailymail.com"},pp={default:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109171/get-more-from-the-mail",production:"https://www.mailsubscriptions.co.uk/info/348361/get-more-from-the-mail"},AU:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/110515/get-more-from-the-mail",production:"https://www.mailsubscriptions.co.uk/info/400614/australia-sale"},GB:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/products/107245/read-more-see-more-enjoy-more",production:"https://www.mailsubscriptions.co.uk/info/393633/get-more-from-the-mail"},US:dp,CA:dp,MX:dp,IE:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109873/get-more-from-the-mail",production:"https://www.mailsubscriptions.co.uk/info/365671/get-more-from-the-mail"},NZ:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/110515/get-more-from-the-mail",production:"https://www.mailsubscriptions.co.uk/info/400614/australia-sale"}},fp={default:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109173/first-month-free-then-4.99",production:"https://www.mailsubscriptions.co.uk/info/348363/first-month-free-then-4.99"},AU:{integration:null,production:null},GB:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/products/107260/the-best-financial-articles-with-all-the-mails-best-content",production:"https://www.mailsubscriptions.co.uk/info/362596/1.99-per-month-for-your-first-year-then-4.99-per-month"},US:{integration:null,production:null},CA:{integration:null,production:null},MX:{integration:null,production:null},IE:{integration:"https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109874/first-month-free-then-4.99",production:"https://www.mailsubscriptions.co.uk/info/365672/get-more-from-this-is-money-with-mail"},NZ:{integration:null,production:null}},mp=async()=>{const e=window.getMailplusConsentParams&&await window.getMailplusConsentParams(),{environment:t}=G(),{geo:n}=K(),r=up()?fp:pp,o=r[n]||r.default,i=o[t]||o.production;try{const t=i&&new URL(i);if(t&&e&&Object.keys(e).length)for(const n of Object.keys(e))t.searchParams.set(n,e[n]);return t&&t.href||i}catch(e){return i}},_p=async()=>{const e=await mp();try{const t=e&&new URL(e);return t&&t.searchParams.set("molclicksource","banner"),t&&t.href||e}catch(t){return e}},hp=()=>{const{geo:e}=K();return up()?"/money/mailplus/index.html":["AU","NZ"].includes(e)?"/mailplus/au/index.html":["US","CA","MX"].includes(e)?"/mailplus/us/index.html":"/mailplus/index.html"},Ep=()=>{const{pageType:e,channel:t,subchannel:n}=K(),r=["aumailplus","mailplus","usmailplus","mailplusus"];return"channel"===e&&(r.includes(t)||r.includes(n)||"mailplusmoney"===n)},gp=({referringModule:e,referringPageType:t,returnUrl:n})=>{cp("return-url",n||`${location.origin}${hp()}`),cp("purchase-meta",{referringModule:e,referringPageType:t})},vp=async e=>{const{pageType:t,channel:n,subchannel:r,geo:o}=K();if("channel"!==t||n!==r||!["auhome","home","ushome"].includes(n)||location.pathname.startsWith("/registration"))return;if(window.getIsPaywallSubscriber&&window.getIsPaywallSubscriber()){const t=document.querySelector("[data-paywall-home-masthead]");return void(t&&(t.remove(),e.style.backgroundImage=""))}const i=await _p();if(!i)return;const a=document.querySelector("[data-paywall-home-masthead]")||document.createElement("a");if(a.href=i,a.dataset.paywallHomeMasthead=!0,a.dataset.geo=o,a.dataset.channel=n,a.addEventListener("click",(()=>{ht.publish(ht.PAYWALL_MASTHEAD_SIGNUP_CLICK),gp({referringModule:"masthead",referringPageType:"home"})})),e.appendChild(a),window.__tcfapi&&window.__tcfapi("getValidTCData",2,(async()=>{const e=await _p();a.href=e})),"auhome"===n&&("AU"===o||"NZ"===o)){const e="https://i.dailymail.co.uk/i/sitelogos/dm_aus_2016.png",t=document.querySelector(".masthead #logo");t&&t.src!==e&&(t.src=e,t.height=91,t.width=288,t.style.top="0")}},yp=e=>{const t=window.getIsPaywallEligible&&window.getIsPaywallEligible(),{pageType:n,isPaywalled:r,geo:o}=K(),i=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),a=r&&i,s=up(),c="article"===n&&a,l=Ep();if(!c&&!l||!l&&!t)return;let u="https://i.dailymail.co.uk/static/mol-fe/static/configs/mol-fe-paywall/mastheads/mailplus_article_masthead_v2.png";"AU"!==o&&"NZ"!==o||(u="https://i.dailymail.co.uk/static/mol-fe/static/configs/mol-fe-paywall/mastheads/mailplus-masthead-au-2.png"),["US","CA","MX"].includes(o)&&(u="https://i.dailymail.co.uk/static/mol-fe/static/configs/mol-fe-paywall/mastheads/mailplus-masthead-us-2.png",(e=>{const t=document.querySelector(".page-header .masthead > a");t&&(t.href=e)})(hp())),s&&(u="https://i.dailymail.co.uk/static/mol-fe/static/configs/mol-fe-paywall/mastheads/mailplus_article_masthead_tim.jpg");const d="cover",p=(()=>{const{geo:e}=K(),t=["US","CA","MX"].includes(e);if(Ep()&&!t)return null;const n=t?"/ushome/index.html":hp(),r=t?"350px":"300px",o=document.querySelector("[data-paywall-article-masthead]")||document.createElement("a");return o.href=n,o.dataset.paywallArticleMasthead=!0,o.style.position="absolute",o.style.zIndex=10,o.style.top="0px",o.style.right="0px",o.style.height="91px",o.style.width=r,o.addEventListener("click",(()=>{ht.publish(ht.PAYWALL_MASTHEAD_ARTICLE_CLICK)})),o})();p&&e.appendChild(p),e.style.backgroundImage=`url(${u})`,d&&(e.style.backgroundSize=d),e.classList.add("masthead-paywalled"),document.documentElement.classList.add(s?"has-mailplus-masthead-tim":"has-mailplus-masthead"),s||document.documentElement.classList.add("has-mailplus-theme")},wp=({isSelected:e=!1,topNav:t=!1}={})=>{const{geo:n}=K(),r=["US","CA","MX"].includes(n),o=document.createElement("li");return o.classList.add("mailplus-nav"),o.innerHTML=`\n    <span class="${e&&t?"link-wocc linkro-wocc":"link-gr6ox linkro-ccox"} ${e?"selected":""}">\n      <a class="${e&&t?"no-border":""}" href="${hp()}">\n        Mail+\n      </a>\n    </span>\n  `,r&&o.classList.add("mailplus-nav-us"),o},bp=({isSelected:e=!1,topNav:t=!1}={})=>{const n=document.createElement("li");return n.classList.add("mailplus-nav"),n.innerHTML=`\n      <a class="${e&&t?"current bdrcc":""}" href="${hp()}">\n        Mail+\n      </a>\n  `,n},Ip=()=>document.querySelector(".page-header .masthead"),Op=async()=>{try{const e=up();let t=Ip();if(t||await M("DOM_READY"),t=Ip(),!t)return;if(!(window.getIsPaywallEligible&&window.getIsPaywallEligible()))return void yp(t);await vp(t),yp(t),e?(async()=>{const{pageType:e,isPaywalled:t,subchannel:n}=K(),r=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),o="article"===e&&t&&r||"channel"===e&&"mailplusmoney"===n,i=document.querySelector(".page-header >.money.nav-secondary-container .nav-secondary ul.float-l"),a=i.querySelector("li:first-child a");a&&"Money Home"===a.textContent&&(a.textContent="Home"),i.appendChild(bp({isSelected:o,topNav:!0})),await M("DOM_READY");const s=document.querySelector(".footer .nav-secondary");if(s){const e=s.querySelector("li:first-child a");e&&"Money Home"===e.textContent&&(e.textContent="Home"),s.appendChild(bp({isSelected:o,topNav:!1}))}})():(async()=>{const{pageType:e,isPaywalled:t,channel:n,geo:r}=K(),o=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),i=t&&o,a="channel"===e&&["mailplus","aumailplus","usmailplus","mailplusus"].includes(n),s="article"===e&&i||a,c=document.querySelector(".page-header .nav-primary"),l=document.querySelector(".page-header > .nav-secondary-container"),u=window.getIsPaywallPuzzlesUser();if(s){const e=c.querySelector("span.selected"),t=c.querySelector("li:not(:first-child) .no-border");if(e&&(e.classList.remove("link-wocc","linkro-wocc","selected"),e.classList.add("link-gr6ox","linkro-ccox")),t&&t.classList.remove("no-border"),l){const e=l.querySelector("ul");if(e&&(e.innerHTML="",u)){const t=document.createElement("li"),n=document.createElement("li"),r=window.getPaywallPuzzlesUrl();t.classList.add("first"),t.innerHTML=`<a href="${hp()}" ${a?'class="current"':""}>Mail+ Home</a>`,n.innerHTML=`<a href="${r}">Puzzles</a>`,e.appendChild(t),e.appendChild(n)}l.classList.add("mailplus")}}else if(u){const e=window.getPaywallPuzzlesUrl(),t=c.querySelector('a[href="/puzzles/index.html"]')||l&&l.querySelector('a[href="/puzzles/index.html"]');t&&t.setAttribute("href",e)}if("CA"===r){const e=c.querySelector('a[href*="/puzzles/index.html"]'),t=e&&e.closest("li");t&&t.remove();const r=c.querySelector('a[href="/wellness-us/index.html"]'),o=r&&r.closest("li"),i=o&&o.querySelector("span"),a="podcasts"===n,s=o&&o.nextElementSibling.querySelector("a");o&&(r.innerHTML="Podcasts",r.setAttribute("href","/podcasts/index.html"),o.classList.remove("wellness"),o.classList.add("podcasts"),a&&(i.classList.remove("link-gr6ox","linkro-ccox"),i.classList.add("link-wocc","linkro-wocc"),i.classList.add("selected"),s&&s.classList.add("no-border")))}c.appendChild(wp({isSelected:s,topNav:!0})),await M("DOM_READY");const d=document.querySelector(".footer .nav-primary");if(d){if("CA"===r){const e=d.querySelector('a[href="/puzzles/index.html"]'),t=e&&e.closest("li");t&&t.remove();const r=d.querySelector('a[href="/wellness-us/index.html"]'),o=r&&r.closest("li"),i=o&&o.querySelector("span"),a="podcasts"===n,s=o&&o.nextElementSibling.querySelector("a");o&&(r.innerHTML="Podcasts",r.setAttribute("href","/podcasts/index.html"),o.classList.remove("wellness"),o.classList.add("podcasts"),a&&(i.classList.remove("link-gr6ox","linkro-ccox"),i.classList.add("link-wocc","linkro-wocc"),i.classList.add("selected"),s&&s.classList.add("no-border")))}d.appendChild(wp({isSelected:s,topNav:!1}))}})();const n=window.getIsPaywallSubscriber&&window.getIsPaywallSubscriber();await M("REFRESHED_PAYWALL_ENTITLEMENT");n!==(window.getIsPaywallSubscriber&&window.getIsPaywallSubscriber())&&await vp(t)}catch(e){Y().error("Error initialising paywall masthead desktop",e)}},Sp=e=>{const t=window.getIsPaywallEligible&&window.getIsPaywallEligible(),{pageType:n,isPaywalled:r,geo:o}=K(),i=["US","CA","MX"].includes(o),a=!window.getIsPaywalledForCountry||window.getIsPaywalledForCountry(),s=r&&a,c=up(),l="article"===n&&s,u=Ep();if(!l&&!u||!u&&!t)return;e.classList.add(c?"mailplus-menubar-tim":"mailplus-menubar"),c||document.documentElement.classList.add("has-mailplus-theme");const d=e.querySelector('[data-track-module*="masthead-channel"] span'),p=e.querySelector('[data-track-module*="masthead-channel"] a')||document.createElement("a");p.setAttribute("href",hp()),p.innerHTML="Mail+",p.classList.add("mailplus-channel-link"),i&&p.classList.add("mailplus-channel-link-us"),d&&d.replaceWith(p),(()=>{const e=document.querySelector('meta[name="theme-color"]')||document.createElement("meta");e.setAttribute("name","theme-color"),e.setAttribute("content","#1e3264"),document.head.appendChild(e)})()},Tp=()=>document.querySelector("#mobile-content > header"),Ap=async()=>{try{let e=Tp();if(e||await M("DOM_READY"),e=Tp(),!e)return;if(!(window.getIsPaywallEligible&&window.getIsPaywallEligible()))return void Sp(e);Sp(e),(()=>{const{geo:e}=K(),t=["US","CA","MX"].includes(e),n=document.querySelector("#nav"),r=document.createElement("li"),o=n.querySelector("li:first-child"),i=window.getIsPaywallPuzzlesUser();if(up()&&r.classList.add("full-width"),r.classList.add("mailplus-nav"),r.innerHTML=`\n    <span>\n      <a class="main-nav home" href="${hp()}" data-google-interstitial="false">\n        Mail+\n      </a>\n    </span>\n  `,t&&r.classList.add("mailplus-nav-us"),o.after(r),i&&!up()){const e=window.getPaywallPuzzlesUrl(),t=document.createElement("li");t.classList.add("mailplus-nav"),t.classList.add("mailplus-puzzles-nav"),t.innerHTML=`\n      <span>\n        <a class="main-nav home" href="${e}" data-google-interstitial="false">\n          Puzzles\n        </a>\n      </span>\n    `,r.after(t)}})()}catch(e){Y().error("Error initialising paywall masthead mobile",e)}},Cp=async()=>{try{if(window.getPaywallPurchaseUrl=mp,lp())return await Op(),void document.body.classList.add("mailplus-tim");await M("PAGE_METADATA_SET");const{renderPlatform:e}=G();"desktop"===e?await Op():"mobile"===e&&await Ap(),up()&&(await M("DOM_READY"),document.body.classList.add("mailplus-tim"))}catch(e){Y().error("Error initialising paywall masthead",e)}},Lp={getMailplusChannelUrl:hp,getPurchaseUrl:mp,setPaywallPurchaseMeta:gp};Cp().catch((()=>{}));const Pp="mol-fe-xp-module-data-utils",Rp=(Np=window.location.hostname,/^(live-(us|uk|au)\.(andweb\.dmgt\.net|mol\.dmgt\.net|mailonline\.co\.uk)|(?:www\.)?(dailymail|thisismoney)\.(co\.uk|com))$/.test(Np)?"www.dailymail.co.uk":"www.dailymailint.co.uk");var Np;const Mp="retrieveXpModuleHeadJson",Dp=async({name:e,env:t,values:n})=>{let r;const o=`https://${Rp}/xpmodules/${e}/renderHeadJson?data=`,i={env:t,values:n};try{r=`${o}${encodeURIComponent(JSON.stringify(i))}`}catch(t){return console.error(`[${Pp}] ${Mp}.urlError`,{error:t,hostname:Rp,name:e,...i}),null}try{const e=(await Ye().get(r,{timeout:1e4})).data;return e?(Array.isArray(e.scripts)||(e.scripts=[]),Array.isArray(e.styles)||(e.styles=[]),e):{scripts:[],styles:[]}}catch(e){return console.error(`[${Pp}] ${Mp}.thrownError`,{error:e,url:r}),null}},kp="retrieveXpModuleBody",xp=async({name:e,env:t,values:n})=>{let r;const o=`https://${Rp}/xpmodules/${e}/renderBody?data=`,i={env:t,values:n};try{r=`${o}${encodeURIComponent(JSON.stringify(i))}`}catch(t){return console.error(`[${Pp}] ${kp}.urlError`,{error:t,hostname:Rp,name:e,...i}),null}try{const{data:e}=await Ye().get(r,{timeout:1e4});return"string"!=typeof e||""===e?(console.error(`[${Pp}] ${kp}.invalidBody`,{body:e,url:r}),null):e}catch(e){return console.error(`[${Pp}] ${kp}.thrownError`,{error:e,url:r}),null}},Up="notificationWrapper_CURMH",Bp="notificationClose_ODVwA",Wp="notificationBody_fgixb",Vp="notificationBanner_Smyug",Gp="notificationBreakingNews_MQsxC",Fp="notificationSecondWord_nuQ0U",Kp="notificationTitle_HWtWy",jp=()=>{const e=document.body.querySelectorAll(`.${Up}`);if(e.length>0)for(const t of Array.from(e))document.body.removeChild(t)},Hp=(e,t,n)=>{jp();const r=`\n      <div class="${Wp}">\n        <div class="${Vp}">\n          <span class="${Gp}">\n            BREAKING <span class="${Fp}">NEWS</span>\n          </span>\n        </div>\n        <span class="${Kp}">\n          ${t.title}\n        </span>\n      </div>\n      <div class="${Bp}">\n      </div>`,o=setTimeout(jp,e),i=document.createElement("div");i.classList.add(Up),i.innerHTML=r;const a=()=>{document.body.contains(i)&&(document.body.removeChild(i),clearTimeout(o))},s=i.querySelector(`.${Wp}`),c=i.querySelector(`.${Bp}`);s.onclick=()=>{window.open(t.clickThroughUrl,"_blank").focus(),n&&"function"==typeof n.onClick&&n.onClick(),a()},c.onclick=a,document.body.appendChild(i)},$p="prePrompt_nIc9z",Yp="prePromptWrapper_SrdCF",qp="prePromptLogo_NeBBl",zp="prePromptCloseBtn_QTaG4",Xp="prePromptMain_ZNuKI",Jp="prePromptBell_cxJUW",Zp="prePromptText_XKZPC",Qp="prePromptConfirmBtn_M4juw",ef={femail:"Femail",health:"Health",money:"Money",news:"Breaking",royals:"Royal",sciencetech:"Science",shoppinguk:"Shopping",shoppingus:"Shopping",sport:"Sport",travel:"Travel",tvshowbiz:"Showbiz"},tf="pre-prompt",nf=()=>{const e=document.getElementById(tf);e&&document.body.contains(e)&&document.body.removeChild(e)},rf=(e,t)=>{if(document.getElementById(tf))return;const n=`Sign up to ${ef[e]||"Breaking"} News notifications`,r=document.createElement("div");r.id=tf,r.classList.add($p),r.dataset.channelColor=e,r.innerHTML=`<div class="${Yp}">\n    <button class="${zp}"></button>\n    <div class="${qp}">\n      <svg xmlns="http://www.w3.org/2000/svg" width="120" height="20" viewBox="0 0 120 20" fill="none">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.661 0.194706C20.0835 -0.158707 20.1989 0.0769828 20.1989 0.0769828L24.5423 2.67059C24.888 2.90632 24.7343 2.98518 24.7343 2.98518V15.0093C24.888 16.503 26.1178 17.0921 26.1178 17.0921C26.4638 17.367 26.3104 17.5635 26.3104 17.5635L22.9663 20C20.0835 19.0177 19.8144 16.6207 19.8144 16.6207V5.1068C19.7378 4.55684 19.469 4.6351 19.469 4.6351L17.2405 3.46051L17.2544 8.56647L19.6438 8.56712L17.2645 12.0905L17.2758 16.3186L18.9308 17.4846C19.1613 17.76 18.8154 17.7995 18.8154 17.7995L15.3564 20L10.2059 17.2098C9.7448 16.8955 10.0905 16.699 10.0905 16.699L11.2052 15.9921V12.298H8.77015L8.78292 17.0448L9.59081 17.5635C9.85994 17.8389 9.55256 18.0355 9.55256 18.0355L6.13185 20L1.63472 17.6029C1.25048 17.3281 1.67329 17.1315 1.67329 17.1315L2.94171 16.3847V5.73595L0.482 3.92798L0.366577 3.88855C-0.325048 3.49604 0.174337 3.29917 0.174337 3.29917L3.71043 0.980963C3.90243 0.823525 4.0561 1.05921 4.0561 1.05921L7.28485 2.98518C7.28485 2.98518 11.6405 0.606634 11.9357 0.425838C12.1277 0.307831 12.2813 0.465269 12.2813 0.465269L15.9712 2.55262L19.661 0.194706ZM45.5663 5.85334C45.5663 5.85334 45.7968 5.57851 46.1036 5.85334C46.2328 5.96872 47.0581 6.43656 47.9729 6.94096L48.3993 7.1752C49.5415 7.80064 50.678 8.40785 50.678 8.40785C50.678 8.40785 50.9856 8.60411 50.6394 8.8398C50.2935 9.07581 49.8712 9.18865 49.8712 9.18865C49.8712 9.18865 49.7168 9.03638 49.6022 9.50776C49.4748 10.0265 49.6404 15.9921 49.6404 15.9921C49.6404 15.9921 49.5636 16.2276 49.794 16.3452C50.0245 16.463 51.3546 17.2492 51.3546 17.2492C51.3546 17.2492 51.6237 17.4846 51.3546 17.6029C51.2391 17.6534 50.6042 18.1009 49.9162 18.5958L49.57 18.8456C48.7619 19.4302 47.9874 20 47.9874 20L43.4139 17.6424C43.4139 17.6424 43.1751 17.3687 43.4903 17.0921C43.7598 16.8561 44.264 16.455 44.264 16.455C44.264 16.455 44.2979 16.0309 44.2593 15.8738L44.1824 9.82207C44.1824 9.82207 44.2979 9.62609 43.9516 9.50776C43.6057 9.39008 42.3377 8.56467 42.3377 8.56467C42.3377 8.56467 42.1454 8.40785 42.3759 8.05382C42.6067 7.70074 45.5663 5.85334 45.5663 5.85334ZM35.6883 5.30339C36.1494 4.98908 36.342 5.26391 36.342 5.26391C36.342 5.26391 41.2996 7.77899 41.5687 8.0933C41.8378 8.40785 41.6841 8.64354 41.6841 8.64354L40.877 9.31122C40.6847 9.35126 40.7229 9.62609 40.7229 9.62609V15.5596L42.8376 17.0138C43.068 17.2887 42.914 17.5635 42.914 17.5635L39.8779 20L34.8813 17.5246C34.6505 17.2887 34.4968 17.5635 34.4968 17.5635L31.5371 20C27.4821 19.4637 26.821 16.4866 26.7344 15.9521L26.7317 15.9357C26.7255 15.8939 26.7225 15.869 26.7225 15.869C26.4487 11.499 28.1168 10.4117 28.1168 10.4117C30.269 7.5433 35.6883 5.30339 35.6883 5.30339ZM58.2498 0.941533L58.2493 0.987414C58.2428 1.60758 58.173 8.37283 58.1685 12.6091L58.1686 13.4949C58.1707 14.8924 58.1828 15.8664 58.2111 15.9921C58.3266 16.503 58.557 16.3847 58.557 16.3847C58.557 16.3847 58.8454 16.591 59.1674 16.812L59.4112 16.9776C59.6534 17.14 59.8786 17.2838 59.9795 17.3281C60.2482 17.4458 60.0945 17.7207 60.0945 17.7207L57.2886 19.9605C57.2886 19.9605 56.1395 19.4426 54.9453 18.8938L54.4975 18.6876C53.4577 18.2073 52.489 17.7501 52.3309 17.6424C51.8692 17.3281 52.1769 17.1315 52.1769 17.1315L52.9837 16.3064L52.9842 16.2619C52.9888 15.8954 53.0203 13.3209 53.0307 10.6013L53.0335 9.61948L53.0335 8.3279C53.029 6.0054 52.9978 4.0178 52.9072 3.77087C52.6764 3.14201 51.9461 2.90632 51.9461 2.90632C51.7924 2.63149 51.9847 2.59206 51.9847 2.59206C51.9847 2.59206 56.9809 0.941533 57.6348 0.784704C58.2884 0.627266 58.2498 0.941533 58.2498 0.941533ZM68.6932 1.98611C72.9117 1.98611 75.0542 4.87652 75.0542 10.1606V11.0639C75.0542 16.4834 72.7573 19.1254 68.6932 19.1254C64.9164 19.1254 62.3322 16.5963 62.3322 11.109V10.1606C62.3322 4.85398 64.6733 1.98611 68.6932 1.98611ZM114.721 5.89269C118.034 5.89269 120 8.24117 120 12.0575V12.9607H110.635C110.635 16.4609 112.491 17.9963 115.097 17.9963C117.085 17.9963 118.454 17.4093 119.139 17.0254V18.1319C118.277 18.7641 116.621 19.1029 114.854 19.1029C112.314 19.1029 109.31 17.635 109.31 13.0059V12.1026C109.31 8.17346 111.607 5.89269 114.721 5.89269ZM103.457 5.91532C105.732 5.91532 107.212 7.20242 107.212 9.5961V18.8545H105.909V9.34768C105.909 7.97024 104.849 6.9992 103.082 6.9992C101.315 6.9992 99.6803 8.01537 98.9293 9.70898V18.8545H97.6262V6.32175H98.8409L98.8851 8.62506C99.4153 7.31534 101.094 5.91532 103.457 5.91532ZM94.8433 6.18629V18.8545H93.5402V6.18629H94.8433ZM83.0053 5.91532C85.2803 5.91532 86.7601 7.20242 86.7601 9.5961V18.8545H85.457V9.34768C85.457 7.97024 84.3967 6.9992 82.6299 6.9992C80.8628 6.9992 79.2285 8.01537 78.4775 9.70898V18.8545H77.1744V6.32175H78.3891L78.4333 8.62506C78.9635 7.31534 80.6419 5.91532 83.0053 5.91532ZM90.6912 2.21195V18.8545H89.4105V2.21195H90.6912ZM68.6932 3.07003C65.4685 3.07003 63.7017 5.26046 63.7017 10.3864V10.7929C63.7017 15.806 65.4904 18.019 68.6932 18.019C71.9179 18.019 73.6846 16.1221 73.6846 10.838V10.3864C73.6846 5.44109 72.1165 3.07003 68.6932 3.07003ZM32.5747 8.01468C30.6536 8.87927 30.5767 10.5689 30.5767 10.5689C30.1857 12.0753 30.7343 13.4816 30.9921 14.024C32.0083 15.8168 33.9592 16.8173 33.9592 16.8173C34.8041 17.2098 35.1501 16.6207 35.1501 16.6207L35.1884 9.8075L32.5747 8.01468ZM8.4384 3.52847C7.90716 3.54071 7.80621 3.85449 7.78821 3.94389L7.78451 3.96746L7.7459 16.3847C7.78451 16.6595 7.93818 16.503 7.93818 16.503L8.47522 16.8476L8.4384 3.52847ZM16.9574 12.298H16.3939V15.7167C16.4708 15.9921 16.7014 15.9133 16.7014 15.9133L16.9681 16.1013L16.9574 12.298ZM114.765 7.04437C112.468 7.04437 110.679 8.62506 110.635 11.922H118.675C118.675 8.62506 117.173 7.04437 114.765 7.04437ZM8.74611 3.59736L8.76808 11.6348L10.7824 8.56467L11.2052 8.56529V5.1068C11.1078 4.67454 10.9549 4.72076 10.9102 4.74522L10.8975 4.75339L8.74611 3.59736ZM16.9328 3.31402C16.2504 3.09863 16.3554 3.53486 16.3554 3.53486L16.3939 8.21155V8.56647H16.9473L16.9328 3.31402ZM47.2193 0.548689C47.2193 0.548689 47.9297 0.0769828 48.8718 0.666412C48.8718 0.666412 49.948 1.13779 49.4863 2.86689C49.4863 2.86689 48.756 4.6351 46.9502 5.38192C46.9502 5.38192 46.5271 5.46082 46.3731 5.0677C46.3731 5.0677 45.5663 3.84973 45.8354 2.31689C45.8354 2.31689 46.1231 1.15781 47.2193 0.548689ZM94.9981 2.84423V4.76364H93.3416V2.84423H94.9981Z" fill="currentColor"/>\n      </svg>\n    </div>\n    <div class="${Xp}">\n      <div class="${Jp}">\n        <svg xmlns="http://www.w3.org/2000/svg" width="42" height="40" viewBox="0 0 42 40" fill="none">\n          <path fill-rule="evenodd" clip-rule="evenodd" d="M33.8463 32.9194C26.2075 24.5494 29.2825 16.1195 29.2825 13.6621C29.2825 7.89756 24.6365 3.16072 18.6631 2.51017V1.24872C18.6631 0.558908 18.0662 0 17.3287 0C16.591 0 15.9944 0.559189 15.9944 1.24872V2.49743C8.9082 3.17806 4.09318 9.64216 5.50295 15.8725C5.50295 16.0688 7.87153 25.0485 0.81895 32.9067C0.0850103 33.7185 0.698998 34.9548 1.83334 34.9548C5.13431 34.9486 31.6524 34.9666 32.8467 34.9672C33.9807 34.9672 34.5935 33.7188 33.8463 32.9194ZM13.322 36.2412C13.322 38.318 15.1194 40 17.3385 40C19.5577 40 21.3551 38.318 21.3551 36.2412V36.2131L13.322 36.2036V36.2412Z" fill="currentColor"/>\n          <path d="M32.4912 19.5833C36.9143 19.5833 40.5 16.0389 40.5 11.6667C40.5 7.29441 36.9143 3.75 32.4912 3.75C28.068 3.75 24.4823 7.29441 24.4823 11.6667C24.4823 16.0389 28.068 19.5833 32.4912 19.5833Z" fill="var(--pre-prompt-bell-fill-color)" stroke="white" stroke-width="2.5"/>\n        </svg>\n      </div>\n      <div class="${Zp}">${n}</div>\n    </div>\n    <button class="${Qp}">Sign up</button>\n  </div>`;const o=r.querySelector(`.${zp}`),i=r.querySelector(`.${Qp}`);o&&o.addEventListener("click",(()=>{nf(),t(!1)})),i&&i.addEventListener("click",(()=>{nf(),t(!0)})),document.body.append(r)},of=async()=>{const{webPush:{baseEndpoint:e}}=G();if(!window.hulk)try{await bo(`${e}v1/static/latest/mol-fe-web-push-browser-register/register.js`,{beforeCurrentScript:!0,defer:!0})}catch(e){Y().error("There was a problem attempting to loading register.js",e)}return window.hulk},af=()=>{try{return decodeURIComponent(document.cookie.match(/s_(m|v|a|f)id\%3D(.+?)\%3B/)[2]).split("|")[0]}catch(e){Y().error("could not find Omniture visitor ID")}},sf=(e,t)=>{const n=document.querySelector('meta[name="keywords"]'),r=n&&n.content?n.content.split(","):[],o=location.host.split(".")[1];return r.filter((n=>n!==e&&n!==t&&n!==o))},cf=({isMobile:e,isTablet:t}={})=>{switch(!0){case t:return"tablet";case e:return"mobile"}return"desktop"},lf=()=>{const{environment:e,webPush:{promptFrequency:t},syncBundleLocation:n}=G(),{isMobile:r,isTablet:o,channel:i,geo:a,subchannel:s}=K(),c=new URL(document.location).searchParams,l=i?[i]:[],u=s?[s]:[],d="push-notification"===(c&&c.get("ito"))?sf(l[0],u[0]):void 0,p=af(),f=p?[p]:[],m=!0;return{environment:e,metadata:{channels:l,geo:a,keywords:d,organisation:"mol",platform:cf({isMobile:r,isTablet:o}),profilingAllowed:m,subChannels:u,userAgent:navigator.userAgent,visitorIds:f},notificationMacros:{impression:[]},promptFrequency:t,swUrl:`${n}/sw.js`}},uf=e=>e.scrollTop||document.documentElement.scrollTop||document.body.scrollTop,df=5e3,pf=async()=>{try{const{webPush:e,articleId:t,contentType:n}=G(),{channel:r,isMobile:o,subchannel:i}=K(),{hostname:a,prePromptDelayTTL:s=df,promptEnabled:c,pullNotificationEnabled:l,pullNotificationTTL:u=3e5,pullNotificationScrollThreshold:d}=e||{},{Register:p}=await of(),f=lf();if(a&&location.hostname.includes(a)){const e=new p(f);if(e.on("error",Y().error),p.isWebPushSupported()&&(e.on("notification_click",(e=>ht.publish(ht.WEB_PUSH_NOTIFICATION_CLICK,e))),e.on("prompt_pre_prompt_impression",(e=>ht.publish(ht.WEB_PUSH_PRE_PROMPT_IMPRESSION,e))),e.on("prompt_pre_prompt_click",(e=>ht.publish(ht.WEB_PUSH_PRE_PROMPT_CLICK,e))),e.on("prompt_impression",(e=>ht.publish(ht.WEB_PUSH_PROMPT_IMPRESSION,e))),e.on("prompt_click",(e=>ht.publish(ht.WEB_PUSH_PROMPT_CLICK,e))),await e.init(),c)){const t=!o&&(()=>{const e=/Version\/([0-9.]+) ?Safari\/[0-9.]+/.exec(navigator.userAgent);if(e){const t=parseFloat(e[1]);return!isNaN(t)&&t>=16}return!1})();setTimeout((()=>{e.showPrompt(t?rf.bind(null,r):void 0)}),s)}!l||"home"===n&&r===i&&["home","ushome","auhome"].includes(r)||(e.on("pull_notification_click",(e=>ht.publish(ht.WEB_PULL_NOTIFICATION_CLICK,e))),await M("DOM_READY"),"number"==typeof d&&d>0&&await((e,t)=>{if(!e||"number"!=typeof e)throw new TypeError("missing or wrong required threshold number");return new Promise((n=>{if(uf(t)>=e)return void n();const r=()=>{uf(t)>=e&&(n(),t.removeEventListener("scroll",r))};t.addEventListener("scroll",r)}))})(d,document),await e.initPullNotifications({canRender:e=>"object"==typeof e&&(!e.assetId||e.assetId!==t),renderPullNotification:Hp.bind(null,u)}))}}catch(e){Y().error(`Error initializing web push: ${e}`)}},{ccRender:ff}=K();M("PAGE_METADATA_SET",(()=>{ff||pf()}));const{externalLinkTracker:mf,trackSwipe:_f}=Gt,{pageEvents:hf}=p;hf.getPageMetadata=(...e)=>(Y().warn('"pageEvents.getPageMetadata" has been deprecated. Please use "DM.molFePageMetadata.getPageMetadata" instead'),G(...e));const{isLoggedIn:Ef,userData:gf,userId:vf}=window.DM||{};window.DM={...O,isLoggedIn:Ef,userData:gf,userId:vf},window._=m,window.MobileUtils=_,window.isAdFreeEntitled=()=>!1,Object.freeze(window.DM.pageEvents),document.addEventListener("click",(e=>{const t=e.target.closest("[data-social-first-article-links] .facebook, [data-social-first-article-links] .twitter");if(t){e.preventDefault();const n=t.classList.contains("twitter")?"twitter":"facebook",r=t.classList.contains("twitter")?"tw":"fb",o=t.querySelector("button").getAttribute("data-url"),i=G(),a=t.closest(".article").querySelector("a"),s=a.textContent,c=a.getAttribute("href").match(/\/(article|fb)-(\d+)\//)[2],l=ft().get("social-share-platform");let u="";t.querySelector("button").hasAttribute("data-preferred-shared-network-enabled")&&("twitter"===l?u="twitter_preferred-":"facebook"===l&&(u="facebook_preferred-")),window.open(o,"share-article-"+r+"-"+zs++,"resizable=1,scrollbars=1,status=1,width=1050,height=650"),"twitter"===n?l||ft().set("social-share-platform",n,{path:"/"}):"facebook"===n&&ft().set("social-share-platform",n,{path:"/"}),ht.publish(ht.SOCIAL_SHARE_CLICKED,{articleId:c,articleTitle:s,pageMetadata:i,placement:u+"home",site:n,type:n+"-type"})}})),ec(),M("PAGE_METADATA_SET",(()=>{try{const e=Ce();e&&e.length&&(window.molMVTest=(window.molMVTest?window.molMVTest+",":"")+e.join(","))}catch(e){Y().error("Error setting multivariant experiments to ads MVT",e)}}));try{(()=>{try{window.getIsPaywallEligible=dl,window.getIsPaywallSubscriber=ll,window.getPaywallEntitlements=pl,window.getPaywallEntitlementsMightChange=hl,window.getPaywallSubscriberType=El,window.paywallSubscriberType=El(),window.getIsPaywallPuzzlesUser=ml,window.getPaywallPuzzlesUrl=_l,window.getIsPaywalledForCountry=gl,window.getMailplusConsentParams=vl,window.addMailplusConsentParamsToUrl=yl}catch(e){}})();dl()||document.documentElement.classList.add("paywall-ineligible")}catch(e){}})()})();
//# sourceMappingURL=desktop.js.map