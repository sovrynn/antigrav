const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./apps-startup-7p1cogge.js","./vendor-hx2zjovf.js","./shared-f4usgi4a.js","./apps-js-api-lxj7al92.js","./apps-tracker-edgqji0r.js","./apps-add-to-bag-dcd7r8jd.js","./apps-categories-v1-c3yppbmk.js","./apps-categories-v2-k8sh3ity.js","./apps-minicart-v1-m7u49zip.js","./apps-minicart-v2-ccwx3xzh.js","./apps-product-thumbnail-8bpkixwy.js","./apps-product-browser-e9v1r4xl.js","./vendor-crane-app-renderer-ief1c0jb.js","./apps-product-browser-popup-jju5ywj4.js","./apps-search-panel-ldyohhi1.js","./apps-search-widget-fh2czdxs.js","./apps-single-product-b5w3xh1y.js","./apps-cp-preview-product-card-g57u6vi7.js","./apps-cp-preview-category-nzfryu7m.js"])))=>i.map(i=>d[i]);
const Ne="modulepreload",Ue=function(t,e){return new URL(t,e).href},re={},h=function(e,r,n){let o=Promise.resolve();if(r&&r.length>0){let s=function(c){return Promise.all(c.map(l=>Promise.resolve(l).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=s(r.map(c=>{if(c=Ue(c,n),c in re)return;re[c]=!0;const l=c.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(!!n)for(let _=u.length-1;_>=0;_--){const D=u[_];if(D.href===c&&(!l||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const E=document.createElement("link");if(E.rel=l?"stylesheet":Ne,l||(E.as="script"),E.crossOrigin="",E.href=c,m&&E.setAttribute("nonce",m),document.head.appendChild(E),l)return new Promise((_,D)=>{E.addEventListener("load",_),E.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=s,window.dispatchEvent(u),!u.defaultPrevented)throw s}return o.then(s=>{for(const u of s||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};var Me=Object.defineProperty,be=(t,e,r)=>e in t?Me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ne=(t,e,r)=>be(t,typeof e!="symbol"?e+"":e,r),xe=Object.defineProperty,We=(t,e,r)=>e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oe=(t,e,r)=>We(t,typeof e!="symbol"?e+"":e,r);const I={INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR",LOG:"LOG"};class Ve{constructor(e){oe(this,"eventsLogSettings"),oe(this,"allowedEventTypes"),this.eventsLogSettings=e,this.allowedEventTypes=Object.keys(this.eventsLogSettings).sort()}info(e,...r){this.doLog(I.INFO,e,r)}warn(e,...r){this.doLog(I.WARNING,e,r)}error(e,...r){this.doLog(I.ERROR,e,r)}log(e,...r){this.doLog(I.LOG,e,r)}doLog(e,r,n){this.printGreetingsIfNeeded(this.allowedEventTypes);const o=this.eventsLogSettings[r];ke(e,r,o,this.getEventTypesToLog())&&this.printLog(e,o,n)}}function Fe(t){switch(t){case I.INFO:return console.info;case I.WARNING:return console.warn;case I.ERROR:return console.error;case I.LOG:return console.info;default:throw new Error(`Unknown log level '${t}'`)}}const C={ALL:"ALL",PARTIAL:"PARTIAL",DEFAULT:"DEFAULT"};function Be(t,e,r){const n=r.type;switch(n){case C.ALL:return!0;case C.PARTIAL:return r.events.some(o=>o===t);case C.DEFAULT:return e.isDefault===!0;default:throw new Error(`Unknown event types to log '${n}'`)}}function ke(t,e,r,n){return t===I.WARNING||t===I.ERROR||Be(e,r,n)}const k="ALL";function Ge(t){return["%c%s",`background: ${t.background}; color: ${t.color}; padding: 1px 4px`,t.badgeName]}class Je extends Ve{constructor(e,r){super(e),ne(this,"localStorageKey"),ne(this,"isGreetingsPrinted",!1),this.localStorageKey=r}createDebugGreetingsData(e){const r="",n='font-family: "Monospace"; font-size: 1.1em';return[`%cTo enable all development logs please run in development console:
%c    localStorage.setItem("${this.localStorageKey}", "${k}")
%cInstead of %c${k} %cyou can use comma separated event types list to partially enable logs.
Available event types are: %O`,r,n,r,n,r,e]}printGreetingsIfNeeded(e){this.isGreetingsPrinted||(this.isGreetingsPrinted=!0,console.log(...this.createDebugGreetingsData(e)))}printLog(e,r,n){const o=Ge(r);Fe(e)(...o,...n)}getEventTypesToLog(){try{const e=window.localStorage.getItem(this.localStorageKey);return e===""||e===null?{type:C.DEFAULT}:e===k||e==="true"?{type:C.ALL}:{type:C.PARTIAL,events:e.split(",")}}catch{return{type:C.DEFAULT}}}shutdown(){return Promise.resolve()}flush(){return Promise.resolve()}}function L(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var He={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function G(t,e){function r(o,i,s){if(!(typeof document>"u")){s=L({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var d in s)s[d]&&(u+="; "+d,s[d]!==!0&&(u+="="+s[d].split(";")[0]));return document.cookie=o+"="+t.write(i,o)+u}}function n(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var i=document.cookie?document.cookie.split("; "):[],s={},u=0;u<i.length;u++){var d=i[u].split("="),m=d.slice(1).join("=");try{var c=decodeURIComponent(d[0]);if(s[c]=t.read(m,c),o===c)break}catch{}}return o?s[o]:s}}return Object.create({set:r,get:n,remove:function(o,i){r(o,"",L({},i,{expires:-1}))},withAttributes:function(o){return G(this.converter,L({},this.attributes,o))},withConverter:function(o){return G(L({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var z=G(He,{path:"/"});class T{static getEntryPointQueryParams(){return T.entryPointQueryParams}static setEntryPointQueryParams(e){T.entryPointQueryParams=e}static getEcommerceJsParams(){return T.ecommerceJsParams}static setEcommerceJsParams(e){T.ecommerceJsParams=e}}const J={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},K="ec-cart-widget",a={ADD_TO_BAG:"AddToBag",CATEGORIES_V2:"CategoriesV2",HORIZONTAL_CATEGORIES_V1:"Categories",MINICART_V1:"Minicart",MINICART_V2:"MinicartV2",PRODUCT:"Product",PRODUCT_BROWSER:"ProductBrowser",PRODUCT_THUMBNAIL:"ProductThumbnail",SEARCH_PANEL:"SearchPanel",SEARCH_WIDGET:"SearchWidget",SINGLE_PRODUCT:"SingleProduct",VERTICAL_CATEGORIES_V1:"VCategories",CP_PREVIEW_PRODUCT_CARD:"CPPreviewProductCard",CP_PREVIEW_CATEGORY:"CPPreviewCategory"},S={UNMOUNTED:"UNMOUNTED",MOUNTING:"MOUNTING",MOUNTED:"MOUNTED"};function y(){return window._xnext_initialization_scripts}function je(t){window._xnext_initialization_scripts=window._xnext_initialization_scripts.filter(e=>!t(e))}function V(t){y().push(t)}function X(t){return y().find(e=>e.element===t)}function he(){return y().filter(t=>t.mountState===void 0||t.mountState===S.UNMOUNTED)}function ie(){return y().filter(t=>t.mountState===S.MOUNTED)}function Qr(){je(t=>t.widgetType===a.PRODUCT_BROWSER)}function qe(t){return y().find(e=>e.widgetType===t)}function fe(){return y().some(t=>t.widgetType===a.PRODUCT_BROWSER)}function $e(){return y().some(t=>t.widgetType===a.PRODUCT||t.widgetType===a.SINGLE_PRODUCT)}function Ae(){return y().some(t=>t.widgetType===a.MINICART_V1||t.widgetType===a.MINICART_V2)}function Ee(){var r,n,o;const t=[a.PRODUCT_BROWSER,a.SINGLE_PRODUCT,a.PRODUCT,a.MINICART_V1,a.CATEGORIES_V2,a.VERTICAL_CATEGORIES_V1];for(const i of t){const s=(n=(r=y().filter(u=>u.widgetType===i))==null?void 0:r.reverse())==null?void 0:n[0];if(s!==void 0)return(o=s.element)==null?void 0:o.parentNode}const e=document.getElementsByClassName(K);if(e.length>0){const i=e[e.length-1];return i==null?void 0:i.parentNode}}function H(t,e){var r;if(((r=document.defaultView)==null?void 0:r.getComputedStyle)!==void 0)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function Ye(){const t={},e=Ee();if(e!==void 0){const r=H(e,"font-family");r!==void 0&&(t["font-family"]=r)}return t}function ze(t){var n;const e=document.createElement("a");e.href="",e.textContent="",t.appendChild(e);const r=((n=document.defaultView)==null?void 0:n.getComputedStyle(e,null).color)??"";return t.removeChild(e),r}function Ke(t){let e=t,r=H(e,"background-color");for(;r===void 0||r==="transparent"||r==="#000000"||r==="rgba(0, 0, 0, 0)";)e===document.documentElement?r="white":(e=e.parentNode,r=H(e,"background-color"));return r}function Xe(t,e){var n;let r;if(((n=e==null?void 0:e.chameleon)==null?void 0:n.font)!==void 0&&(r=e.chameleon.font),(r===void 0&&t||r==="auto")&&(r=Ye()),r!==void 0){const i=r["font-family"];if(i!==void 0){const s=i.split(/,\s*/);let u="",d="";for(const m of s){if(u.length+m.length+d.length>150)break;u+=d+m,d=","}return u}}}function Qe(t,e){var r,n;return t&&(((n=(r=e==null?void 0:e.chameleon)==null?void 0:r.gallery)==null?void 0:n.useExactColors)??!1)}function Ze(){var t;return((t=window.top)==null?void 0:t.location)!==window.location}function et(t,e){var m,c;let r;((m=e==null?void 0:e.chameleon)==null?void 0:m.colors)!==void 0&&(r=(c=e==null?void 0:e.chameleon)==null?void 0:c.colors);const n=document.styleSheets.length===0;if(r!==void 0&&r!=="auto"||!t||n)return r!=="auto"?r:{};const o={},i=Ee();if(i===void 0)return o;const s=getComputedStyle(i,null).color;s.replace(/ /g,"")!=="rgba(0,0,0,0)"&&s!=="transparent"&&(o["color-foreground"]=s,o["color-price"]=o["color-foreground"]);const u=Ke(i);u.replace(/ /g,"")!=="rgba(0,0,0,0)"&&u!=="transparent"?o["color-background"]=u:o["color-background"]="white";const d=ze(i);return d.replace(/ /g,"")!=="rgba(0,0,0,0)"&&d!=="transparent"&&(o["color-link"]=d),o}function Ie(t,e){const r=t&&!Ze();return{isEnabled:t,colors:et(r,e),fontFamily:Xe(r,e),useExactColors:Qe(r,e)}}const tt="ecwid_body";function rt(){let t;const r=document.getElementsByTagName("body")[0];return r!==void 0&&(r.id===""&&(r.id=tt),t=r.id),t}const nt="ecwid_html";function ot(){let t;const r=document.getElementsByTagName("html")[0];return r!==void 0&&(r.id===""&&(r.id=nt),t=r.id),t}const w={SUCCESS:"success",DUPLICATE:"duplicate",FAILED:"failed"},g={APP_LIFECYCLE:"APP_LIFECYCLE",DEPRECATION:"DEPRECATION",JS_API:"JS_API",PERSISTENCE:"PERSISTENCE",RESOURCES:"RESOURCES",REST:"REST",ROUTER:"ROUTER",MUTATION:"MUTATION",SUSPENSE:"SUSPENSE",SSR:"SSR",TODO:"TODO",TRACKER:"TRACKER",CUSTOM_BLOCK:"CUSTOM_BLOCK"},it={[g.APP_LIFECYCLE]:{badgeName:"app-lifecycle",background:"#006400",color:"#ffffff"},[g.DEPRECATION]:{badgeName:"deprecation",background:"#8b4513",color:"#ffffff",isDefault:!0},[g.JS_API]:{badgeName:"js-api",background:"#800080",color:"#ffffff"},[g.MUTATION]:{badgeName:"mutation",background:"#FFFF00",color:"#000000"},[g.PERSISTENCE]:{badgeName:"persistence",background:"#ff8c00",color:"#ffffff"},[g.RESOURCES]:{badgeName:"resources",background:"#20b2aa",color:"#ffffff"},[g.REST]:{badgeName:"rest",background:"#20b2aa",color:"#ffffff"},[g.ROUTER]:{badgeName:"router",background:"#1e90ff",color:"#ffffff"},[g.SUSPENSE]:{badgeName:"suspense",background:"#daa520",color:"#ffffff"},[g.SSR]:{badgeName:"ssr",background:"#191970",color:"#ffffff",isDefault:!0},[g.TODO]:{badgeName:"todo",background:"#8b0000",color:"#ffffff",isDefault:!0},[g.TRACKER]:{badgeName:"tracker",background:"#8a2be2",color:"#ffffff"},[g.CUSTOM_BLOCK]:{badgeName:"custom-block",background:"#4b0082",color:"#ffffff"}};function Q(t){return t!==void 0?[t]:[]}function Te(t){return new Date().getTime()-t.getTime()}function ye(t){const e=[`#${t.resourceLoadIndex}`,t.resourceType,"⮕",t.resourceUrl,...Q(t.attributes)];t.logger.info(g.RESOURCES,...e)}function Se(t){const e=Te(t.requestStartTime),r=[`#${t.resourceLoadIndex}`,t.resourceType,"⬅",`[${e} ms]`,t.resourceUrl,...Q(t.attributes)];t.logger.info(g.RESOURCES,...r)}function b(t){const e=Te(t.requestStartTime),r=[`#${t.resourceLoadIndex}`,t.resourceType,"⛌",`[${e} ms]`,t.resourceUrl,...Q(t.attributes),t.errorDetails];t.logger.warn(g.RESOURCES,...r)}function st(t){return new Promise(e=>{setTimeout(()=>e(t()))})}function Ce(t,e){if(e===void 0)return t;let r;const n=Promise.race([t,new Promise((o,i)=>{r=setTimeout(()=>{i(new Error(`Timeout exceeded (${e} ms)`))},e)})]);return n.finally(()=>clearTimeout(r)),n}function se(t,e,r,n,o){const i=document.querySelectorAll(`script[src='${t}']`);if(i.length>0){const c={type:w.DUPLICATE,scriptElement:i[0]};return Promise.resolve(c)}const s=(r.resourceLoadIndex??0)+1;r.resourceLoadIndex=s;const u="🔨 JS",d=new Date;ye({resourceLoadIndex:r.resourceLoadIndex,resourceType:u,resourceUrl:t,attributes:void 0,logger:n});const m=new Promise(c=>{var f;const l=document.createElement("script");l.type="text/javascript",l.src=t,l.async=e,l.onerror=()=>{b({resourceLoadIndex:s,resourceType:u,requestStartTime:d,resourceUrl:t,attributes:void 0,errorDetails:void 0,logger:n}),l.remove();const A={type:w.FAILED};c(A)},l.onload=()=>{Se({resourceLoadIndex:s,resourceType:u,requestStartTime:d,resourceUrl:t,attributes:void 0,logger:n});const A={type:w.SUCCESS,scriptElement:l};c(A)},(f=document.getElementsByTagName("head")[0])==null||f.appendChild(l)});return Ce(m,o).catch(c=>(c instanceof Error&&b({resourceLoadIndex:s,resourceType:u,requestStartTime:d,resourceUrl:t,attributes:void 0,errorDetails:c.message,logger:n}),Promise.resolve({type:w.FAILED})))}const O={SUCCESS:"success",DUPLICATE:"duplicate",FAILED:"failed"},j="data-loading";function ct(t,e,r,n,o){const i=document.head.querySelectorAll(`link[href='${t}']`);if(i.length>0){const c={type:O.DUPLICATE,linkElement:i[0]};return Promise.resolve(c)}const s=(n.resourceLoadIndex??0)+1;n.resourceLoadIndex=s;const u="🎨 CSS",d=new Date;ye({resourceLoadIndex:s,resourceType:u,resourceUrl:t,attributes:e,logger:o});const m=new Promise(c=>{var f;const l=document.createElement("link");l.rel="stylesheet",l.href=t,l.setAttribute(j,""),e!==void 0&&Object.entries(e).forEach(([A,E])=>{l.setAttribute(A,E)}),l.onerror=()=>{b({resourceLoadIndex:s,resourceType:u,requestStartTime:d,resourceUrl:t,attributes:e,errorDetails:void 0,logger:o}),l.remove();const A={type:O.FAILED};c(A)},l.onload=()=>{l.removeAttribute(j),Se({resourceLoadIndex:s,resourceType:u,requestStartTime:d,resourceUrl:t,attributes:e,logger:o});const A={type:O.SUCCESS,linkElement:l};c(A)},(f=document.getElementsByTagName("head")[0])==null||f.appendChild(l)});return Ce(m,r).catch(c=>(b({resourceLoadIndex:s,resourceType:u,requestStartTime:d,resourceUrl:t,attributes:void 0,errorDetails:c instanceof Error?c.message:void 0,logger:o}),Promise.resolve({type:O.FAILED})))}function at(t){return Object.entries(t).map(([e,r])=>`${encodeURIComponent(e)}=${encodeURIComponent(r.substring(0,150))}`).join("&")}function ut(t,e){const r={};return Object.entries(e.baseQueryParams).forEach(([n,o])=>{r[n]=o}),r.ownerid=e.storeId.toString(),e.cssSelectorsPrefix!==""&&(r["id-selector"]=e.cssSelectorsPrefix),e.isHoverDisabled&&(r.hover="disable"),e.chameleonParams.colors!==void 0&&Object.entries(e.chameleonParams.colors).forEach(([n,o])=>{r[n]=o}),e.chameleonParams.fontFamily!==void 0&&(r["font-family"]=e.chameleonParams.fontFamily),e.chameleonParams.useExactColors&&(r.useExactGalleryColors="true"),r.frontendV2="true",`${t}?${at(r)}`}const dt=1e4;function lt(){return"ontouchstart"in window&&typeof window.matchMedia=="function"&&!window.matchMedia("(pointer: fine)").matches&&window.matchMedia("(hover: none)").matches}function gt(t,e){try{const r=new URL(e),n=new URL(t);return n.origin===r.origin&&n.pathname===r.pathname}catch{return!1}}function pt(t){const e=Array.from(document.getElementsByTagName("link")).filter(i=>i.rel==="stylesheet").filter(i=>!i.hasAttribute(j)).filter(i=>gt(i.href,t)),r=e.filter(i=>document.head.contains(i)),o=[...e.filter(i=>document.body.contains(i))];return r.length>1&&o.push(...r.slice(0,-1)),o}function mt(t,e,r,n,o){var d;const i={baseQueryParams:t.stylesheetsSettings.baseQueryParams,cssSelectorsPrefix:((d=e.stylesheet)==null?void 0:d.cssSelectorsPrefix)??"",chameleonParams:Ie(t.isChameleonEnabled,e.ecConfig),isHoverDisabled:lt(),storeId:o},s=m=>{const c=ut(m,i);return ct(c,{"data-ec-stylesheet":""},dt,r,n)},u=t.stylesheetsSettings.baseUrl;return s(u.primaryUrl).then(m=>(m.type===O.SUCCESS&&pt(u.primaryUrl).forEach(l=>{n.warn(g.RESOURCES,"Removing obsolete stylesheet link element",l),l.remove()}),m)).catch(()=>s(u.fallbackUrl))}function Z(t,e){return{widgetType:t,id:e.id!==""?e.id:void 0,currentScript:void 0,element:e,arg:[],mountState:S.UNMOUNTED,unmountFn:void 0}}function ht(t){window.ec.config=window.ec.config??{},window.ec.config.chameleonDefaults=window.ec.config.chameleonDefaults??{},window.ec.config.chameleonDefaults.isEnabled=t.isEnabled,window.ec.config.chameleonDefaults.gallery=window.ec.config.chameleonDefaults.gallery??{},t.colors!==void 0&&(window.ec.config.chameleonDefaults.colors=t.colors),t.fontFamily!==void 0&&(window.ec.config.chameleonDefaults.font={"font-family":t.fontFamily})}function ft(t){var e;window.css_selectors_prefix=((e=t.stylesheet)==null?void 0:e.cssSelectorsPrefix)??""}function At(t){t.then(e=>{window.ecwidMessages={...window.ecwidMessages,...e.translationsSettings.overrides}})}const Et="new-frontend",Zr="en";function It(t){if(t.cssSelectorsPrefix!==void 0)return t.cssSelectorsPrefix;let e="";return t.isCssSelectorsPrefixDisabled!==!0&&(t.htmlTagId!==void 0||t.bodyTagId!==void 0)&&(t.htmlTagId!==void 0&&(e+=`html#${t.htmlTagId}`),t.htmlTagId!==void 0&&t.bodyTagId!==void 0&&(e+=" "),t.bodyTagId!==void 0&&(e+=`body#${t.bodyTagId}`)),e}function Pe(t){return JSON.parse(JSON.stringify(t))}function Tt(t){return t.chameleon!==void 0?{...t,chameleon:Pe(t.chameleon)}:{...t}}const yt="ec-storefront-show-i18n-keys",St="ec-storefront-highlight-version";function Ct(t){const e={...t};let r={};return e.queryState!==void 0&&(r=e.queryState,delete e.queryState),{queryState:r,piniaState:e}}function Pt(t,e,r,n,o){return t.then(i=>{ft(e);const s=Ie(i.isChameleonEnabled,e.ecConfig);return ht(s),mt(i,e,r,n,o)})}function _t(t,e,r){const n=t.translationsSettings.urls.map(o=>se(o.primaryUrl,!0,e,r).then(i=>{i.type===w.FAILED&&se(o.fallbackUrl,!0,e,r)}));return Promise.allSettled(n).then(()=>window.rosettaMessages[Et])}function Rt(t,e,r){return t.then(async n=>{const o=n.translationsSettings.overrides,i=await _t(n,e,r);return[o,i]})}function wt(t,e){return Tt({...t??{},...e.config??{}})}function Ot(t,e){return Pe({...t??{},...e.order??{}})}function vt(t,e){return{...t??{},...e.storefront??{}}}function Dt(t){return{containerWidth:t==null?void 0:t.containerWidth}}function Lt(){var t;return((t=z.get(yt))==null?void 0:t.toString())==="true"?!0:void 0}function Nt(){var t;return((t=z.get(St))==null?void 0:t.toString())==="true"?!0:void 0}function Ut(t){return{showI18nKeys:Lt()??(t==null?void 0:t.showI18nKeys),shouldHighlightVersion:Nt()??(t==null?void 0:t.shouldHighlightVersion)}}function Mt(t,e){return{customHistoryStateHandler:(e==null?void 0:e.customHistoryStateHandler)??(t==null?void 0:t.customHistoryStateHandler)}}function bt(t,e){const r={cssSelectorsPrefix:(e==null?void 0:e.css_selectors_prefix)??(t==null?void 0:t.cssSelectorsPrefix),isCssSelectorsPrefixDisabled:(e==null?void 0:e.ecwid_nocssrewrite)??(t==null?void 0:t.isCssSelectorsPrefixDisabled),htmlTagId:ot()??(t==null?void 0:t.htmlTagId),bodyTagId:rt()??(t==null?void 0:t.bodyTagId)};return{...r,cssSelectorsPrefix:It(r)}}function xt(t,e){return{signInProvider:t==null?void 0:t.signInProvider,signInUrls:t==null?void 0:t.signInUrls,ssoProfile:e.ecwid_sso_profile??(t==null?void 0:t.ssoProfile)}}function Wt(t){var r;const e=(r=t.globalOverrides)==null?void 0:r.globalOverrides;return{ecConfig:wt(e==null?void 0:e.ecConfig,window.ec),ecOrder:Ot(e==null?void 0:e.ecOrder,window.ec),ecStorefront:vt(e==null?void 0:e.ecStorefront,window.ec),browser:Dt(e==null?void 0:e.browser),debug:Ut(e==null?void 0:e.debug),routing:Mt(e==null?void 0:e.routing,window.Ecwid),stylesheet:bt(e==null?void 0:e.stylesheet,window),sso:xt(e==null?void 0:e.sso,window)}}function Vt(t,e){const r=X(t.containerElement);if(r!==void 0)return r;const n=Z(e,t.containerElement);return V(n),n}function R(t){if(t.containerElement===void 0||t.containerElement===null)throw new Error("Cannot find containerElement, please sure that it is passed to the widget options correctly.");const{containerElement:e,rootProps:r,states:n}=t;return{containerElement:e,rootProps:r,states:n}}function ce(){return document.createElement("div")}class Ft{constructor(e){this.options=e}getBootstrapPromise(){return this.options.bootstrapPromise}async createWidget(e,r){const n=r.states??{},{queryState:o,piniaState:i}=Ct(n),s=Wt(i),u=this.widgetData??this.createWidgetData(s,this.options);At(this.options.bootstrapPromise),this.widgetData=u;const d={containerElement:r.containerElement,isHydrateExistingMarkup:Object.keys(n).length>0,queryState:o,piniaState:{...i,globalOverrides:{globalOverrides:s}},rootProps:r.rootProps??{},bootstrap:this.options.bootstrapPromise,widgetData:u,storefrontApiClient:this.options.storefrontApiClient,requestContext:this.options.requestContext,ecommerce:this.options.ecommerce,logger:this.options.logger};return await(await e).render(d)}createWidgetData(e,r){return{appMode:r.appMode,customizeStorefrontAppsResources:Promise.resolve(void 0),stylesheet:Pt(this.options.bootstrapPromise,e,this.options.requestContext,this.options.logger,this.options.storeId),translations:Rt(this.options.bootstrapPromise,this.options.requestContext,this.options.logger)}}getOrCreateConfigAndWidget(e,r,n){const o=R(r),i=Vt(o,n);return i.ecwidWidget!==void 0&&i.mountState!==S.UNMOUNTED||(i.mountState=S.MOUNTING,i.ecwidWidget=this.createWidget(e,o).then(s=>(i.mountState=S.MOUNTED,i.unmountFn=()=>{i.mountState=S.UNMOUNTED,i.unmountFn=void 0,i.element=i.id!==void 0?void 0:i.element,s.unmountFn()},s))),i.ecwidWidget}createOrGetStartup(e){if(this.startupApp===void 0){const r=R({containerElement:ce(),rootProps:{storeId:this.options.storeId},states:e.states});this.startupApp=this.createWidget(h(()=>import("./apps-startup-7p1cogge.js"),__vite__mapDeps([0,1,2]),import.meta.url),r)}return this.startupApp}createOrGetJsApi(){if(this.jsApi===void 0){const e=R({containerElement:ce(),rootProps:{}});this.jsApi=this.createOrGetStartup(e).then(()=>this.createWidget(h(()=>import("./apps-js-api-lxj7al92.js"),__vite__mapDeps([3,1,2]),import.meta.url),e))}return this.jsApi}createTracker(e){return this.createOrGetStartup(e).then(()=>this.createWidget(h(()=>import("./apps-tracker-edgqji0r.js").then(r=>r.l),__vite__mapDeps([4,1,2]),import.meta.url),R(e)))}createAddToBag(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-add-to-bag-dcd7r8jd.js"),__vite__mapDeps([5,2,1]),import.meta.url),e,a.ADD_TO_BAG))}createCategoriesV1(e){var n;const r=((n=e.rootProps)==null?void 0:n.direction)===J.VERTICAL?a.VERTICAL_CATEGORIES_V1:a.HORIZONTAL_CATEGORIES_V1;return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-categories-v1-c3yppbmk.js"),__vite__mapDeps([6,1,2]),import.meta.url),e,r))}createCategoriesV2(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-categories-v2-k8sh3ity.js"),__vite__mapDeps([7,1,2]),import.meta.url),e,a.CATEGORIES_V2))}createMinicartV1(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-minicart-v1-m7u49zip.js"),__vite__mapDeps([8,1,2]),import.meta.url),e,a.MINICART_V1))}createMinicartV2(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-minicart-v2-ccwx3xzh.js"),__vite__mapDeps([9,1,2]),import.meta.url),e,a.MINICART_V2))}createProductThumbnail(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-product-thumbnail-8bpkixwy.js"),__vite__mapDeps([10,2,1]),import.meta.url),e,a.PRODUCT_THUMBNAIL))}createProductBrowser(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-product-browser-e9v1r4xl.js").then(r=>r.bt),__vite__mapDeps([11,1,2,12]),import.meta.url),e,a.PRODUCT_BROWSER))}createProductBrowserPopup(e){return this.createOrGetStartup(e).then(()=>this.createWidget(h(()=>import("./apps-product-browser-popup-jju5ywj4.js"),__vite__mapDeps([13,1,2]),import.meta.url),R(e)))}createSearchPanel(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-search-panel-ldyohhi1.js"),__vite__mapDeps([14,1,2]),import.meta.url),e,a.SEARCH_PANEL))}createSearchWidget(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-search-widget-fh2czdxs.js"),__vite__mapDeps([15,1,2]),import.meta.url),e,a.SEARCH_WIDGET))}createSingleProduct(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-single-product-b5w3xh1y.js"),__vite__mapDeps([16,2,1]),import.meta.url),e,a.SINGLE_PRODUCT))}createCpPreviewProductCard(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-cp-preview-product-card-g57u6vi7.js"),__vite__mapDeps([17,2,1]),import.meta.url),e,a.CP_PREVIEW_PRODUCT_CARD))}createCpPreviewCategory(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(h(()=>import("./apps-cp-preview-category-nzfryu7m.js"),__vite__mapDeps([18,2,1]),import.meta.url),e,a.CP_PREVIEW_CATEGORY))}}class Bt{constructor(e){this.legacyApiImpl=e}setInternalState(e){return this.legacyApiImpl.ensureJsApiSync().setRouterExternalState(e)}saveUtmDataFromUrl(e){return this.legacyApiImpl.ensureJsApiSync().saveUtmDataFromUrl(e)}}const _e={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"},F={RECT:"RECT",PILL:"PILL",NONE:"NONE"},Re={BAG:"BAG",CART:"CART",BASKET:"BASKET"},we={SMALL_ICON:"SMALL_ICON",SMALL_ICON_COUNTER:"SMALL_ICON_COUNTER",COUNTER_ONLY:"COUNTER_ONLY",TITLE_COUNTER:"TITLE_COUNTER",MEDIUM_ICON_COUNTER:"MEDIUM_ICON_COUNTER",MEDIUM_ICON_TITLE_COUNTER:"MEDIUM_ICON_TITLE_COUNTER",BIG_ICON_TITLE_SUBTOTAL:"BIG_ICON_TITLE_SUBTOTAL",BIG_ICON_DETAILS_SUBTOTAL:"BIG_ICON_DETAILS_SUBTOTAL"},p={DATA_LAYOUT:"data-layout",DATA_ICON:"data-icon",DATA_FIXED:"data-fixed",DATA_FIXED_POSITION:"data-fixed-position",DATA_FIXED_SHAPE:"data-fixed-shape",DATA_HORIZONTAL_INDENT:"data-horizontal-indent",DATA_VERTICAL_INDENT:"data-vertical-indent",DATA_RESPONSIVE:"data-responsive",DATA_CUSTOM_ICON_URL:"data-custom-icon-url",DATA_SHOW_EMPTY_CART:"data-show-empty-cart",DATA_SHOW_BUY_ANIMATION:"data-show-buy-animation"};function kt(){const t=document.createElement("div");return t.setAttribute(p.DATA_FIXED,"true"),t.setAttribute(p.DATA_FIXED_SHAPE,F.PILL),t.setAttribute(p.DATA_SHOW_EMPTY_CART,"false"),t.className=K,t}function Oe(t){if(t!==void 0){const e=document.getElementById(t);if(e!==null)return e}}const ae="autogenerated";function Gt(t){if(t===void 0)return document.body;const e=t.nextElementSibling;if(e instanceof HTMLElement&&e.dataset[ae]!==void 0)return e;const r=document.createElement("div");return r.dataset[ae]="true",t.insertAdjacentElement("afterend",r),r}function q(t){const e=document.createElement("div");return e.id=t.id??`${t.widgetType}-${new Date().getTime()}`,Gt(t.currentScript).appendChild(e),e}function $(t){if(t.element!==void 0&&t.element!==null)return t.element;const e=Oe(t.id);if(e!==void 0)return e}class Jt{constructor(e,r,n){this.affiliateId=void 0,this.OnAPILoaded={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onApiLoaded(o)})}},this.OnCartChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onCartChanged(o)})}},this.OnCartSynchronized={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onCartSynchronized(o)})},clear:()=>{this.legacyApiImpl.getJsApiAsync().then(o=>{o.clearCartSynchronizedHandlers()})}},this.OnConsentChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onConsentChanged(o)})}},this.OnOrderPlaced={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onOrderPlaced(o)})}},this.OnPageLoad={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onPageLoad(o)})}},this.OnPageLoaded={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onPageLoaded(o)})}},this.OnPageSwitch={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onPageSwitch(o)})}},this.OnProductOptionsChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onProductOptionsChanged(o)})}},this.OnRouterExternalStateChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onRouterExternalStateChanged(o)})},clear:()=>{this.legacyApiImpl.getJsApiAsync().then(o=>{o.clearRouterExternalStateChangedHandlers()})}},this.OnRouterStateChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onRouterStateChanged(o)})},clear:()=>{this.legacyApiImpl.getJsApiAsync().then(o=>{o.clearRouterStateChangedHandlers()})}},this.OnSessionChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onSessionChanged(o)})}},this.OnSetProfile={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onSetProfile(o)})}},this.legacyApiImpl=e,this.widgetRendererImpl=r,this.logger=n}customerSignOut(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.customerSignOut(e)})}createMinicartV2Config(e=void 0){let r=e;r===void 0&&(r=kt(),document.body.appendChild(r));const n=Z(a.MINICART_V2,r);return V(n),n}addMinicartV2Widgets(){const e=Array.from(document.getElementsByClassName(K));if(e.length>0){const n=e.filter(o=>X(o)===void 0).map(o=>this.createMinicartV2Config(o));return Promise.resolve(n)}if($e()&&!fe()&&!Ae()){const n=this.createMinicartV2Config();return Promise.resolve([n])}return this.legacyApiImpl.getEcommerce().widgets.getBootstrapPromise().then(n=>{var o,i;return n.shouldInitMinicartForced&&((o=window.ec.storefront)==null?void 0:o.show_cart_widget)!==!1||((i=window.ec.storefront)==null?void 0:i.show_cart_widget)===!0?[this.createMinicartV2Config()]:[]})}_showPBLoader(){this.logger.warn(g.DEPRECATION,"Method Ecwid._showPBLoader() is a dummy in current implementation")}_onComplete(){this.logger.warn(g.DEPRECATION,"Method Ecwid._onComplete() is a dummy in current implementation")}buildRoutePageUrl(e){return this.legacyApiImpl.ensureJsApiSync().buildRoutePageUrl(e)}buildSiteUrl(){return this.legacyApiImpl.ensureJsApiSync().buildSiteUrl()}destroy(){const e=ie().filter(r=>r.widgetType===a.PRODUCT_BROWSER);e.length>0&&(this.logger.info(g.JS_API,"Ecwid.destroy()"),e.forEach(r=>{r.unmountFn!==void 0&&r.unmountFn()}))}closeProductBrowserPopup(){return this.legacyApiImpl.ensureJsApiSync().closeProductBrowserPopup()}formatCurrency(e){return this.legacyApiImpl.ensureJsApiSync().formatCurrency(e)}init(){this.logger.info(g.JS_API,"Ecwid.init()"),he().forEach(e=>this.initWidget(e)),this.addMinicartV2Widgets().then(e=>{e.forEach(r=>this.initWidget(r))})}initWidget(e){try{let r=$(e);if(e.id!==void 0&&r===void 0)throw new Error(`No such element: ${e.id}`);r=r??q(e),e.element=r,e.id=r.id,this.widgetRendererImpl.renderWidget(e,r).then()}catch(r){this.logger.warn(g.APP_LIFECYCLE,"Cannot initialize widget",r)}}isCheckoutMutating(){return this.legacyApiImpl.ensureJsApiSync().isCheckoutMutating()}isNewStorefrontSeoCheckoutPagesEnabled(){return this.legacyApiImpl.ensureJsApiSync().isNewStorefrontSeoCheckoutPagesEnabled()}isPageServicedByStorefrontV3(e){return this.legacyApiImpl.ensureJsApiSync().isPageServicedByStorefrontV3(e)}isUseStorefrontV3Routing(){return this.legacyApiImpl.ensureJsApiSync().isUseStorefrontV3Routing()}isStorefrontV3(){throw new Error("This method is implemented in entrypoint and should not be invoked")}getAppPublicConfig(e){return this.legacyApiImpl.ensureJsApiSync().getAppPublicConfig(e)}getAppPublicToken(e){return this.legacyApiImpl.ensureJsApiSync().getAppPublicToken(e)}getAndClearLegacyStorefrontNotices(){return this.legacyApiImpl.ensureJsApiSync().getAndClearLegacyStorefrontNotices()}isIsolatedSessionMode(){return this.legacyApiImpl.ensureJsApiSync().isIsolatedSessionMode()}getCheckoutInfo(){return this.legacyApiImpl.ensureJsApiSync().getCheckoutInfo()}getLegacyAuthToken(){return this.legacyApiImpl.ensureJsApiSync().getLegacyAuthToken()}getFeatureToggles(){return this.legacyApiImpl.ensureJsApiSync().getFeatureToggles()}getInitializedWidgets(){const e=ie().map(n=>n.widgetType),r=[...new Set(e)];return this.logger.info(g.JS_API,"Ecwid.getInitializedWidgets()",r),r}getPageSwitchCallbacks(){return this.legacyApiImpl.ensureJsApiSync().getPageSwitchCallbacks()}getStoreConfiguration(){return this.legacyApiImpl.ensureJsApiSync().getStoreConfiguration()}getStorefrontLang(){return this.legacyApiImpl.ensureJsApiSync().getStorefrontLang()}getOwnerId(){throw new Error("This method is implemented in entrypoint and should not be invoked")}getStaticBaseUrl(){return this.logger.warn(g.DEPRECATION,`Method Ecwid.getStaticBaseUrl() returns nothing in current implementation.
If you use this method in your scripts, please contact us at https://support.ecwid.com/hc/en-us/requests/new`),""}scrollToContent(){return this.legacyApiImpl.ensureJsApiSync().scrollToContent()}getTrackingConsent(){return this.legacyApiImpl.ensureJsApiSync().getTrackingConsent()}getVisitorLocation(){return this.legacyApiImpl.ensureJsApiSync().getVisitorLocation()}gotoRoutePage(e){return this.legacyApiImpl.ensureJsApiSync().gotoRoutePage(e)}onAllCheckoutMutationsCompleted(e){return this.legacyApiImpl.ensureJsApiSync().onAllCheckoutMutationsCompleted(e)}openCookiesSettingSidePanel(){return this.legacyApiImpl.ensureJsApiSync().openCookiesSettingSidePanel()}openPage(e,r){return this.legacyApiImpl.ensureJsApiSync().openPage(e,r)}refreshConfig(){this.legacyApiImpl.ensureJsApiSync().refreshConfig(window.ec)}resizeProductBrowser(){this.logger.warn(g.DEPRECATION,"Method Ecwid.resizeProductBrowser() is do nothing in current implementation and its call can be removed")}setSignInProvider(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setSignInProvider(e)})}setSignInUrls(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setSignInUrls(e)})}setSsoProfile(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setSsoProfile(e)})}setCheckoutInfo(e){this.legacyApiImpl.ensureJsApiSync().setCheckoutInfo(e)}setLegacyAuthToken(e){this.legacyApiImpl.ensureJsApiSync().setLegacyAuthToken(e)}setSession(e){this.legacyApiImpl.ensureJsApiSync().setSession(e)}setStorefrontBaseUrl(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setStorefrontBaseUrl(e)})}setTrackingConsent(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setTrackingConsent(e)})}showProductFilters(){this.legacyApiImpl.ensureJsApiSync().showProductFilters()}getSupportedStorages(){return this.legacyApiImpl.ensureJsApiSync().getSupportedStorages()}getStorageValue(e,r){return this.legacyApiImpl.ensureJsApiSync().getStorageValue(e,r)}setStorageValue(e,r,n){return this.legacyApiImpl.ensureJsApiSync().setStorageValue(e,r,n)}}function ve(t){const e={};return t.forEach(r=>{const n=r.split("=");if(n.length===2){const o=n[0],i=n[1];o!==void 0&&i!==void 0&&(e[o]=i)}}),e}const Ht="id";function jt(t){return t.find(e=>e instanceof HTMLScriptElement)}const qt=t=>t.filter(e=>typeof e=="string");function $t(t,e){const r=jt(e),n=qt(e),i=ve(n)[Ht];return{widgetType:t,id:i,element:Oe(i),currentScript:r,arg:n,mountState:S.UNMOUNTED,unmountFn:void 0}}function Yt(t){document.querySelectorAll("div[itemtype='http://schema.org/Product'], div[itemtype='https://schema.org/Product']").forEach(r=>{X(r)===void 0&&V(Z(t,r))})}class zt{constructor(e,r,n){this.widgetRendererImpl=r,this.logger=n,this.ecwidImpl=e}xWidget(e,r){try{const n=this.getOrCreateWidgetConfig(e,r),o=$(n)??q(n);n.element=o,n.id=o.id,this.widgetRendererImpl.renderWidget(n,o)}catch(n){this.logger.warn(g.APP_LIFECYCLE,"Cannot initialize widget",n)}}getOrCreateWidgetConfig(e,r){let n;if(e===a.PRODUCT_BROWSER&&(n=qe(a.PRODUCT_BROWSER)),n!==void 0)return n;const o=$t(e,r);return V(o),o}addMinicartIfNeeded(){!fe()&&!Ae()&&this.xWidget(a.MINICART_V2,[`${p.DATA_FIXED}=true`,`${p.DATA_FIXED_SHAPE}=${F.PILL}`,`${p.DATA_SHOW_EMPTY_CART}=false`])}xSingleProductWidgets(e){Yt(e),he().filter(r=>r.widgetType===e).forEach(r=>{try{const n=$(r)??q(r);r.element=n,r.id=n.id,this.widgetRendererImpl.renderWidget(r,n).then(()=>this.addMinicartIfNeeded())}catch(n){this.logger.warn(g.APP_LIFECYCLE,"Cannot initialize widget",n)}})}xProductBrowser(...e){this.ecwidImpl.destroy(),this.xWidget(a.PRODUCT_BROWSER,e)}xMinicart(...e){this.xWidget(a.MINICART_V1,e)}xSearchPanel(...e){this.xWidget(a.SEARCH_PANEL,e)}xSearch(...e){this.xWidget(a.SEARCH_WIDGET,e)}xCategories(...e){this.xWidget(a.HORIZONTAL_CATEGORIES_V1,e)}xCategoriesV2(...e){this.xWidget(a.CATEGORIES_V2,e)}xVCategories(...e){this.xWidget(a.VERTICAL_CATEGORIES_V1,e)}ecwid_onBodyDone(){this.logger.warn(g.DEPRECATION,"Function window.ecwid_onBodyDone() is deprecated. Use window.Ecwid.init() instead"),this.ecwidImpl.init()}xAddToBag(...e){this.xWidget(a.ADD_TO_BAG,e)}xProductThumbnail(...e){this.xWidget(a.PRODUCT_THUMBNAIL,e)}xSingleProduct(){this.xSingleProductWidgets(a.SINGLE_PRODUCT)}xProduct(){this.xSingleProductWidgets(a.PRODUCT)}}class Kt{constructor(e){this.legacyApiImpl=e}addProduct(e,r){this.legacyApiImpl.getJsApiAsync().then(n=>{typeof e=="object"?n.addProductToCart(e):n.addProductToCart({id:parseInt(e.toString(),10),callback:r??(()=>{})})})}removeProduct(e,r){this.legacyApiImpl.getJsApiAsync().then(n=>{typeof e>"u"?n.removeFromCart(void 0,!1,r):n.removeFromCart([e],!1,r)})}removeProducts(e,r){this.legacyApiImpl.getJsApiAsync().then(n=>{n.removeFromCart(e,!0,r)})}clear(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.clearCart(e)})}get(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.getCart(e)})}calculateTotal(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.calculateTotal(e)})}gotoCheckout(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.goToCheckout(e)})}canGotoCheckout(e){return this.legacyApiImpl.getJsApiAsync().then(r=>{r.canGoToCheckout(e)}),!0}setCustomerEmail(e,r,n){if(this.isEmptyString(e))return;const o="Ecwid.Cart.setCustomerEmail()";this.legacyApiImpl.getJsApiAsync().then(i=>{i.updateCart({email:e},r,n,o)})}setOrderComments(e,r,n){if(this.isEmptyString(e))return;const o="Ecwid.Cart.setOrderComments()";this.legacyApiImpl.getJsApiAsync().then(i=>{i.updateCart({orderComments:e},r,n,o)})}setAddress(e,r,n){const o="Ecwid.Cart.setAddress()";this.legacyApiImpl.getJsApiAsync().then(i=>{i.updateCart({shippingPerson:e},r,n,o)})}setBillingAddress(e,r,n){const o="Ecwid.Cart.setBillingAddress()";this.legacyApiImpl.getJsApiAsync().then(i=>{i.updateCart({billingPerson:e},r,n,o)})}refreshCartInfo(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.refreshCartInfo(e)})}isEmptyString(e){return e===void 0||e.trim()===""}}const N={STANDARD:"STANDARD",MINI:"MINI",FLOATING:"FLOATING",UNSUPPORTED:"UNSUPPORTED"};function v(t){var e;switch((e=t==null?void 0:t.toString())==null?void 0:e.toLowerCase()){case"true":case"1":return!0;case"false":case"0":return!1;default:return}}function x(t){if(t!==void 0){const e=parseInt(t==null?void 0:t.toString(),10);if(!Number.isNaN(e))return e}}function en(t){if(t!==void 0){const e=parseFloat(t);if(!Number.isNaN(e))return e}}function P(t,e){for(const r of Object.keys(t)){const n=t[r];if(n!==void 0&&n.toString()===e)return t[r]}}function ee(t,e){const r=t.getAttribute(e);if(r!==null)return r}function Y(t,e){const r=ee(t,e);return x(r)}function U(t,e){const r=ee(t,e);return v(r)}function M(t,e,r){return P(r,t.getAttribute(e))}const ue="productid",Xt="layout",Qt="defaultCategoryId",Zt="defaultProductId",er=/grid\((?<rows>\d+), *(?<cols>\d+)\)/,tr="views",de="productid",le="data-single-product-id";function rr(t){const e=t[tr];if(e!==void 0){const r=e.match(er);if(r!==null&&r.groups!==void 0&&r.groups.rows!==void 0&&r.groups.cols!==void 0){const n=Math.max(1,parseInt(r.groups.rows,10)),o=Math.max(1,parseInt(r.groups.cols,10));return n*o}}}function nr(t){const e=t[Qt],r=e!==void 0?parseInt(e,10):NaN;return!Number.isNaN(r)&&r>0?r:void 0}function or(t){const e=t[Zt],r=e!==void 0?parseInt(e,10):NaN;return!Number.isNaN(r)&&r>0?r:void 0}function ir(t,e){const r=e[Xt]??"";return r.toLowerCase().includes("attach")?N.UNSUPPORTED:r==="floating"?N.FLOATING:r==="Mini"?N.MINI:N.STANDARD}function sr(t){const e=x(t[ue]);if(e===void 0)throw new Error(`Parameter '${ue}' is missing or invalid`);return e}function cr(t,e,r){return{productId:e,pageProductIdsPromise:r}}function ar(t,e){return{layout:ir(t,e)}}function ur(t){return{isMobileViewNotAllowed:t.hasAttribute("data-mobile-no"),isChildrenNotAllowed:t.hasAttribute("data-children-no")}}function dr(t){return{layout:M(t,p.DATA_LAYOUT,we),icon:M(t,p.DATA_ICON,Re),isFixed:U(t,p.DATA_FIXED),fixedPosition:M(t,p.DATA_FIXED_POSITION,_e),fixedShape:M(t,p.DATA_FIXED_SHAPE,F),horizontalIndent:Y(t,p.DATA_HORIZONTAL_INDENT),verticalIndent:Y(t,p.DATA_VERTICAL_INDENT),isResponsive:U(t,p.DATA_RESPONSIVE),customIconUrl:ee(t,p.DATA_CUSTOM_ICON_URL),showEmptyCart:U(t,p.DATA_SHOW_EMPTY_CART),showBuyAnimation:U(t,p.DATA_SHOW_BUY_ANIMATION)}}function lr(t){return{layout:P(we,t[p.DATA_LAYOUT]),icon:P(Re,t[p.DATA_ICON]),isFixed:v(t[p.DATA_FIXED]),fixedPosition:P(_e,t[p.DATA_FIXED_POSITION]),fixedShape:P(F,t[p.DATA_FIXED_SHAPE]),horizontalIndent:x(t[p.DATA_HORIZONTAL_INDENT]),verticalIndent:x(t[p.DATA_VERTICAL_INDENT]),isResponsive:v(t[p.DATA_RESPONSIVE]),customIconUrl:t[p.DATA_CUSTOM_ICON_URL],showEmptyCart:v(t[p.DATA_SHOW_EMPTY_CART]),showBuyAnimation:v(t[p.DATA_SHOW_BUY_ANIMATION])}}function gr(t,e){const r=dr(t),n=lr(e);return{layout:n.layout??r.layout,icon:n.icon??r.icon,isFixed:n.isFixed??r.isFixed,fixedPosition:n.fixedPosition??r.fixedPosition,fixedShape:n.fixedShape??r.fixedShape,horizontalIndent:n.horizontalIndent??r.horizontalIndent,verticalIndent:n.verticalIndent??r.verticalIndent,isResponsive:n.isResponsive??r.isResponsive,customIconUrl:n.customIconUrl??r.customIconUrl,showEmptyCart:n.showEmptyCart??r.showEmptyCart,showBuyAnimation:n.showBuyAnimation??r.showBuyAnimation}}function pr(t){return{defaultCategoryId:nr(t),defaultProductId:or(t),productsPerPage:rr(t),timeZoneOffset:void 0}}function mr(t){const e=t[de],r=e!==void 0?parseInt(e,10):NaN;if(Number.isNaN(r))throw new Error(`Parameter '${de}' is missing or invalid`);return r}function hr(t,e){return{productId:t,pageProductIdsPromise:e}}function ge(t){const e=Y(t,le);if(e===void 0)throw new Error(`Attribute '${le}' is missing or invalid`);return e}function pe(t,e,r){return{productId:t,pageProductIdsPromise:e,isNewLookAndFeel:r}}class fr{constructor(e){this.pageProductIds=new Set,this.ecommerce=e}collectPageProductId(e){return this.pageProductIds.add(e),new Promise(r=>{setTimeout(()=>{const n=[...this.pageProductIds].sort();r(n)},0)})}async renderWidget(e,r){const n=ve(e.arg??[]);switch(await new Promise(o=>{setTimeout(o)}),e.widgetType){case a.ADD_TO_BAG:{const o=sr(n),i=this.collectPageProductId(o);return this.ecommerce.widgets.createAddToBag({containerElement:r,rootProps:cr(r,o,i)})}case a.HORIZONTAL_CATEGORIES_V1:return this.ecommerce.widgets.createCategoriesV1({containerElement:r,rootProps:{direction:J.HORIZONTAL}});case a.CATEGORIES_V2:return this.ecommerce.widgets.createCategoriesV2({containerElement:r,rootProps:ur(r)});case a.MINICART_V1:return this.ecommerce.widgets.createMinicartV1({containerElement:r,rootProps:ar(r,n)});case a.MINICART_V2:return this.ecommerce.widgets.createMinicartV2({containerElement:r,rootProps:gr(r,n)});case a.PRODUCT:{const o=ge(r),i=this.collectPageProductId(o);return this.ecommerce.widgets.createSingleProduct({containerElement:r,rootProps:pe(o,i,!0)})}case a.PRODUCT_BROWSER:return this.ecommerce.widgets.createProductBrowser({containerElement:r,rootProps:pr(n)});case a.PRODUCT_THUMBNAIL:{const o=mr(n),i=this.collectPageProductId(o);return this.ecommerce.widgets.createProductThumbnail({containerElement:r,rootProps:hr(o,i)})}case a.SEARCH_PANEL:return this.ecommerce.widgets.createSearchPanel({containerElement:r,rootProps:{}});case a.SEARCH_WIDGET:return this.ecommerce.widgets.createSearchWidget({containerElement:r,rootProps:{}});case a.SINGLE_PRODUCT:{const o=ge(r),i=this.collectPageProductId(o);return this.ecommerce.widgets.createSingleProduct({containerElement:r,rootProps:pe(o,i,!1)})}case a.VERTICAL_CATEGORIES_V1:return this.ecommerce.widgets.createCategoriesV1({containerElement:r,rootProps:{direction:J.VERTICAL}});case a.CP_PREVIEW_PRODUCT_CARD:return this.ecommerce.widgets.createCpPreviewProductCard({containerElement:r});case a.CP_PREVIEW_CATEGORY:return this.ecommerce.widgets.createCpPreviewCategory({containerElement:r});default:throw new Error(`Unknown widget type '${e.widgetType}'`)}}}class Ar{constructor(e,r,n){this.ecommerce=e;const o=new fr(this.ecommerce);this.ecImpl=new Bt(this),this.ecwidImpl=new Jt(this,o,n),this.ecwidCartImpl=new Kt(this),this.windowImpl=new zt(this.ecwidImpl,o,n)}getEcImpl(){return this.ecImpl}getEcwidImpl(){return this.ecwidImpl}getEcwidCartImpl(){return this.ecwidCartImpl}getWindowImpl(){return this.windowImpl}getEcommerce(){return this.ecommerce}ensureJsApiSync(){if(this.jsApiSync===void 0)throw Error(`Ecwid JS API is not initialized!
Please make sure your code is wrapped in an Ecwid.OnAPILoaded.add callback.
See the documentation for more details: https://api-docs.ecwid.com/reference/ecwidonapiloaded#ecwidonapiloaded`);return this.jsApiSync}getJsApiAsync(){const r=this.getEcommerce().widgets.createOrGetJsApi();return r.then(n=>{this.jsApiSync=n}),r}getTrackerAsync(){if(this.trackerAsync===void 0){const e=this.getEcommerce(),r=document.createElement("div");this.trackerAsync=e.widgets.createTracker({containerElement:r,rootProps:{}})}return this.trackerAsync}}class Er extends EventTarget{addEventListener(e,r,n){super.addEventListener(e,r,n)}removeEventListener(e,r,n){super.removeEventListener(e,r,n)}dispatchTypedEvent(e,r){return super.dispatchEvent(r)}}function Ir(t){return typeof t!="function"||!t.toString().includes("[native code]")}function Tr(t,e,r,n){const o=e;Ir(o[r])&&(t.warn(g.APP_LIFECYCLE,`Restoring patched browser function '${r}'. Old value:`,o[r]),n!==void 0?o[r]=n:delete o[r])}function yr(){const t=document.createElement("iframe");document.body.appendChild(t);const e=t.contentWindow;try{return e===null?[]:[{target:Array,property:"from",iframeCorrectFunc:e.Array.from},{target:Array.prototype,property:"reduce",iframeCorrectFunc:e.Array.prototype.reduce},{target:Array.prototype,property:"toJSON",iframeCorrectFunc:void 0},{target:Function.prototype,property:"bind",iframeCorrectFunc:e.window.Function.prototype.bind},{target:String.prototype,property:"replaceAll",iframeCorrectFunc:e.window.String.prototype.replaceAll},{target:String.prototype,property:"trim",iframeCorrectFunc:e.window.String.prototype.trim},{target:String.prototype,property:"trimLeft",iframeCorrectFunc:e.window.String.prototype.trimLeft},{target:String.prototype,property:"trimRight",iframeCorrectFunc:e.window.String.prototype.trimRight},{target:Promise,property:"allSettled",iframeCorrectFunc:e.window.Promise.allSettled},{target:window,property:"Event",iframeCorrectFunc:e.window.Event}]}finally{t.remove()}}function Sr(t){try{yr().forEach(({target:r,property:n,iframeCorrectFunc:o})=>{Tr(t,r,n,o)})}catch(e){t.error(g.APP_LIFECYCLE,"Failed to restore patched browser functions:",e)}}function Cr(t){if(t===void 0)return{};const e=t.sessionToken.value;return e!==void 0?{Authorization:`Bearer ${e}`}:{}}function Pr(t){return JSON.stringify(t)}function _r(t,e){return new Headers({"Content-Type":"application/json",...Cr(t),...e})}async function Rr(t,e,r,n){return st(()=>({method:t,mode:"cors",headers:_r(r,n),body:Pr(e)}))}async function wr(t,e,r){const n=new AbortController,o={...e,signal:n.signal},i=setTimeout(()=>{const s=new DOMException("The user aborted a request.","AbortError");n.abort(s)},r);try{return await fetch(t,o)}finally{clearTimeout(i)}}const De="StorefrontApiBusinessError";class Or extends Error{constructor(e,r){super(e.statusText),this.type=De,this.response=e;try{this.data=JSON.parse(r)}catch{this.data=void 0}this.text=r}isBadRequestError(){return this.response.status===400}isUnauthorizedError(){return this.response.status===401}isNotFoundError(){return this.response.status===404}getData(){return this.data}getText(){return this.text}getResponse(){return this.response}}function W(t){return"type"in t&&t.type===De}const vr=8,Dr=3e4;function tn(){return!1}function rn(){var t;return((t=window.top)==null?void 0:t.location)!==window.location}function Lr(t,e,r){if((e==null?void 0:e.isRetryable)===!1||t>=vr)return!1;if(W(r)){const o=r.getResponse().status;return o>=500&&o<=599}return!0}function Le(t){return new Date().getTime()-t.getTime()}function B(t){return t>1?[`(x${t})`]:[]}function Nr(t){var o;const e=Le(t.requestStartDate),r=t.error.getResponse(),n=[`#${t.currentRequestIndex}`,...B(t.retryNumber),"⛌",`[${e} ms]`,`[${r.status} ${r.statusText}]`,(o=t.requestMethod)==null?void 0:o.toUpperCase(),t.url,t.error.getData()??t.error.getText()];t.logger.warn(g.REST,...n)}function Ur(t){const e=[];let r=t;for(;r!==void 0;)e.push(r.stack??r.message??String(r)),r=r.cause;return e.join(`
Caused by: `)}function Mr(t){var r;const e=[`#${t.currentRequestIndex}`,...B(t.retryNumber),"⛌",(r=t.requestMethod)==null?void 0:r.toUpperCase(),t.url,Ur(t.error)];t.logger.warn(g.REST,...e)}function br(t){W(t.error)?Nr({logger:t.logger,requestStartDate:t.requestStartDate,currentRequestIndex:t.currentRequestIndex,retryNumber:t.retryNumber,requestMethod:t.requestMethod,url:t.url,error:t.error}):Mr({logger:t.logger,url:t.url,currentRequestIndex:t.currentRequestIndex,retryNumber:t.retryNumber,requestMethod:t.requestMethod,error:t.error.getError()})}function xr(t){const e=[`#${t.currentRequestIndex}`,...B(t.retryNumber),"⮕",t.requestMethod.toUpperCase(),t.url,t.data];t.logger.info(g.REST,...e)}function Wr(t){var o;const e=Le(t.requestStartDate),r=`${t.responseStatus} ${t.responseStatusText}`.trim(),n=[`#${t.currentRequestIndex}`,...B(t.retryNumber),"⬅",`[${e} ms]`,`[${r}]`,(o=t.requestMethod)==null?void 0:o.toUpperCase(),t.url,t.responseData];t.logger.info(g.REST,...n)}const Vr="StorefrontApiFatalError";class Fr extends Error{constructor(e){super(e.message),this.type=Vr,this.error=e}getError(){return this.error}}function Br(t){const e=2**t*100,r=e*.2*Math.random();return e+r}function kr(t){return new Promise(e=>{setTimeout(e,Br(t))})}class Gr{constructor(e,r,n,o){this.requestIndex=0,this.storeId=e,this.apiBaseUrl=r,this.additionalHeaders=n,this.logger=o}createRequestUrl(e){return`${this.apiBaseUrl}/${this.storeId}${e}`}setSessionStorageOptions(e){this.sessionStorageOptions=e}async makeRequest(e,r,n){let o=1;this.requestIndex+=1;const i="post",s=this.requestIndex,u=async()=>{const d=new Date;try{xr({logger:this.logger,url:e,data:r,currentRequestIndex:s,retryNumber:o,requestMethod:i});const m=await Rr(i,r,this.sessionStorageOptions,this.additionalHeaders),c=await wr(this.createRequestUrl(e),m,Dr);if(!c.ok){const f=await c.text();throw new Or(c,f)}const l=await c.json();return Wr({logger:this.logger,url:e,currentRequestIndex:s,retryNumber:o,requestStartDate:d,requestMethod:i,responseStatus:c.status,responseStatusText:c.statusText,responseData:l}),{data:l}}catch(m){const c=m,l=W(c)?c:new Fr(c);if(br({logger:this.logger,url:e,currentRequestIndex:s,retryNumber:o,requestStartDate:d,requestMethod:i,error:l}),W(c)&&c.isUnauthorizedError())throw this.resetInvalidSession(),c;if(Lr(o,n,l))return await kr(o),o+=1,u();throw c}};return u()}resetInvalidSession(){this.sessionStorageOptions!==void 0&&(this.sessionStorageOptions.isolatedSessionMode.value=void 0,this.sessionStorageOptions.sessionToken.value=void 0,this.sessionStorageOptions.checkoutInfo.value=void 0,this.sessionStorageOptions.legacyAuthToken.value=void 0)}}const me={NORMAL:"NORMAL",PREVIEW_PRODUCT_EDITOR_PAGE:"PREVIEW_PRODUCT_EDITOR_PAGE",PREVIEW_DESIGN_PAGE:"PREVIEW_DESIGN_PAGE",PREVIEW_INSTANT_SITE_EDITOR_PAGE:"PREVIEW_INSTANT_SITE_EDITOR_PAGE"};class Jr{constructor(){this.eventListeners=new Map}ensureListeners(e){const r=this.eventListeners.get(e);if(r!==void 0)return r;const n=new Set;return this.eventListeners.set(e,n),n}publish(e,...r){const n=this.eventListeners.get(e);n!==void 0&&n.forEach(o=>{o(...r)})}subscribe(e,r){const n=this.ensureListeners(e);return n.add(r),()=>{n.has(r)&&(n.delete(r),n.size===0&&this.eventListeners.delete(e))}}}const Hr="ec-storefront-forced-tracing-enabled",jr="X-Ec-Forced-Tracing-Enabled";function qr(){return new Je(it,"show_ec_logs")}function $r(t,e,r){if(t!==void 0)return Promise.resolve(t);const n={lang:e};return r.makeRequest("/bootstrap",n).then(o=>o.data)}function Yr(t){const e=Math.random()<T.getEcommerceJsParams().tracingSampleRatio;return t||e?{[jr]:"true"}:{}}function zr(t){return{...Yr(t)}}function Kr(t,e){return!!(e||Math.random()<t.sampleRatio)}function Xr(t,e,r){if(t!==null&&Kr(t,r))return h(()=>import("./vendor-datadog-browser-rum-mdoymghf.js"),[],import.meta.url).then(n=>{var i,s;const o=n.datadogRum;return o.init({applicationId:t.applicationId,clientToken:t.clientToken,site:t.site,service:t.service,env:t.env,version:t.version,allowedTracingUrls:[{match:e,propagatorTypes:["tracecontext"]}],sessionSampleRate:100,sessionReplaySampleRate:0,trackingConsent:((s=(i=window.ec)==null?void 0:i.config)==null?void 0:s.disable_all_cookies)===!0?"not-granted":"granted",trackUserInteractions:!0,trackResources:!0,trackLongTasks:!0}),o})}class te extends Er{static updateGlobalEcommerceInstance(e){window.Ecwid.ecommerceInstance===void 0&&(window.Ecwid.ecommerceInstance=e)}constructor(e){super(),te.updateGlobalEcommerceInstance(this);const r=qr();Sr(r);const n=T.getEntryPointQueryParams(),o=(e==null?void 0:e.storeId)??n.storeId,i=(e==null?void 0:e.apiBaseUrl)??T.getEcommerceJsParams().apiBaseUrl,s=(e==null?void 0:e.lang)??n.lang,u=P(me,e==null?void 0:e.appMode)??me.NORMAL,d=z.get(Hr)==="true",m=Xr(T.getEcommerceJsParams().datadogRum,i,d),c={ecommerceEventTarget:this,apiEventBus:new Jr,datadogRumPromise:m,widgetLang:s};this.legacyApiImpl=new Ar(this,c,r);const l=new Gr(o,i,zr(d),r),f=$r(e==null?void 0:e.bootstrap,s,l);this.widgets=new Ft({appMode:u,bootstrapPromise:f,ecommerce:this,logger:r,requestContext:c,storefrontApiClient:l,storeId:o})}addEventListener(e,r,n){this.legacyApiImpl.getJsApiAsync().then(()=>{super.addEventListener(e,r,n)})}refreshConfig(){this.legacyApiImpl.getEcwidImpl().refreshConfig()}}window.ec=window.ec??{};window.ec.config=window.ec.config??{};window.ec.order=window.ec.order??{};window.ec.order.extraFields=window.ec.order.extraFields??{};window.ec.storefront=window.ec.storefront??{};window._xnext_initialization_scripts=window._xnext_initialization_scripts??[];window.Ecommerce=te;window.EcommerceGlobals=T;window.rtCommonProps!==void 0&&(delete window.rtCommonProps["new.store.fix.ecwid.back.bug"],delete window.rtCommonProps["new.store.accountPage.ecwid.signIn.fix"]);(()=>{const t=new CustomEvent("ecommerce.ready");document.dispatchEvent(t)})();export{me as A,J as C,a as D,te as E,g as L,N as M,h as _,P as a,_e as b,we as c,Pe as d,F as e,Re as f,rn as g,Ce as h,W as i,se as j,w as k,mt as l,z as m,ct as n,tn as o,x as p,v as q,Qr as r,Zr as s,en as t,Tt as u,y as v,fe as w,V as x,$t as y,X as z};
//# sourceMappingURL=https://storefront.ecwid.dev:16088/static/ecommerce-i2qgnqyl.js.map
