/*! For license information please see NpawPlugin-nwf.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NpawPlugin=e():t.NpawPlugin=e()}(self,(()=>(()=>{var t={525:(t,e)=>{"use strict";function i(t,e){return void 0===e&&(e=Object),e&&"function"==typeof e.freeze?e.freeze(t):t}var s=i({HTML:"text/html",isHTML:function(t){return t===s.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),n=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===n.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});e.find=function(t,e,i){if(void 0===i&&(i=Array.prototype),t&&"function"==typeof i.find)return i.find.call(t,e);for(var s=0;s<t.length;s++)if(Object.prototype.hasOwnProperty.call(t,s)){var n=t[s];if(e.call(void 0,n,s,t))return n}},e.freeze=i,e.MIME_TYPE=s,e.NAMESPACE=n},8633:(t,e,i)=>{var s=i(525),n=i(1129),r=i(6598),a=i(2133),o=n.DOMImplementation,d=s.NAMESPACE,c=a.ParseError,u=a.XMLReader;function l(t){this.options=t||{locator:{}}}function h(){this.cdata=!1}function p(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function f(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function g(t,e,i){return"string"==typeof t?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}function m(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}l.prototype.parseFromString=function(t,e){var i=this.options,s=new u,n=i.domBuilder||new h,a=i.errorHandler,o=i.locator,c=i.xmlns||{},l=/\/x?html?$/.test(e),p=l?r.HTML_ENTITIES:r.XML_ENTITIES;return o&&n.setDocumentLocator(o),s.errorHandler=function(t,e,i){if(!t){if(e instanceof h)return e;t=e}var s={},n=t instanceof Function;function r(e){var r=t[e];!r&&n&&(r=2==t.length?function(i){t(e,i)}:t),s[e]=r&&function(t){r("[xmldom "+e+"]\t"+t+f(i))}||function(){}}return i=i||{},r("warning"),r("error"),r("fatalError"),s}(a,n,o),s.domBuilder=i.domBuilder||n,l&&(c[""]=d.HTML),c.xml=c.xml||d.XML,t&&"string"==typeof t?s.parse(t,c,p):s.errorHandler.error("invalid doc source"),n.doc},h.prototype={startDocument:function(){this.doc=(new o).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,i,s){var n=this.doc,r=n.createElementNS(t,i||e),a=s.length;m(this,r),this.currentElement=r,this.locator&&p(this.locator,r);for(var o=0;o<a;o++){t=s.getURI(o);var d=s.getValue(o),c=(i=s.getQName(o),n.createAttributeNS(t,i));this.locator&&p(s.getLocator(o),c),c.value=c.nodeValue=d,r.setAttributeNode(c)}},endElement:function(t,e,i){var s=this.currentElement;s.tagName,this.currentElement=s.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var i=this.doc.createProcessingInstruction(t,e);this.locator&&p(this.locator,i),m(this,i)},ignorableWhitespace:function(t,e,i){},characters:function(t,e,i){if(t=g.apply(this,arguments)){if(this.cdata)var s=this.doc.createCDATASection(t);else s=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(s):/^\s*$/.test(t)&&this.doc.appendChild(s),this.locator&&p(this.locator,s)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,i){t=g.apply(this,arguments);var s=this.doc.createComment(t);this.locator&&p(this.locator,s),m(this,s)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i){var s=this.doc.implementation;if(s&&s.createDocumentType){var n=s.createDocumentType(t,e,i);this.locator&&p(this.locator,n),m(this,n),this.doc.doctype=n}},warning:function(t){console.warn("[xmldom warning]\t"+t,f(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,f(this.locator))},fatalError:function(t){throw new c(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){h.prototype[t]=function(){return null}})),e.DOMParser=l,n.DOMImplementation,n.XMLSerializer},1129:(t,e,i)=>{var s=i(525),n=s.find,r=s.NAMESPACE;function a(t){return""!==t}function o(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function d(t){if(!t)return[];var e=function(t){return t?t.split(/[\t\n\f\r ]+/).filter(a):[]}(t);return Object.keys(e.reduce(o,{}))}function c(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function u(t,e){var i=t.prototype;if(!(i instanceof e)){function s(){}s.prototype=e.prototype,c(i,s=new s),t.prototype=i=s}i.constructor!=t&&("function"!=typeof t&&console.error("unknown Class:"+t),i.constructor=t)}var l={},h=l.ELEMENT_NODE=1,p=l.ATTRIBUTE_NODE=2,f=l.TEXT_NODE=3,g=l.CDATA_SECTION_NODE=4,m=l.ENTITY_REFERENCE_NODE=5,v=l.ENTITY_NODE=6,y=l.PROCESSING_INSTRUCTION_NODE=7,T=l.COMMENT_NODE=8,S=l.DOCUMENT_NODE=9,E=l.DOCUMENT_TYPE_NODE=10,b=l.DOCUMENT_FRAGMENT_NODE=11,A=l.NOTATION_NODE=12,w={},_={},I=(w.INDEX_SIZE_ERR=(_[1]="Index size error",1),w.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2),w.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3)),N=(w.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4),w.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5),w.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6),w.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7),w.NOT_FOUND_ERR=(_[8]="Not found",8)),D=(w.NOT_SUPPORTED_ERR=(_[9]="Not supported",9),w.INUSE_ATTRIBUTE_ERR=(_[10]="Attribute in use",10));function P(t,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,_[t]),this.message=_[t],Error.captureStackTrace&&Error.captureStackTrace(this,P);return i.code=t,e&&(this.message=this.message+": "+e),i}function R(){}function L(t,e){this._node=t,this._refresh=e,C(this)}function C(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var i=t._refresh(t._node);if(yt(t,"length",i.length),!t.$$length||i.length<t.$$length)for(var s=i.length;s in t;s++)Object.prototype.hasOwnProperty.call(t,s)&&delete t[s];c(i,t),t._inc=e}}function O(){}function B(t,e){for(var i=t.length;i--;)if(t[i]===e)return i}function x(t,e,i,s){if(s?e[B(e,s)]=i:e[e.length++]=i,t){i.ownerElement=t;var n=t.ownerDocument;n&&(s&&X(n,t,s),function(t,e,i){t&&t._inc++,i.namespaceURI===r.XMLNS&&(e._nsMap[i.prefix?i.localName:""]=i.value)}(n,t,i))}}function M(t,e,i){var s=B(e,i);if(!(s>=0))throw new P(N,new Error(t.tagName+"@"+i));for(var n=e.length-1;s<n;)e[s]=e[++s];if(e.length=n,t){var r=t.ownerDocument;r&&(X(r,t,i),i.ownerElement=null)}}function k(){}function U(){}function V(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function q(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(q(t,e))return!0}while(t=t.nextSibling)}function F(){this.ownerDocument=this}function X(t,e,i,s){t&&t._inc++,i.namespaceURI===r.XMLNS&&delete e._nsMap[i.prefix?i.localName:""]}function H(t,e,i){if(t&&t._inc){t._inc++;var s=e.childNodes;if(i)s[s.length++]=i;else{for(var n=e.firstChild,r=0;n;)s[r++]=n,n=n.nextSibling;s.length=r,delete s[s.length]}}}function G(t,e){var i=e.previousSibling,s=e.nextSibling;return i?i.nextSibling=s:t.firstChild=s,s?s.previousSibling=i:t.lastChild=i,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,H(t.ownerDocument,t),e}function j(t){return t&&t.nodeType===U.DOCUMENT_TYPE_NODE}function W(t){return t&&t.nodeType===U.ELEMENT_NODE}function Y(t){return t&&t.nodeType===U.TEXT_NODE}function z(t,e){var i=t.childNodes||[];if(n(i,W)||j(e))return!1;var s=n(i,j);return!(e&&s&&i.indexOf(s)>i.indexOf(e))}function K(t,e){var i=t.childNodes||[];if(n(i,(function(t){return W(t)&&t!==e})))return!1;var s=n(i,j);return!(e&&s&&i.indexOf(s)>i.indexOf(e))}function Q(t,e,i){var s=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===U.DOCUMENT_FRAGMENT_NODE){var a=r.filter(W);if(a.length>1||n(r,Y))throw new P(I,"More than one element or text in fragment");if(1===a.length&&!z(t,i))throw new P(I,"Element in fragment can not be inserted before doctype")}if(W(e)&&!z(t,i))throw new P(I,"Only one element can be added and only after doctype");if(j(e)){if(n(s,j))throw new P(I,"Only one doctype is allowed");var o=n(s,W);if(i&&s.indexOf(o)<s.indexOf(i))throw new P(I,"Doctype can only be inserted before an element");if(!i&&o)throw new P(I,"Doctype can not be appended since element is present")}}function J(t,e,i){var s=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===U.DOCUMENT_FRAGMENT_NODE){var a=r.filter(W);if(a.length>1||n(r,Y))throw new P(I,"More than one element or text in fragment");if(1===a.length&&!K(t,i))throw new P(I,"Element in fragment can not be inserted before doctype")}if(W(e)&&!K(t,i))throw new P(I,"Only one element can be added and only after doctype");if(j(e)){if(n(s,(function(t){return j(t)&&t!==i})))throw new P(I,"Only one doctype is allowed");var o=n(s,W);if(i&&s.indexOf(o)<s.indexOf(i))throw new P(I,"Doctype can only be inserted before an element")}}function $(t,e,i,s){(function(t,e,i){if(!function(t){return t&&(t.nodeType===U.DOCUMENT_NODE||t.nodeType===U.DOCUMENT_FRAGMENT_NODE||t.nodeType===U.ELEMENT_NODE)}(t))throw new P(I,"Unexpected parent node type "+t.nodeType);if(i&&i.parentNode!==t)throw new P(N,"child not in parent");if(!function(t){return t&&(W(t)||Y(t)||j(t)||t.nodeType===U.DOCUMENT_FRAGMENT_NODE||t.nodeType===U.COMMENT_NODE||t.nodeType===U.PROCESSING_INSTRUCTION_NODE)}(e)||j(e)&&t.nodeType!==U.DOCUMENT_NODE)throw new P(I,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)})(t,e,i),t.nodeType===U.DOCUMENT_NODE&&(s||Q)(t,e,i);var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===b){var r=e.firstChild;if(null==r)return e;var a=e.lastChild}else r=a=e;var o=i?i.previousSibling:t.lastChild;r.previousSibling=o,a.nextSibling=i,o?o.nextSibling=r:t.firstChild=r,null==i?t.lastChild=a:i.previousSibling=a;do{r.parentNode=t}while(r!==a&&(r=r.nextSibling));return H(t.ownerDocument||t,t),e.nodeType==b&&(e.firstChild=e.lastChild=null),e}function Z(){this._nsMap={}}function tt(){}function et(){}function it(){}function st(){}function nt(){}function rt(){}function at(){}function ot(){}function dt(){}function ct(){}function ut(){}function lt(){}function ht(t,e){var i=[],s=9==this.nodeType&&this.documentElement||this,n=s.prefix,r=s.namespaceURI;if(r&&null==n&&null==(n=s.lookupPrefix(r)))var a=[{namespace:r,prefix:null}];return gt(this,i,t,e,a),i.join("")}function pt(t,e,i){var s=t.prefix||"",n=t.namespaceURI;if(!n)return!1;if("xml"===s&&n===r.XML||n===r.XMLNS)return!1;for(var a=i.length;a--;){var o=i[a];if(o.prefix===s)return o.namespace!==n}return!0}function ft(t,e,i){t.push(" ",e,'="',i.replace(/[<&"]/g,V),'"')}function gt(t,e,i,s,n){if(n||(n=[]),s){if(!(t=s(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case h:var a=t.attributes,o=a.length,d=t.firstChild,c=t.tagName,u=c;if(!(i=r.isHTML(t.namespaceURI)||i)&&!t.prefix&&t.namespaceURI){for(var l,v=0;v<a.length;v++)if("xmlns"===a.item(v).name){l=a.item(v).value;break}if(!l)for(var A=n.length-1;A>=0;A--)if(""===(w=n[A]).prefix&&w.namespace===t.namespaceURI){l=w.namespace;break}if(l!==t.namespaceURI)for(A=n.length-1;A>=0;A--){var w;if((w=n[A]).namespace===t.namespaceURI){w.prefix&&(u=w.prefix+":"+c);break}}}e.push("<",u);for(var _=0;_<o;_++)"xmlns"==(I=a.item(_)).prefix?n.push({prefix:I.localName,namespace:I.value}):"xmlns"==I.nodeName&&n.push({prefix:"",namespace:I.value});for(_=0;_<o;_++){var I,N,D;pt(I=a.item(_),0,n)&&(ft(e,(N=I.prefix||"")?"xmlns:"+N:"xmlns",D=I.namespaceURI),n.push({prefix:N,namespace:D})),gt(I,e,i,s,n)}if(c===u&&pt(t,0,n)&&(ft(e,(N=t.prefix||"")?"xmlns:"+N:"xmlns",D=t.namespaceURI),n.push({prefix:N,namespace:D})),d||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(e.push(">"),i&&/^script$/i.test(c))for(;d;)d.data?e.push(d.data):gt(d,e,i,s,n.slice()),d=d.nextSibling;else for(;d;)gt(d,e,i,s,n.slice()),d=d.nextSibling;e.push("</",u,">")}else e.push("/>");return;case S:case b:for(d=t.firstChild;d;)gt(d,e,i,s,n.slice()),d=d.nextSibling;return;case p:return ft(e,t.name,t.value);case f:return e.push(t.data.replace(/[<&]/g,V).replace(/]]>/g,"]]&gt;"));case g:return e.push("<![CDATA[",t.data,"]]>");case T:return e.push("\x3c!--",t.data,"--\x3e");case E:var P=t.publicId,R=t.systemId;if(e.push("<!DOCTYPE ",t.name),P)e.push(" PUBLIC ",P),R&&"."!=R&&e.push(" ",R),e.push(">");else if(R&&"."!=R)e.push(" SYSTEM ",R,">");else{var L=t.internalSubset;L&&e.push(" [",L,"]"),e.push(">")}return;case y:return e.push("<?",t.target," ",t.data,"?>");case m:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function mt(t,e,i){var s;switch(e.nodeType){case h:(s=e.cloneNode(!1)).ownerDocument=t;case b:break;case p:i=!0}if(s||(s=e.cloneNode(!1)),s.ownerDocument=t,s.parentNode=null,i)for(var n=e.firstChild;n;)s.appendChild(mt(t,n,i)),n=n.nextSibling;return s}function vt(t,e,i){var s=new e.constructor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];"object"!=typeof r&&r!=s[n]&&(s[n]=r)}switch(e.childNodes&&(s.childNodes=new R),s.ownerDocument=t,s.nodeType){case h:var a=e.attributes,o=s.attributes=new O,d=a.length;o._ownerElement=s;for(var c=0;c<d;c++)s.setAttributeNode(vt(t,a.item(c),!0));break;case p:i=!0}if(i)for(var u=e.firstChild;u;)s.appendChild(vt(t,u,i)),u=u.nextSibling;return s}function yt(t,e,i){t[e]=i}w.INVALID_STATE_ERR=(_[11]="Invalid state",11),w.SYNTAX_ERR=(_[12]="Syntax error",12),w.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13),w.NAMESPACE_ERR=(_[14]="Invalid namespace",14),w.INVALID_ACCESS_ERR=(_[15]="Invalid access",15),P.prototype=Error.prototype,c(w,P),R.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var i=[],s=0;s<this.length;s++)gt(this[s],i,t,e);return i.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}},L.prototype.item=function(t){return C(this),this[t]||null},u(L,R),O.prototype={length:0,item:R.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==t)return i}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new P(D);var i=this.getNamedItem(t.nodeName);return x(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var e,i=t.ownerElement;if(i&&i!=this._ownerElement)throw new P(D);return e=this.getNamedItemNS(t.namespaceURI,t.localName),x(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return M(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);return M(this._ownerElement,this,i),i},getNamedItemNS:function(t,e){for(var i=this.length;i--;){var s=this[i];if(s.localName==e&&s.namespaceURI==t)return s}return null}},k.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,i){var s=new F;if(s.implementation=this,s.childNodes=new R,s.doctype=i||null,i&&s.appendChild(i),e){var n=s.createElementNS(t,e);s.appendChild(n)}return s},createDocumentType:function(t,e,i){var s=new rt;return s.name=t,s.nodeName=t,s.publicId=e||"",s.systemId=i||"",s}},U.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return $(this,t,e)},replaceChild:function(t,e){$(this,t,e,J),e&&this.removeChild(e)},removeChild:function(t){return G(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return vt(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==f&&t.nodeType==f?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i)for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)&&i[s]===t)return s;e=e.nodeType==p?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&t in i&&Object.prototype.hasOwnProperty.call(i,t))return i[t];e=e.nodeType==p?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},c(l,U),c(l,U.prototype),F.prototype={nodeName:"#document",nodeType:S,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==b){for(var i=t.firstChild;i;){var s=i.nextSibling;this.insertBefore(i,e),i=s}return t}return $(this,t,e),t.ownerDocument=this,null===this.documentElement&&t.nodeType===h&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),G(this,t)},replaceChild:function(t,e){$(this,t,e,J),t.ownerDocument=this,e&&this.removeChild(e),W(t)&&(this.documentElement=t)},importNode:function(t,e){return mt(this,t,e)},getElementById:function(t){var e=null;return q(this.documentElement,(function(i){if(i.nodeType==h&&i.getAttribute("id")==t)return e=i,!0})),e},getElementsByClassName:function(t){var e=d(t);return new L(this,(function(i){var s=[];return e.length>0&&q(i.documentElement,(function(n){if(n!==i&&n.nodeType===h){var r=n.getAttribute("class");if(r){var a=t===r;if(!a){var o=d(r);a=e.every((c=o,function(t){return c&&-1!==c.indexOf(t)}))}a&&s.push(n)}}var c})),s}))},createElement:function(t){var e=new Z;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new R,(e.attributes=new O)._ownerElement=e,e},createDocumentFragment:function(){var t=new ct;return t.ownerDocument=this,t.childNodes=new R,t},createTextNode:function(t){var e=new it;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new st;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new nt;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new ut;return i.ownerDocument=this,i.tagName=i.nodeName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){var e=new tt;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new dt;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var i=new Z,s=e.split(":"),n=i.attributes=new O;return i.childNodes=new R,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t,2==s.length?(i.prefix=s[0],i.localName=s[1]):i.localName=e,n._ownerElement=i,i},createAttributeNS:function(t,e){var i=new tt,s=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=t,i.specified=!0,2==s.length?(i.prefix=s[0],i.localName=s[1]):i.localName=e,i}},u(F,U),Z.prototype={nodeType:h,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===b?this.insertBefore(t,null):function(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,H(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);return i&&i.value||""},setAttributeNS:function(t,e,i){var s=this.ownerDocument.createAttributeNS(t,e);s.value=s.nodeValue=""+i,this.setAttributeNode(s)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new L(this,(function(e){var i=[];return q(e,(function(s){s===e||s.nodeType!=h||"*"!==t&&s.tagName!=t||i.push(s)})),i}))},getElementsByTagNameNS:function(t,e){return new L(this,(function(i){var s=[];return q(i,(function(n){n===i||n.nodeType!==h||"*"!==t&&n.namespaceURI!==t||"*"!==e&&n.localName!=e||s.push(n)})),s}))}},F.prototype.getElementsByTagName=Z.prototype.getElementsByTagName,F.prototype.getElementsByTagNameNS=Z.prototype.getElementsByTagNameNS,u(Z,U),tt.prototype.nodeType=p,u(tt,U),et.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(_[I])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){i=this.data.substring(0,t)+i+this.data.substring(t+e),this.nodeValue=this.data=i,this.length=i.length}},u(et,U),it.prototype={nodeName:"#text",nodeType:f,splitText:function(t){var e=this.data,i=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var s=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling),s}},u(it,et),st.prototype={nodeName:"#comment",nodeType:T},u(st,et),nt.prototype={nodeName:"#cdata-section",nodeType:g},u(nt,et),rt.prototype.nodeType=E,u(rt,U),at.prototype.nodeType=A,u(at,U),ot.prototype.nodeType=v,u(ot,U),dt.prototype.nodeType=m,u(dt,U),ct.prototype.nodeName="#document-fragment",ct.prototype.nodeType=b,u(ct,U),ut.prototype.nodeType=y,u(ut,U),lt.prototype.serializeToString=function(t,e,i){return ht.call(t,e,i)},U.prototype.toString=ht;try{if(Object.defineProperty){function Tt(t){switch(t.nodeType){case h:case b:var e=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&e.push(Tt(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}}Object.defineProperty(L.prototype,"length",{get:function(){return C(this),this.$$length}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return Tt(this)},set:function(t){switch(this.nodeType){case h:case b:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),yt=function(t,e,i){t["$$"+e]=i}}}catch(St){}e.DocumentType=rt,e.DOMException=P,e.DOMImplementation=k,e.Element=Z,e.Node=U,e.NodeList=R,e.XMLSerializer=lt},6598:(t,e,i)=>{"use strict";var s=i(525).freeze;e.XML_ENTITIES=s({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=s({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),e.entityMap=e.HTML_ENTITIES},7937:(t,e,i)=>{var s=i(1129);s.DOMImplementation,s.XMLSerializer,e.DOMParser=i(8633).DOMParser},2133:(t,e,i)=>{var s=i(525).NAMESPACE,n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function o(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,o)}function d(){}function c(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function u(t,e,i,n,r,a){function o(t,e,s){i.attributeNames.hasOwnProperty(t)&&a.fatalError("Attribute "+t+" redefined"),i.addValue(t,e,s)}for(var d,c=++e,u=0;;){var l=t.charAt(c);switch(l){case"=":if(1===u)d=t.slice(e,c),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(a.warning('attribute value must after "="'),d=t.slice(e,c)),e=c+1,!((c=t.indexOf(l,e))>0))throw new Error("attribute value no end '"+l+"' match");o(d,h=t.slice(e,c).replace(/&#?\w+;/g,r),e-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');o(d,h=t.slice(e,c).replace(/&#?\w+;/g,r),e),a.warning('attribute "'+d+'" missed start quot('+l+")!!"),e=c+1,u=5}break;case"/":switch(u){case 0:i.setTagName(t.slice(e,c));case 5:case 6:case 7:u=7,i.closed=!0;case 4:case 1:break;case 2:i.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==u&&i.setTagName(t.slice(e,c)),c;case">":switch(u){case 0:i.setTagName(t.slice(e,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=t.slice(e,c)).slice(-1)&&(i.closed=!0,h=h.slice(0,-1));case 2:2===u&&(h=d),4==u?(a.warning('attribute "'+h+'" missed quot(")!'),o(d,h.replace(/&#?\w+;/g,r),e)):(s.isHTML(n[""])&&h.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),o(h,h,e));break;case 3:throw new Error("attribute value missed!!")}return c;case"":l=" ";default:if(l<=" ")switch(u){case 0:i.setTagName(t.slice(e,c)),u=6;break;case 1:d=t.slice(e,c),u=2;break;case 4:var h=t.slice(e,c).replace(/&#?\w+;/g,r);a.warning('attribute "'+h+'" missed quot(")!!'),o(d,h,e);case 5:u=6}else switch(u){case 2:i.tagName,s.isHTML(n[""])&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),o(d,d,e),e=c,u=1;break;case 5:a.warning('attribute space is required"'+d+'"!!');case 6:u=1,e=c;break;case 3:u=4,e=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function l(t,e,i){for(var n=t.tagName,r=null,a=t.length;a--;){var o=t[a],d=o.qName,c=o.value;if((p=d.indexOf(":"))>0)var u=o.prefix=d.slice(0,p),l=d.slice(p+1),h="xmlns"===u&&l;else l=d,u=null,h="xmlns"===d&&"";o.localName=l,!1!==h&&(null==r&&(r={},f(i,i={})),i[h]=r[h]=c,o.uri=s.XMLNS,e.startPrefixMapping(h,c))}for(a=t.length;a--;)(u=(o=t[a]).prefix)&&("xml"===u&&(o.uri=s.XML),"xmlns"!==u&&(o.uri=i[u||""]));var p;(p=n.indexOf(":"))>0?(u=t.prefix=n.slice(0,p),l=t.localName=n.slice(p+1)):(u=null,l=t.localName=n);var g=t.uri=i[u||""];if(e.startElement(g,l,n,t),!t.closed)return t.currentNSMap=i,t.localNSMap=r,!0;if(e.endElement(g,l,n),r)for(u in r)Object.prototype.hasOwnProperty.call(r,u)&&e.endPrefixMapping(u)}function h(t,e,i,s,n){if(/^(?:script|textarea)$/i.test(i)){var r=t.indexOf("</"+i+">",e),a=t.substring(e+1,r);if(/[&<]/.test(a))return/^script$/i.test(i)?(n.characters(a,0,a.length),r):(a=a.replace(/&#?\w+;/g,s),n.characters(a,0,a.length),r)}return e+1}function p(t,e,i,s){var n=s[i];return null==n&&((n=t.lastIndexOf("</"+i+">"))<e&&(n=t.lastIndexOf("</"+i)),s[i]=n),n<e}function f(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function g(t,e,i,s){if("-"===t.charAt(e+2))return"-"===t.charAt(e+3)?(n=t.indexOf("--\x3e",e+4))>e?(i.comment(t,e+4,n-e-4),n+3):(s.error("Unclosed comment"),-1):-1;if("CDATA["==t.substr(e+3,6)){var n=t.indexOf("]]>",e+9);return i.startCDATA(),i.characters(t,e+9,n-e-9),i.endCDATA(),n+3}var r=function(t,e){var i,s=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=e,n.exec(t);i=n.exec(t);)if(s.push(i),i[1])return s}(t,e),a=r.length;if(a>1&&/!doctype/i.test(r[0][0])){var o=r[1][0],d=!1,c=!1;a>3&&(/^public$/i.test(r[2][0])?(d=r[3][0],c=a>4&&r[4][0]):/^system$/i.test(r[2][0])&&(c=r[3][0]));var u=r[a-1];return i.startDTD(o,d,c),i.endDTD(),u.index+u[0].length}return-1}function m(t,e,i){var s=t.indexOf("?>",e);if(s){var n=t.substring(e,s).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return n?(n[0].length,i.processingInstruction(n[1],n[2]),s+2):-1}return-1}function v(){this.attributeNames={}}o.prototype=new Error,o.prototype.name=o.name,d.prototype={parse:function(t,e,i){var n=this.domBuilder;n.startDocument(),f(e,e={}),function(t,e,i,n,r){function a(t){var e=t.slice(1,-1);return e in i?i[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),i=56320+(1023&t);return String.fromCharCode(e,i)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(r.error("entity not found:"+t),t)}function d(e){if(e>w){var i=t.substring(w,e).replace(/&#?\w+;/g,a);E&&f(w),n.characters(i,0,e-w),w=e}}function f(e,i){for(;e>=T&&(i=S.exec(t));)y=i.index,T=y+i[0].length,E.lineNumber++;E.columnNumber=e-y+1}for(var y=0,T=0,S=/.*(?:\r\n?|\n)|.*$/g,E=n.locator,b=[{currentNSMap:e}],A={},w=0;;){try{var _=t.indexOf("<",w);if(_<0){if(!t.substr(w).match(/^\s*$/)){var I=n.doc,N=I.createTextNode(t.substr(w));I.appendChild(N),n.currentElement=N}return}switch(_>w&&d(_),t.charAt(_+1)){case"/":var D=t.indexOf(">",_+3),P=t.substring(_+2,D).replace(/[ \t\n\r]+$/g,""),R=b.pop();D<0?(P=t.substring(_+2).replace(/[\s<].*/,""),r.error("end tag name: "+P+" is not complete:"+R.tagName),D=_+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),r.error("end tag name: "+P+" maybe not complete"),D=_+1+P.length);var L=R.localNSMap,C=R.tagName==P;if(C||R.tagName&&R.tagName.toLowerCase()==P.toLowerCase()){if(n.endElement(R.uri,R.localName,P),L)for(var O in L)Object.prototype.hasOwnProperty.call(L,O)&&n.endPrefixMapping(O);C||r.fatalError("end tag name: "+P+" is not match the current start tagName:"+R.tagName)}else b.push(R);D++;break;case"?":E&&f(_),D=m(t,_,n);break;case"!":E&&f(_),D=g(t,_,n,r);break;default:E&&f(_);var B=new v,x=b[b.length-1].currentNSMap,M=(D=u(t,_,B,x,a,r),B.length);if(!B.closed&&p(t,D,B.tagName,A)&&(B.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),E&&M){for(var k=c(E,{}),U=0;U<M;U++){var V=B[U];f(V.offset),V.locator=c(E,{})}n.locator=k,l(B,n,x)&&b.push(B),n.locator=E}else l(B,n,x)&&b.push(B);s.isHTML(B.uri)&&!B.closed?D=h(t,D,B.tagName,a,n):D++}}catch(t){if(t instanceof o)throw t;r.error("element parse error: "+t),D=-1}D>w?w=D:d(Math.max(_,w)+1)}}(t,e,i,n,this.errorHandler),n.endDocument()}},v.prototype={setTagName:function(t){if(!a.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,i){if(!a.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=d,e.ParseError=o},7991:(t,e)=>{"use strict";e.byteLength=function(t){var e=o(t),i=e[0],s=e[1];return 3*(i+s)/4-s},e.toByteArray=function(t){var e,i,r=o(t),a=r[0],d=r[1],c=new n(function(t,e,i){return 3*(e+i)/4-i}(0,a,d)),u=0,l=d>0?a-4:a;for(i=0;i<l;i+=4)e=s[t.charCodeAt(i)]<<18|s[t.charCodeAt(i+1)]<<12|s[t.charCodeAt(i+2)]<<6|s[t.charCodeAt(i+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===d&&(e=s[t.charCodeAt(i)]<<2|s[t.charCodeAt(i+1)]>>4,c[u++]=255&e),1===d&&(e=s[t.charCodeAt(i)]<<10|s[t.charCodeAt(i+1)]<<4|s[t.charCodeAt(i+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c},e.fromByteArray=function(t){for(var e,s=t.length,n=s%3,r=[],a=16383,o=0,c=s-n;o<c;o+=a)r.push(d(t,o,o+a>c?c:o+a));return 1===n?(e=t[s-1],r.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[s-2]<<8)+t[s-1],r.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),r.join("")};for(var i=[],s=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)i[a]=r[a],s[r.charCodeAt(a)]=a;function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function d(t,e,s){for(var n,r,a=[],o=e;o<s;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(i[(r=n)>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return a.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},1048:(t,e,i)=>{"use strict";const s=i(7991),n=i(9318),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=d,e.IS=50;const a=2147483647;function o(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,d.prototype),e}function d(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return c(t,e,i)}function c(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!d.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|g(t,e);let s=o(i);const n=s.write(t,e);return n!==i&&(s=s.slice(0,n)),s}(t,e);if(ArrayBuffer.isView(t))return function(t){if(K(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(K(t,ArrayBuffer)||t&&K(t.buffer,ArrayBuffer))return p(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(K(t,SharedArrayBuffer)||t&&K(t.buffer,SharedArrayBuffer)))return p(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return d.from(s,e,i);const n=function(t){if(d.isBuffer(t)){const e=0|f(t.length),i=o(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||Q(t.length)?o(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return d.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return u(t),o(t<0?0:0|f(t))}function h(t){const e=t.length<0?0:0|f(t.length),i=o(e);for(let s=0;s<e;s+=1)i[s]=255&t[s];return i}function p(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(s,d.prototype),s}function f(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(d.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||K(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return s?-1:W(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){let s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,i);case"utf8":case"utf-8":return I(this,e,i);case"ascii":return D(this,e,i);case"latin1":case"binary":return P(this,e,i);case"base64":return _(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function v(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}function y(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),Q(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=d.from(e,s)),d.isBuffer(e))return 0===e.length?-1:T(t,e,i,s,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):T(t,[e],i,s,n);throw new TypeError("val must be string, number or Buffer")}function T(t,e,i,s,n){let r,a=1,o=t.length,d=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;a=2,o/=2,d/=2,i/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){let s=-1;for(r=i;r<o;r++)if(c(t,r)===c(e,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===d)return s*a}else-1!==s&&(r-=r-s),s=-1}else for(i+d>o&&(i=o-d),r=i;r>=0;r--){let i=!0;for(let s=0;s<d;s++)if(c(t,r+s)!==c(e,s)){i=!1;break}if(i)return r}return-1}function S(t,e,i,s){i=Number(i)||0;const n=t.length-i;s?(s=Number(s))>n&&(s=n):s=n;const r=e.length;let a;for(s>r/2&&(s=r/2),a=0;a<s;++a){const s=parseInt(e.substr(2*a,2),16);if(Q(s))return a;t[i+a]=s}return a}function E(t,e,i,s){return z(W(e,t.length-i),t,i,s)}function b(t,e,i,s){return z(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function A(t,e,i,s){return z(Y(e),t,i,s)}function w(t,e,i,s){return z(function(t,e){let i,s,n;const r=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),s=i>>8,n=i%256,r.push(n),r.push(s);return r}(e,t.length-i),t,i,s)}function _(t,e,i){return 0===e&&i===t.length?s.fromByteArray(t):s.fromByteArray(t.slice(e,i))}function I(t,e,i){i=Math.min(t.length,i);const s=[];let n=e;for(;n<i;){const e=t[n];let r=null,a=e>239?4:e>223?3:e>191?2:1;if(n+a<=i){let i,s,o,d;switch(a){case 1:e<128&&(r=e);break;case 2:i=t[n+1],128==(192&i)&&(d=(31&e)<<6|63&i,d>127&&(r=d));break;case 3:i=t[n+1],s=t[n+2],128==(192&i)&&128==(192&s)&&(d=(15&e)<<12|(63&i)<<6|63&s,d>2047&&(d<55296||d>57343)&&(r=d));break;case 4:i=t[n+1],s=t[n+2],o=t[n+3],128==(192&i)&&128==(192&s)&&128==(192&o)&&(d=(15&e)<<18|(63&i)<<12|(63&s)<<6|63&o,d>65535&&d<1114112&&(r=d))}}null===r?(r=65533,a=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=a}return function(t){const e=t.length;if(e<=N)return String.fromCharCode.apply(String,t);let i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=N));return i}(s)}d.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(t,e,i){return c(t,e,i)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(t,e,i){return function(t,e,i){return u(t),t<=0?o(t):void 0!==e?"string"==typeof i?o(t).fill(e,i):o(t).fill(e):o(t)}(t,e,i)},d.allocUnsafe=function(t){return l(t)},d.allocUnsafeSlow=function(t){return l(t)},d.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==d.prototype},d.compare=function(t,e){if(K(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),K(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(t)||!d.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,s=e.length;for(let n=0,r=Math.min(i,s);n<r;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},d.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return d.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const s=d.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(K(e,Uint8Array))n+e.length>s.length?(d.isBuffer(e)||(e=d.from(e)),e.copy(s,n)):Uint8Array.prototype.set.call(s,e,n);else{if(!d.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(s,n)}n+=e.length}return s},d.byteLength=g,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)v(this,e,e+1);return this},d.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},d.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},d.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):m.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(t){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===d.compare(this,t)},d.prototype.inspect=function(){let t="";const i=e.IS;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(t,e,i,s,n){if(K(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),a=(i>>>=0)-(e>>>=0);const o=Math.min(r,a),c=this.slice(s,n),u=t.slice(e,i);for(let t=0;t<o;++t)if(c[t]!==u[t]){r=c[t],a=u[t];break}return r<a?-1:a<r?1:0},d.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},d.prototype.indexOf=function(t,e,i){return y(this,t,e,i,!0)},d.prototype.lastIndexOf=function(t,e,i){return y(this,t,e,i,!1)},d.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return S(this,t,e,i);case"utf8":case"utf-8":return E(this,t,e,i);case"ascii":case"latin1":case"binary":return b(this,t,e,i);case"base64":return A(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,i);default:if(r)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const N=4096;function D(t,e,i){let s="";i=Math.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function P(t,e,i){let s="";i=Math.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function R(t,e,i){const s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);let n="";for(let s=e;s<i;++s)n+=J[t[s]];return n}function L(t,e,i){const s=t.slice(e,i);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function C(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,s,n,r){if(!d.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function B(t,e,i,s,n){X(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,i}function x(t,e,i,s,n){X(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i+7]=r,r>>=8,t[i+6]=r,r>>=8,t[i+5]=r,r>>=8,t[i+4]=r;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=a,a>>=8,t[i+2]=a,a>>=8,t[i+1]=a,a>>=8,t[i]=a,i+8}function M(t,e,i,s,n,r){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function k(t,e,i,s,r){return e=+e,i>>>=0,r||M(t,0,i,4),n.write(t,e,i,s,23,4),i+4}function U(t,e,i,s,r){return e=+e,i>>>=0,r||M(t,0,i,8),n.write(t,e,i,s,52,8),i+8}d.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const s=this.subarray(t,e);return Object.setPrototypeOf(s,d.prototype),s},d.prototype.readUintLE=d.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return s},d.prototype.readUintBE=d.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let s=this[t+--e],n=1;for(;e>0&&(n*=256);)s+=this[t+--e]*n;return s},d.prototype.readUint8=d.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},d.prototype.readBigUInt64LE=$((function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||G(t,this.length-8);const s=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),d.prototype.readBigUInt64BE=$((function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||G(t,this.length-8);const s=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(s)<<BigInt(32))+BigInt(n)})),d.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},d.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let s=e,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},d.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},d.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},d.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},d.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},d.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},d.prototype.readBigInt64LE=$((function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||G(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(s)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),d.prototype.readBigInt64BE=$((function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||G(t,this.length-8);const s=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),d.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!0,23,4)},d.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!1,23,4)},d.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!0,52,8)},d.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(t,e,i,s){t=+t,e>>>=0,i>>>=0,s||O(this,t,e,i,Math.pow(2,8*i)-1,0);let n=1,r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(t,e,i,s){t=+t,e>>>=0,i>>>=0,s||O(this,t,e,i,Math.pow(2,8*i)-1,0);let n=i-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+i},d.prototype.writeUint8=d.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},d.prototype.writeBigUInt64LE=$((function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=$((function(t,e=0){return x(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=Math.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=0,r=1,a=0;for(this[e]=255&t;++n<i&&(r*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/r|0)-a&255;return e+i},d.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=Math.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=i-1,r=1,a=0;for(this[e+n]=255&t;--n>=0&&(r*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/r|0)-a&255;return e+i},d.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},d.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},d.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},d.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},d.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},d.prototype.writeBigInt64LE=$((function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=$((function(t,e=0){return x(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(t,e,i){return k(this,t,e,!0,i)},d.prototype.writeFloatBE=function(t,e,i){return k(this,t,e,!1,i)},d.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},d.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},d.prototype.copy=function(t,e,i,s){if(!d.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),s||0===s||(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);const n=s-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,s):Uint8Array.prototype.set.call(t,this.subarray(i,s),e),n},d.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!d.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===t.length){const e=t.charCodeAt(0);("utf8"===s&&e<128||"latin1"===s)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const r=d.isBuffer(t)?t:d.from(t,s),a=r.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=r[n%a]}return this};const V={};function q(t,e,i){V[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",i=t.length;const s="-"===t[0]?1:0;for(;i>=s+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function X(t,e,i,s,n,r){if(t>i||t<e){const s="bigint"==typeof e?"n":"";let n;throw n=r>3?0===e||e===BigInt(0)?`>= 0${s} and < 2${s} ** ${8*(r+1)}${s}`:`>= -(2${s} ** ${8*(r+1)-1}${s}) and < 2 ** ${8*(r+1)-1}${s}`:`>= ${e}${s} and <= ${i}${s}`,new V.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,i){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||G(e,t.length-(i+1))}(s,n,r)}function H(t,e){if("number"!=typeof t)throw new V.ERR_INVALID_ARG_TYPE(e,"number",t)}function G(t,e,i){if(Math.floor(t)!==t)throw H(t,i),new V.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(t,e,i){let s=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=F(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=F(n)),n+="n"),s+=` It must be ${e}. Received ${n}`,s}),RangeError);const j=/[^+/0-9A-Za-z-_]/g;function W(t,e){let i;e=e||1/0;const s=t.length;let n=null;const r=[];for(let a=0;a<s;++a){if(i=t.charCodeAt(a),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===s){(e-=3)>-1&&r.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function Y(t){return s.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,i,s){let n;for(n=0;n<s&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function K(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Q(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const s=16*i;for(let n=0;n<16;++n)e[s+n]=t[i]+t[n]}return e}();function $(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},2553:(t,e,i)=>{var s;s="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},t.exports=s},8641:(t,e,i)=>{var s,n=i(1048).hp;self,s=()=>{return t={851:(t,e,i)=>{var s=i(771),n=s.getOptions,r=s.setOptions,a=i(463),o=i(367),d=i(890);t.exports={parse:a,stringify:o,types:d,getOptions:n,setOptions:r}},463:(t,e,i)=>{function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var s,n,r,a,o=[],d=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=r.call(i)).done)&&(o.push(s.value),o.length!==e);d=!0);}catch(t){c=!0,n=t}finally{try{if(!d&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw n}}return o}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=a(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,d=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){d=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(d)throw r}}}}function a(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var d=i(771),c=i(890),u=c.Rendition,l=c.Variant,h=c.SessionData,p=c.Key,f=c.MediaInitializationSection,g=c.DateRange,m=c.SpliceInfo,v=c.MasterPlaylist,y=c.MediaPlaylist,T=c.Segment,S=c.PartialSegment,E=c.PrefetchSegment,b=c.RenditionReport;function A(t){return d.trim(t,'"')}function w(t){var e=d.splitAt(t,",");return{duration:d.toNumber(e[0]),title:decodeURIComponent(escape(e[1]))}}function _(t){var e=d.splitAt(t,"@");return{length:d.toNumber(e[0]),offset:e[1]?d.toNumber(e[1]):-1}}function I(t){var e=d.splitAt(t,"x");return{width:d.toNumber(e[0]),height:d.toNumber(e[1])}}function N(t){var e="ALLOWED-CPC: Each entry must consit of KEYFORMAT and Content Protection Configuration",i=t.split(",");0===i.length&&d.INVALIDPLAYLIST(e);var n,a=[],o=r(i);try{for(o.s();!(n=o.n()).done;){var c=n.value,u=s(d.splitAt(c,":"),2),l=u[0],h=u[1];l&&h?a.push({format:l,cpcList:h.split("/")}):d.INVALIDPLAYLIST(e)}}catch(t){o.e(t)}finally{o.f()}return a}function D(t){return t.startsWith('"')?A(t):t.startsWith("0x")||t.startsWith("0X")?d.hexToByteSequence(t):d.toNumber(t)}function P(t,e){e.IV&&t.compatibleVersion<2&&(t.compatibleVersion=2),(e.KEYFORMAT||e.KEYFORMATVERSIONS)&&t.compatibleVersion<5&&(t.compatibleVersion=5)}function R(t){var e,i,n,a={},o=r(d.splitByCommaWithPreservingQuotes(t));try{for(o.s();!(e=o.n()).done;){var c=e.value,u=s(d.splitAt(c,"="),2),l=u[0],h=u[1],p=A(h);switch(l){case"URI":a[l]=p;break;case"START-DATE":case"END-DATE":a[l]=new Date(p);break;case"IV":a[l]=(i=p,16!==(n=d.hexToByteSequence(i)).length&&d.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),n);break;case"BYTERANGE":a[l]=_(p);break;case"RESOLUTION":a[l]=I(p);break;case"ALLOWED-CPC":a[l]=N(p);break;case"END-ON-NEXT":case"DEFAULT":case"AUTOSELECT":case"FORCED":case"PRECISE":case"CAN-BLOCK-RELOAD":case"INDEPENDENT":case"GAP":a[l]="YES"===p;break;case"DURATION":case"PLANNED-DURATION":case"BANDWIDTH":case"AVERAGE-BANDWIDTH":case"FRAME-RATE":case"TIME-OFFSET":case"CAN-SKIP-UNTIL":case"HOLD-BACK":case"PART-HOLD-BACK":case"PART-TARGET":case"BYTERANGE-START":case"BYTERANGE-LENGTH":case"LAST-MSN":case"LAST-PART":case"SKIPPED-SEGMENTS":case"SCORE":a[l]=d.toNumber(p);break;default:l.startsWith("SCTE35-")?a[l]=d.hexToByteSequence(p):l.startsWith("X-")?a[l]=D(h):("VIDEO-RANGE"===l&&"SDR"!==p&&"HLG"!==p&&"PQ"!==p&&d.INVALIDPLAYLIST('VIDEO-RANGE: unknown value "'.concat(p,'"')),a[l]=p)}}}catch(t){o.e(t)}finally{o.f()}return a}function L(){d.INVALIDPLAYLIST("The file contains both media and master playlist tags.")}function C(t,e,i){var s,n=(s=e.attributes,new u({type:s.TYPE,uri:s.URI,groupId:s["GROUP-ID"],language:s.LANGUAGE,assocLanguage:s["ASSOC-LANGUAGE"],name:s.NAME,isDefault:s.DEFAULT,autoselect:s.AUTOSELECT,forced:s.FORCED,instreamId:s["INSTREAM-ID"],characteristics:s.CHARACTERISTICS,channels:s.CHANNELS})),a=t[d.camelify(i)],o=function(t,e){var i,s=!1,n=r(t);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.name===e.name)return"All EXT-X-MEDIA tags in the same Group MUST have different NAME attributes.";a.isDefault&&(s=!0)}}catch(t){n.e(t)}finally{n.f()}return s&&e.isDefault?"EXT-X-MEDIA A Group MUST NOT have more than one member with a DEFAULT attribute of YES.":""}(a,n);o&&d.INVALIDPLAYLIST(o),a.push(n),n.isDefault&&(t.currentRenditions[d.camelify(i)]=a.length-1)}function O(t,e,i,s,n){var a,o=new l({uri:i,bandwidth:e.BANDWIDTH,averageBandwidth:e["AVERAGE-BANDWIDTH"],score:e.SCORE,codecs:e.CODECS,resolution:e.RESOLUTION,frameRate:e["FRAME-RATE"],hdcpLevel:e["HDCP-LEVEL"],allowedCpc:e["ALLOWED-CPC"],videoRange:e["VIDEO-RANGE"],stableVariantId:e["STABLE-VARIANT-ID"]}),c=r(t);try{for(c.s();!(a=c.n()).done;){var u=a.value;if("EXT-X-MEDIA"===u.name){var h=u.attributes,p=h.TYPE;if(p&&h["GROUP-ID"]||d.INVALIDPLAYLIST("EXT-X-MEDIA TYPE attribute is REQUIRED."),e[p]===h["GROUP-ID"]&&(C(o,u,p),"CLOSED-CAPTIONS"===p)){var f,g=r(o.closedCaptions);try{for(g.s();!(f=g.n()).done;){var m=f.value.instreamId;if(m&&m.startsWith("SERVICE")&&n.compatibleVersion<7){n.compatibleVersion=7;break}}}catch(t){g.e(t)}finally{g.f()}}}}}catch(t){c.e(t)}finally{c.f()}return function(t,e,i){for(var s=function(){var s=r[n];"CLOSED-CAPTIONS"===s&&"NONE"===t[s]?(i.isClosedCaptionsNone=!0,e.closedCaptions=[]):t[s]&&!e[d.camelify(s)].some((function(e){return e.groupId===t[s]}))&&d.INVALIDPLAYLIST("".concat(s," attribute MUST match the value of the GROUP-ID attribute of an EXT-X-MEDIA tag whose TYPE attribute is ").concat(s,"."))},n=0,r=["AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS"];n<r.length;n++)s()}(e,o,n),o.isIFrameOnly=s,o}function B(t,e){if(t.method!==e.method)return!1;if(t.uri!==e.uri)return!1;if(t.iv){if(!e.iv)return!1;if(t.iv.length!==e.iv.length)return!1;for(var i=0;i<t.iv.length;i++)if(t.iv[i]!==e.iv[i])return!1}else if(e.iv)return!1;return t.format===e.format&&t.formatVersion===e.formatVersion}function x(t,e,i,s,n,r,a){for(var o=new T({uri:e,mediaSequenceNumber:n,discontinuitySequence:r}),c=!1,u=!1,l=i;l<=s;l++){var h=t[l],v=h.name,y=h.value,E=h.attributes;if("EXTINF"===v)!Number.isInteger(y.duration)&&a.compatibleVersion<3&&(a.compatibleVersion=3),Math.round(y.duration)>a.targetDuration&&d.INVALIDPLAYLIST("EXTINF duration, when rounded to the nearest integer, MUST be less than or equal to the target duration"),o.duration=y.duration,o.title=y.title;else if("EXT-X-BYTERANGE"===v)a.compatibleVersion<4&&(a.compatibleVersion=4),o.byterange=y;else if("EXT-X-DISCONTINUITY"===v)o.parts.length>0&&d.INVALIDPLAYLIST("EXT-X-DISCONTINUITY must appear before the first EXT-X-PART tag of the Parent Segment."),o.discontinuity=!0;else if("EXT-X-KEY"===v)o.parts.length>0&&d.INVALIDPLAYLIST("EXT-X-KEY must appear before the first EXT-X-PART tag of the Parent Segment."),P(a,E),o.key=new p({method:E.METHOD,uri:E.URI,iv:E.IV,format:E.KEYFORMAT,formatVersion:E.KEYFORMATVERSIONS});else if("EXT-X-MAP"===v)o.parts.length>0&&d.INVALIDPLAYLIST("EXT-X-MAP must appear before the first EXT-X-PART tag of the Parent Segment."),a.compatibleVersion<5&&(a.compatibleVersion=5),a.hasMap=!0,o.map=new f({uri:E.URI,byterange:E.BYTERANGE});else if("EXT-X-PROGRAM-DATE-TIME"===v)o.programDateTime=y;else if("EXT-X-DATERANGE"===v){for(var b={},A=0,w=Object.keys(E);A<w.length;A++){var _=w[A];(_.startsWith("SCTE35-")||_.startsWith("X-"))&&(b[_]=E[_])}o.dateRange=new g({id:E.ID,classId:E.CLASS,start:E["START-DATE"],end:E["END-DATE"],duration:E.DURATION,plannedDuration:E["PLANNED-DURATION"],endOnNext:E["END-ON-NEXT"],attributes:b})}else if("EXT-X-CUE-OUT"===v)o.markers.push(new m({type:"OUT",duration:E&&E.DURATION||y}));else if("EXT-X-CUE-IN"===v)o.markers.push(new m({type:"IN"}));else if("EXT-X-CUE-OUT-CONT"===v||"EXT-X-CUE"===v||"EXT-OATCLS-SCTE35"===v||"EXT-X-ASSET"===v||"EXT-X-SCTE35"===v)o.markers.push(new m({type:"RAW",tagName:v,value:y}));else if("EXT-X-PRELOAD-HINT"!==v||E.TYPE)if("EXT-X-PRELOAD-HINT"===v&&"PART"===E.TYPE&&u)d.INVALIDPLAYLIST("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist.");else if("EXT-X-PART"!==v&&"EXT-X-PRELOAD-HINT"!==v||E.URI){if("EXT-X-PRELOAD-HINT"===v&&"MAP"===E.TYPE)c&&d.INVALIDPLAYLIST("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist."),c=!0,a.hasMap=!0,o.map=new f({hint:!0,uri:E.URI,byterange:{length:E["BYTERANGE-LENGTH"],offset:E["BYTERANGE-START"]||0}});else if("EXT-X-PART"===v||"EXT-X-PRELOAD-HINT"===v&&"PART"===E.TYPE){"EXT-X-PART"!==v||E.DURATION||d.INVALIDPLAYLIST("EXT-X-PART: DURATION attribute is mandatory"),"EXT-X-PRELOAD-HINT"===v&&(u=!0);var I=new S({hint:"EXT-X-PRELOAD-HINT"===v,uri:E.URI,byterange:"EXT-X-PART"===v?E.BYTERANGE:{length:E["BYTERANGE-LENGTH"],offset:E["BYTERANGE-START"]||0},duration:E.DURATION,independent:E.INDEPENDENT,gap:E.GAP});o.parts.push(I)}}else d.INVALIDPLAYLIST("EXT-X-PART / EXT-X-PRELOAD-HINT: URI attribute is mandatory");else d.INVALIDPLAYLIST("EXT-X-PRELOAD-HINT: TYPE attribute is mandatory")}return o}function M(t,e,i,s,n,r,a){for(var o=new E({uri:e,mediaSequenceNumber:n,discontinuitySequence:r}),c=i;c<=s;c++){var u=t[c],l=u.name,h=u.attributes;"EXTINF"===l?d.INVALIDPLAYLIST("A prefetch segment must not be advertised with an EXTINF tag."):"EXT-X-DISCONTINUITY"===l?d.INVALIDPLAYLIST("A prefetch segment must not be advertised with an EXT-X-DISCONTINUITY tag."):"EXT-X-PREFETCH-DISCONTINUITY"===l?o.discontinuity=!0:"EXT-X-KEY"===l?(P(a,h),o.key=new p({method:h.METHOD,uri:h.URI,iv:h.IV,format:h.KEYFORMAT,formatVersion:h.KEYFORMATVERSIONS})):"EXT-X-MAP"===l&&d.INVALIDPLAYLIST("Prefetch segments must not be advertised with an EXT-X-MAP tag.")}return o}function k(t,e,i,s,n){var r=e.discontinuity,a=e.key,o=e.map,c=e.byterange,u=e.uri;if(r&&(e.discontinuitySequence=i+1),a||(e.key=s),o||(e.map=n),c&&-1===c.offset){var l=t.segments;if(l.length>0){var h=l[l.length-1];h.byterange&&h.uri===u?c.offset=h.byterange.offset+h.byterange.length:d.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST be a sub-range of the same media resource")}else d.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST appear in the Playlist file")}return t.segments.push(e),[e.discontinuitySequence,e.key,e.map]}function U(t,e){var i=function(t){var e=t.indexOf(":");return-1===e?[t.slice(1).trim(),null]:[t.slice(1,e).trim(),t.slice(e+1).trim()]}(t),n=s(i,2),r=n[0],a=n[1],o=function(t){switch(t){case"EXTM3U":case"EXT-X-VERSION":return"Basic";case"EXTINF":case"EXT-X-BYTERANGE":case"EXT-X-DISCONTINUITY":case"EXT-X-PREFETCH-DISCONTINUITY":case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-PROGRAM-DATE-TIME":case"EXT-X-DATERANGE":case"EXT-X-CUE-OUT":case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT-CONT":case"EXT-X-CUE":case"EXT-OATCLS-SCTE35":case"EXT-X-ASSET":case"EXT-X-SCTE35":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":return"Segment";case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-ENDLIST":case"EXT-X-PLAYLIST-TYPE":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PREFETCH":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return"MediaPlaylist";case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":return"MasterPlaylist";case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-START":return"MediaorMasterPlaylist";default:return"Unknown"}}(r);if(function(t,e){if("Segment"===t||"MediaPlaylist"===t)return void 0===e.isMasterPlaylist?void(e.isMasterPlaylist=!1):void(e.isMasterPlaylist&&L());if("MasterPlaylist"===t){if(void 0===e.isMasterPlaylist)return void(e.isMasterPlaylist=!0);!1===e.isMasterPlaylist&&L()}}(o,e),"Unknown"===o)return null;"MediaPlaylist"===o&&"EXT-X-RENDITION-REPORT"!==r&&"EXT-X-PREFETCH"!==r&&(e.hash[r]&&d.INVALIDPLAYLIST("There MUST NOT be more than one Media Playlist tag of each type in any Media Playlist"),e.hash[r]=!0);var c=function(t,e){switch(t){case"EXTM3U":case"EXT-X-DISCONTINUITY":case"EXT-X-ENDLIST":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-CUE-IN":return[null,null];case"EXT-X-VERSION":case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":return[d.toNumber(e),null];case"EXT-X-CUE-OUT":return Number.isNaN(Number(e))?[null,R(e)]:[d.toNumber(e),null];case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-DATERANGE":case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":case"EXT-X-START":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return[null,R(e)];case"EXTINF":return[w(e),null];case"EXT-X-BYTERANGE":return[_(e),null];case"EXT-X-PROGRAM-DATE-TIME":return[new Date(e),null];default:return[e,null]}}(r,a),u=s(c,2);return{name:r,category:o,value:u[0],attributes:u[1]}}function V(t,e){var i;return e.isMasterPlaylist?i=function(t,e){var i,n=new v,a=!1,o=r(t.entries());try{for(o.s();!(i=o.n()).done;){var c=s(i.value,2),u=c[0],l=c[1],f=l.name,g=l.value,m=l.attributes;if("EXT-X-VERSION"===f)n.version=g;else if("EXT-X-STREAM-INF"===f){var y=t[u+1];("string"!=typeof y||y.startsWith("#EXT"))&&d.INVALIDPLAYLIST("EXT-X-STREAM-INF must be followed by a URI line");var T=O(t,m,y,!1,e);T&&("number"==typeof T.score&&(a=!0,T.score<0&&d.INVALIDPLAYLIST("SCORE attribute on EXT-X-STREAM-INF must be positive decimal-floating-point number.")),n.variants.push(T))}else if("EXT-X-I-FRAME-STREAM-INF"===f){var S=O(t,m,m.URI,!0,e);S&&n.variants.push(S)}else"EXT-X-SESSION-DATA"===f?function(){var t=new h({id:m["DATA-ID"],value:m.VALUE,uri:m.URI,language:m.LANGUAGE});n.sessionDataList.some((function(e){return e.id===t.id&&e.language===t.language}))&&d.INVALIDPLAYLIST("A Playlist MUST NOT contain more than one EXT-X-SESSION-DATA tag with the same DATA-ID attribute and the same LANGUAGE attribute."),n.sessionDataList.push(t)}():"EXT-X-SESSION-KEY"===f?function(){"NONE"===m.METHOD&&d.INVALIDPLAYLIST("EXT-X-SESSION-KEY: The value of the METHOD attribute MUST NOT be NONE");var t=new p({method:m.METHOD,uri:m.URI,iv:m.IV,format:m.KEYFORMAT,formatVersion:m.KEYFORMATVERSIONS});n.sessionKeyList.some((function(e){return B(e,t)}))&&d.INVALIDPLAYLIST("A Master Playlist MUST NOT contain more than one EXT-X-SESSION-KEY tag with the same METHOD, URI, IV, KEYFORMAT, and KEYFORMATVERSIONS attribute values."),P(e,m),n.sessionKeyList.push(t)}():"EXT-X-INDEPENDENT-SEGMENTS"===f?(n.independentSegments&&d.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist"),n.independentSegments=!0):"EXT-X-START"===f&&(n.start&&d.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist"),"number"!=typeof m["TIME-OFFSET"]&&d.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED"),n.start={offset:m["TIME-OFFSET"],precise:m.PRECISE||!1})}}catch(t){o.e(t)}finally{o.f()}if(a){var E,b=r(n.variants);try{for(b.s();!(E=b.n()).done;)"number"!=typeof E.value.score&&d.INVALIDPLAYLIST("If any Variant Stream contains the SCORE attribute, then all Variant Streams in the Master Playlist SHOULD have a SCORE attribute")}catch(t){b.e(t)}finally{b.f()}}if(e.isClosedCaptionsNone){var A,w=r(n.variants);try{for(w.s();!(A=w.n()).done;)A.value.closedCaptions.length>0&&d.INVALIDPLAYLIST("If there is a variant with CLOSED-CAPTIONS attribute of NONE, all EXT-X-STREAM-INF tags MUST have this attribute with a value of NONE")}catch(t){w.e(t)}finally{w.f()}}return n}(t,e):!(i=function(t,e){var i,n=new y,a=-1,o=0,c=!1,u=!1,l=0,h=null,p=null,f=!1,g=r(t.entries());try{for(g.s();!(i=g.n()).done;){var m=s(i.value,2),v=m[0],T=m[1],S=T.name,E=T.value,A=T.attributes;if("Segment"!==T.category){if("EXT-X-VERSION"===S)void 0===n.version?n.version=E:d.INVALIDPLAYLIST("A Playlist file MUST NOT contain more than one EXT-X-VERSION tag.");else if("EXT-X-TARGETDURATION"===S)n.targetDuration=e.targetDuration=E;else if("EXT-X-MEDIA-SEQUENCE"===S)n.segments.length>0&&d.INVALIDPLAYLIST("The EXT-X-MEDIA-SEQUENCE tag MUST appear before the first Media Segment in the Playlist."),n.mediaSequenceBase=o=E;else if("EXT-X-DISCONTINUITY-SEQUENCE"===S)n.segments.length>0&&d.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before the first Media Segment in the Playlist."),c&&d.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before any EXT-X-DISCONTINUITY tag."),n.discontinuitySequenceBase=l=E;else if("EXT-X-ENDLIST"===S)n.endlist=!0;else if("EXT-X-PLAYLIST-TYPE"===S)n.playlistType=E;else if("EXT-X-I-FRAMES-ONLY"===S)e.compatibleVersion<4&&(e.compatibleVersion=4),n.isIFrame=!0;else if("EXT-X-INDEPENDENT-SEGMENTS"===S)n.independentSegments&&d.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist"),n.independentSegments=!0;else if("EXT-X-START"===S)n.start&&d.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist"),"number"!=typeof A["TIME-OFFSET"]&&d.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED"),n.start={offset:A["TIME-OFFSET"],precise:A.PRECISE||!1};else if("EXT-X-SERVER-CONTROL"===S)A["CAN-BLOCK-RELOAD"]||d.INVALIDPLAYLIST("EXT-X-SERVER-CONTROL: CAN-BLOCK-RELOAD=YES is mandatory for Low-Latency HLS"),n.lowLatencyCompatibility={canBlockReload:A["CAN-BLOCK-RELOAD"],canSkipUntil:A["CAN-SKIP-UNTIL"],holdBack:A["HOLD-BACK"],partHoldBack:A["PART-HOLD-BACK"]};else if("EXT-X-PART-INF"===S)A["PART-TARGET"]||d.INVALIDPLAYLIST("EXT-X-PART-INF: PART-TARGET attribute is mandatory"),n.partTargetDuration=A["PART-TARGET"];else if("EXT-X-RENDITION-REPORT"===S)A.URI||d.INVALIDPLAYLIST("EXT-X-RENDITION-REPORT: URI attribute is mandatory"),0===A.URI.search(/^[a-z]+:/)&&d.INVALIDPLAYLIST("EXT-X-RENDITION-REPORT: URI must be relative to the playlist uri"),n.renditionReports.push(new b({uri:A.URI,lastMSN:A["LAST-MSN"],lastPart:A["LAST-PART"]}));else if("EXT-X-SKIP"===S)A["SKIPPED-SEGMENTS"]||d.INVALIDPLAYLIST("EXT-X-SKIP: SKIPPED-SEGMENTS attribute is mandatory"),e.compatibleVersion<9&&(e.compatibleVersion=9),n.skip=A["SKIPPED-SEGMENTS"],o+=n.skip;else if("EXT-X-PREFETCH"===S){var w=M(t,E,-1===a?v:a,v-1,o++,l,e);w&&(w.discontinuity&&(w.discontinuitySequence++,l=w.discontinuitySequence),w.key?h=w.key:w.key=h,n.prefetchSegments.push(w)),u=!0,a=-1}else if("string"==typeof T){-1===a&&d.INVALIDPLAYLIST("A URI line is not preceded by any segment tags"),n.targetDuration||d.INVALIDPLAYLIST("The EXT-X-TARGETDURATION tag is REQUIRED"),u&&d.INVALIDPLAYLIST("These segments must appear after all complete segments.");var _=x(t,T,a,v-1,o++,l,e);if(_){var I=s(k(n,_,l,h,p),3);l=I[0],h=I[1],p=I[2],!f&&_.parts.length>0&&(f=!0)}a=-1}}else-1===a&&(a=v),"EXT-X-DISCONTINUITY"===S&&(c=!0)}}catch(t){g.e(t)}finally{g.f()}if(-1!==a){var N=x(t,"",a,t.length-1,o++,l,e);if(N){var D=N.parts;D.length>0&&!n.endlist&&!D[D.length-1].hint&&d.INVALIDPLAYLIST("If the Playlist contains EXT-X-PART tags and does not contain an EXT-X-ENDLIST tag, the Playlist must contain an EXT-X-PRELOAD-HINT tag with a TYPE=PART attribute"),k(n,N,h,p),!f&&N.parts.length>0&&(f=!0)}}return function(t){for(var e=new Map,i=new Map,s=!1,n=!1,a=t.length-1;a>=0;a--){var o=t[a],c=o.programDateTime,u=o.dateRange;if(c&&(n=!0),u&&u.start){s=!0,u.endOnNext&&(u.end||u.duration)&&d.INVALIDPLAYLIST("An EXT-X-DATERANGE tag with an END-ON-NEXT=YES attribute MUST NOT contain DURATION or END-DATE attributes.");var l=u.start.getTime(),h=u.duration||0;u.end&&u.duration&&l+1e3*h!==u.end.getTime()&&d.INVALIDPLAYLIST("END-DATE MUST be equal to the value of the START-DATE attribute plus the value of the DURATION"),u.endOnNext&&(u.end=e.get(u.classId)),e.set(u.classId,u.start);var p=u.end?u.end.getTime():u.start.getTime()+1e3*(u.duration||0),f=i.get(u.classId);if(f){var g,m=r(f);try{for(m.s();!(g=m.n()).done;){var v=g.value;(v.start<=l&&v.end>l||v.start>=l&&v.start<p)&&d.INVALIDPLAYLIST("DATERANGE tags with the same CLASS should not overlap")}}catch(t){m.e(t)}finally{m.f()}f.push({start:l,end:p})}else i.set(u.classId,[{start:l,end:p}])}}s&&!n&&d.INVALIDPLAYLIST("If a Playlist contains an EXT-X-DATERANGE tag, it MUST also contain at least one EXT-X-PROGRAM-DATE-TIME tag.")}(n.segments),n.lowLatencyCompatibility&&function(t,e){var i=t.lowLatencyCompatibility,n=t.targetDuration,a=t.partTargetDuration,o=t.segments,c=t.renditionReports,u=i.canSkipUntil,l=i.holdBack,h=i.partHoldBack;if(u<6*n&&d.INVALIDPLAYLIST("The Skip Boundary must be at least six times the EXT-X-TARGETDURATION."),l<3*n&&d.INVALIDPLAYLIST("HOLD-BACK must be at least three times the EXT-X-TARGETDURATION."),e){void 0===a&&d.INVALIDPLAYLIST("EXT-X-PART-INF is required if a Playlist contains one or more EXT-X-PART tags"),void 0===h&&d.INVALIDPLAYLIST("EXT-X-PART: PART-HOLD-BACK attribute is mandatory"),h<a&&d.INVALIDPLAYLIST("PART-HOLD-BACK must be at least PART-TARGET");var p,f=r(o.entries());try{for(f.s();!(p=f.n()).done;){var g=s(p.value,2),m=g[0],v=g[1].parts;v.length>0&&m<o.length-3&&d.INVALIDPLAYLIST("Remove EXT-X-PART tags from the Playlist after they are greater than three target durations from the end of the Playlist.");var y,T=r(v.entries());try{for(T.s();!(y=T.n()).done;){var S=s(y.value,2),E=S[0],b=S[1].duration;void 0!==b&&(b>a&&d.INVALIDPLAYLIST("PART-TARGET is the maximum duration of any Partial Segment"),E<v.length-1&&b<.85*a&&d.INVALIDPLAYLIST("All Partial Segments except the last part of a segment must have a duration of at least 85% of PART-TARGET"))}}catch(t){T.e(t)}finally{T.f()}}}catch(t){f.e(t)}finally{f.f()}}var A,w=r(c);try{for(w.s();!(A=w.n()).done;){var _=A.value,I=o[o.length-1];_.lastMSN||(_.lastMSN=I.mediaSequenceNumber),!_.lastPart&&I.parts.length>0&&(_.lastPart=I.parts.length-1)}}catch(t){w.e(t)}finally{w.f()}}(n,f),n}(t,e)).isIFrame&&e.hasMap&&e.compatibleVersion<6&&(e.compatibleVersion=6),e.compatibleVersion>1&&(!i.version||i.version<e.compatibleVersion)&&d.INVALIDPLAYLIST("EXT-X-VERSION needs to be ".concat(e.compatibleVersion," or higher.")),i}t.exports=function(t){var e={version:void 0,isMasterPlaylist:void 0,hasMap:!1,targetDuration:0,compatibleVersion:1,isClosedCaptionsNone:!1,hash:{}},i=function(t,e){var i,s=[],a=r(t.split("\n"));try{for(a.s();!(i=a.n()).done;){var o=i.value,c=n.from(o.trim()).toString();if(c)if(c.startsWith("#")){if(c.startsWith("#EXT")){var u=U(c,e);u&&s.push(u)}}else s.push(c)}}catch(t){a.e(t)}finally{a.f()}return 0!==s.length&&"EXTM3U"===s[0].name||d.INVALIDPLAYLIST("The EXTM3U tag MUST be the first line."),s}(t,e),s=V(i,e);return s.source=t,s}},367:(t,e,i)=>{function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var s,n,r,a,o=[],d=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=r.call(i)).done)&&(o.push(s.value),o.length!==e);d=!0);}catch(t){c=!0,n=t}finally{try{if(!d&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw n}}return o}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=a(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,d=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){d=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(d)throw r}}}}function a(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=function(t){if("object"!==s(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(r)?r:String(r)),n)}var r}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(s){var n=Object.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}},c.apply(this,arguments)}function u(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){var e="function"==typeof Map?new Map:void 0;return l=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,s)}function s(){return h(t,arguments,g(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),f(s,t)},l(t)}function h(t,e,i){return h=p()?Reflect.construct.bind():function(t,e,i){var s=[null];s.push.apply(s,e);var n=new(Function.bind.apply(t,s));return i&&f(n,i.prototype),n},h.apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var m=i(771),v=["#EXTINF","#EXT-X-BYTERANGE","#EXT-X-DISCONTINUITY","#EXT-X-STREAM-INF","#EXT-X-CUE-OUT","#EXT-X-CUE-IN","#EXT-X-KEY","#EXT-X-MAP"],y=["#EXT-X-MEDIA"],T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(a,t);var e,i,s,n,r=(e=a,i=p(),function(){var t,s=g(e);if(i){var n=g(this).constructor;t=Reflect.construct(s,arguments,n)}else t=s.apply(this,arguments);return u(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this)).baseUri=t,e}return s=a,n=[{key:"push",value:function(){for(var t=this,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];for(var n=function(){var e=o[r];if(!e.startsWith("#"))return c(g(a.prototype),"push",t).call(t,e),"continue";if(v.some((function(t){return e.startsWith(t)})))return c(g(a.prototype),"push",t).call(t,e),"continue";if(t.includes(e)){if(y.some((function(t){return e.startsWith(t)})))return"continue";m.INVALIDPLAYLIST("Redundant item (".concat(e,")"))}c(g(a.prototype),"push",t).call(t,e)},r=0,o=i;r<o.length;r++)n()}}],n&&d(s.prototype,n),Object.defineProperty(s,"prototype",{writable:!1}),a}(l(Array));function S(t,e){var i=1e3;e&&(i=Math.pow(10,e));var s=Math.round(t*i)/i;return e?s.toFixed(e):s}function E(t){var e=['DATA-ID="'.concat(t.id,'"')];return t.language&&e.push('LANGUAGE="'.concat(t.language,'"')),t.value?e.push('VALUE="'.concat(t.value,'"')):t.uri&&e.push('URI="'.concat(t.uri,'"')),"#EXT-X-SESSION-DATA:".concat(e.join(","))}function b(t,e){var i=e?"#EXT-X-SESSION-KEY":"#EXT-X-KEY",s=["METHOD=".concat(t.method)];return t.uri&&s.push('URI="'.concat(t.uri,'"')),t.iv&&(16!==t.iv.length&&m.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),s.push("IV=".concat(m.byteSequenceToHex(t.iv)))),t.format&&s.push('KEYFORMAT="'.concat(t.format,'"')),t.formatVersion&&s.push('KEYFORMATVERSIONS="'.concat(t.formatVersion,'"')),"".concat(i,":").concat(s.join(","))}function A(t,e){var i=e.isIFrameOnly?"#EXT-X-I-FRAME-STREAM-INF":"#EXT-X-STREAM-INF",s=["BANDWIDTH=".concat(e.bandwidth)];if(e.averageBandwidth&&s.push("AVERAGE-BANDWIDTH=".concat(e.averageBandwidth)),e.isIFrameOnly&&s.push('URI="'.concat(e.uri,'"')),e.codecs&&s.push('CODECS="'.concat(e.codecs,'"')),e.resolution&&s.push("RESOLUTION=".concat(e.resolution.width,"x").concat(e.resolution.height)),e.frameRate&&s.push("FRAME-RATE=".concat(S(e.frameRate,3))),e.hdcpLevel&&s.push("HDCP-LEVEL=".concat(e.hdcpLevel)),e.audio.length>0){s.push('AUDIO="'.concat(e.audio[0].groupId,'"'));var n,a=r(e.audio);try{for(a.s();!(n=a.n()).done;){var o=n.value;t.push(w(o))}}catch(t){a.e(t)}finally{a.f()}}if(e.video.length>0){s.push('VIDEO="'.concat(e.video[0].groupId,'"'));var d,c=r(e.video);try{for(c.s();!(d=c.n()).done;){var u=d.value;t.push(w(u))}}catch(t){c.e(t)}finally{c.f()}}if(e.subtitles.length>0){s.push('SUBTITLES="'.concat(e.subtitles[0].groupId,'"'));var l,h=r(e.subtitles);try{for(h.s();!(l=h.n()).done;){var p=l.value;t.push(w(p))}}catch(t){h.e(t)}finally{h.f()}}if(m.getOptions().allowClosedCaptionsNone&&0===e.closedCaptions.length)s.push("CLOSED-CAPTIONS=NONE");else if(e.closedCaptions.length>0){s.push('CLOSED-CAPTIONS="'.concat(e.closedCaptions[0].groupId,'"'));var f,g=r(e.closedCaptions);try{for(g.s();!(f=g.n()).done;){var v=f.value;t.push(w(v))}}catch(t){g.e(t)}finally{g.f()}}if(e.score&&s.push("SCORE=".concat(e.score)),e.allowedCpc){var y,T=[],E=r(e.allowedCpc);try{for(E.s();!(y=E.n()).done;){var b=y.value,A=b.format,_=b.cpcList;T.push("".concat(A,":").concat(_.join("/")))}}catch(t){E.e(t)}finally{E.f()}s.push('ALLOWED-CPC="'.concat(T.join(","),'"'))}e.videoRange&&s.push("VIDEO-RANGE=".concat(e.videoRange)),e.stableVariantId&&s.push('STABLE-VARIANT-ID="'.concat(e.stableVariantId,'"')),t.push("".concat(i,":").concat(s.join(","))),e.isIFrameOnly||t.push("".concat(e.uri))}function w(t){var e=["TYPE=".concat(t.type),'GROUP-ID="'.concat(t.groupId,'"'),'NAME="'.concat(t.name,'"')];return void 0!==t.isDefault&&e.push("DEFAULT=".concat(t.isDefault?"YES":"NO")),void 0!==t.autoselect&&e.push("AUTOSELECT=".concat(t.autoselect?"YES":"NO")),void 0!==t.forced&&e.push("FORCED=".concat(t.forced?"YES":"NO")),t.language&&e.push('LANGUAGE="'.concat(t.language,'"')),t.assocLanguage&&e.push('ASSOC-LANGUAGE="'.concat(t.assocLanguage,'"')),t.instreamId&&e.push('INSTREAM-ID="'.concat(t.instreamId,'"')),t.characteristics&&e.push('CHARACTERISTICS="'.concat(t.characteristics,'"')),t.channels&&e.push('CHANNELS="'.concat(t.channels,'"')),t.uri&&e.push('URI="'.concat(t.uri,'"')),"#EXT-X-MEDIA:".concat(e.join(","))}function _(t,e,i,s){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=!1,a="";if(e.discontinuity&&t.push("#EXT-X-DISCONTINUITY"),e.key){var o=b(e.key);o!==i&&(t.push(o),i=o)}if(e.map){var d=function(t){var e=['URI="'.concat(t.uri,'"')];return t.byterange&&e.push('BYTERANGE="'.concat(I(t.byterange),'"')),"#EXT-X-MAP:".concat(e.join(","))}(e.map);d!==s&&(t.push(d),s=d)}if(e.programDateTime&&t.push("#EXT-X-PROGRAM-DATE-TIME:".concat(m.formatDate(e.programDateTime))),e.dateRange&&t.push(function(t){var e=['ID="'.concat(t.id,'"')];t.start&&e.push('START-DATE="'.concat(m.formatDate(t.start),'"')),t.end&&e.push('END-DATE="'.concat(t.end,'"')),t.duration&&e.push("DURATION=".concat(t.duration)),t.plannedDuration&&e.push("PLANNED-DURATION=".concat(t.plannedDuration)),t.classId&&e.push('CLASS="'.concat(t.classId,'"')),t.endOnNext&&e.push("END-ON-NEXT=YES");for(var i=0,s=Object.keys(t.attributes);i<s.length;i++){var n=s[i];n.startsWith("X-")?"number"==typeof t.attributes[n]?e.push("".concat(n,"=").concat(t.attributes[n])):e.push("".concat(n,'="').concat(t.attributes[n],'"')):n.startsWith("SCTE35-")&&e.push("".concat(n,"=").concat(m.byteSequenceToHex(t.attributes[n])))}return"#EXT-X-DATERANGE:".concat(e.join(","))}(e.dateRange)),e.markers.length>0&&(a=N(t,e.markers)),e.parts.length>0&&(r=D(t,e.parts)),r)return[i,s];var c=n<3?Math.round(e.duration):S(e.duration,function(t){var e=t.toString(10),i=e.indexOf(".");return-1===i?0:e.length-i-1}(e.duration));return t.push("#EXTINF:".concat(c,",").concat(unescape(encodeURIComponent(e.title||"")))),e.byterange&&t.push("#EXT-X-BYTERANGE:".concat(I(e.byterange))),Array.prototype.push.call(t,"".concat(e.uri)),[i,s,a]}function I(t){var e=t.offset,i=t.length;return"".concat(i,"@").concat(e)}function N(t,e){var i,s="",n=r(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;if("OUT"===a.type)s="OUT",t.push("#EXT-X-CUE-OUT:DURATION=".concat(a.duration));else if("IN"===a.type)s="IN",t.push("#EXT-X-CUE-IN");else if("RAW"===a.type){var o=a.value?":".concat(a.value):"";t.push("#".concat(a.tagName).concat(o))}}}catch(t){n.e(t)}finally{n.f()}return s}function D(t,e){var i,s=!1,n=r(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.hint){var o=[];if(o.push("TYPE=PART",'URI="'.concat(a.uri,'"')),a.byterange){var d=a.byterange,c=d.offset,u=d.length;o.push("BYTERANGE-START=".concat(c)),u&&o.push("BYTERANGE-LENGTH=".concat(u))}t.push("#EXT-X-PRELOAD-HINT:".concat(o.join(","))),s=!0}else{var l=[];l.push("DURATION=".concat(a.duration),'URI="'.concat(a.uri,'"')),a.byterange&&l.push("BYTERANGE=".concat(I(a.byterange))),a.independent&&l.push("INDEPENDENT=YES"),a.gap&&l.push("GAP=YES"),t.push("#EXT-X-PART:".concat(l.join(",")))}}}catch(t){n.e(t)}finally{n.f()}return s}t.exports=function(t){m.PARAMCHECK(t),m.ASSERT("Not a playlist","playlist"===t.type);var e=new T(t.uri);return e.push("#EXTM3U"),t.version&&e.push("#EXT-X-VERSION:".concat(t.version)),t.independentSegments&&e.push("#EXT-X-INDEPENDENT-SEGMENTS"),t.start&&e.push("#EXT-X-START:TIME-OFFSET=".concat(S(t.start.offset)).concat(t.start.precise?",PRECISE=YES":"")),t.isMasterPlaylist?function(t,e){var i,s=r(e.sessionDataList);try{for(s.s();!(i=s.n()).done;){var n=i.value;t.push(E(n))}}catch(t){s.e(t)}finally{s.f()}var a,o=r(e.sessionKeyList);try{for(o.s();!(a=o.n()).done;){var d=a.value;t.push(b(d,!0))}}catch(t){o.e(t)}finally{o.f()}var c,u=r(e.variants);try{for(u.s();!(c=u.n()).done;)A(t,c.value)}catch(t){u.e(t)}finally{u.f()}}(e,t):function(t,e){var i="",s="",a=!1;if(e.targetDuration&&t.push("#EXT-X-TARGETDURATION:".concat(e.targetDuration)),e.lowLatencyCompatibility){var o=e.lowLatencyCompatibility,d=o.canBlockReload,c=o.canSkipUntil,u=o.holdBack,l=o.partHoldBack,h=[];h.push("CAN-BLOCK-RELOAD=".concat(d?"YES":"NO")),void 0!==c&&h.push("CAN-SKIP-UNTIL=".concat(c)),void 0!==u&&h.push("HOLD-BACK=".concat(u)),void 0!==l&&h.push("PART-HOLD-BACK=".concat(l)),t.push("#EXT-X-SERVER-CONTROL:".concat(h.join(",")))}e.partTargetDuration&&t.push("#EXT-X-PART-INF:PART-TARGET=".concat(e.partTargetDuration)),e.mediaSequenceBase&&t.push("#EXT-X-MEDIA-SEQUENCE:".concat(e.mediaSequenceBase)),e.discontinuitySequenceBase&&t.push("#EXT-X-DISCONTINUITY-SEQUENCE:".concat(e.discontinuitySequenceBase)),e.playlistType&&t.push("#EXT-X-PLAYLIST-TYPE:".concat(e.playlistType)),e.isIFrame&&t.push("#EXT-X-I-FRAMES-ONLY"),e.skip>0&&t.push("#EXT-X-SKIP:SKIPPED-SEGMENTS=".concat(e.skip));var p,f=r(e.segments);try{for(f.s();!(p=f.n()).done;){var g,v=n(_(t,p.value,i,s,e.version),3);i=v[0],s=v[1],"OUT"===(g=v[2])?a=!0:"IN"===g&&a&&(a=!1)}}catch(t){f.e(t)}finally{f.f()}"VOD"===e.playlistType&&a&&t.push("#EXT-X-CUE-IN"),e.prefetchSegments.length>2&&m.INVALIDPLAYLIST("The server must deliver no more than two prefetch segments");var y,T=r(e.prefetchSegments);try{for(T.s();!(y=T.n()).done;){var S=y.value;S.discontinuity&&t.push("#EXT-X-PREFETCH-DISCONTINUITY"),t.push("#EXT-X-PREFETCH:".concat(S.uri))}}catch(t){T.e(t)}finally{T.f()}e.endlist&&t.push("#EXT-X-ENDLIST");var E,b=r(e.renditionReports);try{for(b.s();!(E=b.n()).done;){var A=E.value,w=[];w.push('URI="'.concat(A.uri,'"'),"LAST-MSN=".concat(A.lastMSN)),void 0!==A.lastPart&&w.push("LAST-PART=".concat(A.lastPart)),t.push("#EXT-X-RENDITION-REPORT:".concat(w.join(",")))}}catch(t){b.e(t)}finally{b.f()}}(e,t),e.join("\n")}},890:(t,e,i)=>{function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d(t);if(e){var n=d(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return o(this,i)}}function o(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=function(t){if("object"!==s(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(r)?r:String(r)),n)}var r}function u(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=i(771),p=u((function t(e){var i=e.type,s=e.uri,n=e.groupId,r=e.language,a=e.assocLanguage,o=e.name,d=e.isDefault,c=e.autoselect,u=e.forced,p=e.instreamId,f=e.characteristics,g=e.channels;l(this,t),h.PARAMCHECK(i,n,o),h.CONDITIONALASSERT(["SUBTITLES"===i,s],["CLOSED-CAPTIONS"===i,p],["CLOSED-CAPTIONS"===i,!s],[u,"SUBTITLES"===i]),this.type=i,this.uri=s,this.groupId=n,this.language=r,this.assocLanguage=a,this.name=o,this.isDefault=d,this.autoselect=c,this.forced=u,this.instreamId=p,this.characteristics=f,this.channels=g})),f=u((function t(e){var i=e.uri,s=e.isIFrameOnly,n=void 0!==s&&s,r=e.bandwidth,a=e.averageBandwidth,o=e.score,d=e.codecs,c=e.resolution,u=e.frameRate,p=e.hdcpLevel,f=e.allowedCpc,g=e.videoRange,m=e.stableVariantId,v=e.audio,y=void 0===v?[]:v,T=e.video,S=void 0===T?[]:T,E=e.subtitles,b=void 0===E?[]:E,A=e.closedCaptions,w=void 0===A?[]:A,_=e.currentRenditions,I=void 0===_?{audio:0,video:0,subtitles:0,closedCaptions:0}:_;l(this,t),h.PARAMCHECK(i,r),this.uri=i,this.isIFrameOnly=n,this.bandwidth=r,this.averageBandwidth=a,this.score=o,this.codecs=d,this.resolution=c,this.frameRate=u,this.hdcpLevel=p,this.allowedCpc=f,this.videoRange=g,this.stableVariantId=m,this.audio=y,this.video=S,this.subtitles=b,this.closedCaptions=w,this.currentRenditions=I})),g=u((function t(e){var i=e.id,s=e.value,n=e.uri,r=e.language;l(this,t),h.PARAMCHECK(i,s||n),h.ASSERT("SessionData cannot have both value and uri, shoud be either.",!(s&&n)),this.id=i,this.value=s,this.uri=n,this.language=r})),m=u((function t(e){var i=e.method,s=e.uri,n=e.iv,r=e.format,a=e.formatVersion;l(this,t),h.PARAMCHECK(i),h.CONDITIONALPARAMCHECK(["NONE"!==i,s]),h.CONDITIONALASSERT(["NONE"===i,!(s||n||r||a)]),this.method=i,this.uri=s,this.iv=n,this.format=r,this.formatVersion=a})),v=u((function t(e){var i=e.hint,s=void 0!==i&&i,n=e.uri,r=e.mimeType,a=e.byterange;l(this,t),h.PARAMCHECK(n),this.hint=s,this.uri=n,this.mimeType=r,this.byterange=a})),y=u((function t(e){var i=e.id,s=e.classId,n=e.start,r=e.end,a=e.duration,o=e.plannedDuration,d=e.endOnNext,c=e.attributes,u=void 0===c?{}:c;l(this,t),h.PARAMCHECK(i),h.CONDITIONALPARAMCHECK([!0===d,s]),h.CONDITIONALASSERT([r,n],[r,n<=r],[a,a>=0],[o,o>=0]),this.id=i,this.classId=s,this.start=n,this.end=r,this.duration=a,this.plannedDuration=o,this.endOnNext=d,this.attributes=u})),T=u((function t(e){var i=e.type,s=e.duration,n=e.tagName,r=e.value;l(this,t),h.PARAMCHECK(i),h.CONDITIONALPARAMCHECK(["OUT"===i,s]),h.CONDITIONALPARAMCHECK(["RAW"===i,n]),this.type=i,this.duration=s,this.tagName=n,this.value=r})),S=u((function t(e){l(this,t),h.PARAMCHECK(e),this.type=e})),E=function(t){n(i,t);var e=a(i);function i(t){var s,n=t.isMasterPlaylist,r=t.uri,a=t.version,o=t.independentSegments,d=void 0!==o&&o,c=t.start,u=t.source;return l(this,i),s=e.call(this,"playlist"),h.PARAMCHECK(n),s.isMasterPlaylist=n,s.uri=r,s.version=a,s.independentSegments=d,s.start=c,s.source=u,s}return u(i)}(S),b=function(t){n(i,t);var e=a(i);function i(){var t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,i),s.isMasterPlaylist=!0,t=e.call(this,s);var n=s.variants,r=void 0===n?[]:n,a=s.currentVariant,o=s.sessionDataList,d=void 0===o?[]:o,c=s.sessionKeyList,u=void 0===c?[]:c;return t.variants=r,t.currentVariant=a,t.sessionDataList=d,t.sessionKeyList=u,t}return u(i)}(E),A=function(t){n(i,t);var e=a(i);function i(){var t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,i),s.isMasterPlaylist=!1,t=e.call(this,s);var n=s.targetDuration,r=s.mediaSequenceBase,a=void 0===r?0:r,o=s.discontinuitySequenceBase,d=void 0===o?0:o,c=s.endlist,u=void 0!==c&&c,h=s.playlistType,p=s.isIFrame,f=s.segments,g=void 0===f?[]:f,m=s.prefetchSegments,v=void 0===m?[]:m,y=s.lowLatencyCompatibility,T=s.partTargetDuration,S=s.renditionReports,E=void 0===S?[]:S,b=s.skip,A=void 0===b?0:b,w=s.hash;return t.targetDuration=n,t.mediaSequenceBase=a,t.discontinuitySequenceBase=d,t.endlist=u,t.playlistType=h,t.isIFrame=p,t.segments=g,t.prefetchSegments=v,t.lowLatencyCompatibility=y,t.partTargetDuration=T,t.renditionReports=E,t.skip=A,t.hash=w,t}return u(i)}(E),w=function(t){n(i,t);var e=a(i);function i(t){var s,n=t.uri,r=t.mimeType,a=t.data,o=t.duration,d=t.title,c=t.byterange,u=t.discontinuity,h=t.mediaSequenceNumber,p=void 0===h?0:h,f=t.discontinuitySequence,g=void 0===f?0:f,m=t.key,v=t.map,y=t.programDateTime,T=t.dateRange,S=t.markers,E=void 0===S?[]:S,b=t.parts,A=void 0===b?[]:b;return l(this,i),(s=e.call(this,"segment")).uri=n,s.mimeType=r,s.data=a,s.duration=o,s.title=d,s.byterange=c,s.discontinuity=u,s.mediaSequenceNumber=p,s.discontinuitySequence=g,s.key=m,s.map=v,s.programDateTime=y,s.dateRange=T,s.markers=E,s.parts=A,s}return u(i)}(S),_=function(t){n(i,t);var e=a(i);function i(t){var s,n=t.hint,r=void 0!==n&&n,a=t.uri,o=t.duration,d=t.independent,c=t.byterange,u=t.gap;return l(this,i),s=e.call(this,"part"),h.PARAMCHECK(a),s.hint=r,s.uri=a,s.duration=o,s.independent=d,s.duration=o,s.byterange=c,s.gap=u,s}return u(i)}(S),I=function(t){n(i,t);var e=a(i);function i(t){var s,n=t.uri,r=t.discontinuity,a=t.mediaSequenceNumber,o=void 0===a?0:a,d=t.discontinuitySequence,c=void 0===d?0:d,u=t.key;return l(this,i),s=e.call(this,"prefetch"),h.PARAMCHECK(n),s.uri=n,s.discontinuity=r,s.mediaSequenceNumber=o,s.discontinuitySequence=c,s.key=u,s}return u(i)}(S),N=u((function t(e){var i=e.uri,s=e.lastMSN,n=e.lastPart;l(this,t),h.PARAMCHECK(i),this.uri=i,this.lastMSN=s,this.lastPart=n}));t.exports={Rendition:p,Variant:f,SessionData:g,Key:m,MediaInitializationSection:v,DateRange:y,SpliceInfo:T,Playlist:E,MasterPlaylist:b,MediaPlaylist:A,Segment:w,PartialSegment:_,PrefetchSegment:I,RenditionReport:N}},771:t=>{function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var s,n,r,a,o=[],d=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=r.call(i)).done)&&(o.push(s.value),o.length!==e);d=!0);}catch(t){c=!0,n=t}finally{try{if(!d&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw n}}return o}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=s(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,d=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){d=!0,a=t},f:function(){try{o||null==i.return||i.return()}finally{if(d)throw a}}}}function s(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var a={};function o(t){if(a.strictMode)throw t;a.silent||console.error(t.message)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if("number"==typeof t)return t;var i=10===e?Number.parseFloat(t,e):Number.parseInt(t,e);return Number.isNaN(i)?0:i}t.exports={THROW:o,ASSERT:function(t){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a,d=i(n.entries());try{for(d.s();!(a=d.n()).done;){var c=e(a.value,2),u=c[0];c[1]||o(new Error("".concat(t," : Failed at [").concat(u,"]")))}}catch(t){d.e(t)}finally{d.f()}},CONDITIONALASSERT:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];var r,a=i(s.entries());try{for(a.s();!(r=a.n()).done;){var d=e(r.value,2),c=d[0],u=e(d[1],2),l=u[0],h=u[1];l&&(h||o(new Error("Conditional Assert : Failed at [".concat(c,"]"))))}}catch(t){a.e(t)}finally{a.f()}},PARAMCHECK:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];var r,a=i(s.entries());try{for(a.s();!(r=a.n()).done;){var d=e(r.value,2),c=d[0];void 0===d[1]&&o(new Error("Param Check : Failed at [".concat(c,"]")))}}catch(t){a.e(t)}finally{a.f()}},CONDITIONALPARAMCHECK:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];var r,a=i(s.entries());try{for(a.s();!(r=a.n()).done;){var d=e(r.value,2),c=d[0],u=e(d[1],2),l=u[0],h=u[1];l&&void 0===h&&o(new Error("Conditional Param Check : Failed at [".concat(c,"]")))}}catch(t){a.e(t)}finally{a.f()}},INVALIDPLAYLIST:function(t){o(new Error("Invalid Playlist : ".concat(t)))},toNumber:d,hexToByteSequence:function(t){(t.startsWith("0x")||t.startsWith("0X"))&&(t=t.slice(2));for(var e=[],i=0;i<t.length;i+=2)e.push(d(t.slice(i,i+2),16));return n.from(e)},byteSequenceToHex:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;i<=e&&o(new Error("end must be larger than start : start=".concat(e,", end=").concat(i)));for(var s=[],n=e;n<i;n++)s.push("0".concat((255&t[n]).toString(16).toUpperCase()).slice(-2));return"0x".concat(s.join(""))},tryCatch:function(t,e){try{return t()}catch(t){return e(t)}},splitAt:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=-1,n=0,r=0;n<t.length;n++)if(t[n]===e){if(r++===i)return[t.slice(0,n),t.slice(n+1)];s=n}return-1!==s?[t.slice(0,s),t.slice(s+1)]:[t]},trim:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return t?(t=t.trim()," "===e||(t.startsWith(e)&&(t=t.slice(1)),t.endsWith(e)&&(t=t.slice(0,-1))),t):t},splitByCommaWithPreservingQuotes:function(t){for(var e=[],i=!0,s=0,n=[],r=0;r<t.length;r++){var a=t[r];i&&","===a?(e.push(t.slice(s,r).trim()),s=r+1):'"'!==a&&"'"!==a||(i?(n.push(a),i=!1):a===n[n.length-1]?(n.pop(),i=!0):n.push(a))}return e.push(t.slice(s).trim()),e},camelify:function(t){var e,s=[],n=!1,r=i(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;"-"!==a&&"_"!==a?n?(s.push(a.toUpperCase()),n=!1):s.push(a.toLowerCase()):n=!0}}catch(t){r.e(t)}finally{r.f()}return s.join("")},formatDate:function(t){var e=t.getUTCFullYear(),i=("0"+(t.getUTCMonth()+1)).slice(-2),s=("0"+t.getUTCDate()).slice(-2),n=("0"+t.getUTCHours()).slice(-2),r=("0"+t.getUTCMinutes()).slice(-2),a=("0"+t.getUTCSeconds()).slice(-2),o=("00"+t.getUTCMilliseconds()).slice(-3);return"".concat(e,"-").concat(i,"-").concat(s,"T").concat(n,":").concat(r,":").concat(a,".").concat(o,"Z")},hasOwnProp:function(t,e){return Object.hasOwnProperty.call(t,e)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a=Object.assign(a,t)},getOptions:function(){return Object.assign({},a)}}}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}(851);var t,e},t.exports=s()},9318:(t,e)=>{e.read=function(t,e,i,s,n){var r,a,o=8*n-s-1,d=(1<<o)-1,c=d>>1,u=-7,l=i?n-1:0,h=i?-1:1,p=t[e+l];for(l+=h,r=p&(1<<-u)-1,p>>=-u,u+=o;u>0;r=256*r+t[e+l],l+=h,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=s;u>0;a=256*a+t[e+l],l+=h,u-=8);if(0===r)r=1-c;else{if(r===d)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,s),r-=c}return(p?-1:1)*a*Math.pow(2,r-s)},e.write=function(t,e,i,s,n,r){var a,o,d,c=8*r-n-1,u=(1<<c)-1,l=u>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:r-1,f=s?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),(e+=a+l>=1?h/d:h*Math.pow(2,1-l))*d>=2&&(a++,d/=2),a+l>=u?(o=0,a=u):a+l>=1?(o=(e*d-1)*Math.pow(2,n),a+=l):(o=e*Math.pow(2,l-1)*Math.pow(2,n),a=0));n>=8;t[i+p]=255&o,p+=f,o/=256,n-=8);for(a=a<<n|o,c+=n;c>0;t[i+p]=255&a,p+=f,a/=256,c-=8);t[i+p-f]|=128*g}},9907:t=>{var e,i,s=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(i){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:n}catch(t){e=n}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var o,d=[],c=!1,u=-1;function l(){c&&o&&(c=!1,o.length?d=o.concat(d):u=-1,d.length&&h())}function h(){if(!c){var t=a(l);c=!0;for(var e=d.length;e;){for(o=d,d=[];++u<e;)o&&o[u].run();u=-1,e=d.length}o=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.push(new p(t,e)),1!==d.length||c||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},7829:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>n});var s=i(9982);class n{constructor(t,e,i,n,r,a,o){this.method=s.Method.GET,this.videoKey=i,this.service=t,this.method=n,this.params=e||{},this.body=r,this.onSuccessCallback=a,this.onFailCallback=o}getService(){return this.service}getMethod(){var t;return null!==(t=this.method)&&void 0!==t?t:s.Method.GET}setMethod(t){this.method=t}getParams(){return this.params}getOnSuccess(){return this.onSuccessCallback}getOnFail(){return this.onFailCallback}getVideoKey(){return this.videoKey}getParam(t){return this.params[t]}setParam(t,e){return this.params[t]=e,this}setParams(t){this.params=t}getBody(){return this.body}setBody(t){this.body=t}isPost(){return this.method===s.Method.POST}}},5657:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>d});var s=i(9794),n=i(99),r=i(7829),a=i(9982),o=i(6443);class d{constructor(t){this.readyToSend=!1,this.servicesToWait=[s.A.Service.INIT,s.A.Service.START],this.onWillSendVideoRequestListeners=[],this.pluginRef=t,this._requests=[],this._waitingForToken=[],this._waitingForMetadata=[]}shouldSendStats(){return this.readyToSend}sendRequest(t){if(""===n.default.getInstance().getFastDataSessionToken())return void this._waitingForToken.push(t);this._waitingForToken.forEach((t=>this.prepareParams(t))),this._requests.push(...this._waitingForToken),this._waitingForToken=[];let e=t.getVideoKey(),i=t.getParams(),s=t.getService();for(const t of this.onWillSendVideoRequestListeners)t(s,e,i);this.prepareParams(t),this._requests.push(t),this._processRequests()}prepareParams(t){const e=t.getService();e!=s.A.Service.START&&e!=s.A.Service.PING||(t.setParam("pingTime",t.getParam("pingTime")||n.default.getInstance().getFastDataService().getPingTime()),n.default.getInstance().getCommonVariable("appAnalytics","isEnabled")&&t.setParam("sessionParent",t.getParam("sessionParent")||n.default.getInstance().getFastDataSessionToken()));const i=t.getVideoKey();this.pluginRef.videos.existsVideo(i)&&t.setParam("code",t.getParam("code")||this.pluginRef.videos.getVideo(i).getViewCode()),e!==s.A.Service.INIT&&e!==s.A.Service.START&&e!==s.A.Service.ERROR||n.default.getInstance().getCommonVariable("appAnalytics","isEnabled")&&(t.setParam("parentId",t.getParam("sessionRoot")),t.setParam("navContext",t.getParam("navContext")||n.default.getInstance().getCommonVariable("appAnalytics","context")))}buildRequest(t,e,i,s,n,o){i=null!=i?i:a.Method.GET;const d=new r.default(t,e,"",i,s,n,o);return d.setMethod(i),d}_processRequests(){const t=this._requests;this._requests=[],t.forEach((t=>{if(-1!==this.servicesToWait.indexOf(t.getService())&&(this.readyToSend=!0),this.readyToSend){for(;this._waitingForMetadata.length;){const t=this._waitingForMetadata.shift();n.default.getInstance().pushData(n.default.getInstance().getOptions().offline?o.default.Consumer.PERSISTENT:o.default.Consumer.NQS,t.getService(),t.getMethod(),t.getParams(),t.getOnSuccess(),t.getOnFail())}n.default.getInstance().pushData(n.default.getInstance().getOptions().offline?o.default.Consumer.PERSISTENT:o.default.Consumer.NQS,t.getService(),t.getMethod(),t.getParams(),t.getOnSuccess(),t.getOnFail())}else this._waitingForMetadata.push(t)}))}}},9982:(t,e,i)=>{"use strict";var s;i.r(e),i.d(e,{AnalyticsTag:()=>n,AppAnalyticsTag:()=>r,BalancerTag:()=>a,CoreTag:()=>o,Method:()=>s}),function(t){t.GET="GET",t.POST="POST"}(s||(s={}));const n="Analytics",r="AppAnalytics",a="Balancer",o="Core"},3582:(t,e,i)=>{"use strict";var s;i.r(e),i.d(e,{LogLevel:()=>s,default:()=>n}),function(t){t[t.SILENT=6]="SILENT",t[t.ERROR=5]="ERROR",t[t.WARNING=4]="WARNING",t[t.NOTICE=3]="NOTICE",t[t.DEBUG=2]="DEBUG",t[t.VERBOSE=1]="VERBOSE"}(s||(s={}));class n{static report(t,e,i,r){if("undefined"!=typeof console&&console.log){r=r||"darkcyan";const o={5:"e",4:"w",3:"n",2:"d",1:"v"}[i=i||s.NOTICE];let d=`[NPAW - ${t}]`+this._getCurrentTime()+" "+o+":";if(n.logLevel<=i)if(n.plainLogs||"undefined"!=typeof document&&document.documentMode)this._plainReport(e,d);else{let t;t=i===s.ERROR&&console.error?console.error:i===s.WARNING&&console.warn?console.warn:i===s.DEBUG&&console.debug?console.debug:console.log,d="%c"+d,a=e,"[object Array]"===Object.prototype.toString.call(a)?(e.splice(0,0,d,"color: "+r),t.apply(console,e)):t.call(console,d,"color: "+r,e)}}var a}static _getCurrentTime(){const t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"}static _plainReport(t,e){if(t instanceof Array)for(const i in t)this._plainReport(t[i],e);else"string"==typeof t?console.log(e+" "+t):(console.log(e+" <next line>"),console.log(t))}static setLogLevel(t){this.logLevel=t}static getLogLevel(){return this.logLevel}static error(t,...e){this.report(t,[].slice.call(arguments,1),s.ERROR,"darkred")}static warn(t,...e){this.report(t,[].slice.call(arguments,1),s.WARNING,"darkorange")}static notice(t,...e){this.report(t,[].slice.call(arguments,1),s.NOTICE,"darkgreen")}static debug(t,...e){this.report(t,[].slice.call(arguments,1),s.DEBUG,"indigo")}static verbose(t,...e){this.report(t,[].slice.call(arguments,1),s.VERBOSE,"navy")}static loadLevelFromUrl(){"undefined"!=typeof window&&window.location&&this._parseLevelFromUrl(window.location.search)}static _parseLevelFromUrl(t){if(t){const e=/\?.*&*npaw-debug=(.+)/i.exec(t);null!==e&&(this.logLevel=Number(e[1])),null!==/\?.*&*npaw-debug=plain/i.exec(t)&&(this.plainLogs=!0)}}}n.logLevel=s.ERROR,n.plainLogs=!1},99:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>T});var s=i(9794),n=i(9743),r=i(9982),a=i(3582),o=i(9907);class d{constructor(t,e,i,s,n){var r,a,d;this.response={},this._session="",this.sessionExpire=120,this.retries=0,this.isUsingLegacy=!1,this.options=t,this.npawPluginOptions=n,this.accountCode=e,this.coreStorage=i,this.browserStorage=s,this._fastDataHost=this.options.getFastDataHost();const c=null!==(r="true"===o.env.IS_STANDALONE)&&void 0!==r&&r;this.isUsingLegacy=c&&null!==(d=void 0!==(null===(a=null==n?void 0:n.legacyPlugin)||void 0===a?void 0:a.viewTransform))&&void 0!==d&&d,this._createConfigurationInterval()}init(){var t,e;if(this.options&&this.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,void(this._session=n.default.generateRandomString(15));if(this.isUsingLegacy)return;if(this.browserStorage&&this.browserStorage.isEnabled()&&(new Date).getTime()<1e3*(null!==(t=Number(this.browserStorage.getLocal("sessionExpire")))&&void 0!==t?t:this.sessionExpire)+(Number(this.coreStorage.getDataTime())||0)&&this.coreStorage.getStoredData())return void this.setData(null!==(e=this.coreStorage.getStoredData())&&void 0!==e?e:"");const i=s.A.Service.DATA,o={system:this.accountCode,pluginVersion:T.getPluginVersion(),requestNumber:this.getRequestNumber()};this.loadConfiguration();try{a.default.notice(r.CoreTag,i+" "+o.system),"nicetest"===o.system&&a.default.error(r.CoreTag,"No accountCode has been set. Please set your accountCode inside plugin's options."),this.performRequestToFastData(i,o,this._receiveData.bind(this),this._failedData.bind(this))}catch(t){a.default.error(r.CoreTag,"Error doing get data request to FastData service.")}}updateOptions(t){this.options.updateOptions(t),this.options.offline&&(this.reset(),this.init())}getSessionExpireTime(){return this.sessionExpire}refreshSessionToken(){this._session="",this.browserStorage.removeStorages("data"),this.init()}loadConfiguration(){const t=s.A.Service.CONFIGURATION,e={system:this.accountCode,pluginVersion:T.getPluginVersion(),requestNumber:this.getRequestNumber()};this.performRequestToFastData(t,e,this._receiveConfiguration.bind(this),this._failedConfiguration.bind(this))}getSession(){var t,e;return this.isUsingLegacy?null===(e=null===(t=this.npawPluginOptions)||void 0===t?void 0:t.legacyPlugin)||void 0===e?void 0:e.viewTransform._session:this._session}setSession(t){this._session=t}setHost(t){this.response.host=t}getPingTime(){var t;return null!==(t=this.pingTime)&&void 0!==t?t:5}getBeatTime(){var t;return null!==(t=this.beatTime)&&void 0!==t?t:30}setData(t){try{let e=JSON.parse(t);this.options["parse.fdsResponseHost"]&&(t=t.replace(e.q.h,this.options["parse.fdsResponseHost"](e.q.h)),e=JSON.parse(t)),this.response={msg:t,host:e.q.h,code:e.q.c,pingTime:e.q.pt||5,beatTime:e.q.i&&e.q.i.bt||30,sessionExpire:e.q.st&&e.q.st||120},this._session=this.response.code,this.browserStorage.setLocal("sessionExpire",this.response.sessionExpire),this.browserStorage.setStorages("accCode",this.accountCode),this.browserStorage.setStorages("session",this.response.code),this.coreStorage.setStoredData(this.response.msg),this.coreStorage.setDataTime((new Date).getTime().toString()),this.pingTime=this.response.pingTime,this.beatTime=this.response.beatTime,this.sessionExpire=this.response.sessionExpire}catch(t){a.default.error(r.CoreTag,"Fastdata response is invalid.")}}setConfiguration(t){try{this.response.configurationOptions=JSON.parse(t)}catch(t){a.default.error(r.CoreTag,"Configuration response is invalid.")}}getFastDataResponse(){return this.response}getAccountCode(){return this.accountCode}getRequestNumber(){return Math.random()}reset(){this.coreStorage.removeStoredData(),this.coreStorage.removeSession(),this.browserStorage.removeLocal("sessionExpire"),this.browserStorage.removeStorages("accCode"),this.browserStorage.removeStorages("session")}performRequestToFastData(t,e,i,s){if(this.options.offline)return;e.timemark=(new Date).getTime(),e.outputFormat="json";const r=this,a=new XMLHttpRequest;a.open("GET",`https://${this._fastDataHost}${t}${n.default.toQueryString(e)}`),a.onload=function(t){r.options.offline||(a.status>=200&&a.status<400?i(this,t):s(this,t))},a.onerror=function(t){s(this,t)},a.send()}_createConfigurationInterval(){this.isUsingLegacy||!this.options.isRefreshLMAConfigurationEnabled()||this._refreshInterval||(this._refreshInterval=setInterval(this.loadConfiguration.bind(this),1e3*this.options.refreshLMAConfigurationSeconds()))}_receiveData(t,e){this.setData(t.response)}_receiveConfiguration(t,e){this.setConfiguration(t.response)}_failedData(t,e){a.default.error(r.CoreTag,"Fastdata request has failed."),++this.retries<5&&setTimeout(this.init.bind(this),5e3)}_failedConfiguration(t,e){a.default.error(r.CoreTag,"Fastdata configuration request has failed."),++this.retries<5&&setTimeout(this.init.bind(this),5e3)}}var c=i(668);class u{constructor(){this.offline=!1,this.host="lma.npaw.com",this.disableCookies=!0,this.forceCookies=!1,this.disableStorage=!1,this.authToken=void 0,this.authType="Bearer",this["app.https"]=!0,this["lma.refresh.configuration.enabled"]=!1,this["lma.refresh.configuration.seconds"]=300,this["parse.fdsResponseHost"]=null}updateOptions(t){const e=new c.A;Object.keys(this).forEach((i=>{null==t[i]||Object.keys(e).includes(i)||(this[i]=t[i])}))}setNpawPluginOptions(t){Object.keys(this).forEach((e=>{null!=t[e]&&(this[e]=t[e])}))}isRefreshLMAConfigurationEnabled(){return this["lma.refresh.configuration.enabled"]}refreshLMAConfigurationSeconds(){return this["lma.refresh.configuration.seconds"]}getHost(){return this.host}getFastDataHost(){return this.host}}class l{constructor(t,e,i,s,n,a,o){this.method=r.Method.GET,this.headers={},this.xhr=new XMLHttpRequest,this.retries=0,this.hadBody=!1,this.isHttps=t,this.host=e,this.service=i,this.method=s,this.params=n,this.onSuccessCallback=a,this.onFailCallback=o}performHttps(){return this.isHttps}getHost(){return this.host}getService(){return this.service}getMethod(){return this.method}getParams(){return this.params}getBody(){return this.body}setBody(t){this.body=t}addHeader(t,e){this.headers[t]=e}getRetries(){return this.retries}send(t,e){if(this.params.timemark=Date.now(),this.params.sessionRoot=T.getInstance().getFastDataSessionToken(),this.params.system=T.getInstance().getFastDataService().getAccountCode(),this.body&&(this.hadBody=!0),this.method===r.Method.POST&&!this.body){const t={};t.timemark=this.params.timemark,this.params.code&&(t.code=this.params.code),t.sessionRoot=this.params.sessionRoot,t.system=this.params.system,t.sessionId=this.params.sessionId&&""!=this.params.sessionId?this.params.sessionId:T.getInstance().getFastDataSessionToken(),this.body=JSON.stringify(this.params),this.params=t}try{this.getUrl()}catch(t){console.log(t)}this.xhr.open(this.method,this.getUrl()),this.xhr.onreadystatechange=()=>{4===this.xhr.readyState&&this.xhr.status>=200&&this.xhr.status<400?(e&&e(),this.onSuccessCallback&&this.onSuccessCallback()):4===this.xhr.readyState&&(this.retries++,!this.hadBody&&this.method===r.Method.POST&&this.body&&(this.params=JSON.parse(this.body),this.body=void 0),t(),this.onFailCallback&&this.onFailCallback())};for(const t in this.headers)this.xhr.setRequestHeader(t,this.headers[t]);this.xhr.send(this.body)}asyncSend(){return t=this,e=void 0,s=function*(){return new Promise(((t,e)=>{this.send(e,t)}))},new((i=void 0)||(i=Promise))((function(n,r){function a(t){try{d(s.next(t))}catch(t){r(t)}}function o(t){try{d(s.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}d((s=s.apply(t,e||[])).next())}));var t,e,i,s}toLocalStorageString(){const t={},e=this.service.split("/");t.request=e[e.length-1],t.unixtime=this.params.timemark;for(const e in this.params)void 0!==this.params[e]&&("sessionId"===e||"sessionRoot"===e?t[e]="":"code"===e?t[e]="CODE_PLACEHOLDER":"object"==typeof this.params[e]?t[e]=JSON.stringify(this.params[e]):t[e]=this.params[e]);return JSON.stringify(t)}getUrl(){return`${this.isHttps?"https":"http"}://${this.host}${this.service}${n.default.toQueryString(this.params)}`}}var h=i(912);const p=[s.A.Service.ERROR,s.A.Service.AD_ERROR];class f{constructor(t,e,i){this.freshRequests=[],this.retryRequests=[],this.databaseSendingInterval=12e4,this.isDestroyed=!1,this.servicesToWait=[s.A.Service.INIT,s.A.Service.START],this.sentStart=!1,this.options=t,this.coreStorage=e,this.fastDataService=i}destroy(){this.freshRequests=[],this.retryRequests=[],this.isDestroyed=!0,this.timeWhenLastSentFromDatabase=(new Date).getTime()}send(t,e,i,s,n){var o;if(this.isDestroyed)return;const d=new l(null===(o=this.options["app.https"])||void 0===o||o,this.coreStorage.getHost(),t,e,null!=i?i:{},s,n);void 0!==this.options.authToken&&void 0!==this.options.authType&&t!==h.xC.CDN&&(a.default.verbose(r.AnalyticsTag,"Adding Authorization header with type "+this.options.authType),d.addHeader("Authorization",this.options.authType+" "+this.options.authToken)),this.freshRequests.push(d),this._processRequests()}getTimeOfLastSentRequest(){return this.timeOfLastSentRequest}wasStartSent(){return this.sentStart}_processRequests(){return t=this,e=void 0,s=function*(){if(this.isDestroyed)return;const t=this.retryRequests.splice(0,this.retryRequests.length),e=this.freshRequests.splice(0,this.freshRequests.length);t.length>0&&a.default.verbose(r.CoreTag,"Retrying to send these requests:",...t.map((t=>t.getService())));const i=[];let s=!1;for(const e of t)if(s)i.push(e);else try{yield e.asyncSend(),this.timeOfLastSentRequest=(new Date).getTime()}catch(t){s=!0,i.push(e)}for(const t of e)try{yield t.asyncSend(),this.servicesToWait.includes(t.getService())&&(this.sentStart=!0),this.timeOfLastSentRequest=(new Date).getTime()}catch(e){p.includes(t.getService())&&i.push(t)}this.retryRequests.push(...i.slice(-25))},new((i=void 0)||(i=Promise))((function(n,r){function a(t){try{d(s.next(t))}catch(t){r(t)}}function o(t){try{d(s.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}d((s=s.apply(t,e||[])).next())}));var t,e,i,s}}class g{constructor(t,e,i){this.prefix="npaw",this.disableCookies=t,this.forceCookies=e,this.disabled=i}updateStorageOptions(t,e,i){this.disableCookies=t,this.forceCookies=e,this.disabled=i}isEnabled(){if(this.disabled)return!1;let t=!0;if(!this.forceCookies)try{localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(e){t=!1}return t}setLocal(t,e){if(!this.disabled)try{!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?"undefined"!=typeof localStorage&&localStorage&&localStorage.setItem(this.prefix+"."+t,e):this._setCookie(this.prefix+".local."+t,e)}catch(t){a.default.debug(r.CoreTag,"App Analytics needs localStorage or cookies, not supported by your browser.")}}getLocal(t){if(!this.disabled)return this._localGetRemove("getItem","_getCookie",t)}removeLocal(t){if(!this.disabled)return this._localGetRemove("removeItem","_removeCookie",t)}_localGetRemove(t,e,i){try{if(this.forceCookies||!("undefined"!=typeof localStorage&&localStorage||this.disableCookies))return this[e](this.prefix+".local."+i);if("undefined"!=typeof localStorage&&localStorage)return localStorage[t](this.prefix+"."+i)}catch(t){a.default.debug(r.CoreTag,"App Analytics needs localStorage or cookies, not supported by your browser.")}}setSession(t,e){if(!this.disabled)try{!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?"undefined"!=typeof sessionStorage&&sessionStorage&&sessionStorage.setItem(this.prefix+"."+t,e):this._setCookie(this.prefix+".session."+t,e)}catch(t){a.default.debug(r.CoreTag,"App Analytics needs sessionStorage or cookies, not supported by your browser.")}}getSession(t){if(!this.disabled)return this._sessionGetRemove("getItem","_getCookie",t)}removeSession(t){if(!this.disabled)return this._sessionGetRemove("removeItem","_removeCookie",t)}_sessionGetRemove(t,e,i){try{if(this.forceCookies||!("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies))return this[e](this.prefix+".session."+i);if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage[t](this.prefix+"."+i)}catch(t){a.default.debug(r.CoreTag,"App Analytics needs sessionStorage or cookies, not supported by your browser.")}}getStorages(t){if(!this.disabled)return this.getSession(t)||this.getLocal(t)}setStorages(t,e){this.disabled||(this.setSession(t,e),this.setLocal(t,e))}removeStorages(t){this.disabled||(this.removeSession(t),this.removeLocal(t))}_setCookie(t,e){if("undefined"!=typeof document){let i=";";"undefined"!=typeof location&&(i+="domain="+location.host.split(".").reverse().splice(0,2).reverse().join(".")+";path=/;"),document.cookie=t+"="+e+i}}_getCookie(t){if("undefined"!=typeof document){let e=t+"=",i=decodeURIComponent(document.cookie).split(";");for(let t=0;t<i.length;t++){let s=i[t];for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(e))return s.substring(e.length,s.length)}}return null}_removeCookie(t){this._setCookie(t,"")}}class m{constructor(t,e){this.options=t,this.browserStorage=e}isEnabled(){return this.browserStorage.isEnabled()}setLocal(t,e){this.browserStorage.setLocal(t,e)}getLocal(t){return this.browserStorage.getLocal(t)}removeLocal(t){this.browserStorage.removeLocal(t)}getHost(){let t=this.options.getHost();const e=T.getInstance().getFastDataService();return!T.getInstance().isUsingLegacy()&&e&&e.getFastDataResponse()&&e.getFastDataResponse().host?t=e.getFastDataResponse().host:T.getInstance().isUsingLegacy()&&T.getInstance().getLegacyFastDataHost()&&(t=T.getInstance().getLegacyFastDataHost()),t}getSession(){let t=this.browserStorage.getStorages("session");if("undefined"===t&&(t=void 0),!t){const e=this.getStoredData();if(e)try{t=JSON.parse(e).q.c}catch(t){}}return t}getStorageHost(){let t=null;const e=this.getStoredData();if(e)try{t=JSON.parse(e).q.h}catch(t){}return t}getLocalAccountCode(){return this.browserStorage.getLocal("accCode")}getSessionAccountCode(){return this.browserStorage.getSession("accCode")}getAppAnalyticsRegisteredProperties(){return this.browserStorage.getLocal("appAnalyticsRegisteredProperties")}setAppAnalyticsRegisteredProperties(t){this.browserStorage.setLocal("appAnalyticsRegisteredProperties",t)}removeAppAnalyticsRegisteredProperties(){this.browserStorage.removeLocal("appAnalyticsRegisteredProperties")}getAppAnalyticsStarted(){return"true"===this.browserStorage.getLocal("appAnalyticsStarted")}setAppAnalyticsStarted(t){this.browserStorage.setLocal("appAnalyticsStarted",String(t))}removeAppAnalyticsStarted(){this.browserStorage.removeStorages("appAnalyticsStarted")}getDataTime(){return this.browserStorage.getStorages("dataTime")}setDataTime(t){this.browserStorage.setStorages("dataTime",t)}getLastActive(){return Number(this.browserStorage.getStorages("lastactive"))}setLastActive(t){this.browserStorage.setStorages("lastactive",t)}removeLastActive(){this.browserStorage.removeStorages("lastactive")}setSession(t){this.browserStorage.setStorages("session",t)}removeSession(){this.browserStorage.removeStorages("session")}getSessionExpire(){return 1e3*Number(this.browserStorage.getLocal("sessionExpire"))}getStoredData(){return this.browserStorage.getStorages("data")}setStoredData(t){this.browserStorage.setStorages("data",t)}removeStoredData(){this.browserStorage.removeStorages("data")}getStorages(t){return e=this,i=void 0,n=function*(){return this.browserStorage.getStorages(t)},new((s=void 0)||(s=Promise))((function(t,r){function a(t){try{d(n.next(t))}catch(t){r(t)}}function o(t){try{d(n.throw(t))}catch(t){r(t)}}function d(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(a,o)}d((n=n.apply(e,i||[])).next())}));var e,i,s,n}}var v=i(6443),y=i(9907);class T{static getInstance(t,e,i){return this._instance&&!i||(this._instance=new T(t||"",e)),this._instance}constructor(t,e){var i,s,n,r;if(this.options=new u,this.sendingOffline=!1,this.isDestroyed=!1,this.usingLegacy=!1,this.commonVariables=new Map,this.registeredPeriodicPushes=new Map,this.pluginOptions=e,this.pluginOptions){this.pluginOptions.host&&this.options.setNpawPluginOptions({host:this.pluginOptions.host});const t=null!==(i="true"===y.env.IS_STANDALONE)&&void 0!==i&&i;this.usingLegacy=t&&null!==(r=void 0!==(null===(n=null===(s=this.pluginOptions)||void 0===s?void 0:s.legacyPlugin)||void 0===n?void 0:n.viewTransform))&&void 0!==r&&r}this.browserStorage=new g(this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.coreStorage=new m(this.options,this.browserStorage),this.fastDataService=new d(this.options,t,this.coreStorage,this.browserStorage,this.pluginOptions),this.fastDataService.init(),this.nqsService=new f(this.options,this.coreStorage,this.fastDataService),this.deleteOldOfflineEntries()}destroy(){this.unregisterAllPeriodicPushes(),this.commonVariables.clear(),this.nqsService.destroy()}static getPluginVersion(){return`7.2.40${"true"===y.env.IS_STANDALONE?"-balancer":""}-nwf-js-sdk`}isUsingLegacy(){return this.usingLegacy}wasStartSent(){var t,e,i,s,n,r,a;return this.isUsingLegacy()?(null===(e=null===(t=this.pluginOptions)||void 0===t?void 0:t.legacyPlugin)||void 0===e?void 0:e._comm)&&(null===(s=null===(i=this.pluginOptions)||void 0===i?void 0:i.legacyPlugin)||void 0===s?void 0:s._comm.transforms)?null===(a=!(null===(r=null===(n=this.pluginOptions)||void 0===n?void 0:n.legacyPlugin)||void 0===r?void 0:r._comm.transforms[0]._isBusy))||void 0===a||a:void 0:this.nqsService.wasStartSent()}setLegacyPlugin(t){var e,i,s,n;if(this.pluginOptions){this.pluginOptions.legacyPlugin=t;const r=null!==(e="true"===y.env.IS_STANDALONE)&&void 0!==e&&e;this.usingLegacy=r&&null!==(n=void 0!==(null===(s=null===(i=this.pluginOptions)||void 0===i?void 0:i.legacyPlugin)||void 0===s?void 0:s.viewTransform))&&void 0!==n&&n}}setActiveSwitchingOnLegacy(t){t&&this.pluginOptions&&this.pluginOptions.legacyPlugin&&this.pluginOptions.legacyPlugin.options&&(this.pluginOptions.legacyPlugin.options["content.cdn"]="ACTVSWIT")}getViewCode(){var t;return null===(t=this.pluginOptions)||void 0===t?void 0:t.legacyPlugin.viewTransform.getViewCode()}getLegacyFastDataHost(){var t;return null===(t=this.pluginOptions)||void 0===t?void 0:t.legacyPlugin.viewTransform.response.host}setOptions(t){this.options.updateOptions(t),this.browserStorage.updateStorageOptions(this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.fastDataService.updateOptions(t)}getOptions(){return this.options}getCoreStorage(){return this.coreStorage}registerCommonVariable(t,e,i){var s,n;this.commonVariables.has(t)?null===(s=this.commonVariables.get(t))||void 0===s||s.set(e,i):(this.commonVariables.set(t,new Map),null===(n=this.commonVariables.get(t))||void 0===n||n.set(e,i))}unregisterCommonVariable(t,e){var i;null===(i=this.commonVariables.get(t))||void 0===i||i.delete(e)}getCommonVariable(t,e){var i;return null===(i=this.commonVariables.get(t))||void 0===i?void 0:i.get(e)}getFastDataService(){return this.fastDataService}getFastDataSessionToken(){return this.fastDataService.getSession()}refreshSessionToken(){return this.usingLegacy?void 0:this.fastDataService.refreshSessionToken()}isSessionTokenExpired(){var t;const e=(new Date).getTime();return!this.usingLegacy&&e-(null!==(t=this.nqsService.getTimeOfLastSentRequest())&&void 0!==t?t:e)>1e3*this.fastDataService.getSessionExpireTime()}pushData(t,e,i,s,n,r){this.handleDataToSend(t,e,i,s,n,r)}pushPeriodicDataFromCallback(t,e,i,s,n,r,a,o){const d=setInterval((()=>{const e=r();e&&this.handleDataToSend(t,i,n,e,a,o)}),s<1e3?1e3:s);this.registeredPeriodicPushes.has(e)?(clearInterval(this.registeredPeriodicPushes.get(e)),this.registeredPeriodicPushes.set(e,d)):this.registeredPeriodicPushes.set(e,d)}unregisterPeriodicPush(t){clearInterval(this.registeredPeriodicPushes.get(t)),this.registeredPeriodicPushes.delete(t)}unregisterAllPeriodicPushes(){if(0===this.registeredPeriodicPushes.size)return;a.default.debug(r.CoreTag,`Unregistering ${this.registeredPeriodicPushes.size} periodic pushes`);const t=Array.from(this.registeredPeriodicPushes.keys());for(const e of t)clearInterval(this.registeredPeriodicPushes.get(e)),this.registeredPeriodicPushes.delete(e);a.default.debug(r.CoreTag,"Finished unregistering all pushes")}deleteOldOfflineEntries(){var t,e,i,s;const n=null!==(e=null===(t=this.coreStorage.getLocal("offlineViews"))||void 0===t?void 0:t.split(","))&&void 0!==e?e:[];for(const t of n){const e=null!==(s=null===(i=this.coreStorage.getLocal("offlineViews."+t))||void 0===i?void 0:i.split(","))&&void 0!==s?s:[],n=2592e6;e.length>0&&Date.now()-JSON.parse("["+e+"]")[0].timemark>n&&this.deleteViewDataFromLocalStorage(t)}}sendOfflineEvents(){var t,e,i,n,o,d;return i=this,n=void 0,d=function*(){if(this.options.offline)return void a.default.notice(r.AnalyticsTag,"Unable to send offline events because offline option is enabled");if(this.sendingOffline)return;this.sendingOffline=!0;let i=15,n=!1;for(;!n&&i-- >0;)""===this.getFastDataSessionToken()?yield new Promise((t=>setTimeout(t,100))):n=!0;if(i<1)return;const o=(null!==(e=null===(t=this.coreStorage.getLocal("offlineViews"))||void 0===t?void 0:t.split(","))&&void 0!==e?e:[]).map((t=>new Promise(((e,i)=>{var n;let a=null!==(n=this.coreStorage.getLocal("offlineViews."+t))&&void 0!==n?n:"";if(a=a.replace(/CODE_PLACEHOLDER/g,T.getInstance().getFastDataSessionToken()+"_"+t.split("_")[1]),a.length>0){const i=new l(!0,this.coreStorage.getHost(),s.A.Service.OFFLINE_EVENTS,r.Method.POST,{code:T.getInstance().getFastDataSessionToken()+"_"+t.split("_")[1]},(()=>{this.deleteViewDataFromLocalStorage(t),e()}),(()=>e()));i.setBody("["+a+"]"),i.send((function(){}))}}))));yield Promise.all(o).finally((()=>{this.sendingOffline=!1}))},new((o=void 0)||(o=Promise))((function(t,e){function s(t){try{a(d.next(t))}catch(t){e(t)}}function r(t){try{a(d.throw(t))}catch(t){e(t)}}function a(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(s,r)}a((d=d.apply(i,n||[])).next())}))}deleteViewDataFromLocalStorage(t){var e,i;this.coreStorage.removeLocal("offlineViews."+t);const s=null!==(i=null===(e=this.coreStorage.getLocal("offlineViews"))||void 0===e?void 0:e.split(","))&&void 0!==i?i:[],n=s.indexOf(t);-1!=n&&s.splice(n,1),this.coreStorage.setLocal("offlineViews",s.toString())}handleDataToSend(t,e,i,n,r,a){if(!this.isDestroyed)switch(t){case v.default.Consumer.NQS:this.nqsService.send(e,i,n,r,a);break;case v.default.Consumer.PERSISTENT:if(void 0!==r&&r(),e===s.A.Service.VIDEO_PLUGIN_LOGS)break;if(e===s.A.Service.INIT)break;n.timemark=Date.now();const t=new l(this.options["app.https"],"",e,i,n,r,a),o=this.coreStorage.getLocal("offlineViews");if(o){const t=o.split(",");t.includes(n.code)||(t.push(n.code),this.coreStorage.setLocal("offlineViews",t.toString()))}else this.coreStorage.setLocal("offlineViews",n.code);const d=this.coreStorage.getLocal("offlineViews."+n.code);if(d){const e=d.split(",");e.push(t.toLocalStorageString()),this.coreStorage.setLocal("offlineViews."+n.code,e.toString())}else this.coreStorage.setLocal("offlineViews."+n.code,t.toLocalStorageString());break;case v.default.Consumer.BLACK_HOLE:void 0!==r&&r()}}}},668:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});class s{constructor(){this.host="lma.npaw.com",this.components={},this.host="lma.npaw.com",this.components={}}}},9794:(t,e,i)=>{"use strict";var s;i.d(e,{A:()=>r});class n{}s=n,n.VideoService={INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",DATA_OBJECT:"/data"},n.Service=Object.assign(Object.assign({DATA:"/data",ADAPTERS:"/adapters",CONFIGURATION:"/configuration",APP_ANALYTICS_PLUGIN_LOGS:"/infinity/session/pluginLogs",VIDEO_PLUGIN_LOGS:"/infinity/video/pluginLogs"},s.VideoService),{CDN:"/cdn",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"});const r=n},6443:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});class s{}s.Products={VIDEO_ANALYTICS:"videoAnalytics",BALANCER:"balancer"},s.AnalyticsVariables={VIEW_CODE:"viewCode",METHOD_OPTION:"methodOption"},s.BalancerVariables={AS_ENABLED:"activeSwitchingEnabled",PROFILE_NAME:"profileName",BUCKET:"bucket",DECISION_FINISHED:"decisionFinished",LAST_USED_CDN:"lastUsedCdn",BALANCER_TRAFFIC:"balancerTraffic",BALANCER_BITRATE:"balancerBitrate"},s.Consumer={NQS:"NQS",PERSISTENT:"PERSISTENT",BLACK_HOLE:"BLACK_HOLE"}},9743:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});var s=i(3582),n=i(9982);class r{static toQueryString(t){return"?"+Object.keys(t).map((e=>{if(null!==t[e]&&"object"==typeof t[e]){const i=JSON.stringify(t[e]);if("{}"!==i)return encodeURIComponent(e)+"="+encodeURIComponent(i)}else if(null!==t[e]&&void 0!==t[e]&&""!==t[e])return encodeURIComponent(e)+"="+encodeURIComponent(t[e]);return""})).filter((t=>""!=t)).join("&")}static addProtocol(t,e){let i="http://localhost/";try{i="http://"+t,e||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?i="https://"+t:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(i="//"+t)}catch(t){s.default.warn(n.CoreTag,t)}return i}static parseBoolean(t){return"string"==typeof t?"true"===t.toLowerCase():!!t}static methodFromString(t){var e;const i=null!==(e=null==t?void 0:t.toUpperCase())&&void 0!==e?e:"";return i in n.Method?n.Method[i]:n.Method.GET}static generateRandomString(t){let e="";for(let i=0;i<t;i++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}}},4243:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>p});var s,n=i(2839),r=i.n(n),a=i(3582);!function(t){t.BLACK="[30m",t.RED="[31m",t.GREEN="[32m",t.YELLOW="[33m",t.BLUE="[34m",t.MAGENTA="[35m",t.CYAN="[36m",t.WHITE="[37m"}(s||(s={}));class o{static colorizeText(t,e){return`${e}${t}${this.RESET}`}static header(t){a.default.getLogLevel()<a.LogLevel.SILENT&&console.log(this.BOLD+t+this.RESET)}static log(t,e){a.default.getLogLevel()<a.LogLevel.SILENT&&console.log(t,e||"")}static logWithPrefix(t,e,i=1){if(a.default.getLogLevel()<a.LogLevel.SILENT){const s=e.repeat(i)+t;console.log(s)}}}o.logIdent="  ",o.BOLD="[1m",o.RESET="[0m";class d{constructor(t,e){this.eventType=t,this.params=e,this.columns=["Event","Params"]}generateRow(){return this.eventType.padEnd(15)+this.getParamsString().padEnd(15)}getParamsString(){if(!this.params)return o.colorizeText("Data not defined",s.YELLOW);const t=[];switch(this.eventType){case r().INIT:case r().START:this.params.player&&t.push(`Player: ${this.params.player}`),this.params.pluginVersion&&t.push(`Plugin Version: ${this.params.pluginVersion}`),this.params.playerStartupTime&&t.push(`Player Startup Time: ${this.params.playerStartupTime} ms`),this.params.playhead&&t.push(`Playhead: ${this.params.playhead}`),this.params.position&&t.push(`Position: ${this.params.position}`),this.params.breakNumber&&t.push(`Break Number: ${this.params.breakNumber}`),this.params.adAdapterVersion&&t.push(`Ad Adapter Version: ${this.params.adAdapterVersion}`),this.params.adDuration&&t.push(`Ad Duration: ${this.params.adDuration}`);break;case r().JOIN:this.params.rendition&&t.push(`Rendition: ${this.params.rendition}`),this.params.pingTime&&t.push(`Ping Time: ${this.params.pingTime} s`),this.params.playhead&&t.push(`Playhead: ${this.params.playhead}`),this.params.position&&t.push(`Position: ${this.params.position}`),this.params.breakNumber&&t.push(`Break Number: ${this.params.breakNumber}`),this.params.adJoinDuration&&t.push(`Ad Join Duration: ${this.params.adJoinDuration}`),this.params.adPlayhead&&t.push(`Ad Playhead: ${this.params.adPlayhead}`);break;case r().JOIN_TIME:this.params.joinDuration&&t.push(`Join Time: ${this.params.joinDuration} ms`),this.params.bitrate&&t.push(`Bitrate: ${(this.params.bitrate/1e6).toFixed(2)} MB/s`);break;case r().PAUSE:this.params.playhead&&t.push(`Playhead: ${this.params.playhead}`);break;case r().RESUME:this.params.playhead&&t.push(`Playhead: ${this.params.playhead}`),this.params.pauseDuration&&t.push(`Pause Duration: ${this.params.pauseDuration} ms`);break;case r().SEEK_BEGIN:break;case r().SEEK_END:this.params.seekDuration&&t.push(`Seek Duration: ${this.params.seekDuration} ms`);break;case r().BUFFER_BEGIN:break;case r().BUFFER_END:this.params.bufferDuration&&t.push(`Buffer Duration: ${this.params.bufferDuration} ms`);break;case r().ERROR:break;case r().STOP:this.params.playhead&&t.push(`Playhead: ${this.params.playhead}`),this.params.bitrate&&-1!==this.params.bitrate?t.push(`Bitrate: ${(this.params.bitrate/1e6).toFixed(2)} MB/s`):this.params.bitrate&&t.push(`Bitrate: ${this.params.bitrate}`),this.params.position&&t.push(`Position: ${this.params.position}`),this.params.breakNumber&&t.push(`Break Number: ${this.params.breakNumber}`),this.params.adPlayhead&&t.push(`Ad Playhead: ${this.params.adPlayhead}`),this.params.adJoinDuration&&t.push(`Ad Join Duration: ${this.params.adJoinDuration}`),this.params.adViewedDuration&&t.push(`Ad Viewed Duration: ${this.params.adViewedDuration}`),this.params.adTotalDuration&&t.push(`Ad Total Duration: ${this.params.adTotalDuration}`),this.params.adBitrate&&t.push(`Ad Bitrate: ${this.params.adBitrate}`);break;case r().VIDEO_EVENT:break;case r().QUARTILE:this.params.position&&t.push(`Position: ${this.params.position}`),this.params.breakNumber&&t.push(`Break Number: ${this.params.breakNumber}`),this.params.quartile&&t.push(`Quartile: ${this.params.quartile}`),this.params.adViewedDuration&&t.push(`Ad Viewed Duration: ${this.params.adViewedDuration}`);break;case r().PODSTART:this.params.position&&t.push(`Position: ${this.params.position}`),this.params.breakNumber&&t.push(`Break Number: ${this.params.breakNumber}`),this.params.adInsertionType&&t.push(`Ad Insertion Type: ${this.params.adInsertionType}`);break;case r().PODSTOP:this.params.position&&t.push(`Position: ${this.params.position}`),this.params.breakNumber&&t.push(`Break Number: ${this.params.breakNumber}`);case r().CLICK:case r().MANIFEST:}return 0===t.length?o.colorizeText("Data not defined",s.YELLOW):t.join(" | ")}}var c=i(5100),u=i.n(c),l=i(9743),h=i(99);class p{constructor(){this.integrationMessageColors={RED:"#FF1515",GREEN:"#0f0",YELLOW:"#F6D500"},this.balancerEnabled=!0,this.videoAnalyticsEnabled=!0,this.adsAnalyticsEnabled=!0,this.reportTimeoutDuration=p.defaultReportTimeout,this.reportTimeoutStarted=!1,this.runningOffline=!1,this.balancerInterceptedRequests=!1,this.successfulResponseFromSelector=!1,this.usedSelectorAPI=!1,this.activeSwitchingEnabled=!1,this.asDecisionPerformed=!1,this.switchedCdns=!1,this.cdnList=new Map,this.triedSendingBalancerStats=!1,this.mandatoryBalancerRequests=["cdn"],this.capturedEvents=[],this.successfulNQSRequests=new Set,this.hasPlayerRegistered=!1,this.triedSendingNQSStats=!1,this.mandatoryNQSRequests=[r().START,r().JOIN_TIME,"ping",r().STOP],this.shouldIgnoreAds=!1,this.capturedAdsEvents=[],this.successfulNQSAdsRequests=new Set,this.hasAdsPlayerRegistered=!1,this.triedSendingNQSAdStats=!1,this.mandatoryNQSAdsRequests=[u().Service.AD_START,u().Service.AD_MANIFEST,u().Service.AD_JOIN,u().Service.AD_STOP,u().Service.AD_POD_START,u().Service.AD_QUARTILE,u().Service.AD_POD_STOP].map((t=>t.slice(1)))}static getInstance(t=!1){return this._instance&&!t||(this._instance=new p),this._instance}destroy(){this.clearReportTimeout(),this.cleanCdnList(),this.capturedEvents=[],this.successfulNQSRequests.clear(),this.reportTimeoutStarted=!1}start(t){t&&(this.npawPluginInstance=t),this.reportTimeoutStarted||(this.reportTimeout=setTimeout((()=>{this.report(),this.videoAnalyticsEnabled=!1,this.balancerEnabled=!1,this.adsAnalyticsEnabled=!1}),this.reportTimeoutDuration),this.reportTimeoutStarted=!0)}clearReportTimeout(){clearTimeout(this.reportTimeout),this.reportTimeoutStarted=!1,this.reportTimeout=void 0}setOptions(t){t&&(t["ad.ignore"]&&(this.shouldIgnoreAds=l.default.parseBoolean(t["ad.ignore"])),t.offline&&(this.runningOffline=l.default.parseBoolean(t.offline)))}setBalancerEnabled(t){this.balancerEnabled=null!=t?t:this.balancerEnabled}setVideoAnalyticsEnabled(t){this.videoAnalyticsEnabled=null!=t?t:this.videoAnalyticsEnabled}setAdsAnalyticsEnabled(t){this.adsAnalyticsEnabled=null!=t?t:this.adsAnalyticsEnabled}getReportTimeout(){return this.reportTimeoutDuration}setReportTimeout(t){t&&t>0&&(this.reportTimeoutDuration=null!=t?t:this.reportTimeoutDuration,this.clearReportTimeout(),this.start())}cleanCdnList(){this.cdnList.clear()}addCdn(t,e){this.cdnList.set(t,e)}updateCdnInfo(t,e,i,s){if(this.balancerEnabled){const n=this.cdnList.get(t);n&&(n.setRequestsPerformed(e),n.setTrafficServerInBytes(i),n.setFailedRequests(s))}}wasSelectorCommunicationSuccessful(t,e){this.successfulResponseFromSelector=t,e&&(this.apiErrorMessage=e)}setInterceptedRequests(t){this.balancerInterceptedRequests=t}setActiveSwitchingEnabled(t){this.activeSwitchingEnabled=t}wasActiveSwitchingDecisionPerformed(t){this.asDecisionPerformed=t}setSwitchedCdns(t){this.switchedCdns=t}usedSelectorAPIResponse(t){this.usedSelectorAPI=t}setTriedSendingBalancerStats(t){this.triedSendingBalancerStats=t}addNQSRequest(t){(this.videoAnalyticsEnabled||this.balancerEnabled)&&this.successfulNQSRequests.add(t)}addNQSEvent(t,e){this.videoAnalyticsEnabled&&this.capturedEvents.push(new d(t,e)),"stop"===t&&setTimeout((()=>{this.report(),this.clearReportTimeout()}),500)}registeredPlayer(t){this.hasPlayerRegistered=t}setTriedSendingNQSStats(t){this.triedSendingNQSStats=t}addNQSAdRequest(t){this.adsAnalyticsEnabled&&this.successfulNQSAdsRequests.add(t)}addNQSAdEvent(t,e){this.adsAnalyticsEnabled&&this.capturedAdsEvents.push(new d(t,e))}registeredAdsPlayer(t){this.hasAdsPlayerRegistered=t}setTriedSendingNQSAdStats(t){this.triedSendingNQSAdStats=t}report(){if(this.balancerEnabled||this.videoAnalyticsEnabled||this.adsAnalyticsEnabled){const t="------- Certification Tool -------";o.header(t),"ERROR_INVALID_ACCOUNT"===this.apiErrorMessage?o.log("%cAccount code is invalid!","color: #FF1515; font-size: 12px; font-weight: bold;"):(this.logBalancerDiagnostic(),h.default.getInstance().isUsingLegacy()||(this.logVideoAnalyticsDiagnostic(),this.logAdsAnalyticsDiagnostic())),this.videoAnalyticsEnabled=!1,this.balancerEnabled=!1,this.adsAnalyticsEnabled=!1,this.clearReportTimeout(),o.header("".padEnd(t.length,"-"))}}logBalancerDiagnostic(){var t,e;if(!this.balancerEnabled||null!==(e=null===(t=this.npawPluginInstance)||void 0===t?void 0:t.isBalancerEnabled())&&void 0!==e&&!e)return;const i=Array.from(this.successfulNQSRequests).map((t=>t.slice(1))),n=this.mandatoryBalancerRequests.some((t=>i.includes(t))),r=this.mandatoryBalancerRequests.filter((t=>!i.includes(t)));if(o.header("Balancer Diagnostic"),o.logWithPrefix("Intercepted requests: "+(this.balancerInterceptedRequests?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent),this.runningOffline?o.logWithPrefix("Ignoring Balancer stats since running in offline mode",o.logIdent):this.triedSendingBalancerStats?o.logWithPrefix("Any event sent to server: "+(n?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent):o.logWithPrefix("Reached stats server: Unknown",o.logIdent),!this.runningOffline&&r.length>0&&this.triedSendingBalancerStats&&o.logWithPrefix(o.colorizeText("Missing requests: "+r.join(", "),s.YELLOW),o.logIdent),o.logWithPrefix("Request to the Selector API: "+(this.successfulResponseFromSelector?o.colorizeText("Successful",s.GREEN):o.colorizeText("Unsuccessful",s.RED)),o.logIdent),this.apiErrorMessage&&!this.successfulResponseFromSelector&&o.logWithPrefix(this.getApiErrorMessage(),o.logIdent,2),o.logWithPrefix("Took decision based on Selector API: "+(this.usedSelectorAPI?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent),this.activeSwitchingEnabled?o.logWithPrefix("Active switching decision: "+(this.asDecisionPerformed?o.colorizeText("Performed",s.GREEN):o.colorizeText("Not performed",s.RED)),o.logIdent):o.logWithPrefix("Active switching decision: "+o.colorizeText("Active Switching Disabled!",s.YELLOW),o.logIdent),o.logWithPrefix("CDN List: ",o.logIdent),this.cdnList.size>0){const t=this.cdnList.values().next().value.columns.map((t=>t.padEnd(18))).join("");o.logWithPrefix(t,o.logIdent,2)}else o.logWithPrefix(o.colorizeText("The list is empty!",s.RED),o.logIdent,2);for(const t of this.cdnList.values()){const e=t.generateRow();o.log(o.logIdent.repeat(2)+e.row,"color: "+e.color)}const a=Array.from(this.cdnList.values()).filter((t=>t.getFailedRequestsPercentage()>30)).length,d=this.successfulResponseFromSelector&&this.balancerInterceptedRequests&&this.usedSelectorAPI&&this.cdnList.size>0&&(!this.triedSendingBalancerStats||n);let c=this.integrationMessageColors.YELLOW,u="%cCDN Balancer might not be integrated!";d?this.triedSendingBalancerStats&&0===r.length&&a<this.cdnList.size&&(u="%cCDN Balancer is integrated!",c=this.integrationMessageColors.GREEN):(u="%cCDN Balancer is NOT integrated!",c=this.integrationMessageColors.RED),o.log(u,`color: ${c}; font-size: 12px; font-weight: bold;`)}logVideoAnalyticsDiagnostic(){if(!this.videoAnalyticsEnabled)return;const t=Array.from(this.successfulNQSRequests).map((t=>t.slice(1))),e=this.mandatoryNQSRequests.filter((e=>!t.includes(e)));if(o.header("Video Analytics Diagnostic"),o.logWithPrefix("Events sent to server/storage: "+(0!==t.length?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent),o.logWithPrefix("All mandatory events sent to server/storage: "+(0===e.length?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent),e.length>0&&this.triedSendingNQSStats&&o.logWithPrefix("Missing stats requests: "+o.colorizeText(e.join(", "),s.RED),o.logIdent),o.logWithPrefix("Was able to capture events: "+(this.capturedEvents.length>0?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent),o.logWithPrefix("Captured events:",o.logIdent),this.capturedEvents.length>0){const t=this.capturedEvents[0].columns.map((t=>t.padEnd(15))).join("");o.logWithPrefix(t,o.logIdent,2)}else o.logWithPrefix(o.colorizeText("No events captured!",s.RED),o.logIdent,2);for(const t of this.capturedEvents)o.logWithPrefix(t.generateRow(),o.logIdent,2);const i=this.hasPlayerRegistered&&0!==t.length&&this.capturedEvents.length>0;let n=this.integrationMessageColors.YELLOW,r="%cVideo Analytics might not be integrated!";i?this.triedSendingNQSStats&&0===e.length&&(r="%cVideo Analytics is integrated!",n=this.integrationMessageColors.GREEN):(r="%cVideo Analytics is NOT integrated!",n=this.integrationMessageColors.RED),o.log(r,`color: ${n}; font-size: 12px; font-weight: bold;`)}logAdsAnalyticsDiagnostic(){if(!this.adsAnalyticsEnabled)return;const t=Array.from(this.successfulNQSAdsRequests).map((t=>t.slice(1))),e=this.mandatoryNQSAdsRequests.filter((e=>!t.includes(e)));if(o.header("Ads Analytics Diagnostic"),this.shouldIgnoreAds&&o.log("%cIgnoring Ads Analytics because ad.ignore option is set to true",`color: ${this.integrationMessageColors.YELLOW}; font-size: 12px; font-weight: bold;`),this.hasAdsPlayerRegistered||0!==t.length){if(o.logWithPrefix("Events sent to server/storage: "+(0!==t.length?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent),o.logWithPrefix("All mandatory events sent to server/storage: "+(0===e.length?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent),e.length>0&&this.triedSendingNQSAdStats&&o.logWithPrefix("Missing ad stats requests: "+o.colorizeText(e.join(", "),s.RED),o.logIdent),o.logWithPrefix("Was able to capture ads events: "+(this.capturedAdsEvents.length>0?o.colorizeText("Yes",s.GREEN):o.colorizeText("No",s.RED)),o.logIdent),o.logWithPrefix("Captured events:",o.logIdent),this.capturedAdsEvents.length>0){const t=this.capturedAdsEvents[0].columns.map((t=>t.padEnd(15))).join("");o.logWithPrefix(t,o.logIdent,2)}else o.logWithPrefix(o.colorizeText("No events captured!",s.RED),o.logIdent,2);for(const t of this.capturedAdsEvents)o.logWithPrefix(t.generateRow(),o.logIdent,2);const i=(this.hasAdsPlayerRegistered||0!=t.length)&&this.capturedAdsEvents.length>0;let n=this.integrationMessageColors.YELLOW,r="%cAds Analytics might not be integrated!";i?0===e.length&&(r="%cAds Analytics is integrated!",n=this.integrationMessageColors.GREEN):(r="%cAds Analytics is NOT integrated!",n=this.integrationMessageColors.RED),o.log(r,`color: ${n}; font-size: 12px; font-weight: bold;`)}else o.log("%cIgnoring Ads Analytics because no ads adapter was registered",`color: ${this.integrationMessageColors.YELLOW}; font-size: 12px; font-weight: bold;`)}getApiErrorMessage(){return"ERROR_CONFIGURATION_NOT_FOUND"===this.apiErrorMessage?o.colorizeText(`${this.apiErrorMessage} - Default profile not set or profile doesn't exist`,s.YELLOW):this.apiErrorMessage}}p.defaultReportTimeout=3e5},9731:function(t){var e,i,s,n,r;e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,r={buildAbsoluteURL:function(t,e,s){if(s=s||{},t=t.trim(),!(e=e.trim())){if(!s.alwaysNormalize)return t;var n=r.parseURL(t);if(!n)throw new Error("Error trying to parse base URL.");return n.path=r.normalizePath(n.path),r.buildURLFromParts(n)}var a=r.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return s.alwaysNormalize?(a.path=r.normalizePath(a.path),r.buildURLFromParts(a)):e;var o=r.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var d=i.exec(o.path);o.netLoc=d[1],o.path=d[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var u=o.path,l=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=r.normalizePath(l)}else c.path=o.path,a.params||(c.params=o.params,a.query||(c.query=o.query));return null===c.path&&(c.path=s.alwaysNormalize?r.normalizePath(a.path):a.path),r.buildURLFromParts(c)},parseURL:function(t){var i=e.exec(t);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(s,"");t.length!==(t=t.replace(n,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=r},912:(t,e,i)=>{"use strict";i.d(e,{CE:()=>v,Ji:()=>w,LI:()=>T,Lg:()=>p,Ow:()=>g,Y4:()=>d,Zq:()=>I,_C:()=>b,b3:()=>y,dR:()=>E,df:()=>o,hj:()=>l,jQ:()=>S,m:()=>f,mH:()=>m,w2:()=>u,wc:()=>_,xC:()=>n,yL:()=>r,yl:()=>a,zU:()=>h});const s=A;!function(t){const e=A,i=t();for(;;)try{if(164635==parseInt(e(283))/1+-parseInt(e(270))/2*(parseInt(e(305))/3)+-parseInt(e(279))/4*(-parseInt(e(302))/5)+parseInt(e(285))/6+-parseInt(e(299))/7+parseInt(e(304))/8*(parseInt(e(294))/9)+-parseInt(e(284))/10)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(c);const n={CDN:s(306)},r={Success:"ok",Fail:"nok",Progress:"pr"},a={Updated:"updated",Success:"ok",Fail:s(268)},o={host:"gnsnpaw.com",devHost:"stage-smartswitchv2.youbora.com",devDomains:[s(300),s(298)],service:"/decision",decisionCallWaitTime:3e4,decisionReloadIntervalPerManifestMilliseconds:3e4},d=[s(273),s(271),s(275),s(289),".dash",".m4f"];function c(){const t=["5pWzadS","connect","2399944rqaNru","30606YkcFUS","/cdn","keys","splits","optimizedScore","NEW_SEGMENT_AVAILABLE","identifier","nok",".mpd","10HXDeve",".m4s","close",".mp4","SEGMENT_ABSENT",".ts","PING","data_spec_key","ping","935692zwsUIL",".srt",".ssa","pong","301606BrebuW","7264060YbqHLw","1423734uGuXVa","command","bestScore","error",".cmf","SEGMENT_DATA","PONG","size","wss://p2p-tracker.youbora.com/webrtc","9iktAaB","SEGMENTS_MAP","data","random","qa.npaw.com","915320iUdHhV","stage.npaw.com","CANCEL_SEGMENT_REQUEST"];return(c=function(){return t})()}const u=[".m3u8",s(269)],l=[".aac"],h=[s(280),".vtt",s(281),".ass"],p={connect:s(303),close:s(272),error:s(288),data:s(296),ping:s(278),pong:s(282)},f={optimizedScore:s(309),optimizedFeedback:"optimizedFeedback",bestScore:s(287),qualityPriority:"qualityPriority",cdnPriority:"cdnPriority"},g={max:25e6,min:2e5,default:2e5},m=(s(297),{data:s(290),absent:s(274),map:s(295),newSegmentAvailable:s(310),request:"SEGMENT_REQUEST",cancel:s(301),ping:s(276),pong:s(291)}),v={command:s(286),id:s(277),size:s(292),storageSize:"ss",map:s(307),identifier:s(267),splits:s(308),time:0,simpleMapKeys:"k",simpleMapSize:"s",dateTime:"dt",createdAt:"ca"},y={bandwidth_test:2,message:1,data:0},T={maxMessageSize:65532,probability:1,timeout:2500,maxConcurrency:6,maxConnectedPeers:40,tracker:s(293),upload:!1},S={version:2},E={expiration:3e5,count:60,safeMaxCount:300},b={retries:5,retryDelay:100,defaultBwThreshold:2e5,connectTimeoutMilliseconds:1e4,readTimeoutMilliseconds:3e3,minRequestSizeForBwEstimateKB:100};function A(t,e){const i=c();return(A=function(t,e){return i[t-=267]})(t,e)}const w={totalDataInterval:6e4},_={callTimeoutMilliseconds:500,timeBetweenCallsMilliseconds:1e3,timeBetweenBurstsMilliseconds:5e3},I={lastMeasurementWeight:.5,maximumRelativeDeltaForTrial:.2,minimumDurationSinceLastUsedForTrialMilliseconds:3e4}},211:(t,e,i)=>{var s=i(7380),n=i(3598),r={getPosition:function(){return null},getGivenBreaks:function(){return null},getExpectedBreaks:function(){return null},getExpectedPattern:function(){return null},getBreaksTime:function(){return null},getGivenAds:function(){return null},getExpectedAds:function(){return null},getIsVisible:function(){return!0},getAudioEnabled:function(){return null},getIsSkippable:function(){return null},getIsFullscreen:function(){return null},getCampaign:function(){return null},getCreativeId:function(){return null},getProvider:function(){return null},getAdInsertionType:function(){return null},fireClick:function(t){"string"==typeof t&&(t={url:t}),this.emit(s.Event.CLICK,{params:t})},fireQuartile:function(t){this.flags.isStarted&&"number"==typeof t&&t>this.flags.lastQuartileSent&&t<4&&(this.flags.lastQuartileSent++,this.emit(s.Event.QUARTILE,{params:{quartile:t}}))},startChronoView:function(){if(this.getIsVisible()&&this.plugin.backgroundDetector&&!this.plugin.backgroundDetector.isInBackground){var t=this.chronos.viewedMax;0!==t.length&&0===t[t.length-1].stopTime||(t.push(new n),t[t.length-1].start())}},stopChronoView:function(){var t=this.chronos.viewedMax;t[0]&&t.length>0&&0===t[t.length-1].stopTime&&t[t.length-1].stop()},fireManifest:function(t,e){var i={params:t};"string"==typeof t&&(i={params:{errorType:t,errorMessage:e}}),this.emit(s.Event.MANIFEST,i)},fireSkip:function(t){void 0===t&&(t={}),t.skipped=!0,this.fireStop(t)},fireBreakStart:function(t){this.fireAdBreakStart(t)},fireBreakStop:function(t){this.fireAdBreakStop(t)},fireAdBreakStart:function(t){this.emit(s.Event.PODSTART,{params:t})},fireAdBreakStop:function(t){this.emit(s.Event.PODSTOP,{params:t})}};t.exports=r},72:(t,e,i)=>{var s=i(7380);const{default:n}=i(3582),{AnalyticsTag:r}=i(9982);var a={getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){},getDroppedFrames:function(){},getThroughput:function(){},getRendition:function(){},getTitle2:function(){},getIsLive:function(){},getCdnTraffic:function(){},getP2PTraffic:function(){},getUploadTraffic:function(){},getIsP2PEnabled:function(){},getSegmentDuration:function(){},getHouseholdId:function(){},getLatency:function(){},getPacketLoss:function(){},getPacketSent:function(){},getMetrics:function(){},getAudioCodec:function(){},getVideoCodec:function(){},getURLToParse:function(){},fireSeekBegin:function(t,e,i){if(this._discardFalseBuffers(),!(this.getVideo()&&this.getVideo().getIsLive()&&this.plugin.options["content.isLive.noSeek"])&&this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===e)return;n.notice(r,"Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();try{this.fireEventsStruct.seek=[],i?this.fireEventsStruct.seek.push(i):this.fireEventsStruct.seek.push("undefinedEvent")}catch(t){}this.flags.isSeeking=!0,this.emit(s.Event.SEEK_BEGIN,{params:t})}},fireSeekEnd:function(t,e){if(!(this.getVideo()&&this.getVideo().getIsLive()&&this.plugin.options["content.isLive.noSeek"])&&this.flags.isJoined&&this.flags.isSeeking){try{e?this.fireEventsStruct.seek.push(e):this.fireEventsStruct.seek.push("undefinedEvent")}catch(t){}(t=t||{}).triggeredEvents=this.fireEventsStruct.seek,this.cancelSeek(),this.emit(s.Event.SEEK_END,{params:t});try{this.chronos.pause.getDeltaTime(!1)>0&&this.chronos.pause.resume()}catch(t){}}},cancelSeek:function(t){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireEvent:function(t,e,i,n){if("data"===t)this.emit(s.Event.DATA_OBJECT,{params:n});else{var r=n||{};r.name=t||"",r.dimensions=e||{},r.values=i||{},this.emit(s.Event.VIDEO_EVENT,{params:r})}},storeNewRendition:function(t){this.getVideo().triggerUpdateRendition(t)}};t.exports=a},2176:(t,e,i)=>{var s=i(1075);const{default:n}=i(3582);var r=i(8661),a=i(9965),o=i(1618),d=i(9157),c=i(4795),u=i(5552),l=i(7380),h=i(1167);const{AnalyticsTag:p}=i(9982);var f=s.extend({constructor:function(t,e,s,r,c,u){this._key=t,this._setAdapter=!1,this._npawVideo=e,this._loadedAdapterImplementation=!1,this.flags=new d,this.chronos=new o,this._adapterClasses={},this.fireEventsStruct={},this.fireEventsStruct.buffer=[],this.fireEventsStruct.seek=[],this.monitor=null,this.plugin=s,this.player&&this.unregisterListeners(),this.player=null,this._isAdsAdapter=null,this.log=n,this.log.loadLevelFromUrl(),this.npaw=i(9264),this.setPlayer(c),"object"==typeof u?(this._adapterName=this.getAdapterNameFromClass(u),this.tag=this.player,u&&(this.loadAdapterClasses(u,!1),this.registerListeners()),this.plugin.options.enableExtraMetricCollection&&this._npawVideo.fetchLocation(),n.notice(p,"Adapter "+this.getVersion()+" with Lib "+a+" is ready.")):n.error(p,"Provided adapter is not supported.")},_updatePlayer:function(t){this.player&&this.unregisterListeners(),this.player=null,this.setPlayer(t),this.tag=this.player,this.registerListeners()},isSetAdapter:function(){return this._setAdapter},getVideo:function(){return this._npawVideo},getPlugin:function(){return this.plugin},getNpawUtils:function(){return this.plugin.utils},getNpawReference:function(){return this.npaw},getLog:function(){return this.log},isStarted:function(){return!!this.flags&&this.flags.isStarted},getAdapterClass:function(t){var e=this._adapterClasses;return e[t]?e[t]:null},getAdapterNameFromClass:function(t){if(t&&t.getVersion)try{return t.getVersion()}catch(t){}return"undefined"},getAdapterClasses:function(){return this._adapterClasses},updateAdapterTemplates:function(t){if(this.plugin.canOverwriteAdapters()){var e=this._getAdapterFromTemplates(this._adapterName,t);e&&(this.evalAdapterJson(e,!0),this.registerListeners())}},_getAdapterFromTemplates:function(t,e){var i=null;e||(e=this.plugin.adapterTemplates);try{t&&e&&e[t.toLowerCase()]&&(i=JSON.parse(e[t.toLowerCase()]))}catch(e){n.warn(p,"Adapter "+t+" not found on repository")}return i},loadAdapterClasses:function(t,e){e=e||!1;let i=0,s=0,r="",a=Object.getPrototypeOf(t);try{let o="";const d=new Map;for(;a!==Object.prototype;)Object.getOwnPropertyNames(a).forEach((t=>{"function"!=typeof a[t]||"constructor"===t||d.has(t)||d.set(t,a[t])})),a=Object.getPrototypeOf(a);if(d.forEach(((t,e)=>{this[e]=t,o+=t.toString(),i++})),r="Adapter Class",void 0!==t.adsAdapters)for(const e of Object.keys(t.adsAdapters))this.getAdapterClasses()[e]=new f(this._key,this._npawVideo,this.getPlugin(),null,this.player,new t.adsAdapters[e]),r="Ads Adapter -> "+e;if(void 0!==t.additionalContexts){for(const e of Object.keys(t.additionalContexts)){this.getAdapterClasses()[e]||(this.getAdapterClasses()[e]={},this.getAdapterClasses()[e].constructor=function(){},this.getAdapterClasses()[e].plugin=this.plugin,this.getAdapterClasses()[e].getNpawUtils=function(){return this.plugin.utils});const i=new t.additionalContexts[e],n=Object.getPrototypeOf(i),r=Object.getOwnPropertyNames(n).filter((t=>"function"==typeof i[t]&&"constructor"!==t));for(const t of r)this.getAdapterClasses()[e][t]=i[t],s++}r="Additional Contexts"}this._loadedAdapterImplementation=!0;try{this.adapterHash=h(o.trim())}catch(t){this.adapterHash="Undefined"}n.notice(p,"["+this.getAdapterKey()+"] Loaded adapter ("+this.getVersion()+") (Hash "+this.adapterHash+") implementation from class; From templates: "+e+"; Integrated adapter methods: "+i+", external methods: "+s)}catch(t){n.error(p,"Can't be evaluated adapter class correctly; From templates: "+e+", Last method evaluated: "+r)}},getAdapterKey:function(){return this._key},setPlayer:function(t){"string"==typeof t&&"undefined"!=typeof document?this.player=document.getElementById(t):this.player=t},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){try{this.stopMonitor(),this.stopReadyStateMonitor(),this.unregisterListeners(),this.player=null,this.tag=null}catch(t){n.error(p,"Can't process dispose for video "+this._key)}},monitorPlayhead:function(t,e,i){this.stopMonitor();var s=0;t&&(s|=c.Type.BUFFER),e&&(s|=c.Type.SEEK),this.monitor&&this.monitor._timer.isRunning?this.monitor.skipNextTick():this.monitor=new c(this,s,i)},stopMonitor:function(){this.monitor&&this.monitor.stop()},monitorReadyState:function(t){this.stopReadyStateMonitor(),this.stateMonitor=new u(this,t)},startReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.start()},stopReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.stop()},checkReadyState:function(t,e){try{this.plugin&&this.plugin.getReadyStateMonitorEnabled()&&t&&(t>3&&!this.flags.isSeeking?this.flags.isBuffering?this.fireBufferEnd({},e+"-readyState"):this.flags.isJoined||this.fireJoin({},e+"-readyState"):t<4&&!this.flags.isBuffering&&!this.flags.isPaused&&this.fireBufferBegin({},!1,e+"-readyState",!0))}catch(t){n.error(p,"Can't check readyState property correctly")}},getPlayhead:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getTotalBytes:function(){return null},getTitle:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return a+"-generic-js"},getVideoObject:function(){return null},checkExistsPlayer:function(){return!0},checkExistsObjectOnPage:function(t){return r.elementIsInPage(t)},fireInit:function(t,e){if(this._npawVideo&&this._npawVideo.controlPlayerExists()&&!this.checkExistsPlayer())return n.warn(p,"Cannot fire init event because player not exists on the document"),null;this.adapterHash&&((t=t||{}).pluginHash=this.adapterHash),this._npawVideo&&this._npawVideo.fireInit(t,e)},fireStart:function(t,e){return this._npawVideo&&this._npawVideo.controlPlayerExists()&&!this.checkExistsPlayer()?(n.warn(p,"Cannot fire start event because player not exists on the document"),null):this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls()?null:void(this.flags.isStarted||(this.flags.isStarted=!0,this.chronos.total.start(),this.chronos.join.start(),e&&((t=t||{}).triggeredEvents=[e]),this.adapterHash&&((t=t||{}).pluginHash=this.adapterHash),this.startReadyStateMonitor(),this.emit(l.Event.START,{params:t})))},fireJoin:function(t,e){this.flags.isJoined||this.flags.isStarted||this._isAds()||!this._npawVideo||!this._npawVideo.isInitiated||this.fireStart(),this.flags.isStarted&&!this.flags.isJoined&&(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),e&&((t=t||{}).triggeredEvents=[e]),this.emit(l.Event.JOIN,{params:t}))},firePause:function(t,e){this._discardFalseBuffers(),this.flags.isBuffering&&this.fireBufferEnd(null,"firePauseCall"),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),e&&((t=t||{}).triggeredEvents=[e]),this.emit(l.Event.PAUSE,{params:t}))},fireResume:function(t,e){if(this._discardFalseBuffers(),this.flags.isJoined&&this.flags.isPaused){this.flags.isPaused=!1;try{this._npawVideo.ignorePauseSmallEvents()&&this.chronos.pause.getDeltaTime(!1)<=50?this.chronos.pause.reset():this.chronos.pause.stop()}catch(t){this.chronos.pause.stop()}this.monitor&&this.monitor.skipNextTick(),e&&((t=t||{}).triggeredEvents=[e]),this.emit(l.Event.RESUME,{params:t})}},fireBufferBegin:function(t,e,i,s){if(s=s||!1,this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!e)return;n.notice(p,"Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();try{this.fireEventsStruct.buffer=[],i?this.fireEventsStruct.buffer.push(i):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(t){}this.flags.isBuffering=!0,this.flags.isVideoStateBuffering=s,this.emit(l.Event.BUFFER_BEGIN,{params:t})}},fireBufferEnd:function(t,e){if(this.flags.isJoined&&this.flags.isBuffering){try{e?this.fireEventsStruct.buffer.push(e):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(t){}(t=t||{}).triggeredEvents=this.fireEventsStruct.buffer,this.cancelBuffer(),this.emit(l.Event.BUFFER_END,{params:t});try{this.chronos.pause.getDeltaTime(!1)>0&&this.chronos.pause.resume()}catch(t){}}},_discardFalseBuffers:function(){try{this.flags.isBuffering&&this.flags.isVideoStateBuffering&&this._getDeltaBufferTime()<=100&&this.cancelBuffer()}catch(t){}},cancelBuffer:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.flags.isVideoStateBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},_getDeltaBufferTime:function(){return this.chronos&&this.chronos.buffer?this.chronos.buffer.getDeltaTime(!1):0},fireStop:function(t,e){try{if((this._isAds()||this._npawVideo._isStopReady())&&(this._isAds()&&this.flags.isStarted||!this._isAds()&&(this.flags.isStarted||this._npawVideo.isInitiated))){if(this._isAds()&&(t=t||{},this.flags.isPaused)){const e=this.chronos.pause.getDeltaTime();t.adPauseDuration=e}this.stopMonitor(),this.stopReadyStateMonitor(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),e&&((t=t||{}).triggeredEvents=[e]),this.emit(l.Event.STOP,{params:t}),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset(),this.chronos.viewedMax.splice(0,this.chronos.viewedMax.length)}}catch(t){n.warn(p,"Issue firing Stop event")}},firePlayerLog:function(t,e){if(this._npawVideo){var i={logs:e,logAction:t,logType:"playerEvent"};this._npawVideo.firePlayerLog(i)}},setIsAds:function(t){this._isAdsAdapter=t},_isAds:function(){return this._isAdsAdapter},fireCasted:function(t,e){t||(t={}),t.casted=!0,this.fireStop(t,e)},fireError:function(t,e,i,s,n,a){let o=r.buildErrorParams(t,e,i);o.code&&delete o.code,n&&(o=o||{},o.triggeredEvents=[n]);const d=this._npawVideo?this._npawVideo.options:{};void 0!==o.errorCode&&d["errors.ignore"]&&d["errors.ignore"].indexOf(o.errorCode.toString())>-1||(((a=a||!1)||void 0!==o.errorCode&&d["errors.fatal"]&&d["errors.fatal"].indexOf(o.errorCode.toString())>-1)&&this.flags.isJoined&&(o=o||{},o.errorType="fatal"),this.emit(l.Event.ERROR,{params:o}))},fireFatalError:function(t,e,i,s,n){this.fireError(t,e,i,s,n,!0)},isLegacyBufferBehaviourEnabled:function(){return(this._npawVideo?this._npawVideo.options:{}).enableLegacyBufferBehaviour||!1}},{Event:l.Event});r.assign(f.prototype,i(211)),r.assign(f.prototype,i(72)),t.exports=f},1618:(t,e,i)=>{var s=i(550),n=i(3598),r=s.extend({constructor:function(){this.reset()},reset:function(){this.join=new n,this.seek=new n,this.pause=new n,this.buffer=new n,this.total=new n,this.viewedMax=[]}});t.exports=r},9157:(t,e,i)=>{var s=i(550).extend({constructor:function(){this.reset()},reset:function(){this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isVideoStateBuffering=!1,this.isEnded=!1,this.isStopped=!1,this.lastQuartileSent=0,this.isAdPaused=!1}});t.exports=s},4795:(t,e,i)=>{var s=i(550),n=i(1516),r=i(3598),a=s.extend({constructor:function(t,e,i){this._adapter=t,this._seekEnabled=e&a.Type.SEEK,this._bufferEnabled=e&a.Type.BUFFER,i=i||800,this._chrono=new r,this._lastPlayhead=0,i>0&&(this._timer=new n(this.progress.bind(this),i))},start:function(){this.stop(),this.canBeUsed()&&this._timer.start()},stop:function(){this._lastPlayhead=0,this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var t=this._chrono.stop();this._chrono.start();var e=t*a.kBUFFER_THRESHOLD_RATIO,i=t*a.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!==this._adapter.getPlayrate()&&(e*=this._adapter.getPlayrate(),i*=this._adapter.getPlayrate());var s=this._getPlayhead(),n=1e3*Math.abs(this._lastPlayhead-s),r="function"==typeof this._adapter.getVideoBufferLength?this._adapter.getVideoBufferLength():null;if(n<e){if(this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking){const t=this._adapter.getPlugin();t&&t.options&&t.options.checkVideoBufferInPlayheadMonitor?(null===r||r<=0)&&this._adapter.fireBufferBegin(null,!1,"playheadMonitor"):this._adapter.fireBufferBegin(null,!1,"playheadMonitor")}}else n>i?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1,"playheadMonitor"):(this._seekEnabled&&this._adapter.fireSeekEnd(null,"playheadMonitor"),this._bufferEnabled&&this._adapter.fireBufferEnd(null,"playheadMonitor"));this._lastPlayhead=s},canBeUsed:function(){const t=this._adapter.getVideo(),e=this._adapter.getPlugin();return!(!e||!e.getPlayheadMonitorEnabled()||!this._seekEnabled&&!this._bufferEnabled||t&&t.getIsLive()&&e.options["content.isLive.noMonitor"])},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});t.exports=a},5552:(t,e,i)=>{var s=i(550);const{default:n}=i(3582),{AnalyticsTag:r}=i(9982);var a=s.extend({constructor:function(t,e){this._adapter=t,this._videoElement=t.getVideoObject(),this._startedStateCheck=!1,this._intervalCheckId=null,this._intervalMilliseconds=e||300},start:function(){var t=this._adapter.plugin;t&&t.getReadyStateMonitorEnabled()&&this._videoElement&&!this._startedStateCheck&&(this._intervalCheckId=setInterval(this.checkStateProperty.bind(this),this._intervalMilliseconds),this._startedStateCheck=!0)},stop:function(){try{this._startedStateCheck&&this._intervalCheckId&&clearInterval(this._intervalCheckId),this._intervalCheckId=null,this._startedStateCheck=!1}catch(t){n.error(r,"Produced error stopping the network monitor")}},checkStateProperty:function(t){try{this._videoElement&&this._adapter&&this._videoElement.readyState&&(this._videoElement.readyState>3&&!this._adapter.flags.isSeeking?this._adapter.flags.isBuffering?this.fireBufferEnd({},"stateMonitor"):this._adapter.flags.isJoined||this.fireJoin({},"stateMonitor"):this._videoElement.readyState<4&&!this._adapter.flags.isBuffering&&this.fireBufferBegin({},!1,"stateMonitor",!0))}catch(t){}}});t.exports=a},3598:(t,e,i)=>{var s=i(550).extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(t){var e=-1,i=(new Date).getTime();if(this.startTime){t&&!this.stopTime&&(this.stopTime=i);var s=this.pauseTime?i-this.pauseTime:0,n=this.stopTime?this.stopTime:i;e=this.offset-s+(n-this.startTime)}return e},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pauseTime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var t=new s;return t.startTime=this.startTime,t.stopTime=this.stopTime,t.offset=this.offset,t}});t.exports=s},4971:(t,e,i)=>{var s=i(550);const{default:n,LogLevel:r}=i(3582);var a=i(8661);const{AnalyticsTag:o}=i(9982);var d=s.extend({constructor:function(t,e,i,s,n){this.videoKey=n,this.xhr=this.createXHR(),this.host=t||"",this.service=e||"",this.params=i||{},this.options=a.assign({},d.defaultOptions,s),this.retries=0,this.sendPostRequest=!1,this.preparedPostRequest=!1,this.options.cache||this.params.timemark||this.setParam("timemark",(new Date).getTime())},createXHR:function(){var t={};try{t=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(t){n.error(o,t)}return t},getXHR:function(){return this.xhr},getResponse:function(){return this.xhr.response},getResponseText:function(){return this.xhr.responseText},getResponseHeaders:function(){return this.xhr.getAllResponseHeaders()},getUrl:function(){return this.host+this.service+this.getParamString()},getVideoKey:function(){return this.videoKey},on:function(t,e,i){return this.xhr.addEventListener?this.xhr.addEventListener(t,e.bind(this,this,i)):t===d.Event.SUCCESS&&(this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&e.bind(this,this,i)}.bind(this)),this},off:function(t,e){return this.xhr.removeEventListener(t,e),this},getParamString:function(){try{var t="?";for(var e in this.params){var i=this.params[e];if(null!==i&&"object"==typeof i){var s=JSON.stringify(i);"{}"!==s&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(s)+"&")}else null!=i&&""!==i&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(i)+"&")}return t.slice(0,-1)}catch(t){return n.error(o,t),""}},getParam:function(t){return this.params[t]},setParam:function(t,e){return this.params[t]=e,this},setBody:function(t){this.body=t},setPostRequest:function(t){this.sendPostRequest=t},getParamsForPostMessages:function(){var t={};try{var e=this.getParam("timemark"),i=this.getParam("code"),s=this.getParam("sessionRoot"),r=this.getParam("sessionId");e&&(t.timemark=e),i&&(t.code=i),s&&(t.sessionRoot=s),r&&(t.sessionId=r)}catch(t){n.error(o,t)}return t},send:function(){try{try{this.sendPostRequest&&!this.preparedPostRequest&&(this.options.method="POST",this.body=JSON.stringify(this.params),this.params=this.getParamsForPostMessages(),this.preparedPostRequest=!0)}catch(t){}if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var t in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,this.options.requestHeaders[t]);for(var e in this.options.retryAfter>0&&this.options.maxRetries>0&&0===this.retries&&this.on(d.Event.ERROR,function(){if(this.retries>=this.options.maxRetries)n.error(o,'Aborting failed request "'+this.service+'". Max retries reached.');else{n.warn(o,'YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms.");try{setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter)}catch(t){"undefined"!=typeof atv?atv.setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter):n.error(o,t)}}}.bind(this)),n.logLevel<=r.VERBOSE&&n.verbose(o,"XHR Req: "+this.getUrl()),d._globalListeners)d._globalListeners[e].forEach(function(t){this.on(e,t)}.bind(this));return this.xhr.send(this.body)}catch(t){n.error(o,t)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(t,e){d._globalListeners[t]=d._globalListeners[t]||[],d._globalListeners[t].push(e)},offEvery:function(t,e){if(d._globalListeners[t]){var i=d._globalListeners[t].indexOf(e);-1!==i&&d._globalListeners[t].splice(i,1)}}});t.exports=d},4609:(t,e,i)=>{var s=i(1073),n=i(4090),r=i(6082),a=i(3465),o=i(3269),d=i(4045),c=i(4135),u=i(5100);const{AnalyticsTag:l}=i(9982),{default:h}=i(3582);var p=s.extend({constructor:function(t){p.__super__.constructor.apply(this,arguments),this.plugin=t,this._realResource=void 0,this._transportFormat=void 0,this._initResource=void 0,this._cdnName=void 0,this._cdnNodeHost=void 0,this._cdnNodeTypeString=void 0,this._cdnNodeType=void 0,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._realResource},_getInitialCdnResource:function(){return this._realResource||this._initResource},getTransportFormat:function(){return this._transportFormat},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(t){t?this._isBusy||(this._isBusy=!0,this._initResource=t,this._parseManifestEnabled=this.plugin.isParseManifest(),this._cdnEnabled=this.plugin.isParseCdnNode(),this._cdnList=this.plugin.getParseCdnNodeList().slice(),r.setBalancerHeaderName(this.plugin.getParseCdnNodeNameHeader(),this.plugin.getParseNodeHeader()),this._setTimeout(),this._parseManifestEnabled?this._isFinalUrl(this._initResource)?(this._realResource=this._initResource,this.done()):this.parseManifest():this._parseCDN()):this.done()},_isFinalUrl:function(t){const e=[".ts",".mp4",".m4s",".cmfv"];t=t||"";for(const i in e){const s=e[i];if(t.lastIndexOf(s)===t.length-s.length)return!0}return!1},_setTimeout:function(){const t=()=>{this._isBusy&&(this.done(),h.warn(l,"ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))};try{this._parseTimeout=setTimeout(t,3e3)}catch(e){"undefined"!=typeof atv?this._parseTimeout=atv.setTimeout(t,3e3):h.error(l,e)}},parseManifest:function(t,e){const i=this.plugin.options["parse.manifest.auth"],s=[new c(i),new o(i),new n(i)];this._parseManifest(s,t,e||this._initResource)},_parseManifest:function(t,e,i,s){if(t.length>0){const n=t[0];n.shouldExecute(e)?(n.on(d.Event.DONE,(()=>{this._parseManifest(t.slice(1,t.length),n.getLastManifest(),n.getResource(),n.getTransportFormat()||s)})),n.parse(i,e)):this._parseManifest(t.slice(1,t.length),e,i,s)}else this._transportFormat=s,this._realResource=i,this._parseCDN()},_parseCDN:function(){if(this.plugin.isCdnSwitch())this.switchDetector=new a(this.plugin),this.switchDetector.on(a.Events.DONE,(t=>{this._cdnName=t.data,this.done()})),this.switchDetector.on(a.Events.ERROR,(()=>{this.done()})),this.switchDetector.init();else if(this._cdnEnabled&&this._cdnList.length>0){const t=this._cdnList.shift(),e=r.create(t);e?(e.on(r.Event.DONE,(()=>{this._responses=e.getResponses(),this._cdnName=e.getParsedCdnName(),this._cdnNodeHost=e.getParsedNodeHost(),this._cdnNodeTypeString=e.getParsedNodeTypeString(),this._cdnNodeType=e.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()})),e.parse(this._getInitialCdnResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(t){if(t.service===u.Service.START){const e=this.plugin.requestBuilder.lastSent;e.parsedResource=t.params.parsedResource=this.getResource()||t.params.parsedResource,e.transportFormat=t.params.transportFormat=this.getTransportFormat()||t.params.transportFormat,this._cdnEnabled&&(e.cdn=t.params.cdn=t.params.cdn||this.getCdnName(),e.nodeHost=t.params.nodeHost=this.getNodeHost()||t.params.nodeHost,e.nodeType=t.params.nodeType=this.getNodeType()||t.params.nodeType,e.nodeTypeString=t.params.nodeTypeString=this.getNodeTypeString()||t.params.nodeTypeString)}}});t.exports=p},3465:(t,e,i)=>{var s=i(1075),n=i(4971);const{AnalyticsTag:r}=i(9982),{default:a}=i(3582);var o=s.extend({constructor:function(t){this.plugin=t,this.headerName="x-cdn"},init:function(){var t=null;this.plugin&&(t=this.plugin.getAdapter()&&this.plugin.getAdapter().getURLToParse()?this.plugin.getAdapter().getURLToParse():this.plugin.getResource()),this.plugin&&this.plugin.getAdapter()&&this.plugin.getAdapter().flags.isStarted&&this._request(t)},done:function(t){this.emit(o.Events.DONE,t)},error:function(){this.emit(o.Events.ERROR)},_successfulRequest:function(t){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"]));var e=t.getResponseHeaders().split("\n"),i=null;for(var s in e){var n=e[s],r=n.indexOf(this.headerName);r>-1&&(i=n.substring(r+this.headerName.length+1,n.length-1).replace(" ",""))}this.done(i)},_failedRequest:function(){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"])),a.warn(r,"CDN switch detection request failed"),this.error()},_request:function(t){var e=new n(t,null,null,{method:"HEAD",cache:!0});e.on(n.Event.SUCCESS,this._successfulRequest.bind(this)),e.on(n.Event.ERROR,this._failedRequest.bind(this)),e.send()}},{Events:{DONE:"done",ERROR:"error"}});t.exports=o},6082:(t,e,i)=>{var s=i(1075),n=i(8661);i(4971);const{AnalyticsTag:r}=i(9982),{default:a}=i(3582);var o=s.extend({constructor:function(t){this._options=n.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},t),this._responses={}},done:function(){this.emit(o.Event.DONE)},addParser:function(t){return this._options.parsers.push(t),this},setCdnName:function(t){return this._options.cdnName=t,this},setRequestMethod:function(t){return this._options.requestMethod=t,this},setRequestHeader:function(t,e){return this._options.requestHeaders[t]=e,this},setParseType:function(t){return this._options.parseType=t,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(t,e){this._responses=e||{};var i=JSON.stringify(this._options.requestHeaders);this._responses[i]?this._parseResponse(this._responses[i]):this._requestResponse(t)},_requestResponse:function(t){var e=JSON.stringify(this._options.requestHeaders),i="{}"!==e;const s=new XMLHttpRequest;s.open(this._options.requestMethod,t);for(const t in this._options.requestHeaders)Object.prototype.hasOwnProperty(this._options.requestHeaders,t)&&s.setRequestHeader(t,this._options.requestHeaders[t]);s.onreadystatechange=()=>{4===s.readyState&&(s.status>=200&&s.status<400?(this._responses[e]=s.getAllResponseHeaders(),this._parseResponse(this._responses[e])):i?(this._options.requestHeaders={},this._requestResponse(t)):this.done())},s.send()},_parseResponse:function(t){this._options.parsers.forEach(function(e){if("string"==typeof e.headerName)this._parseHeaderResponse(t,e,e.headerName);else if(Array.isArray(e.headerName))for(var i=0,s=e.headerName.length;i<s;i++){var n=e.headerName[i];"string"==typeof n&&this._parseHeaderResponse(t,e,n)}}.bind(this)),this.done()},_parseHeaderResponse:function(t,e,i){i&&(i=i?i.toLowerCase():"",t.split("\n").forEach(function(t){var s=t.indexOf(":");-1!==s&&t.slice(0,s).toLowerCase()===i&&this._executeParser(e,t.slice(s+1))}.bind(this)))},_executeParser:function(t,e){try{var i=t.regex.exec(e.trim());if(null!==i)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),t.element){case o.ElementType.HOST:this._cdnNodeHost=i[1];break;case o.ElementType.TYPE:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.HOST_AND_TYPE:this._cdnNodeHost=i[1],this._cdnNodeTypeString=i[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=i[2];break;case o.ElementType.NAME:this._cdnName=i[1].toUpperCase()}}catch(t){a.warn(r,"CDN parsing for "+this._options.cdnName+" could not parse header value "+e)}},shouldExecute:function(){return!0}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(t,e){o._cdnConfigs.Balancer.parsers[0].headerName=t,o._cdnConfigs.Balancer.parsers[1].headerName=e},create:function(t){if(o._cdnConfigs[t])return new o(o._cdnConfigs[t]);a.warn(r,"Tried to create an unexisting CdnParser named "+t)},add:function(t,e){o._cdnConfigs[t]=e}});o.add("Level3",i(1743)),o.add("Cloudfront",i(4212)),o.add("Akamai",i(4724)),o.add("Highwinds",i(6633)),o.add("Fastly",i(6297)),o.add("Telefonica",i(4622)),o.add("Amazon",i(7268)),o.add("Edgecast",i(694)),o.add("Balancer",i(194)),o.add("NosOtt",i(8237)),t.exports=o},4724:t=>{t.exports={cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/},{element:"host",headerName:"akamai-mon-iucid-del",regex:/(.*)/},{element:"type",headerName:"akamai-cache-status",regex:/(.+)\sfrom\schild/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(t){var e=t.toLowerCase();return-1!==e.indexOf("hit")?1:-1!==e.indexOf("miss")?2:0}}},7268:t=>{t.exports={cdnName:"AMAZON",parsers:[{element:"host",headerName:"x-amz-cf-pop",regex:/(.+)/},{element:"type",headerName:"x-cache",regex:/(.+)\sfrom.+/}],parseType:function(t){return-1!==t.toLowerCase().indexOf("hit")?1:-1!==t.toLowerCase().indexOf("miss")?2:0}}},194:t=>{t.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/},{element:"host",headerName:null,regex:/(.+)/}]}},4212:t=>{t.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(t){switch(t){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},694:t=>{t.exports={cdnName:"EDGECAST",parsers:[{element:"host",headerName:"Server",regex:/\((.+)\/.+\)/},{element:"type",headerName:"X-Cache",regex:/(.+)/}],parseType:function(t){return"HIT"===t?1:2}}},6297:t=>{t.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(t){switch(t){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},6633:t=>{t.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(t){switch(t){case"c":case"x":return 1;default:return 2}}}},1743:t=>{t.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(t){if(t){if(0===t.indexOf("TCP_HIT")||0===t.indexOf("TCP_MEM_HIT")||0===t.indexOf("TCP_IMS_HIT"))return 1;if(0===t.indexOf("TCP_MISS"))return 2}return 0}}},8237:t=>{t.exports={cdnName:"NOSOTT",parsers:[{element:"host",headerName:"X-NOS-Server",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(.*)/}],parseType:function(t){switch(t){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},4622:t=>{t.exports={cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(t){if(t){if(-1!==t.indexOf("p")||-1!==t.indexOf("c"))return 1;if(-1!==t.indexOf("i")||-1!==t.indexOf("m"))return 2}return 0}}},3269:(t,e,i)=>{var s=i(4971),n=i(4045),r=i(3197);const{AnalyticsTag:a}=i(9982),{default:o}=i(3582);var d=n.extend({parse:function(t,e){if(e)this.parseLocation(e,t);else{var i=new s(t,null,null,{cache:!0,requestHeaders:this._headers});i.on(s.Event.SUCCESS,function(e){this.parseLocation(e,t)}.bind(this)),i.on(s.Event.ERROR,function(t){this.done()}.bind(this)),i.send()}},parseLocation:function(t,e){this.iterations--;var i=new RegExp(/<Location>([\s\S]+)<\/Location>/);try{this._lastManifest=t;var s=t.getResponseText(),n=i.exec(s);if(n&&n[1])var r=this._htmlDecode(n[1].replace("\n",""));r&&r!==e&&this.iterations>0?this.parse(r):this.parseFinalResource(s,e)}catch(t){o.warn(a,"Dash parse failed"),this.done()}},_htmlDecode:function(t){if("undefined"!=typeof document&&"function"==typeof document.createElement){var e=document.createElement("textarea");return e.innerHTML=t,e.childNodes&&e.childNodes.length?e.childNodes[0].nodeValue:t}return t},parseFinalResource:function(t,e){var i=new RegExp(/<BaseURL>[\r\n]*(.*?)[\r\n]*<\/BaseURL>/),s=new RegExp(/<SegmentURL[\s\S]*media="([^"]+)/),n=new RegExp(/<SegmentTemplate[\s\S]*media="([^"]+)/),r=null;try{r=i.exec(t)||n.exec(t)||s.exec(t),this._getManifestMetadata(t),r&&r[1]&&this._isFullUrl(r[1])?r[1].indexOf('"')>0?this._realResource=r[1].substr(0,r[1].indexOf('"')).replace("\n",""):this._realResource=r[1].replace("\n",""):this._realResource=e}catch(t){o.warn(a,"Dash manifest parse failed")}this.done()},_getManifestMetadata:function(t){try{var e=new RegExp(/<AdaptationSet[\s\S]*mimeType="video\/([^"]+)/).exec(t),i=null;switch(e[1]){case"mp4":case"m4s":i=r.MP4;break;case"mp2t":i=r.MPEG2;break;case"cmfv":i=r.CMF}this._transportFormat=i}catch(t){o.warn(a,"Couldnt find the transport format")}},_isFullUrl:function(t){return-1!==t.indexOf("http")},shouldExecute:function(t){var e=!0;return t&&(e=-1!==t.getResponseText().indexOf("<MPD")),e}});t.exports=d},4090:(t,e,i)=>{var s=i(4971),n=i(4045),r=i(3197);const{AnalyticsTag:a}=i(9982),{default:o}=i(3582);var d=n.extend({parse:function(t,e,i){i=i||"";var n=null;try{n=/((\S*?)(\.m3u8|\.m3u|\.ts|\.m4s|\.mp4|\.cmfv|\.m4a)((\?|;)\S*|\n|\r|$))/i.exec(t.replaceAll(",URI=","\n").replaceAll('"',"").replaceAll(",","\n"))}catch(t){o.warn(a,"Parse HLS Regex failed",t),this.done()}if(null!==n){var d=n[1].trim(),c="",u=i.lastIndexOf("/");if(0!==d.indexOf("http")&&-1!==u){if("/"===d[0]&&"/"!==d[1]){var l=i.indexOf("/")+1;l+=i.substr(l,i.length).indexOf("/")+1,l+=i.substr(l,i.length).indexOf("/"),d=i.slice(0,l)+d}else d=i.slice(0,u)+"/"+d;c=i.slice(0,u)+"/"}if(".m3u8"===n[3]||".m3u"===n[3])if(e)this._parseWithManifest(e,c,n);else{var h=new s(d,null,null,{cache:!0,requestHeaders:this._headers});h.on(s.Event.SUCCESS,function(t){this._parseWithManifest(t,c,n)}.bind(this)),h.on(s.Event.ERROR,function(t){this.done()}.bind(this)),h.send()}else{switch(n[3]){case".mp4":case".m4s":case".m4a":this._transportFormat=r.MP4;break;case".ts":this._transportFormat=r.MPEG2;break;case".cmfv":this._transportFormat=r.CMF}this._realResource=d,this.done()}}else this.done()},_parseWithManifest:function(t,e,i){this._lastManifest=t,this.parse(t.getResponseText(),null,e+i[2])},shouldExecute:function(t){var e=!0;return t&&(e=-1!==t.getResponseText().indexOf("#EXTM3U")),e}});t.exports=d},4135:(t,e,i)=>{var s=i(4971),n=i(4045).extend({parse:function(t,e){if(e)this._parseWithManifest(e);else{this._realResource=t;var i=new s(t,null,null,{cache:!0,requestHeaders:this._headers});i.on(s.Event.SUCCESS,function(t){this._parseWithManifest(t)}.bind(this)),i.on(s.Event.ERROR,function(t){this.done()}.bind(this)),i.send()}},_parseWithManifest:function(t){this._lastManifest=t;var e=t.getResponseHeaders(),i=!1;t&&t.xhr&&t.xhr.responseURL&&t.xhr.responseURL!==this._realResource?(this._realResource=t.xhr.responseURL,this.parse(this._realResource),i=!0):e.split("\n").forEach(function(t){t.startsWith("Location:")&&(this._realResource=t.slice(10),this.parse(this._realResource),i=!0)}.bind(this)),i||this.done()}});t.exports=n},4045:(t,e,i)=>{const s=i(1075).extend({constructor:function(t){this._realResource=void 0,this._lastManifest=void 0,this._transportFormat=void 0,this.iterations=3,this._headers=t},done:function(){this.iterations=3,this.emit(s.Event.DONE)},parse:function(t,e){},getResource:function(){return this._realResource},getTransportFormat:function(){return this._transportFormat},getLastManifest:function(){return this._lastManifest},shouldExecute:function(t){return!0}},{Event:{DONE:"done"}});t.exports=s},1073:(t,e,i)=>{var s=i(1075).extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(t){},isBlocking:function(t){return this._isBusy},done:function(){this._isBusy=!1,this.emit(s.Event.DONE)},hasToSend:function(t){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}});t.exports=s},5100:(t,e,i)=>{const s=i(7413),n=i(7380),r={AdPosition:s,ManifestError:i(4522),RequestMethod:i(859),Service:i(6424),WillSendEvent:i(4217),WillSendLog:i(3655),AdInsertionType:i(5073),Adapter:n,Metadata:i(6814)};t.exports=r},5073:t=>{t.exports={ClientSide:"csai",ServerSide:"ssai"}},7413:t=>{t.exports={Preroll:"pre",Midroll:"mid",Postroll:"post"}},7380:(t,e,i)=>{var s={Event:i(2839)};t.exports=s},2839:t=>{t.exports={INIT:"init",START:"start",JOIN:"join",JOIN_TIME:"joinTime",DATA_OBJECT:"data",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",MANIFEST:"manifest",PODSTART:"break-start",PODSTOP:"break-stop",QUARTILE:"quartile",VIDEO_EVENT:"video-event"}},4522:t=>{t.exports={NO_RESPONSE:"NO_RESPONSE",EMPTY:"EMPTY_RESPONSE",WRONG:"WRONG_RESPONSE"}},6814:t=>{t.exports={REQUIRED_METADATA_TIMEOUT:1e4}},859:t=>{t.exports={GET:"GET",POST:"POST"}},6424:t=>{t.exports={DATA:"/data",ADAPTERS:"/adapters",CONFIGURATION:"/configuration",APP_ANALYTICS_PLUGIN_LOGS:"/infinity/session/pluginLogs",VIDEO_PLUGIN_LOGS:"/infinity/video/pluginLogs",INIT:"/init",START:"/start",JOIN:"/joinTime",DATA_OBJECT:"/data",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",CDN:"/cdn",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"}},1310:t=>{t.exports={HDS:"HDS",HLS:"HLS",MSS:"MSS",DASH:"DASH",RTMP:"RTMP",RTP:"RTP",RTSP:"RTSP",DVB:"DVB",DVBC:"DVB-C",DVBT:"DVB-T",DVBT2:"DVB-T2",MULTICAST:"MULTICAST"}},3197:t=>{t.exports={MP4:"MP4",MPEG2:"TS",CMF:"CMF"}},4217:t=>{t.exports={WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_DATA_OBJECT:"will-send-data",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_MANIFEST:"will-send-ad-manifest",WILL_SEND_AD_POD_START:"will-send-ad-break-start",WILL_SEND_AD_POD_STOP:"will-send-ad-break-stop",WILL_SEND_AD_QUARTILE:"will-send-ad-quartile",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"}},3655:t=>{t.exports={WILL_SEND_LOG_PLUGIN_INIT:"will-send-log-plugin-init",WILL_SEND_LOG_PLUGIN_SET_OPTIONS:"will-send-log-plugin-set-options",WILL_SEND_LOG_PLUGIN_RECEIVE_DATA:"will-send-log-plugin-receive-data",WILL_SEND_LOG_INFINITY_BEGIN:"will-send-log-infinity-begin",WILL_SEND_LOG_INFINITY_START:"will-send-log-infinity-start",WILL_SEND_LOG_INFINITY_EVENT:"will-send-log-infinity-event",WILL_SEND_LOG_INFINITY_NAV:"will-send-log-infinity-nav",WILL_SEND_LOG_INFINITY_NEW_SESSION:"will-send-log-infinity-new-session"}},9675:(t,e,i)=>{var s=i(550).extend({constructor:function(t){this.plugin=t,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(){this.isBackgroundDetectorStarted||"undefined"==typeof document||(this.isBackgroundDetectorStarted=!0,document.addEventListener("visibilitychange",this.listenerReference))},stopDetection:function(){this.isBackgroundDetectorStarted&&"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1},_visibilityListener:function(t){if("undefined"!=typeof document){var e=this._getSettings();"hidden"===document.visibilityState?this._toBackground(e):"visible"===document.visibilityState&&this._toForeground(e)}},_toBackground:function(t){this.isInBackground=!0;try{if(this.plugin&&this.plugin.videos)for(var e=0;e<this.plugin.videos.getVideoKeys().length;e++){var i=this.plugin.videos.getVideoKeys()[e],s=this.plugin.videos.getAdsAdapter(i);s&&s.stopChronoView()}}catch(t){}try{if("string"==typeof t){switch(t){case"stop":this._fireStop();break;case"pause":this._firePause()}if(this.plugin.appAnalytics.appAnalyticsStarted){this.lastBeatTime=(new Date).getTime();var n=this.plugin.appAnalytics._beat.chrono.startTime?this.lastBeatTime-this.plugin.appAnalytics._beat.chrono.startTime:0;this.plugin.appAnalytics._sendBeat(n),this.plugin.appAnalytics._beat.stop()}}}catch(t){}},_toForeground:function(t){this.isInBackground=!1;try{if(this.plugin&&this.plugin.videos)for(var e=0;e<this.plugin.videos.getVideoKeys().length;e++){var i=this.plugin.videos.getVideoKeys()[e],s=this.plugin.videos.getAdsAdapter(i);s&&s.startChronoView()}}catch(t){}try{if("string"==typeof t&&t&&this.plugin.appAnalytics.appAnalyticsStarted){var n=(new Date).getTime();n-this.lastBeatTime<this.plugin.appAnalytics.sessionExpire?(this.plugin.appAnalytics._sendBeat(n-this.lastBeatTime),this.plugin.appAnalytics._beat.start()):this.plugin.appAnalytics.newSession()}}catch(t){}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]:this.plugin.deviceDetector.isPlayStation()?this.plugin.options["background.settings.playstation"]:void 0},_firePause:function(){this._fireX("firePause")},_fireStop:function(){this._fireX("fireStop")},_fireX:function(t){try{if(this.plugin&&this.plugin.videos)for(var e=0;e<this.plugin.videos.getVideoKeys().length;e++){var i=this.plugin.videos.getVideoKeys()[e];this.adsAdapter=this.plugin.videos.getAdsAdapter(i),this.adsAdapter&&this.adsAdapter[t]({},"backgroundDetector"),this.contentAdapter=this.plugin.videos.getAdapter(i),this.contentAdapter&&this.contentAdapter[t]({},"backgroundDetector")}}catch(t){}},canBlockStartCalls:function(){return this.isInBackground&&!0===this.plugin.options["background.enabled"]&&this._getSettings()}});t.exports=s},7189:(t,e,i)=>{var s=i(550).extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTVDevice=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isPlaystationDevice=null!==navigator.userAgent.match(/PlayStation/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTVDevice&&!this._isPlaystationDevice&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTVDevice&&!this._isPlaystationDevice)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTVDevice},isPlayStation:function(){return this._isPlaystationDevice}});t.exports=s},5086:(t,e,i)=>{var s=i(550).extend({constructor:function(t,e){this.plugin=t,this.video=e,this.listenerReference=this._changeListener.bind(this),this.loadReference=this._loadListener.bind(this),this.isEnabled=!1,this.pageHeight=0,this.maxHeight=0,this.startDetection()},startDetection:function(){this.isEnabled||"undefined"==typeof window||"function"!=typeof window.addEventListener||(window.addEventListener("scroll",this.listenerReference),window.addEventListener("resize",this.listenerReference),window.addEventListener("load",this.loadReference),this.isEnabled=!0)},stopDetection:function(){this.isEnabled&&"undefined"!=typeof window&&"function"==typeof window.removeEventListener&&(window.removeEventListener("scroll",this.listenerReference),window.removeEventListener("resize",this.listenerReference),window.removeEventListener("load",this.loadReference),this.isEnabled=!1)},getScrollDepth:function(){var t=null;return this.maxHeight&&this.pageHeight&&(t=Math.min(Math.trunc(this.maxHeight/this.pageHeight*100),100)),t},_loadListener:function(){if("undefined"!=typeof document){var t=document.documentElement;t&&(this.pageHeight=Math.round(t.scrollHeight,t.clientHeight,t.offsetHeight),this.maxHeight=window.innerHeight,this._updateCompletionRate())}},_changeListener:function(){if(this.pageHeight){var t=this.maxHeight;this.maxHeight=Math.max(this.maxHeight,window.pageYOffset+window.innerHeight),t!==this.maxHeight&&this._updateCompletionRate()}var e=this.video.getAdsAdapter();e&&e.flags.isStarted&&(e.getIsVisible()?e.startChronoView():e.stopChronoView())},_updateCompletionRate:function(){setTimeout(function(){this.plugin.storage.setSession("pageScrollDepth",this.getScrollDepth())}.bind(this),3e3)}});t.exports=s},5299:(t,e,i)=>{var s=i(550).extend({constructor:function(t){this.plugin=t},getAllData:function(){var t=this.getNonRandomData();return t.timestamp=this.getTimestamp(),t},getNonRandomData:function(){var t={};return t.userAgent=this.getUserAgent(),t.threads=this.getVirtualCores(),t.language=this.getLanguage(),t.langList=this.getAvailableLanguages(),t.resolution=this.getResolution(),t.colorDepth=this.getColorDepth(),t.deviceMemory=this.getMemory(),t.touchscreen=this.getTouchscreen(),t.localStorage=this.getLocalStorage(),t.sessionStorage=this.getSessionStorage(),t.cookiesAvailable=this.getCookiesAvailable(),t.flashAvailable=this.getHasFlash(),t.timeZone=this.getTimeZone(),t.plugins=this.getPluginList(),t},getUserAgent:function(){return this._getNavigatorValue("userAgent")},getVirtualCores:function(){return this._getNavigatorValue("hardwareConcurrency")},getLanguage:function(){return this._getNavigatorValue("language")},getAvailableLanguages:function(){return this._getNavigatorValue("languages")},getResolution:function(){var t=null;try{this._getNavigatorValue("screen")&&(t=navigator.screen.width.toString()+navigator.screen.height.toString())}catch(t){}return t},getColorDepth:function(){var t=null;try{this._getNavigatorValue("screen")&&(t=navigator.screen.colorDepth)}catch(t){}return t},getMemory:function(){return this._getNavigatorValue("deviceMemory")},getTouchscreen:function(){return this._getNavigatorValue("maxTouchPoints")||!1},getLocalStorage:function(){var t=!1;try{t="undefined"!=typeof localStorage}catch(t){}return t},getSessionStorage:function(){var t=!1;try{t="undefined"!=typeof sessionStorage}catch(t){}return t},getCookiesAvailable:function(){return this._getNavigatorValue("cookieEnabled")||!1},getHasFlash:function(){var t=!1;try{var e=this._getNavigatorValue("plugins");t=e&&"object"==typeof e["Shockwave Flash"]||"undefined"!=typeof window&&window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){}return t},getPluginList:function(){var t=null;try{var e=this._getNavigatorValue("plugins");if(e&&0!==e.length){for(var i="",s=0;s<navigator.plugins.length;s++)i+=navigator.plugins[s].description+" "+navigator.plugins[s].filename+" "+navigator.plugins[s].name+" ";t=i}}catch(t){}return t},getTimeZone:function(){var t=null;try{t=(new Date).getTimezoneOffset().toString()}catch(t){}return t},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator},_getNavigatorValue:function(t){var e=null;try{this._navigatorCheck()&&(e=navigator[t])}catch(t){}return e}});t.exports=s},6274:(t,e,i)=>{var s=i(5299),n=i(550),r=i(1167);const{default:a}=i(99);var o=n.extend({constructor:function(){this.dataExtractor=new s,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var t=this.dataExtractor.getAllData();this.key=this._hashFunction(t),a.getInstance().getCoreStorage().setLocal("npawDeviceUUID",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(t){var e=t;return"string"!=typeof t&&(e=JSON.stringify(t)),r(e)},_reset:function(){this.key=void 0},getPreviousKey:function(){return a.getInstance().getCoreStorage().getLocal("npawDeviceUUID")}});t.exports=o},1167:t=>{t.exports=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,s,n,r,a;return n=2147483648&t,r=2147483648&e,a=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(s=1073741824&e)?2147483648^a^n^r:i|s?1073741824&a?3221225472^a^n^r:1073741824^a^n^r:a^n^r}function s(t,s,n,r,a,o,d){return t=i(t,i(i(function(t,e,i){return t&e|~t&i}(s,n,r),a),d)),i(e(t,o),s)}function n(t,s,n,r,a,o,d){return t=i(t,i(i(function(t,e,i){return t&i|e&~i}(s,n,r),a),d)),i(e(t,o),s)}function r(t,s,n,r,a,o,d){return t=i(t,i(i(function(t,e,i){return t^e^i}(s,n,r),a),d)),i(e(t,o),s)}function a(t,s,n,r,a,o,d){return t=i(t,i(i(function(t,e,i){return e^(t|~i)}(s,n,r),a),d)),i(e(t,o),s)}function o(t){var e,i="",s="";for(e=0;e<=3;e++)i+=(s="0"+(t>>>8*e&255).toString(16)).substr(s.length-2,2);return i}var d,c,u,l,h,p,f,g,m,v=Array();for(v=function(t){for(var e,i=t.length,s=i+8,n=16*((s-s%64)/64+1),r=Array(n-1),a=0,o=0;o<i;)a=o%4*8,r[e=(o-o%4)/4]=r[e]|t.charCodeAt(o)<<a,o++;return a=o%4*8,r[e=(o-o%4)/4]=r[e]|128<<a,r[n-2]=i<<3,r[n-1]=i>>>29,r}(t=function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?e+=String.fromCharCode(s):s>127&&s<2048?(e+=String.fromCharCode(s>>6|192),e+=String.fromCharCode(63&s|128)):(e+=String.fromCharCode(s>>12|224),e+=String.fromCharCode(s>>6&63|128),e+=String.fromCharCode(63&s|128))}return e}(t)),p=1732584193,f=4023233417,g=2562383102,m=271733878,d=0;d<v.length;d+=16)c=p,u=f,l=g,h=m,p=s(p,f,g,m,v[d+0],7,3614090360),m=s(m,p,f,g,v[d+1],12,3905402710),g=s(g,m,p,f,v[d+2],17,606105819),f=s(f,g,m,p,v[d+3],22,3250441966),p=s(p,f,g,m,v[d+4],7,4118548399),m=s(m,p,f,g,v[d+5],12,1200080426),g=s(g,m,p,f,v[d+6],17,2821735955),f=s(f,g,m,p,v[d+7],22,4249261313),p=s(p,f,g,m,v[d+8],7,1770035416),m=s(m,p,f,g,v[d+9],12,2336552879),g=s(g,m,p,f,v[d+10],17,4294925233),f=s(f,g,m,p,v[d+11],22,2304563134),p=s(p,f,g,m,v[d+12],7,1804603682),m=s(m,p,f,g,v[d+13],12,4254626195),g=s(g,m,p,f,v[d+14],17,2792965006),p=n(p,f=s(f,g,m,p,v[d+15],22,1236535329),g,m,v[d+1],5,4129170786),m=n(m,p,f,g,v[d+6],9,3225465664),g=n(g,m,p,f,v[d+11],14,643717713),f=n(f,g,m,p,v[d+0],20,3921069994),p=n(p,f,g,m,v[d+5],5,3593408605),m=n(m,p,f,g,v[d+10],9,38016083),g=n(g,m,p,f,v[d+15],14,3634488961),f=n(f,g,m,p,v[d+4],20,3889429448),p=n(p,f,g,m,v[d+9],5,568446438),m=n(m,p,f,g,v[d+14],9,3275163606),g=n(g,m,p,f,v[d+3],14,4107603335),f=n(f,g,m,p,v[d+8],20,1163531501),p=n(p,f,g,m,v[d+13],5,2850285829),m=n(m,p,f,g,v[d+2],9,4243563512),g=n(g,m,p,f,v[d+7],14,1735328473),p=r(p,f=n(f,g,m,p,v[d+12],20,2368359562),g,m,v[d+5],4,4294588738),m=r(m,p,f,g,v[d+8],11,2272392833),g=r(g,m,p,f,v[d+11],16,1839030562),f=r(f,g,m,p,v[d+14],23,4259657740),p=r(p,f,g,m,v[d+1],4,2763975236),m=r(m,p,f,g,v[d+4],11,1272893353),g=r(g,m,p,f,v[d+7],16,4139469664),f=r(f,g,m,p,v[d+10],23,3200236656),p=r(p,f,g,m,v[d+13],4,681279174),m=r(m,p,f,g,v[d+0],11,3936430074),g=r(g,m,p,f,v[d+3],16,3572445317),f=r(f,g,m,p,v[d+6],23,76029189),p=r(p,f,g,m,v[d+9],4,3654602809),m=r(m,p,f,g,v[d+12],11,3873151461),g=r(g,m,p,f,v[d+15],16,530742520),p=a(p,f=r(f,g,m,p,v[d+2],23,3299628645),g,m,v[d+0],6,4096336452),m=a(m,p,f,g,v[d+7],10,1126891415),g=a(g,m,p,f,v[d+14],15,2878612391),f=a(f,g,m,p,v[d+5],21,4237533241),p=a(p,f,g,m,v[d+12],6,1700485571),m=a(m,p,f,g,v[d+3],10,2399980690),g=a(g,m,p,f,v[d+10],15,4293915773),f=a(f,g,m,p,v[d+1],21,2240044497),p=a(p,f,g,m,v[d+8],6,1873313359),m=a(m,p,f,g,v[d+15],10,4264355552),g=a(g,m,p,f,v[d+6],15,2734768916),f=a(f,g,m,p,v[d+13],21,1309151649),p=a(p,f,g,m,v[d+4],6,4149444226),m=a(m,p,f,g,v[d+11],10,3174756917),g=a(g,m,p,f,v[d+2],15,718787259),f=a(f,g,m,p,v[d+9],21,3951481745),p=i(p,c),f=i(f,u),g=i(g,l),m=i(m,h);return(o(p)+o(f)+o(g)+o(m)).toLowerCase()}},1075:(t,e,i)=>{var s=i(550),n=i(6477),r=s.extend({on:function(t,e){if(this._listeners=this._listeners||{},"function"==typeof e)return this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},off:function(t,e){if(this._listeners=this._listeners||{},this._listeners[t]){var i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}return this},emit:function(t,e){return this._listeners=this._listeners||{},e=e||{},n(this._listeners[t])&&this._listeners[t].forEach(this._eachCallback.bind(this,t,e)),n(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,t,e)),this},_eachCallback:function(t,e,i){"function"==typeof i&&i({type:t,data:e,target:this})}});t.exports=r},1311:t=>{t.exports=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var n in s)s.hasOwnProperty(n)&&(e[n]=s[n])}return e}},8538:t=>{var e=function(){};t.exports=function(t){if(arguments.length>1)throw Error("Second argument not supported");if(null===t)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw TypeError("Argument must be an object");return e.prototype=t,new e}},6477:t=>{t.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},8827:(t,e,i)=>{var s=i(550),n=i(232),r=s.extend({constructor:function(t){if(this.appAnalytics=t.appAnalytics,this.timeObject=void 0,this.playerSetup=void 0,this.myTimesObject={},this.perfObject=void 0,"undefined"!=typeof window&&"function"==typeof window.addEventListener&&(window.addEventListener("load",this._windowLoaded.bind(this)),window.performance&&window.performance.timing)){try{"function"==typeof window.performance.getEntriesByType&&(this.perfObject=window.performance)}catch(t){}this.timeObject=window.performance.timing}try{if("function"==typeof PerformanceObserver){const t=new PerformanceObserver(((t,e)=>{const i=t.getEntries();this.myTimesObject.largestContentfulPaint=i[i.length-1].renderTime}));PerformanceObserver.supportedEntryTypes.indexOf("largest-contentful-paint")>-1&&t.observe({entryTypes:["largest-contentful-paint"]})}}catch(t){}},_windowLoaded:function(){this.myTimesObject.onLoad=(new Date).getTime(),this._getEnoughFPS(),setTimeout(this._fireLoadTimesEvent.bind(this),1e3)},_fireLoadTimesEvent:function(){this._getLastMetrics(),this.appAnalytics&&this.appAnalytics.fireEvent("loadTimes",{},this._getAllValues())},_getAllValues:function(){const t={PageLoadTime:this.getPageLoadTime(),DNSTime:this.getDnsTime(),TCPTime:this.getTcpTime(),HandshakeTime:this.getHandshakeTime(),DomReadyTime:this.getDomReadyTime(),BackendTime:this.getBackendTime(),FrontendTime:this.getFrontendTime(),VisualReady:this.getTimeToVisuallyReady(),TimeToInteractive:this.getTimeToInteractive(),JsTime:this.getJSTime(),CssTime:this.getCSSTime(),ImageTime:this.getImageTime(),FontTime:this.getFontTime(),AvgReqLatency:this.getAvgReqLatency(),MaxReqLatency:this.getMaxReqLatency(),FirstPaint:this.getFirstPaint(),FirstContentfulPaint:this.getFirstContentfulPaint(),LargestContentfulPaint:this.getLargestContentfulPaint(),SpeedIndex:this.getSpeedIndex()};for(const e in t)null===t[e]||void 0===t[e]||t[e]<0?delete t[e]:t[e]=Math.round(t[e]);return t},getPageLoadTime:function(){let t;return this.timeObject&&(t=this.timeObject.loadEventEnd-this.timeObject.navigationStart),t},getPlayerStartupTime:function(){let t;return this.timeObject&&this.playerSetup&&(t=this.playerSetup-this.timeObject.navigationStart),t},getDnsTime:function(){let t;return this.timeObject&&(t=this.timeObject.domainLookupEnd-this.timeObject.domainLookupStart),t},getTcpTime:function(){let t;return this.timeObject&&(t=this.timeObject.connectEnd-this.timeObject.connectStart),t},getHandshakeTime:function(){let t;return this.timeObject&&this.timeObject.secureConnectionStart&&(t=this.timeObject.connectEnd-this.timeObject.secureConnectionStart),t},getDomReadyTime:function(){let t;return this.timeObject&&(t=this.timeObject.domComplete-this.timeObject.navigationStart),t},getBackendTime:function(){let t;return this.timeObject&&(t=this.timeObject.responseStart-this.timeObject.navigationStart),t},getFrontendTime:function(){let t;return this.timeObject&&(t=this.myTimesObject.onLoad-this.timeObject.responseStart),t},getTimeToVisuallyReady:function(){const t=this.myTimesObject.firstPaint||0;return this.timeObject?Math.max(t,this.timeObject.domContentLoadedEventEnd-this.timeObject.navigationStart||0):t||void 0},getTimeToInteractive:function(){if(this.myTimesObject.fps&&this.getTimeToVisuallyReady())return Math.max(this.myTimesObject.fps,this.getTimeToVisuallyReady());setTimeout((()=>{this.getTimeToInteractive()}),500)},getJSTime:function(){return this._getXTime("script")},getCSSTime:function(){return this._getXTime("css")},getImageTime:function(){return this._getXTime("img")},getFontTime:function(){return this._getXTime("css",[".woff",".otf",".ttf"])},getAvgReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){let e=0,i=0;const s=this.perfObject.getEntriesByType("resource");for(var t in s)s[t].requestStart&&s[t].responseStart&&(i+=s[t].responseStart-s[t].requestStart),e++;return i/e}}catch(t){}},getFirstPaint:function(){return this.myTimesObject?this.myTimesObject.firstPaint:void 0},getFirstContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.firstContentfulPaint:void 0},getLargestContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.largestContentfulPaint:void 0},getMaxReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){const t=this.perfObject.getEntriesByType("resource");let e=0;for(const i in t)t[i].requestStart&&t[i].responseStart&&(e=Math.max(e,t[i].responseStart-t[i].requestStart));return e}}catch(t){}},getSpeedIndex:function(){let t;if("undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.getEntriesByType)try{t=n()}catch(t){}return t},_getXTime:function(t,e){let i=0;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){const n=this.perfObject.getEntriesByType("resource");for(const r in n)if(n[r].initiatorType===t)if(e){let t=!1;for(var s in e)n[r].name.indexOf(e[s]>0)&&(t=!0);t&&(i+=n[r].duration)}else i+=n[r].duration}}catch(t){}return Math.round(i)||void 0},_getLastMetrics:function(){let t,e;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){const i=this.perfObject.getEntriesByType("paint");for(const s in i)"first-paint"===i[s].name?t=i[s].startTime:"first-contentful-paint"===i[s].name&&(e=i[s].startTime)}}catch(t){}!t&&this.timeObject&&(t=this.timeObject.msFirstPaint-this.timeObject.navigationStart),this.myTimesObject.firstPaint=t,this.myTimesObject.firstContentfulPaint=e,this.getTimeToInteractive()},_getEnoughFPS:function(){if(!this.timeObject||"undefined"==typeof window)return!0;{const t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(){};this.preFPS=(new Date).getTime(),t((()=>{const t=(new Date).getTime();t<this.preFPS+50?this.myTimesObject.fps=t-this.timeObject.navigationStart:setTimeout((()=>this._getEnoughFPS()),50)}))}},setPlayerSetupTime:function(){this.playerSetup=this.playerSetup||(new Date).getTime()}});t.exports=r},4833:(t,e,i)=>{var s=i(550).extend({getCdnTraffic:function(){let t;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn)t=CdnBalancerStats.cdn.totalDownloadedBytes;else if("undefined"!=typeof Streamroot)t=this._getStreamrootPeerObject("cdn",!1)||this._getStreamrootInstanceObject("cdnDownload");else if("undefined"!=typeof peer5&&peer5.getStats)t=peer5.getStats().totalHttpDownloaded;else if("undefined"!=typeof teltoo&&teltoo.getStats){var e=teltoo.getStats();t=e.totalReceivedBytes-e.p2pReceivedBytes}return t},getMultiCdnInfo:function(){let t;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn&&CdnBalancerStats.cdn.cdns){const e=CdnBalancerStats.p2p;t={P2P:{downloaded_bytes:e.downloadedBytes,uploaded_bytes:e.uploadedBytes,downloaded_chunks:e.downloadedSegments,uploaded_chunks:e.uploadedSegments,errors:e.failedRequests?e.failedRequests.total:0,missed_downloaded_chunks:e.failedRequests?e.failedRequests.absent:0,timeout_errors:e.failedRequests?e.failedRequests.timeout:0,other_errors:e.failedRequests?e.failedRequests.error:0,late_uploaded_chunks:e.discardedUploadedSegments,late_uploaded_bytes:e.discardedUploadedBytes,late_downloaded_bytes:e.discardedDownloadedBytes,time:e.downloadMillis,active_peers:e.activePeers,peers:e.totalPeers}},CdnBalancerStats.cdn.cdns.forEach((function(e){t[e.name]={downloaded_bytes:e.bytes,downloaded_chunks:e.chunks,errors:e.failures,time:e.downloadMillis}}))}return t},getSegmentDuration:function(){if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.segmentDuration)return CdnBalancerStats.segmentDuration},getBalancerResponseId:function(){if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn)return CdnBalancerStats.cdn.responseUUID},getP2PTraffic:function(){let t;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?t=CdnBalancerStats.p2p.downloadedBytes:"undefined"!=typeof Streamroot?t=this._getStreamrootPeerObject("p2p",!0)||this._getStreamrootInstanceObject("dnaDownload"):"undefined"!=typeof peer5&&peer5.getStats?t=peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats&&(t=teltoo.getStats().p2pReceivedBytes),t},getUploadTraffic:function(){let t;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?t=CdnBalancerStats.p2p.uploadedBytes:"undefined"!=typeof Streamroot?t=this._getStreamrootPeerObject("upload",!0)||this._getStreamrootInstanceObject("dnaUpload"):"undefined"!=typeof peer5&&peer5.getStats&&(t=peer5.getStats().totalP2PUploaded),t},getIsP2PEnabled:function(){let t=!1;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p)t=CdnBalancerStats.p2p.downloadEnabled;else if("undefined"!=typeof Streamroot)if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var e in Streamroot.peerAgents)t=t||Streamroot.peerAgents[e].isP2PEnabled;else Streamroot.instances&&Streamroot.instances.forEach((function(e){t=t||e.dnaDownloadEnabled||e.dnaUploadEnabled}));else"undefined"!=typeof peer5&&peer5.isEnabled?t=peer5.isEnabled():"undefined"!=typeof teltoo&&(t=!0);return t},_getStreamrootPeerObject:function(t,e){let i="";if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(const s in Streamroot.peerAgents){const n=Streamroot.peerAgents[s];!n.stats||e&&!n.isP2PEnabled||(i+=n.stats[t])}return i.length>0?i:void 0},_getStreamrootInstanceObject:function(t){let e="";return Streamroot.instances&&Streamroot.instances.forEach((function(i){i.stats&&i.stats.currentContent&&(e+=i.stats.currentContent[t])})),e.length>0?e:void 0}});t.exports=s},232:t=>{var e=function(t){var i,s,n=(t=t||window).document,r=function(e){var i=!1;if(e.getBoundingClientRect){var s=e.getBoundingClientRect();(i={top:Math.max(s.top,0),left:Math.max(s.left,0),bottom:Math.min(s.bottom,t.innerHeight||n.documentElement.clientHeight),right:Math.min(s.right,t.innerWidth||n.documentElement.clientWidth)}).bottom<=i.top||i.right<=i.left?i=!1:i.area=(i.bottom-i.top)*(i.right-i.left)}return i},a=function(t,e){if(e){var i=r(t);i&&o.push({url:e,area:i.area,rect:i})}},o=[],d=[];try{var c=t.performance.timing.navigationStart;!function(){for(var i=n.getElementsByTagName("*"),s=/url\(.*(http.*)\)/gi,d=0;d<i.length;d++){var c=i[d],u=t.getComputedStyle(c);if("IMG"===c.tagName&&a(c,c.src),u["background-image"]){s.lastIndex=0;var l=s.exec(u["background-image"]);l&&l.length>1&&a(c,l[1].replace('"',""))}if("IFRAME"===c.tagName)try{var h=r(c);if(h){var p=e(c.contentWindow);p&&o.push({tm:p,area:h.area,rect:h})}}catch(t){}}}(),function(){for(var e={},i=t.performance.getEntriesByType("resource"),s=0;s<i.length;s++)e[i[s].name]=i[s].responseEnd;for(var n=0;n<o.length;n++)"tm"in o[n]||(o[n].tm=void 0!==e[o[n].url]?e[o[n].url]:0)}(),function(){"msFirstPaint"in t.performance.timing&&(i=t.performance.timing.msFirstPaint-c);for(var e=t.performance.getEntriesByType("paint"),s=0;s<e.length;s++)"first-paint"===e[s].name&&(i=e[s].startTime);if(void 0===i||i<0||i>12e4){i=t.performance.timing.responseStart-c;for(var r={},a=n.getElementsByTagName("head")[0].children,o=0;o<a.length;o++){var d=a[o];"SCRIPT"===d.tagName&&d.src&&!d.async&&(r[d.src]=!0),"LINK"===d.tagName&&"stylesheet"===d.rel&&d.href&&(r[d.href]=!0)}for(var u=t.performance.getEntriesByType("resource"),l=!1,h=0;h<u.length;h++)if(l||!r[u[h].name]||"script"!==u[h].initiatorType&&"link"!==u[h].initiatorType)l=!0;else{var p=u[h].responseEnd;(void 0===i||p>i)&&(i=p)}}i=Math.max(i,0)}(),function(){for(var e={0:0},s=0,r=0;r<o.length;r++){var a=i;"tm"in o[r]&&o[r].tm>i&&(a=o[r].tm),void 0===e[a]&&(e[a]=0),e[a]+=o[r].area,s+=o[r].area}var c=Math.max(n.documentElement.clientWidth,t.innerWidth||0)*Math.max(n.documentElement.clientHeight,t.innerHeight||0);if(c>0&&(c=.1*Math.max(c-s,0),void 0===e[i]&&(e[i]=0),e[i]+=c,s+=c),s){for(var u in e)e.hasOwnProperty(u)&&d.push({tm:u,area:e[u]});d.sort((function(t,e){return t.tm-e.tm}));for(var l=0,h=0;h<d.length;h++)l+=d[h].area,d[h].progress=l/s}}(),function(){if(d.length){s=0;for(var t=0,e=0,n=0;n<d.length;n++){var r=d[n].tm-t;r>0&&e<1&&(s+=(1-e)*r),t=d[n].tm,e=d[n].progress}}else s=i}()}catch(t){}return s};t.exports=e},9264:(t,e,i)=>{var s=n,n={noConflict:function(){return n=s,this}};n.VERSION=i(9965),n.polyfills=i(8465),n.polyfills(),n.Object=i(550),n.Emitter=i(1075);const{default:r}=i(3582);n.Log=r,n.Log.loadLevelFromUrl(),n.Util=i(8661),n.HybridNetwork=i(4833),n.Chrono=i(3598),n.Timer=i(1516),n.Constants=i(5100),n.Transform=i(1073),n.ResourceTransform=i(4609),n.CdnParser=i(6082),n.HlsParser=i(4090),n.DashParser=i(3269),n.LocationheaderParser=i(4135),n.Options=i(7499),n.Plugin=i(1870),n.Storage=i(4828),n.RequestBuilder=i(3569),n.PlayheadMonitor=i(4795),n.Adapter=i(2176),n.adapters={},n.BackgroundDetector=i(9675),n.DeviceDetector=i(7189),n.UUIDGenerator=i(6274),n.registerAdapter=function(t,e){this.adapters[t]=e}.bind(n),n.unregisterAdapter=function(t){this.adapters[t]=null}.bind(n),t.exports=n},550:(t,e,i)=>{var s=i(1311),n=i(8538),r=function(){};r.prototype={constructor:function(){}},r.extend=function(t,e){var i,r=this;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},s(i,r,e),i.prototype=n(r.prototype),t&&s(i.prototype,t),i.prototype.constructor=i,i.__super__=r.prototype,i},t.exports=r},7316:(t,e,i)=>{var s=i(550);const{default:n}=i(3582),{AnalyticsTag:r}=i(9982);var a=s.extend({exists:function(t){return a.Dictionary.hasOwnProperty(t)},getNewName:function(t){var e=a.Dictionary[t];return n.warn(r,'The option "'+t+'" is deprecated, use "'+e+'" instead'),e}},{Dictionary:{httpSecure:"app.https",username:"user.name",anonymousUser:"user.anonymousId",obfuscateIp:"user.obfuscateIp",userType:"user.type","content.title2":"content.program","background.settings.iphone":"background.settings.iOS","parse.hls":"parse.manifest","parse.dash":"parse.manifest","parse.locationHeader":"parse.manifest","extraparam.1":"content.customDimension.1","extraparam.2":"content.customDimension.2","extraparam.3":"content.customDimension.3","extraparam.4":"content.customDimension.4","extraparam.5":"content.customDimension.5","extraparam.6":"content.customDimension.6","extraparam.7":"content.customDimension.7","extraparam.8":"content.customDimension.8","extraparam.9":"content.customDimension.9","extraparam.10":"content.customDimension.10","extraparam.11":"content.customDimension.11","extraparam.12":"content.customDimension.12","extraparam.13":"content.customDimension.13","extraparam.14":"content.customDimension.14","extraparam.15":"content.customDimension.15","extraparam.16":"content.customDimension.16","extraparam.17":"content.customDimension.17","extraparam.18":"content.customDimension.18","extraparam.19":"content.customDimension.19","extraparam.20":"content.customDimension.20","ad.extraparam.1":"ad.customDimension.1","ad.extraparam.2":"ad.customDimension.2","ad.extraparam.3":"ad.customDimension.3","ad.extraparam.4":"ad.customDimension.4","ad.extraparam.5":"ad.customDimension.5","ad.extraparam.6":"ad.customDimension.6","ad.extraparam.7":"ad.customDimension.7","ad.extraparam.8":"ad.customDimension.8","ad.extraparam.9":"ad.customDimension.9","ad.extraparam.10":"ad.customDimension.10"}});t.exports=a},5129:(t,e,i)=>{var s=i(550),n=i(4828),r=s.extend({constructor:function(){this.storage=new n("npawOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var t=this._getValidId();this.storage.setLocal(t,""),this.viewList.push(t),this.storage.setLocal("views",this.viewList),this.actualView=t},addEvent:function(t,e){if("/start"===t&&this._newView(),"/init"===t)return null;if(!this.actualView)return null;var i='{"request":"'+t.slice(1)+'",';for(var s in i+='"unixtime":'+Date.now()+",",e){if(void 0===e[s])break;i+='"'+s+'":',"code"===s?i+='"CODE_PLACEHOLDER",':"sessionId"===s?i+='"SESSION_PLACEHOLDER",':"sessionRoot"===s?i+='"ROOT_PLACEHOLDER",':"string"==typeof e[s]?i+='"'+e[s]+'",':"object"==typeof e[s]?i+='"'+JSON.stringify(e[s]).replace(/"/g,'\\"')+'",':i+=e[s]+","}i=i.slice(0,-1),i+="}";var n=this.storage.getLocal(this.actualView);""!==n&&(n+=","),this.storage.setLocal(this.actualView,n+i)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var t=0;;){var e=this.viewList[t];if(this.givenIds.indexOf(e)<0)return this.givenIds.push(e),["["+this.storage.getLocal(e)+"]",e];t++}return[null,null]},removeView:function(t){this.storage.removeLocal(t);var e=this.viewList.indexOf(t);-1!==e&&this.viewList.splice(e,1),-1!==(e=this.givenIds.indexOf(t))&&this.givenIds.splice(e,1),this.storage.setLocal("views",this.viewList.toString()),t===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var t="";this.storage.getLocal("views")?t=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===t?this.viewList=[]:"function"==typeof t.split&&(this.viewList=t.split(","))},_getValidId:function(){var t=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(t)>=0?this._getValidId():t},sent:function(){this.givenIds=[]}});t.exports=r},7499:(t,e,i)=>{const s=i(550),n=i(7316),{default:r}=i(3582),a=i(3197),o=i(1310),d=i(859),{AnalyticsTag:c}=i(9982);var u=s.extend({constructor:function(t){this.enabled=!0,this.authToken=void 0,this.authType="Bearer",this.preventZombieViews=!0,this.offline=!1,this.referer=void 0,this.referral=void 0,this.disableCookies=!0,this.forceCookies=!1,this.disableStorage=!1,this["user.email"]=void 0,this["user.type"]=void 0,this["user.name"]=void 0,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=void 0,this["user.privacyProtocol"]=void 0,this["parse.manifest"]=!1,this["parse.manifest.auth"]={},this["parse.cdnNameHeader"]=["x-cdn-forward"],this["parse.cdnNodeHeader"]="",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Amazon","Cloudfront","Level3","Fastly","Highwinds","Telefonica","Edgecast","NosOtt"],this["parse.fdsResponseHost"]=void 0,this["parse.cdnSwitchHeader"]=!1,this["parse.cdnTTL"]=60,this["network.ip"]=void 0,this["network.isp"]=void 0,this["network.connectionType"]=void 0,this["device.id"]=void 0,this["device.code"]=void 0,this["device.model"]=void 0,this["device.brand"]=void 0,this["device.type"]=void 0,this["device.name"]=void 0,this["device.osName"]=void 0,this["device.osVersion"]=void 0,this["device.browserName"]=void 0,this["device.browserVersion"]=void 0,this["device.browserType"]=void 0,this["device.browserEngine"]=void 0,this["device.EDID"]=void 0,this["device.isAnonymous"]=!1,this["content.transactionCode"]=void 0,this["content.resource"]=void 0,this["content.isLive"]=void 0,this["content.isLive.noSeek"]=!1,this["content.isLive.noMonitor"]=!1,this["content.title"]=void 0,this["content.program"]=void 0,this["content.duration"]=void 0,this["content.fps"]=void 0,this["content.segmentDuration"]=void 0,this["content.bitrate"]=void 0,this["content.totalBytes"]=void 0,this["content.sendTotalBytes"]=!1,this["content.throughput"]=void 0,this["content.rendition"]=void 0,this["content.cdn"]=void 0,this["content.cdnNode"]=void 0,this["content.cdnType"]=void 0,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=void 0,this["content.transportFormat"]=void 0,this["content.package"]=void 0,this["content.saga"]=void 0,this["content.tvShow"]=void 0,this["content.season"]=void 0,this["content.episodeTitle"]=void 0,this["content.channel"]=void 0,this["content.id"]=void 0,this["content.imdbId"]=void 0,this["content.gracenoteId"]=void 0,this["content.type"]=void 0,this["content.genre"]=void 0,this["content.language"]=void 0,this["content.autodetect.language"]=!0,this["content.subtitles"]=void 0,this["content.autodetect.subtitles"]=!0,this["content.contractedResolution"]=void 0,this["content.cost"]=void 0,this["content.price"]=void 0,this["content.playbackType"]=void 0,this["content.drm"]=void 0,this["content.encoding.videoCodec"]=void 0,this["content.encoding.audioCodec"]=void 0,this["content.encoding.codecSettings"]=void 0,this["content.encoding.codecProfile"]=void 0,this["content.encoding.containerFormat"]=void 0,this["ad.metadata"]={},this["ad.campaign"]=void 0,this["ad.creativeId"]=void 0,this["ad.provider"]=void 0,this["ad.resource"]=void 0,this["ad.title"]=void 0,this["ad.duration"]=void 0,this["ad.expectedPattern"]=void 0,this["ad.givenAds"]=void 0,this["ad.breaksTime"]=void 0,this["ad.expectedBreaks"]=void 0,this["ad.givenBreaks"]=void 0,this["ad.ignore"]=!1,this["ad.blockerDetected"]=void 0,this["ad.postRollTimeout"]=1e3,this["app.name"]=void 0,this["app.releaseVersion"]=void 0,this["app.https"]=!0,this["background.enabled"]=!0,this["background.settings"]=void 0,this["background.settings.android"]="stop",this["background.settings.iOS"]="stop",this["background.settings.desktop"]=void 0,this["background.settings.tv"]="stop",this["background.settings.playstation"]="stop",this["smartswitch.configCode"]=void 0,this["smartswitch.groupCode"]=void 0,this["smartswitch.contractCode"]=void 0,this["content.customDimensions"]={},this["content.customDimension.1"]=void 0,this["content.customDimension.2"]=void 0,this["content.customDimension.3"]=void 0,this["content.customDimension.4"]=void 0,this["content.customDimension.5"]=void 0,this["content.customDimension.6"]=void 0,this["content.customDimension.7"]=void 0,this["content.customDimension.8"]=void 0,this["content.customDimension.9"]=void 0,this["content.customDimension.10"]=void 0,this["content.customDimension.11"]=void 0,this["content.customDimension.12"]=void 0,this["content.customDimension.13"]=void 0,this["content.customDimension.14"]=void 0,this["content.customDimension.15"]=void 0,this["content.customDimension.16"]=void 0,this["content.customDimension.17"]=void 0,this["content.customDimension.18"]=void 0,this["content.customDimension.19"]=void 0,this["content.customDimension.20"]=void 0,this["ad.customDimension.1"]=void 0,this["ad.customDimension.2"]=void 0,this["ad.customDimension.3"]=void 0,this["ad.customDimension.4"]=void 0,this["ad.customDimension.5"]=void 0,this["ad.customDimension.6"]=void 0,this["ad.customDimension.7"]=void 0,this["ad.customDimension.8"]=void 0,this["ad.customDimension.9"]=void 0,this["ad.customDimension.10"]=void 0,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this["errors.fatal"]=[],this["errors.nonFatal"]=[],this["errors.ignore"]=[],this["pause.ignoreSmallEvents"]=!0,this["check.playerExists"]=!0,this["check.appAnalytics.autoBegin"]=!1,this["check.appAnalytics.enabled"]=!0,this["debug.playerLogs.enabled"]=!1,this["debug.pluginLogs.enabled"]=!1,this["check.videoAnalytics.enabled"]=!0,this["lma.refresh.configuration.enabled"]=!1,this["lma.refresh.configuration.seconds"]=300,this.linkedViewId=void 0,this.waitForMetadata=!1,this.pendingMetadata=[],this.method=d.GET,this["playhead.monitor"]=!0,this["readyState.monitor"]=!0,this["adapters.overwrite"]=!1,this["adapters.templates"]={},this["adapters.properties"]={},this.enableExtraMetricCollection=!1,this.renditionQueryInterval=250,this.enableLegacyBufferBehaviour=!1,this.ignoreSeekInTimeUpdate=!1,this.checkVideoBufferInPlayheadMonitor=!1,this.setOptions(t)},setOptions:function(t,e,i=!1){let s,a=!1;if(void 0===e&&(e=this,a=!0,s=new n),void 0!==t)for(var o in t){let n,d=!1;a&&(this.hasOwnProperty(o)||(s.exists(o)?(n=s.getNewName(o),d=!0):"function"!=typeof t[o]&&r.warn(c,'The option "'+o+'" does not exist, so it cannot be set'))),i||"object"==typeof e[o]&&void 0!==e[o]&&!Array.isArray(e[o])&&"parse.cdnNode.list"===o?this.setOptions(t[o],e[o]):d?e[n]=t[o]:e[o]=t[o]}},setExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=20&&(t=t.slice(0,20));t.length<20;)t.push(void 0);t.forEach(((t,e)=>{this["content.customDimension."+(e+1).toString()]=t}))}},setCustomDimensions:function(){u.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=10&&(t=t.slice(0,10));t.length<10;)t.push(void 0);t.forEach(((t,e)=>{this["ad.customDimension."+(e+1).toString()]=t}))}},setAdCustomDimensions:function(){u.prototype.setAdExtraParams.apply(this,arguments)},setEnableLegacyBufferBehaviour:function(){u.prototype.setEnableLegacyBufferBehaviour.apply(this,arguments)}},{StreamingProtocol:o,TransportFormat:a,RequestMethod:d});t.exports=u},1870:(t,e,i)=>{var s=i(1075),n=i(5100),r=i(8661);const{default:a}=i(3582);var o=i(829);const{default:d}=i(5657);var c=i(7499),u=i(4828),l=(i(5129),i(3569)),h=i(4609),p=i(8827),f=i(9675),g=i(7189),m=i(6274);const{default:v}=i(7829),{Method:y,AnalyticsTag:T}=i(9982),{default:S}=i(99),{default:E}=i(6443),{default:b}=i(9743);var A=s.extend({constructor:function(t,e,s,n){if(A.instance)return e&&(a.notice(T,"Set Options for already existing instance"),A.instance.setOptions(e),A.instance.storage.updateStorageOptions(A.instance.options.disableCookies,A.instance.options.forceCookies,A.instance.options.disableStorage)),s&&(a.notice(T,"Set Adapter for already existing instance"),A.instance.setAdapter(s)),a.warn(T,"Only a single plugin instance can be created on npaw context"),A.instance;this.options=new c(e),this.storage=new u(null,this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.utils=i(8661),this.uuidGenerator=new m,this.videos=new o(this),this.analyticsRequestHandler=new d(this),this.adapterTemplates={},this.appAnalytics=t,this.requestBuilder=new l,this.resourceTransform=new h(this),this.lastEventTime=null,this.browserLoadTimes=new p(this),this.deviceDetector=new g,this.backgroundDetector=new f(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection(),s&&this.setAdapter(s),this._logInitPluginEvent(e),navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((t=>{"Windows"===navigator.userAgentData.platform&&(this.majorPlatformVersion=parseInt(t.platformVersion.split(".")[0]))})),A.instance=this,this.fetchTvDeviceModelInfo()},addOnWillSendRequestListener(t){this.analyticsRequestHandler.onWillSendVideoRequestListeners.push(t)},removeOnWillSendRequestListener(t){this.analyticsRequestHandler.onWillSendVideoRequestListeners=this.analyticsRequestHandler.onWillSendVideoRequestListeners.filter((e=>e!==t))},destroy:function(){this.videos.removeAllAdapters(),this.videos.videos={}},_setAdapterTemplates:function(t){this.adapterTemplates=t},_receiveConfiguration:function(t){try{if(t.target.response.configurationOptions){var e=t.target.response.configurationOptions;this.options.setOptions(e,this.options),this.videos.updateAllOptions(e)}this.isRefreshLMAConfigurationEnabled()&&this.fastDataTransform&&this.fastDataTransform._createConfigurationInterval()}catch(t){}},_reset:function(t){this.videos.resetVideo(t)},setOptions:function(t){if(this._logSetOptionsEvent(t),t){"boolean"==typeof t["parse.manifest"]&&t["parse.manifest"]&&(t.waitForMetadata=!0,t.pendingMetadata||(t.pendingMetadata=[]),t.pendingMetadata.push("parsedResource")),this.options.setOptions(t),this.storage.updateStorageOptions(this.options.disableCookies,this.options.forceCookies,this.options.disableStorage);for(const e of this.videos.getVideoKeys())this.setVideoOptions(t,e);"boolean"==typeof t["background.enabled"]&&(t["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection())}S.getInstance().registerCommonVariable(E.Products.VIDEO_ANALYTICS,E.AnalyticsVariables.METHOD_OPTION,b.methodFromString(t.method))},setVideoOptions:function(t,e){e=e||"default",t&&e&&this.videos.existsVideo(e)&&Object.keys(t).length>0&&this.videos.getVideo(e).setVideoOptions(t)},updateCustomMetrics:function(t,e){e=e||"default",t&&this.videos.existsVideo(e)&&Object.keys(t).length>0&&this.videos.getVideo(e).updateCustomMetrics(t)},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})},getPingTime:function(){return S.getInstance().getFastDataService().getPingTime()},fetchTvDeviceModelInfo(){if(!this.options["device.model"]){const t=this;"undefined"!=typeof webOS?webOS.service.request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["modelName"]},onComplete:function(e){e.returnValue?t.lgDeviceModel=e.modelName:a.debug(T,"Could not get LG device model name")}}):"undefined"!=typeof webapis&&void 0!==webapis.productinfo&&(this.samsungDeviceModel=webapis.productinfo.getRealModel())}},_logInitPluginEvent:function(t){var e={logs:t,logAction:"initPlugin",logType:"pluginMethod"};this._sendPluginLogs(e,this.isMethodPostEnabled())},_logSetAdapterEvent:function(t){var e={adapter:t,logAction:"setAdapter",logType:"pluginMethod"};this._sendPluginLogs(e,this.isMethodPostEnabled())},_logSetOptionsEvent:function(t){var e={logs:t,logAction:"setOptions",logType:"pluginMethod"};this._sendPluginLogs(e,this.isMethodPostEnabled())},_logReceiveDataEvent:function(t){var e="";t.data&&t.data.target&&t.data.target.response&&t.data.target.response.msg&&(e=JSON.parse(t.data.target.response.msg));var i={logs:e,logAction:"receiveData",logType:"internalMethod"};this._sendPluginLogs(i,this.isMethodPostEnabled())},_sendPluginLogs:function(t,e){if(e=e||!1,this.isPluginLogsEnabled()&&(t&&t.logType&&t.logAction&&a.notice(T,"PluginLog "+t.logType+": Action "+t.logAction),this.analyticsRequestHandler&&null!==(t=this.requestBuilder.buildParams(t,n.Service.VIDEO_PLUGIN_LOGS,this)))){var i=e?y.POST:y.GET;const s=new v(n.Service.VIDEO_PLUGIN_LOGS,t,"",i);this.analyticsRequestHandler.sendRequest(s)}}},{Event:n.WillSendEvent});r.assign(A.prototype,i(3958)),r.assign(A.prototype,i(4911)),r.assign(A.prototype,i(8907)),r.assign(A.prototype,i(4861)),r.assign(A.prototype,i(96)),A.instance=null,t.exports=A},3958:(t,e,i)=>{const{default:s}=i(3582);var n=i(2176),r=i(1846);const{default:a}=i(4243),{AnalyticsTag:o}=i(9982);var d={registerAdapter:function(t,e,i,d){if(!e)return void s.error(o,"Register Adapter needs an adapter to initialize");if(i=i||{},d=d||"default",this.videos.existsVideo(d))i=i||{},this.videos.getVideo(d).mergeOptions(i),this.setAdapter(new n(d,this.videos.getVideo(d),this,this.adapterTemplates,t,e),d);else{var c=new r(d,this,this.options,null,null);this.getNextViewIndex(c),i=i||{},c.setVideoOptions(i),this.videos.setVideo(c);var u=new n(d,c,this,this.adapterTemplates,t,e);this.setAdapter(u,d)}a.getInstance().registeredPlayer(!0);let l=i["content.resource"];!l&&this.videos.existsAdapter(d)&&(l=this.videos.getAdapter(d).getURLToParse(),l||(l=this.videos.getAdapter(d).getResource())),this.resourceTransform.init(l)},setAdapter:function(t,e){if(e=e||"default",this.browserLoadTimes&&this.browserLoadTimes.setPlayerSetupTime(),t.isSetAdapter())s.warn(o,"Adapters can only be added to a single plugin");else{var i=this.getAdapter(e);i&&(t.flags=i.flags,t.chronos=i.chronos,t.fireEventsStruct=i.fireEventsStruct),this.removeAdapter(e),this.videos.setAdapter(t,e)}},getAdapter:function(t){return t=t||"default",this.videos.getAdapter(t)},removeAdapter:function(t){t=t||"default",this.videos.existsVideo(t)&&this.videos.removeAdapter(this.contentAdapterListeners,t)},getNextViewIndex:function(t){t.nextView();let e=!0;for(;e;){let i=!1;for(const e of this.videos.getVideoKeys().filter((e=>e!==t.getVideoKey())))if(t.getViewCode()===this.videos.getVideo(e).getViewCode()){i=!0;break}i&&t.nextView(),e=i}}};t.exports=d},4911:(t,e,i)=>{var s=i(2176),n=i(1846);const{default:r}=i(4243);var a={registerAdsAdapter:function(t,e,i,r){if(e)if(r=r||"default",this.videos.existsVideo(r))this.videos.getVideo(r).mergeOptions(i),this.setAdsAdapter(new s(r,this.videos.getVideo(r),this,this.adapterTemplates,t,e),r);else{var a=new n(r,this,this.options,null,null);a.mergeOptions(i),this.videos.setVideo(a);var o=new s(r,a,this,this.adapterTemplates,t,e);this.setAdsAdapter(o,r)}else Log.error(AnalyticsTag,"Register Ads Adapter needs an adapter to initialize")},updateAdsAdapter:function(t,e){e=e||"default",t&&(videoObj=this.videos.getVideo(e),videoObj&&videoObj.getAdapter()&&(adsAdapter=videoObj.getAdapter().getAdapterClass(t),adsAdapter&&videoObj.setAdsAdapter(adsAdapter,this,!0)))},getAdsAdapter:function(t){t=t||"default";const e=this.videos.getVideo(t);return void 0!==e?e.getAdsAdapter():void 0},setAdsAdapter:function(t,e){e=e||"default",this.videos.getVideo(e).setAdsAdapter(t,this),r.getInstance().registeredAdsPlayer(!0)},removeAdsAdapter:function(t){t=t||"default",this.videos.existsVideo(t)&&this.videos.getVideo(t).removeAdsAdapter()}};t.exports=a},8907:(t,e,i)=>{i(9965);var s=i(8661),n=i(859);const{default:r}=i(99),{default:a}=i(6443);var o={getAccountCode:function(){return r.getInstance().getFastDataService().getAccountCode()},getUsername:function(t){return this._getGenericOptionsValue("user.name",t)},getPluginVersion:function(){return r.getPluginVersion()},getRequestNumber:function(){return Math.random()},getUserType:function(t){return this._getGenericOptionsValue("user.type",t)},getAnonymousUser:function(t){return this._getGenericOptionsValue("user.anonymousId",t)},getReferer:function(){let t=this.options.referer||"";return!t&&"undefined"!=typeof window&&window.location&&(t=window.location.href),t},getReferral:function(){let t=this.options.referral||"";return t||"undefined"==typeof document||(t=document.referrer),t},getLanguage:function(){let t;return"undefined"!=typeof navigator&&(t=navigator.language),t},getScreenResolution:function(){let t;try{if(window&&window.screen){const e=window.devicePixelRatio||1;t=window.screen.width*e+"x"+window.screen.height*e}}catch(t){}return t},getDeviceInfo:function(t){const e={};return this.getDeviceCode(t)&&(e.deviceCode=this.getDeviceCode(t)),this.getModel(t)&&(e.model=this.getModel(t)),this.getBrand(t)&&(e.brand=this.getBrand(t)),this.getDeviceType(t)&&(e.deviceType=this.getDeviceType(t)),this.getDeviceName(t)&&(e.deviceName=this.getDeviceName(t)),this.getOsName(t)&&(e.osName=this.getOsName(t)),this.getOsVersion(t)&&(e.osVersion=this.getOsVersion(t)),this.getBrowserName(t)&&(e.browserName=this.getBrowserName(t)),this.getBrowserVersion(t)&&(e.browserVersion=this.getBrowserVersion(t)),this.getBrowserType(t)&&(e.browserType=this.getBrowserType(t)),this.getBrowserEngine(t)&&(e.browserEngine=this.getBrowserEngine(t)),e!=={}?e:void 0},getDeviceCode:function(t){return this._getGenericOptionsValue("device.code",t)},getModel:function(t){return this._getGenericOptionsValue("device.model",t)?this._getGenericOptionsValue("device.model",t):this.lgDeviceModel?this.lgDeviceModel:this.samsungDeviceModel?this.samsungDeviceModel:void 0},getBrand:function(t){return this._getGenericOptionsValue("device.brand",t)},getDeviceType:function(t){return this._getGenericOptionsValue("device.type",t)},getDeviceName:function(t){return this._getGenericOptionsValue("device.name",t)},getOsName:function(t){return this._getGenericOptionsValue("device.osName",t)},getOsVersion:function(t){let e=this._getGenericOptionsValue("device.osVersion",t);return void 0===e&&navigator&&navigator.userAgentData&&this.majorPlatformVersion&&"Windows"===navigator.userAgentData.platform&&this.majorPlatformVersion>=13&&(e="11"),e},getBrowserName:function(t){return this._getGenericOptionsValue("device.browserName",t)},getBrowserVersion:function(t){return this._getGenericOptionsValue("device.browserVersion",t)},getBrowserType:function(t){return this._getGenericOptionsValue("device.browserType",t)},getBrowserEngine:function(t){return this._getGenericOptionsValue("device.browserEngine",t)},getIsBlocked:function(t){return this._getGenericOptionsValue("ad.blockerDetected",t)},isMethodPostEnabled:function(){return this.options.method&&this.options.method.toUpperCase()===n.POST},getDeviceUUID:function(t){let e;return!t["device.isAnonymous"]&&t["device.id"]?t["device.id"]:(this.options["device.isAnonymous"]||(e=this.options["device.id"]||this.uuidGenerator.getKey()),e)},getLibVersion:function(){return r.getPluginVersion()},getAppName:function(t){return this._getGenericOptionsValue("app.name",t)},getAppReleaseVersion:function(t){return this._getGenericOptionsValue("app.releaseVersion",t)},getIp:function(t){return this._getGenericOptionsValue("network.ip",t)},getIsp:function(t){return this._getGenericOptionsValue("network.isp",t)},getConnectionType:function(t){return this._getGenericOptionsValue("network.connectionType",t)},getEDID:function(t){const e=this._getGenericOptionsValue("device.EDID",t);return e?e.toString():void 0},getObfuscateIp:function(t){return this._getGenericOptionsValue("user.obfuscateIp",t)},getPrivacyProtocol:function(t){let e=this._getGenericOptionsValue("user.privacyProtocol",t);return"string"==typeof e&&(e=e.toLowerCase()),"optin"===e||"optout"===e?e:void 0},getCustomDimensions:function(t){const e=this._getGenericOptionsValue("content.customDimensions",t);return"object"==typeof e?e:void 0},getExtraparam1:function(t){return this._getGenericOptionsValue("content.customDimension.1",t)},getExtraparam2:function(t){return this._getGenericOptionsValue("content.customDimension.2",t)},getExtraparam3:function(t){return this._getGenericOptionsValue("content.customDimension.3",t)},getExtraparam4:function(t){return this._getGenericOptionsValue("content.customDimension.4",t)},getExtraparam5:function(t){return this._getGenericOptionsValue("content.customDimension.5",t)},getExtraparam6:function(t){return this._getGenericOptionsValue("content.customDimension.6",t)},getExtraparam7:function(t){return this._getGenericOptionsValue("content.customDimension.7",t)},getExtraparam8:function(t){return this._getGenericOptionsValue("content.customDimension.8",t)},getExtraparam9:function(t){return this._getGenericOptionsValue("content.customDimension.9",t)},getExtraparam10:function(t){return this._getGenericOptionsValue("content.customDimension.10",t)},getExtraparam11:function(t){return this._getGenericOptionsValue("content.customDimension.11",t)},getExtraparam12:function(t){return this._getGenericOptionsValue("content.customDimension.12",t)},getExtraparam13:function(t){return this._getGenericOptionsValue("content.customDimension.13",t)},getExtraparam14:function(t){return this._getGenericOptionsValue("content.customDimension.14",t)},getExtraparam15:function(t){return this._getGenericOptionsValue("content.customDimension.15",t)},getExtraparam16:function(t){return this._getGenericOptionsValue("content.customDimension.16",t)},getExtraparam17:function(t){return this._getGenericOptionsValue("content.customDimension.17",t)},getExtraparam18:function(t){return this._getGenericOptionsValue("content.customDimension.18",t)},getExtraparam19:function(t){return this._getGenericOptionsValue("content.customDimension.19",t)},getExtraparam20:function(t){return this._getGenericOptionsValue("content.customDimension.20",t)},isParseManifest:function(t){return this._getGenericOptionsValue("parse.manifest",t)},isParseCdnNode:function(t){return this._getGenericOptionsValue("parse.cdnNode",t)},isCdnSwitch:function(t){return this._getGenericOptionsValue("parse.cdnSwitchHeader",t)},getParseCdnNodeList:function(t){return this._getGenericOptionsValue("parse.cdnNode.list",t)},getParseCdnNodeNameHeader:function(t){return this._getGenericOptionsValue("parse.cdnNameHeader",t)},getParseNodeHeader:function(t){return this._getGenericOptionsValue("parse.cdnNodeHeader",t)},canOverwriteAdapters:function(t){return s.parseBoolean(this._getGenericOptionsValue("adapters.overwrite",t))},getAdaptersProperties:function(t){return this._getGenericOptionsValue("adapters.properties",t)},getNetworkConnectionType:function(){if(!this.options.enableExtraMetricCollection||!navigator||!navigator.connection)return;const t=navigator.connection.type;return["wimax"].includes(t)?void 0:t},getNetworkCellType:function(){if(this.options.enableExtraMetricCollection&&navigator&&navigator.connection)return this.getNetworkConnectionType()&&"wifi"!==this.getNetworkConnectionType()?navigator.connection.effectiveType:"none"},getNetworkSignalStrength:function(){},getCpuUsed:function(){},getMemoryUsed:function(){if(this.options.enableExtraMetricCollection&&performance&&performance.memory)return performance.memory.usedJSHeapSize/1024/1024},getCacheStorageUsed:function(){if(!this.options.enableExtraMetricCollection)return;let t=0;if("undefined"!=typeof localStorage&&localStorage)for(const e in localStorage)localStorage.hasOwnProperty(e)&&(t+=2*(localStorage[e].length+e.length));if("undefined"!=typeof sessionStorage&&sessionStorage)for(const e in sessionStorage)sessionStorage.hasOwnProperty(e)&&(t+=2*(sessionStorage[e].length+e.length));return 0!=t?t:void 0},getTransferredTraffic:function(){if(this.options.enableExtraMetricCollection)return r.getInstance().getCommonVariable(a.Products.BALANCER,a.BalancerVariables.BALANCER_TRAFFIC)},getImprovedBandwidth:function(){if(this.options.enableExtraMetricCollection)return r.getInstance().getCommonVariable(a.Products.BALANCER,a.BalancerVariables.BALANCER_BITRATE)},isAppAnalyticsAutoBegin:function(t){return s.parseBoolean(this._getGenericOptionsValue("check.appAnalytics.autoBegin",t))},isAppAnalyticsEnabled:function(t){return s.parseBoolean(this._getGenericOptionsValue("check.appAnalytics.enabled",t))},isVideoAnalyticsEnabled:function(t){return s.parseBoolean(this._getGenericOptionsValue("check.videoAnalytics.enabled",t))},isRefreshLMAConfigurationEnabled:function(t){return s.parseBoolean(this._getGenericOptionsValue("lma.refresh.configuration.enabled",t))},isPluginLogsEnabled:function(t){return s.parseBoolean(this._getGenericOptionsValue("debug.pluginLogs.enabled",t))},isPlayerLogsEnabled:function(t){return s.parseBoolean(this._getGenericOptionsValue("debug.playerLogs.enabled",t))},refreshLMAConfigurationSeconds:function(t){return this._getGenericOptionsValue("lma.refresh.configuration.seconds",t)},getPlayheadMonitorEnabled:function(t){return this._getGenericOptionsValue("playhead.monitor",t)},getReadyStateMonitorEnabled:function(t){return this._getGenericOptionsValue("readyState.monitor",t)},getPageName:function(){return this.options["content.title"]},_getGenericOptionsValue:function(t,e){return e&&e[t]?e[t]:this.options[t]}};t.exports=o},4861:t=>{t.exports={fireInit:function(t,e,i){i=i||"default",this.videos.getVideo(i).fireInit(t,e)},fireError:function(t,e,i,s,n,r){r=r||"default",this.videos.getVideo(r).fireError(t,e,i,s,n)},fireFatalError:function(t,e,i,s,n,r){r=r||"default",this.videos.getVideo(r).fireFatalError(t,e,i,s,n)},fireStop:function(t,e,i){i=i||"default",this.videos.getVideo(i).fireStop(t,e)},fireOfflineEvents:function(t,e){e=e||"default",this.videos.getVideo(e).fireOfflineEvents(t)}}},96:(t,e,i)=>{var s=i(8661);const{default:n}=i(99);var r={getFastDataConfig:function(){return this.fastDataTransform.response.msg},getHost:function(){let t=n.getInstance().getOptions().getFastDataHost();return this.fastDataTransform&&this.fastDataTransform.response&&this.fastDataTransform.response.host&&(t=this.fastDataTransform.response.host),s.addProtocol(s.stripProtocol(t),this.options["app.https"])},getFastDataHost:function(){return s.addProtocol(s.stripProtocol(n.getInstance().getOptions().getFastDataHost()),this.options["app.https"])},getSession:function(){var t=n.getInstance().getCoreStorage().getStorages("session");if("undefined"===t&&(t=void 0),!t){var e=this.getStoredData();if(e)try{t=JSON.parse(e).q.c}catch(t){}}return t},getStorageHost:function(){let t=null;const e=this.getStoredData();if(e)try{t=JSON.parse(e).q.h}catch(t){}return t?s.addProtocol(t,this.options["app.https"]):t},getStoredData:function(){return n.getInstance().getCoreStorage().getStorages("data")},getDataTime:function(){return n.getInstance().getCoreStorage().getStorages("dataTime")},setStoredData:function(t){this.storage.setStorages("data",t)},setSession:function(t){this.storage.setStorages("session",t)},setDataTime:function(t){this.storage.setStorages("dataTime",t)}};t.exports=r},3569:(t,e,i)=>{var s=i(550);const{default:n}=i(3582),{AnalyticsTag:r}=i(9982);var a=["accountCode","username","anonymousUser","rendition","deviceInfo","player","title","title2","live","segmentDuration","mediaDuration","mediaResource","parsedResource","transactionCode","properties","cdn","profile","bucket","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","dimensions","playerStartupTime","obfuscateIp","privacyProtocol","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","referer","userType","streamingProtocol","transportFormat","householdId","adsBlocked","adsExpected","deviceUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution","linkedViewId","edid","cdnBalancerResponseUUID","accur_geo_location","network_type","network_cell_type","network_signal_strengh","cpu_used","mem_used","cache_used"],o=["player","playhead","adTitle","position","adDuration","adCampaign","adCreativeId","adProvider","adResource","adPlayerVersion","adProperties","adAdapterVersion","adInsertionType","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10","fullscreen","audio","skippable","adNumber","adNumberInBreak","breakNumber"],d=s.extend({constructor:function(){this.lastSent={}},fetchParams:function(t,e,i,s,a){t=t||{},e=e||[];for(let o=0;o<e.length;o++){const c=e[o];if(t[c])continue;const u=d.getters[c];let l=!1;for(const e in s)if(s[e]&&s[e][u]){const n=s[e][u](a);void 0===n||i&&this.lastSent[c]===n||(t[c]=n,this.lastSent[c]=n),l=!0;break}l||n.warn(r,"Trying to call undefined getter "+c+":"+u)}return t},getGetters:function(){return d.getters},getRequiredMetadataParams:function(){return["live","rendition"]},buildBody:function(t,e){return this.fetchParams(void 0,d.bodyParams[t],!1,e)},buildParams:function(t,e,i,s){return t=t||{},this.fetchParams(t,d.params[e],!1,i,s),this.fetchParams(t,d.differentParams[e],!0,i,s),t},getChangedEntities:function(t){return this.fetchParams({},d.differentParams.entities,!0,t)}},{params:{"/data":["system","pluginVersion","requestNumber","username"],"/adapters":["system","pluginVersion","requestNumber"],"/configuration":["system","pluginVersion","requestNumber","appName","appReleaseVersion"],"/infinity/session/pluginLogs":["logAction","logType"],"/infinity/video/pluginLogs":["logAction","logType"],"/init":a,"/start":a,"/joinTime":["joinDuration","playhead","bitrate","accountCode","pluginVersion"],"/pause":["playhead","accountCode","pluginVersion"],"/resume":["pauseDuration","playhead","accountCode","pluginVersion"],"/seek":["seekDuration","playhead","accountCode","pluginVersion"],"/bufferUnderrun":["bufferDuration","playhead","accountCode","pluginVersion"],"/error":["player","playhead"].concat(a),"/stop":["accur_geo_location","bitrate","totalBytes","playhead","pauseDuration","metrics","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","profile","bucket","accountCode","pluginVersion"],"/infinity/video/event":[],"/adInit":o,"/adStart":o,"/adJoin":["playhead","position","adJoinDuration","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adPause":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adResume":["playhead","position","adPlayhead","adPauseDuration","adNumber","adNumberInBreak","breakNumber"],"/adBufferUnderrun":["playhead","position","adPlayhead","adBufferDuration","adNumber","adNumberInBreak","breakNumber"],"/adStop":["playhead","position","adPlayhead","adTotalDuration","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/adClick":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adError":["adPlayhead"].concat(o),"/adManifest":["givenBreaks","expectedBreaks","expectedPattern","breaksTime"],"/adBreakStart":["position","givenAds","expectedAds","breakNumber","adInsertionType"],"/adBreakStop":["position","breakNumber"],"/adQuartile":["position","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/ping":["real_traffic","improved_bandwidth_estimation","network_type","network_cell_type","network_signal_strengh","cpu_used","mem_used","cache_used","accountCode","pluginVersion","droppedFrames","playrate","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics","totalBytes","segmentDuration"],"/infinity/session/start":["accountCode","username","userType","anonymousUser","route","page","referer","referral","screenResolution","language","deviceInfo","adsBlocked","deviceUUID","libVersion","appName","appReleaseVersion","isp","connectionType","ip","obfuscateIp","privacyProtocol","dimensions","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","edid"],"/infinity/session/stop":["sessionMetrics"],"/infinity/session/nav":["route","page","scrollDepth"],"/infinity/session/beat":["sessionMetrics"],"/infinity/session/event":["accountCode"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["pluginInfo","rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage","contentId","accur_geo_location"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",segmentDuration:"getSegmentDuration",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",totalBytes:"getTotalBytes",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",parsedResource:"getParsedResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",profile:"getProfileName",bucket:"getBucketName",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",transportFormat:"getTransportFormat",obfuscateIp:"getObfuscateIp",privacyProtocol:"getPrivacyProtocol",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",dimensions:"getCustomDimensions",accur_geo_location:"getAccurateGeoLocation",network_type:"getNetworkConnectionType",network_cell_type:"getNetworkCellType",network_signal_strengh:"getNetworkSignalStrength",cpu_used:"getCpuUsed",mem_used:"getMemoryUsed",cache_used:"getCacheStorageUsed",real_traffic:"getTransferredTraffic",improved_bandwidth_estimation:"getImprovedBandwidth",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",position:"getAdPosition",adNumber:"getAdNumber",adNumberInBreak:"getAdNumberInBreak",breakNumber:"getBreakNumber",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adCreativeId:"getAdCreativeId",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",givenBreaks:"getGivenBreaks",expectedBreaks:"getExpectedBreaks",expectedPattern:"getExpectedPattern",breaksTime:"getBreaksTime",givenAds:"getGivenAds",expectedAds:"getExpectedAds",adsExpected:"getAdsExpected",adViewedDuration:"getAdViewedDuration",adViewability:"getAdViewability",fullscreen:"getIsFullscreen",audio:"getAudioEnabled",skippable:"getIsSkippable",adProvider:"getAdProvider",adInsertionType:"getAdInsertionType",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceInfo:"getDeviceInfo",edid:"getEDID",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",screenResolution:"getScreenResolution",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",page:"getPageName",playerStartupTime:"getPlayerStartupTime",pageLoadTime:"getPageLoadTime",cdnDownloadedTraffic:"getCdnTraffic",multiCdnInfo:"getMultiCdnInfo",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",cdnBalancerResponseUUID:"getBalancerResponseId",viewJson:"getOfflineView",deviceUUID:"getDeviceUUID",sessionMetrics:"getSessionMetrics",scrollDepth:"getScrollDepth",adsBlocked:"getIsBlocked",linkedViewId:"getLinkedViewId",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}});t.exports=d},4828:(t,e,i)=>{var s=i(550);const{default:n}=i(3582),{AnalyticsTag:r}=i(9982);var a=s.extend({constructor:function(t,e,i,s){this.prefix=t||"npaw",this.disableCookies=e,this.forceCookies=i,this.disabled=s},updateStorageOptions:function(t,e,i){this.disableCookies=t,this.forceCookies=e,this.disabled=i},isEnabled:function(){if(this.disabled)return!1;var t=!0;if(!this.forceCookies)try{localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(e){t=!1}return t},setLocal:function(t,e){if(this.disabled)return null;var i=null;try{!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?"undefined"!=typeof localStorage&&localStorage&&(i=localStorage.setItem(this.prefix+"."+t,e)):i=this._setCookie(this.prefix+".local."+t,e)}catch(t){n.error(r,"Npaw App Analytics needs localStorage or cookies, not supported by your browser.")}return i},getLocal:function(t){return this.disabled?null:this._localGetRemove("getItem","_getCookie",t)},removeLocal:function(t){return this.disabled?null:this._localGetRemove("removeItem","_removeCookie",t)},_localGetRemove:function(t,e,i){var s=null;try{!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?"undefined"!=typeof localStorage&&localStorage&&(s=localStorage[t](this.prefix+"."+i)):s=this[e](this.prefix+".local."+i)}catch(t){n.error(r,"Npaw App Analytics needs localStorage or cookies, not supported by your browser.")}return s},setSession:function(t,e){if(this.disabled)return null;var i=null;try{i=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage.setItem(this.prefix+"."+t,e):this._setCookie(this.prefix+".session."+t,e)}catch(t){n.error(r,"Npaw App Analytics needs sessionStorage or cookies, not supported by your browser.")}return i},getSession:function(t){return this.disabled?null:this._sessionGetRemove("getItem","_getCookie",t)},removeSession:function(t){return this.disabled?null:this._sessionGetRemove("removeItem","_removeCookie",t)},_sessionGetRemove:function(t,e,i){var s=null;try{s=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage[t](this.prefix+"."+i):this[e](this.prefix+".session."+i)}catch(t){n.error(r,"Npaw App Analytics needs sessionStorage or cookies, not supported by your browser.")}return s},getStorages:function(t){return this.disabled?null:this.getSession(t)||this.getLocal(t)},setStorages:function(t,e){if(this.disabled)return null;this.setSession(t,e),this.setLocal(t,e)},removeStorages:function(t){if(this.disabled)return null;this.removeSession(t),this.removeLocal(t)},_setCookie:function(t,e){if("undefined"!=typeof document){var i=";";"undefined"!=typeof location&&(i+="domain="+location.host.split(".").reverse().splice(0,2).reverse().join(".")+";path=/;"),document.cookie=t+"="+e+i}},_getCookie:function(t){if("undefined"!=typeof document)for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),s=0;s<i.length;s++){for(var n=i[s];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null},_removeCookie:function(t){this._setCookie(t,"")}});t.exports=a},8465:t=>{t.exports=function(){Function.prototype.bind=Function.prototype.bind||function(t){var e=Array.prototype.slice,i=this,s=e.call(arguments,1);function n(){var n=i.prototype&&this instanceof i;return i.apply(!n&&t||this,s.concat(e.call(arguments)))}return n.prototype=i.prototype,n},Array.prototype.forEach=Array.prototype.forEach||function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function!");for(var i=this.length,s=0;s<i;s++)t.call(e,this[s],s,this)},Math.trunc=Math.trunc||function(t){return isNaN(t)?NaN:t>0?Math.floor(t):Math.ceil(t)}}},1516:(t,e,i)=>{var s=i(550),n=i(3598),r=s.extend({constructor:function(t,e){this.callback=t,this.interval=e||5e3,this.isRunning=!1,this._timer=null,this.chrono=new n},start:function(){this.isRunning||(this.isRunning=!0,this._setTick())},stop:function(){if(this.isRunning=!1,this._timer)try{clearTimeout(this._timer),this._timer=null}catch(t){"undefined"!=typeof atv&&(atv.clearTimeout(this._timer),this._timer=null)}},_setTick:function(){if(this.isRunning){this.chrono.start();try{this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}catch(t){"undefined"!=typeof atv&&(this._timer=atv.setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval))}}}});t.exports=r},8661:(t,e,i)=>{const{default:s,LogLevel:n}=i(3582),{AnalyticsTag:r}=i(9982);var a={stripProtocol:function(t){var e=t;try{e=t.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(t){s.warn(r,t)}return e},parseBoolean:function(t){return"string"==typeof t||t instanceof String?"true"===t.toLowerCase():!!t},elementIsInPage:function(t){try{return t!==document.body&&document.body.contains(t)}catch(t){s.warn(r,t)}return!0},addProtocol:function(t,e){var i="http://localhost/";try{i="http://"+t,e||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?i="https://"+t:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(i="//"+t)}catch(t){s.warn(r,t)}return i},parseNumber:function(t,e){return!isNaN(t)&&t>=0&&t!==1/0&&t!==-1/0&&null!=t?t:e},logAllEvents:function(t,e,i){try{if(s.logLevel<=n.DEBUG){i=i||function(t){s.debug(r,"Event: "+t.type)};var a=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];e&&(null===e[0]?(e.shift(),a=e):a=a.concat(e));for(var o=0;o<a.length;o++)"function"==typeof t?t.call(window,a[o],i):t.on?t.on(a[o],i):t.addEventListener&&t.addEventListener(a[o],i)}}catch(t){s.error(r,t)}},buildRenditionString:function(t,e,i){1===arguments.length&&(i=t,t=null,e=null);var s=null;return t&&e&&(s=t+"x"+e),"number"==typeof i&&!isNaN(i)&&i>=1&&(s?s+="@":s="",s+=i<1e3?Math.round(i)+"bps":i<1e6?(i=Math.round(i/1e3))+"Kbps":(i=Math.round(i/1e4)/100)+"Mbps"),s},buildErrorParams:function(t,e,i){var s={};return"object"==typeof t&&null!==t?s=t:(s.errorCode=t||"FAILURE",s.msg=e||s.errorCode,s.errorMetadata=i),s},calculateAdViewability:function(t,e){var i=!0;if("undefined"!=typeof window&&t&&"function"==typeof t.getBoundingClientRect){var s=t.getBoundingClientRect();if(s.top>=window.innerHeight||s.bottom<=0||s.right<=0||s.left>=window.innerWidth)i=!1;else{var n=Math.trunc(s.height*s.width),r=s.top>0?s.top:0,a=s.bottom>window.innerHeight?window.innerHeight:s.bottom,o=s.left>0?s.left:0;i=((s.right>window.innerWidth?window.innerWidth:s.right)-o)*(a-r)*100>n*(e||50)}}return i},getMetricsFrom:function(t,e){var i=t||e;for(var s in i)if("object"!=typeof i[s]||!i[s].value){var n={};n.value=i[s],i[s]=n}return i},assign:i(1311),isArray:i(6477)};t.exports=a},9965:t=>{t.exports="7.2.40-nwf"},1846:(t,e,i)=>{var s=i(1075),n=i(3598),r=i(7499);const{default:a}=i(3582);var o=i(5100),d=i(8661);const{default:c}=i(9743);var u=i(2176),l=i(3569),h=i(4833),p=i(5086);const{default:f}=i(4243),{default:g}=i(99),{default:m}=i(7829),{default:v}=i(6443),{Method:y,AnalyticsTag:T}=i(9982);var S=s.extend({constructor:function(t,e,i,s){this._key=t,this.plugin=e,this.isInitiated=!1,this.isAdsManifestSent=!1,this.playedPostrolls=0,this.isBreakStarted=!1,this.initChrono=new n,this.options=new r(i),this._adNumber=0,this._adNumberInBreak=0,this.requestBuilder=new l,this.hybridNetwork=new h,this.resizeScrollDetector=new p(e,this),this._adapter=null,this._adsAdapter=null,s&&this.setAdapter(s,e),this._pluginLogsQueue=[],this.lastEventTime=null,this.lastKnownLocation=void 0,this.isFetchingLocation=!1,this.sendingPings=!1,this._startPings()},mergeOptions:function(t){t&&this.options.setOptions(t,this.options)},setVideoOptions:function(t){t&&this.options.setOptions(t)},updateCustomMetrics:function(t){t&&this.options.setOptions(t,void 0,!0)},getVideoKey:function(){return this._key},nextView:function(){return this._viewIndex=(new Date).getTime(),this._viewCode=g.getInstance().getFastDataSessionToken(),g.getInstance().registerCommonVariable(v.Products.VIDEO_ANALYTICS,v.AnalyticsVariables.VIEW_CODE,this._viewIndex),this.getViewCode()},getViewCode:function(){const t=g.getInstance().getFastDataSessionToken();return 0===t.length||this._viewCode&&this._viewCode===t||(this._viewCode=t),this._viewCode+(this._viewIndex?`_${this._viewIndex}`:"")},setAdapter:function(t,e){for(var i in this.plugin=e,this._adapter=t,this._adapter.setIsAds(!1),this._adapter._setAdapter=!0,this.contentAdapterListeners={},this.contentAdapterListeners[u.Event.START]=this._startListener.bind(this),this.contentAdapterListeners[u.Event.JOIN]=this._joinListener.bind(this),this.contentAdapterListeners[u.Event.DATA_OBJECT]=this._advancedDataListener.bind(this),this.contentAdapterListeners[u.Event.PAUSE]=this._pauseListener.bind(this),this.contentAdapterListeners[u.Event.RESUME]=this._resumeListener.bind(this),this.contentAdapterListeners[u.Event.SEEK_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[u.Event.SEEK_END]=this._seekEndListener.bind(this),this.contentAdapterListeners[u.Event.BUFFER_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[u.Event.BUFFER_END]=this._bufferEndListener.bind(this),this.contentAdapterListeners[u.Event.ERROR]=this._errorListener.bind(this),this.contentAdapterListeners[u.Event.STOP]=this._stopListener.bind(this),this.contentAdapterListeners[u.Event.VIDEO_EVENT]=this._videoEventListener.bind(this),this.contentAdapterListeners)this._adapter.on(i,this.contentAdapterListeners[i]);this.options.enableExtraMetricCollection&&this.shouldStartRenditionTimer()},getAdapter:function(){return this._adapter},removeAdapter:function(){try{if(this._adapter){if(this._adapter.dispose(),this.contentAdapterListeners){for(var t in this.contentAdapterListeners)this._adapter.off(t,this.contentAdapterListeners[t]);delete this.contentAdapterListeners}this._adapter=null}}catch(t){a.error(T,"Is not possible to remove adapter for video: "+this._key)}},getAdsAdapter:function(){return this._adsAdapter},fetchLocation:function(){if(this.isFetchingLocation=!0,navigator&&navigator.geolocation){const t={enableHighAccuracy:!0,timeout:1e4};this.lastKnownLocation=void 0,navigator.geolocation.getCurrentPosition((t=>{this.lastKnownLocation={latitude:t.coords.latitude,longitude:t.coords.longitude},this.isFetchingLocation=!1}),(t=>{this.isFetchingLocation=!1}),t)}else this.lastKnownLocation=void 0,this.isFetchingLocation=!1},shouldStartRenditionTimer:function(){if(!this._adapter.getAdapterClass("detectQualityChange")&&!this.renditionInterval){const t=this.options.renditionQueryInterval<100?100:this.options.renditionQueryInterval;this.renditionInterval=setInterval((()=>{const t=this._adapter.getRendition();t&&this.triggerUpdateRendition(t)}),t||250)}},triggerUpdateRendition:function(t){this.lastObservedRendition?this.lastObservedRendition!=t&&(this.lastObservedRendition=t):this.lastObservedRendition=t},fireInit:function(t,e){this.isInitiated||(!this.getAdapter()||this.getAdapter()&&!this.getAdapter().flags.isStarted)&&(this._viewIndex||this.plugin.getNextViewIndex(this),this._startPings(),this.initChrono.start(),this.isInitiated=!0,t=t||{},e&&(t.triggeredEvents=[e]),this._send(o.WillSendEvent.WILL_SEND_INIT,o.Service.INIT,t),this._adSavedError(),this._adSavedManifest(),a.notice(T,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+o.Service.INIT+", title/res: "+(t.title||t.mediaResource)+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:"")))},fireError:function(t,e,i,s,n,r){this.fireInit();var c=d.buildErrorParams(t,e,i);c.code&&delete c.code,n&&(c.triggeredEvents=[n]);try{(r=r||!1)&&this._adapter&&this._adapter.flags&&this._adapter.flags.isJoined&&((c=c||{}).errorType="fatal")}catch(t){}this._send(o.WillSendEvent.WILL_SEND_ERROR,o.Service.ERROR,c),this._adSavedError(),this._adSavedManifest(),a.notice(T,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+o.Service.ERROR+", errorType: "+c.errorType+", errorCode: "+c.errorCode+(c.triggeredEvents?", eventsTriggered: "+c.triggeredEvents:"")),"fatal"===c.errorType&&this.fireStop()},fireFatalError:function(t,e,i,s,n){this.fireError(t,e,i,s,n,!0)},fireStop:function(t,e){if(this.isInitiated||this.isStarted){this._adapter&&(this._adapter.flags.isStopped=!0,this._adapter.monitor&&this._adapter.monitor.stop()),this._adsAdapter&&this.isBreakStarted&&(this._adsAdapter.fireStop(),this._adsAdapter.fireAdBreakStop()),t=t||{},e&&(t.triggeredEvents=[e]),f.getInstance().setTriedSendingNQSStats(!0),this._send(o.WillSendEvent.WILL_SEND_STOP,o.Service.STOP,t,void 0,void 0,(()=>{f.getInstance().addNQSRequest(o.Service.STOP)}));var i=this._adapter?this._adapter.chronos:null;i&&(i.total.stop(),i.join.reset(),i.pause.reset(),i.buffer.reset(),i.seek.reset()),this.lastKnownLocation=void 0,this.observedRenditions=[],this.renditionInterval&&(clearInterval(this.renditionInterval),this.renditionInterval=void 0),a.notice(T,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+o.Service.STOP+" at "+t.playhead+"s"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:"")),this._reset()}},fireOfflineEvents:function(t){this.options&&!this.options.offline?this.isInitiated||this._adapter&&this._adapter.flags.isStarted||this._adsAdapter&&this._adsAdapter.flags.isStarted?a.error(T,"Adapters have to be stopped"):(this._offlineParams=t,g.getInstance().getFastDataService().getAccountCode()&&g.getInstance().getFastDataSessionToken()?this._generateAndSendOffline():this.offlineReference=this._generateAndSendOffline.bind(this)):a.error(T,"To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){if(this.options.disableStorage)return null;const t=this._offlineParams;for(;;){var e=this.requestBuilder.buildBody(o.Service.OFFLINE_EVENTS,[this,this.plugin]).viewJson;if(null===e[0])break;var i=this.plugin.getNextViewIndex(this),s=e[0].replace(/CODE_PLACEHOLDER/g,i.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"");this._send(o.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,o.Service.OFFLINE_EVENTS,t,s,"POST",function(t,e){this.plugin.offlineStorage.removeView(e.offlineId)}.bind(this),{offlineId:e[1]})}this.plugin.offlineStorage.sent(),this._offlineParams=null},_reset:function(){try{this._stopPings(),this._adapter&&this._adapter.flags.reset(),this._viewIndex=void 0,this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isAdsManifestSent=!1,this.initChrono.reset(),this._totalPrerollsTime=0,this.requestBuilder.lastSent.breakNumber=0,this.requestBuilder.lastSent.adNumber=0,this._savedAdManifest=null,this._savedAdError=null,this.playedPostrolls=0,this.isBreakStarted=!1,this._adNumber=0,this._adNumberInBreak=0}catch(t){}},_send:function(t,e,i,s,n,r,a){const d=c.methodFromString(n),u=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&u>this.lastEventTime+6e5&&this.plugin.getNextViewIndex(this),this.lastEventTime=e===o.Service.STOP?null:u;const l=new m(e,i,this.getVideoKey(),d,void 0,r);this.plugin.resourceTransform.parse(l),i=this.requestBuilder.buildParams(i,e,[this,this.plugin],this.options),!0===this.getIsLive()&&(i.mediaDuration=this.options["content.duration"],i.playhead=void 0),l.setParams(i),s&&l.setBody(s),l.setMethod(d),this.plugin.isMethodPostEnabled()&&l.setMethod(y.POST);const h={params:l.getParams(),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(t,h),this.plugin.analyticsRequestHandler&&(null!==i||void 0!==n)&&this.options.enabled&&(this.plugin.lastServiceSent=e,this.plugin.analyticsRequestHandler.sendRequest(l))},firePlayerLog:function(t){try{if(this.plugin.isPlayerLogsEnabled())if(this._adapter&&!this._adapter.isStarted())t.timemark=(new Date).getTime(),this._pluginLogsQueue.push(t);else{for(;this._pluginLogsQueue.length>0;){var e=this._pluginLogsQueue.shift();this._sendPlayerLog(e)}this._sendPlayerLog(t)}}catch(t){}},_sendPlayerLog:function(t){try{t&&t.logType&&t.logAction&&a.notice(T,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") PlayerLog "+t.logType+": Action "+t.logAction),this.plugin._comm&&t&&null!==(t=this.requestBuilder.buildParams(t,o.Service.VIDEO_PLUGIN_LOGS,this,this.options))&&this._send(null,o.Service.VIDEO_PLUGIN_LOGS,t)}catch(t){}}});d.assign(S.prototype,i(7319)),d.assign(S.prototype,i(948)),d.assign(S.prototype,i(6061)),d.assign(S.prototype,i(3777)),t.exports=S},7319:(t,e,i)=>{var s=i(5100),n=i(8661),r=i(2176);const{AnalyticsTag:a}=i(9982),{default:o}=i(3582),{default:d}=i(4243);var c={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(t,e,i){if(i=i||!1,t.isSetAdapter())o.warn(a,"Adapters can only be added to a single plugin");else try{for(var s in this.removeAdsAdapter(),this.plugin=e,this._adsAdapter=t,this._adsAdapter.setIsAds(!0),this.adsAdapterListeners={},this.adsAdapterListeners[r.Event.START]=this._adStartListener.bind(this),this.adsAdapterListeners[r.Event.JOIN]=this._adJoinListener.bind(this),this.adsAdapterListeners[r.Event.DATA_OBJECT]=this._adAdvancedDataListener.bind(this),this.adsAdapterListeners[r.Event.PAUSE]=this._adPauseListener.bind(this),this.adsAdapterListeners[r.Event.RESUME]=this._adResumeListener.bind(this),this.adsAdapterListeners[r.Event.BUFFER_BEGIN]=this._adBufferBeginListener.bind(this),this.adsAdapterListeners[r.Event.BUFFER_END]=this._adBufferEndListener.bind(this),this.adsAdapterListeners[r.Event.STOP]=this._adStopListener.bind(this),this.adsAdapterListeners[r.Event.ERROR]=this._adErrorListener.bind(this),this.adsAdapterListeners[r.Event.CLICK]=this._adClickListener.bind(this),this.adsAdapterListeners[r.Event.MANIFEST]=this._adManifestListener.bind(this),this.adsAdapterListeners[r.Event.PODSTART]=this._adBreakStartListener.bind(this),this.adsAdapterListeners[r.Event.PODSTOP]=this._adBreakStopListener.bind(this),this.adsAdapterListeners[r.Event.QUARTILE]=this._adQuartileListener.bind(this),this.adsAdapterListeners)this._adsAdapter.on(s,this.adsAdapterListeners[s]);i&&(o.notice(a,"Registering listeners for registered AdsAdapter"),this._adsAdapter.registerListeners())}catch(t){o.warn(a,"Problem during setAdsAdapter process")}},removeAdsAdapter:function(){if(this._adsAdapter){if(this._adsAdapter.dispose(),this.adsAdapterListeners){for(var t in this.adsAdapterListeners)this._adsAdapter.off(t,this.adsAdapterListeners[t]);delete this.adsAdapterListeners}this.resizeScrollDetector.stopDetection(),this._adsAdapter=void 0}},_adStartListener:function(t){this._adapter?(this._adapter.fireBufferEnd(null,"adStartListener"),this._adapter.fireSeekEnd(null,"adStartListener"),this.isInitiated||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this._adsAdapter&&(this._adsAdapter.chronos.viewedMax=[]);const e=t.data.params||{};e.adNumber=this.getNewAdNumber(),(this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._adsAdapter.fireManifest(),this._adsAdapter.fireAdBreakStart(),e.adNumberInBreak=this.getNewAdNumberInBreak(),d.getInstance().addNQSAdEvent(r.Event.START,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_START,s.Service.AD_START,e)):(this.adInitSent=!0,e.adNumberInBreak=this.getNewAdNumberInBreak(),d.getInstance().addNQSAdEvent(r.Event.INIT,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_INIT,s.Service.AD_INIT,e))},_adJoinListener:function(t){let e={};n.assign(e,t.data.params||{}),this.adInitSent&&!this.adStartSent&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireAdBreakStart(),d.getInstance().addNQSAdEvent(r.Event.START,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_START,s.Service.AD_START,e)),this._adsAdapter.startChronoView(),this.adConnected&&(this._adsAdapter.chronos.join.startTime=this.adConnectedTime,this._adsAdapter.chronos.total.startTime=this.adConnectedTime,this.adConnectedTime=0,this.adConnected=!1),e=t.data.params||{},d.getInstance().addNQSAdEvent(r.Event.JOIN,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_JOIN,s.Service.AD_JOIN,e),this.adInitSent=!1,this.adStartSent=!1},_adAdvancedDataListener:function(t){var e=t.data.params||{};this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_DATA_OBJECT,s.Service.DATA_OBJECT,e)},_adPauseListener:function(t){const e=t.data.params||{};this._adsAdapter.stopChronoView(),d.getInstance().addNQSAdEvent(r.Event.PAUSE,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_PAUSE,s.Service.AD_PAUSE,e)},_adResumeListener:function(t){const e=t.data.params||{};this._adsAdapter.startChronoView(),d.getInstance().addNQSAdEvent(r.Event.RESUME,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_RESUME,s.Service.AD_RESUME,e)},_adBufferBeginListener:function(t){o.notice(a,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") Ad Buffer Begin"),this._adsAdapter.stopChronoView(),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(t){const e=t.data.params||{};this._adsAdapter.startChronoView(),d.getInstance().addNQSAdEvent(r.Event.BUFFER_END,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_BUFFER,s.Service.AD_BUFFER,e)},_adStopListener:function(t){const e=t.data.params||{};if(this._adsAdapter.stopChronoView(),this._adsAdapter.flags.reset(),this._totalPrerollsTime=(this._totalPrerollsTime||0)+this._adsAdapter.chronos.total.getDeltaTime(),e.position=this.requestBuilder.lastSent.position,d.getInstance().addNQSAdEvent(r.Event.STOP,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_STOP,s.Service.AD_STOP,e),this.requestBuilder.lastSent.position===s.AdPosition.Postroll){const t=this.options["ad.expectedPattern"];this.playedPostrolls++,(this.requestBuilder.lastSent.givenAds&&this.requestBuilder.lastSent.givenAds<=this.playedPostrolls||!this.requestBuilder.lastSent.givenAds&&t&&t.post&&t.post[0]&&t.post[0]<=this.playedPostrolls)&&this._adapter.fireStop({},"_adStopListener")}this.adConnected=!0,this.adConnectedTime=(new Date).getTime()},_adErrorListener:function(t){const e=t.data.params||{};!this._adapter||this._adapter.flags.isStarted||this.isInitiated?this._blockAdError(t.data.params)||(this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireAdBreakStart()),this._adsAdapter&&this._adsAdapter.flags.isStarted||(e.adNumber=this.getNewAdNumber(),e.adNumberInBreak=this.getNewAdNumberInBreak()),this.isBreakStarted||(e.breakNumber=this.getNewBreakNumber()),d.getInstance().addNQSAdEvent(r.Event.ERROR,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_ERROR,s.Service.AD_ERROR,e)):this._savedAdError=t},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_adSavedManifest:function(){this._savedAdManifest&&(this._adManifestListener(this._savedAdManifest),this._savedAdManifest=null)},_blockAdError:function(t){const e=Date.now();return this._lastAdErrorParams&&this._lastAdErrorParams.errorCode===t.errorCode&&this._lastAdErrorParams.msg===t.msg&&this._lastAdErrorParams.adCreativeId===this.getAdCreativeId()&&this._lastAdErrorTime+5e3>e?(this._lastAdErrorTime=e,!0):(this._lastAdErrorTime=e,this._lastAdErrorParams=t,!1)},_adClickListener:function(t){const e=t.data.params||{};this._adsAdapter.stopChronoView(),d.getInstance().addNQSAdEvent(r.Event.CLICK,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_CLICK,s.Service.AD_CLICK,e)},_adManifestListener:function(t){if(!this.isAdsManifestSent){if(this._adapter&&!this._adapter.flags.isStarted&&!this.isInitiated)return void(this._savedAdManifest=t);const e=t.data.params||{};this.isAdsManifestSent=!0,d.getInstance().addNQSAdEvent(r.Event.MANIFEST,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_MANIFEST,s.Service.AD_MANIFEST,e)}},_adBreakStartListener:function(t){if(!this.isBreakStarted){this.isBreakStarted=!0,this._adapter&&this._adapter.firePause();const e=t.data.params||{};e.breakNumber=this.getNewBreakNumber(),d.getInstance().addNQSAdEvent(r.Event.PODSTART,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_POD_START,s.Service.AD_POD_START,e),this.adConnected=!1}},_adBreakStopListener:function(t){if(this.isBreakStarted){this.isBreakStarted=!1;const e=t.data.params||{};e.position=this.requestBuilder.lastSent.position,d.getInstance().addNQSAdEvent(r.Event.PODSTOP,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_POD_STOP,s.Service.AD_POD_STOP,e),this.adConnected=!1,this._adapter&&this._adapter.fireResume()}},_adQuartileListener:function(t){const e=t.data.params||{};e.quartile&&(d.getInstance().addNQSAdEvent(r.Event.QUARTILE,e),this._sendAdEventIfAllowed(s.WillSendEvent.WILL_SEND_AD_QUARTILE,s.Service.AD_QUARTILE,e))},_sendAdEventIfAllowed:function(t,e,i){this.options["ad.ignore"]||(d.getInstance().setTriedSendingNQSAdStats(!0),this._send(t,e,i,void 0,void 0,(()=>{d.getInstance().addNQSAdRequest(e)}))),o.notice(a,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+e)}};t.exports=c},948:(t,e,i)=>{const{default:s}=i(4243);var n=i(5100);const r=i(2839),{default:a}=i(3582);var o=i(8661),d=i(2176);const{AnalyticsTag:c}=i(9982),{default:u}=i(6443),{default:l}=i(99);var h={_startListener:function(t){!this.plugin.options.enableExtraMetricCollection||this.lastKnownLocation||this.isFetchingLocation||this.fetchLocation(),this.isInitiated?0!==this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime):(this._viewIndex||this.plugin.getNextViewIndex(this),this._startPings());var e=t.data.params||{};s.getInstance().addNQSEvent(d.Event.START,e);var i=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle(),r=l.getInstance().getCommonVariable(u.Products.BALANCER,u.BalancerVariables.DECISION_FINISHED);void 0===r&&(r=!0),(i=!this.options.forceInit&&i&&this._isExtraMetadataReady()&&r&&this._isRequiredMetadataReady())&&!this.isInitiated?(s.getInstance().setTriedSendingNQSStats(!0),this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,e,void 0,void 0,(()=>{s.getInstance().addNQSRequest(n.Service.START)})),this._adSavedError(),this._adSavedManifest(),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.START+", title/res: "+(e.title||e.mediaResource)+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:"")),this.isStarted=!0):this.isInitiated||(this.isInitiated=!0,this._adapter.chronos.join.start(),s.getInstance().setTriedSendingNQSStats(!0),this._send(n.WillSendEvent.WILL_SEND_INIT,n.Service.INIT,e,void 0,void 0,(()=>{s.getInstance().addNQSRequest(n.Service.INIT)})),this._adSavedError(),this._adSavedManifest(),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.INIT+", title/res: "+(e.title||e.mediaResource)+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:""))),this.options.enableExtraMetricCollection&&this.shouldStartRenditionTimer()},_retryStart:function(t){var e=l.getInstance().getCommonVariable(u.Products.BALANCER,u.BalancerVariables.DECISION_FINISHED);void 0===e&&(e=!0),this._isExtraMetadataReady()&&e&&this._isRequiredMetadataReady()&&(this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,{triggeredEvents:["retryStart"]}),this.startDelayed=!1)},_joinListener:function(t){var e={};if(o.assign(e,t.data.params||{}),this._adsAdapter&&this._adsAdapter.flags.isStarted)this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0;else{if(s.getInstance().addNQSEvent(d.Event.JOIN,e),this._adapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._totalPrerollsTime||0),(new Date).getTime()),this._totalPrerollsTime=0),this.isInitiated&&!this.isStarted){var i=l.getInstance().getCommonVariable(u.Products.BALANCER,u.BalancerVariables.DECISION_FINISHED);void 0===i&&(i=!0),this._isExtraMetadataReady()&&i&&this._isRequiredMetadataReady()?(s.getInstance().setTriedSendingNQSStats(!0),this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,e,void 0,void 0,(()=>{s.getInstance().addNQSRequest(n.Service.START)}))):this.startDelayed=!0,this._adSavedError(),this._adSavedManifest(),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.START+", title/res: "+(e.title||e.mediaResource)+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:"")),this.isStarted=!0}e=t.data.params||{},s.getInstance().addNQSEvent(r.JOIN_TIME,e),this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireAdBreakStop(),s.getInstance().setTriedSendingNQSStats(!0),this._send(n.WillSendEvent.WILL_SEND_JOIN,n.Service.JOIN,e,void 0,void 0,(()=>{s.getInstance().addNQSRequest(n.Service.JOIN)})),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.JOIN+", duration: "+e.joinDuration+"ms"+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:""))}},_advancedDataListener:function(t){var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_DATA_OBJECT,n.Service.DATA_OBJECT,e),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.DATA_OBJECT+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:""))},_pauseListener:function(t){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var e=t.data.params||{};s.getInstance().addNQSEvent(d.Event.PAUSE,e),this._send(n.WillSendEvent.WILL_SEND_PAUSE,n.Service.PAUSE,e),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.PAUSE+" at "+e.playhead+"s"+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:""))},_resumeListener:function(t){this._adsAdapter&&this.isBreakStarted&&!this._adsAdapter.flags.isStarted&&this._adsAdapter.fireAdBreakStop();var e=t.data.params||{};s.getInstance().addNQSEvent(d.Event.RESUME,e),this._send(n.WillSendEvent.WILL_SEND_RESUME,n.Service.RESUME,e),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.RESUME+", duration: "+e.pauseDuration+"ms"+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:"")),this._adapter.chronos.pause.reset()},_seekBufferBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.pause(),t.type&&t.type.includes("buffer")?(s.getInstance().addNQSEvent(d.Event.BUFFER_BEGIN,{}),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+t.type+", eventsTriggered: "+this._adapter.fireEventsStruct.buffer)):(s.getInstance().addNQSEvent(d.Event.SEEK_BEGIN,{}),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+t.type+", eventsTriggered: "+this._adapter.fireEventsStruct.seek))},_seekEndListener:function(t){var e=t.data.params||{};s.getInstance().addNQSEvent(d.Event.SEEK_END,e),this._send(n.WillSendEvent.WILL_SEND_SEEK,n.Service.SEEK,e),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.SEEK+" to "+e.playhead+" in "+e.seekDuration+"ms"+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:""))},_bufferEndListener:function(t){var e=t.data.params||{};s.getInstance().addNQSEvent(d.Event.BUFFER_END,e),this._send(n.WillSendEvent.WILL_SEND_BUFFER,n.Service.BUFFER,e),a.notice(c,"["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") "+n.Service.BUFFER+" to "+e.playhead+" in "+e.bufferDuration+"ms"+(e.triggeredEvents?", eventsTriggered: "+e.triggeredEvents:""))},_errorListener:function(t){this._blockError(t.data.params)||(s.getInstance().addNQSEvent(d.Event.ERROR,t.data.params),this.fireError(t.data.params||{}),this._adSavedError(),this._adSavedManifest())},_blockError:function(t){var e=Date.now();return this._lastErrorParams&&this._lastErrorParams.errorCode===t.errorCode&&this._lastErrorParams.msg===t.msg&&this._lastErrorTime+5e3>e?(this._lastErrorTime=e,!0):(this._lastErrorTime=e,this._lastErrorParams=t,!1)},_stopListener:function(t){s.getInstance().addNQSEvent(d.Event.STOP,t.data.params),this.fireStop(t.data.params||{})},_isStopReady:function(t){let e=!1;if(!this.requestBuilder.lastSent.live&&this._adsAdapter&&this._adapter&&(!this._adapter.getPlayhead()||this._adapter.getPlayhead()>=this.requestBuilder.lastSent.mediaDuration-1)){let t=0;const i=this.options["ad.expectedPattern"];if(i&&i.post&&i.post[0])t=i.post[0];else if(this.requestBuilder.lastSent.breaksTime){if(this.requestBuilder.lastSent.position===n.AdPosition.Postroll&&(t=this.requestBuilder.lastSent.givenAds),!t&&this.requestBuilder.lastSent.breaksTime){const e=this.requestBuilder.lastSent.breaksTime;e.length>0&&this.requestBuilder.lastSent.mediaDuration&&Math.round(e[e.length-1])+1>=this.requestBuilder.lastSent.mediaDuration&&(t=1)}}else e=!0;t<=this.playedPostrolls&&(e=!0)}else e=!0;return e},_videoEventListener:function(t){s.getInstance().addNQSEvent(d.Event.VIDEO_EVENT,t.data.params),this._send(n.WillSendEvent.WILL_SEND_VIDEO_EVENT,n.Service.VIDEO_EVENT,t.data.params)},_isExtraMetadataReady:function(t){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;try{const t=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(e){if(t.hasOwnProperty(e)){if(this[t[e]])return!!this[t[e]]();if(this.plugin[t[e]])return!!this.plugin[t[e]]()}}.bind(this)).indexOf(!1)<0}catch(t){a.warn("["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") Error processing isExtraMetadataReady method.")}return!0},_isRequiredMetadataReady:function(){if((new Date).getTime()-this._adapter.chronos.join.startTime<n.Metadata.REQUIRED_METADATA_TIMEOUT){try{const t=this.requestBuilder.getGetters();return this.requestBuilder.getRequiredMetadataParams().every(function(e){if(t.hasOwnProperty(e))if("function"==typeof this[t[e]]){const i=this[t[e]]();if(null!=i&&!Number.isNaN(i))return!0}else if(this.plugin&&"function"==typeof this.plugin[t[e]]){const i=this.plugin[t[e]]();if(null!=i&&!Number.isNaN(i))return!0}return!1}.bind(this))}catch(t){a.warn("["+this.getViewCode()+"] (Video Space "+this.getVideoKey()+") Error processing _isRequiredMetadataReady method.")}return!1}return!0}};t.exports=h},6061:(t,e,i)=>{const s=i(8661),{default:n}=i(3582),r=i(9965),a=i(1310),o=i(3197),d=i(5100),{default:c}=i(99),{AnalyticsTag:u}=i(9982),{default:l}=i(6443);var h={getPlayhead:function(){var t=this._safeGetterAdapter("getPlayhead");return s.parseNumber(t,0)},getPlayrate:function(){let t=0;if(this._adapter&&this._adapter.flags&&!this._adapter.flags.isPaused)try{t=this._adapter.getPlayrate()}catch(t){n.warn(u,"An error occured while calling getPlayrate",t)}return t},getFramesPerSecond:function(){return this._safeGetterAdapter("getFramesPerSecond","content.fps")},getSegmentDuration:function(){return this.hybridNetwork.getSegmentDuration()||this._safeGetterAdapter("getSegmentDuration","content.segmentDuration")},getDroppedFrames:function(){let t=this._safeGetterAdapter("getDroppedFrames");return t||(t=this.getWebkitDroppedFrames()),s.parseNumber(t,0)},getWebkitDroppedFrames:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount)return this._adapter.tag.webkitDroppedFrameCount},getDuration:function(){const t=this._safeGetterAdapter("getDuration","content.duration")||void 0;return s.parseNumber(Math.round(t),void 0)},getBitrate:function(){let t=this._safeGetterAdapter("getBitrate","content.bitrate");return t&&-1!==t||(t=this.getWebkitBitrate()),s.parseNumber(t,-1)},getTotalBytes:function(){return this.options["content.sendTotalBytes"]?this._safeGetterAdapter("getTotalBytes","content.totalBytes"):void 0},getWebkitBitrate:function(){try{if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){let e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;e=Math.round(t/this.plugin.fastDataTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}}catch(t){}return-1},getThroughput:function(){const t=this._safeGetterAdapter("getThroughput","content.throughput");return s.parseNumber(t,-1)},getRendition:function(){return this._safeGetterAdapter("getRendition","content.rendition")},getTitle:function(){return this._safeGetterAdapter("getTitle","content.title")},getTitle2:function(){return this._safeGetterAdapter("getTitle2","content.program")},getIsLive:function(){let t=this.options["content.isLive"];return t||!1===t||(t=this._safeGetterAdapter("getIsLive")||!1),t},getResource:function(){return this._safeGetterAdapter("getResource","content.resource")},getParsedResource:function(){let t=this.plugin.resourceTransform.getResource();return t=t||this._safeGetterAdapter("getURLToParse"),t===this.getResource()?void 0:t},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){return this._safeGetterAdapter("getPlayerVersion")||""},getPlayerName:function(){return this._safeGetterAdapter("getPlayerName")||""},getCdn:function(){let t=null;return t=c.getInstance().getCommonVariable(l.Products.BALANCER,l.BalancerVariables.AS_ENABLED)?"ACTVSWIT":this.plugin.resourceTransform.getCdnName(),t||this.options["content.cdn"]},getProfileName:function(){return c.getInstance().getCommonVariable(l.Products.BALANCER,l.BalancerVariables.PROFILE_NAME)},getBucketName:function(){return c.getInstance().getCommonVariable(l.Products.BALANCER,l.BalancerVariables.BUCKET)},getPluginVersion:function(){return this.getAdapterVersion()},getAdapterVersion:function(){return this._safeGetterAdapter("getVersion")},getCdnTraffic:function(){return this._safeGetterAdapter("getCdnTraffic")||this.hybridNetwork.getCdnTraffic()},getMultiCdnInfo:function(){return this.hybridNetwork.getMultiCdnInfo()},getBalancerResponseId:function(){return this.hybridNetwork.getBalancerResponseId()},getP2PTraffic:function(){return this._safeGetterAdapter("getP2PTraffic")||this.hybridNetwork.getP2PTraffic()},getUploadTraffic:function(){return this._safeGetterAdapter("getUploadTraffic")||this.hybridNetwork.getUploadTraffic()},getIsP2PEnabled:function(){return this._safeGetterAdapter("getIsP2PEnabled")||this.hybridNetwork.getIsP2PEnabled()},getStreamingProtocol:function(){const t=this.options["content.streamingProtocol"];if(t)for(var e in a)if(a[e]===t)return t},getTransportFormat:function(){let t=this.options["content.transportFormat"];if(!t&&this.options["parse.manifest"]&&(t=this.plugin.resourceTransform.getTransportFormat()),t)for(const e in o)if(o[e]===t)return t},getHouseholdId:function(){return this._safeGetterAdapter("getHouseholdId")},getLatency:function(){return this.getIsLive()?this._safeGetterAdapter("getLatency"):void 0},getPacketLoss:function(){return this._safeGetterAdapter("getPacketLoss")},getPacketSent:function(){return this._safeGetterAdapter("getPacketSent")},getVideoMetrics:function(){return s.getMetricsFrom(this._adapter?this._adapter.getMetrics():void 0,this.options["content.metrics"])},getPlayerStartupTime:function(){return this.plugin.browserLoadTimes.getPlayerStartupTime()},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){let t=this.options["content.playbackType"];if(!t){let e=this.options["content.isLive"];"boolean"!=typeof e&&(e=this._safeGetterAdapter("getIsLive")),"boolean"==typeof e&&(t=e?"Live":"VoD")}return t},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this._safeGetterAdapter("getVideoCodec","content.encoding.videoCodec")},getAudioCodec:function(){return this._safeGetterAdapter("getAudioCodec","content.encoding.audioCodec")},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]},getLinkedViewId:function(){return this.options.linkedViewId},_safeGetterAdapter:function(t,e){let i;if(e&&this.options[e])i=this.options[e];else try{this._adapter&&"function"==typeof this._adapter[t]&&(i=this._adapter[t]())}catch(e){n.warn(u,"An error occured while calling "+t,e)}return i||void 0},getCustomDimensions:function(){const t=this.options["content.customDimensions"];return"object"==typeof t?t:void 0},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]},getPluginInfo:function(){return JSON.stringify({lib:r,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()})},getAccountCode:function(){return c.getInstance().getFastDataService().getAccountCode()},getUsername:function(){return this.options["user.name"]},getEmail:function(){return this.options["user.email"]},getNodeHost:function(){return this.options["content.cdnNode"]||this.plugin.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.plugin.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.plugin.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){let t;return this.plugin.offlineStorage&&(t=this.plugin.offlineStorage.getView()),t},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},controlPlayerExists:function(){return this.options["check.playerExists"]},ignorePauseSmallEvents:function(){return this.options["pause.ignoreSmallEvents"]},getAdPlayerVersion:function(){return this._safeGetterAdsAdapter("getPlayerVersion")||""},getAdPosition:function(){let t=d.AdPosition.Preroll;if(this._adsAdapter)try{var e=this._adsAdapter.getPosition();d.AdPosition.Preroll!==e&&d.AdPosition.Midroll!==e&&d.AdPosition.Postroll!==e||(t=e)}catch(t){n.warn(u,"An error occured while calling getAdPosition",t)}return!t&&this._adapter&&(t=this._adapter.flags.isJoined?d.AdPosition.Midroll:d.AdPosition.Preroll),t},getAdNumber:function(){return this.requestBuilder.lastSent.adNumber||0},getAdNumberInBreak:function(){return this.requestBuilder.lastSent.adNumberInBreak||0},getBreakNumber:function(){return this.requestBuilder.lastSent.breakNumber||0},getAdPlayhead:function(){const t=this._safeGetterAdsAdapter("getPlayhead");return s.parseNumber(t,0)},getAdDuration:function(){const t=this._safeGetterAdsAdapter("getDuration","ad.duration");return s.parseNumber(t,0)},getAdBitrate:function(){let t=this._safeGetterAdsAdapter("getBitrate");return t&&-1!==t||(t=this.getWebkitAdBitrate()),s.parseNumber(t,-1)},getWebkitAdBitrate:function(){try{if(this._adsAdapter&&this._adsAdapter.tag&&this._adsAdapter.tag.webkitVideoDecodedByteCount){let t=this._adsAdapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){const e=this._adsAdapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;t=Math.round(e/this.plugin.fastDataTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adsAdapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}}catch(t){}return-1},getAdTitle:function(){return this._safeGetterAdsAdapter("getTitle","ad.title")},getAdResource:function(){return this._safeGetterAdsAdapter("getResource","ad.resource")},getAdCampaign:function(){return this._safeGetterAdsAdapter("getCampaign","ad.campaign")},getAdCreativeId:function(){return this._safeGetterAdsAdapter("getCreativeId","ad.creativeId")},getAdProvider:function(){return this._safeGetterAdsAdapter("getProvider","ad.provider")},getAdAdapterVersion:function(){return this._safeGetterAdsAdapter("getVersion")},getAdMetadata:function(){return this.options["ad.metadata"]},getAdInsertionType:function(){return this._safeGetterAdsAdapter("getAdInsertionType")},getGivenBreaks:function(){return this._safeGetterAdsAdapter("getGivenBreaks","ad.givenBreaks")},getExpectedBreaks:function(){let t;const e=this.options["ad.expectedBreaks"],i=this.options["ad.expectedPattern"];if(e)t=e;else if(i)t=0,t=i.pre?i.pre.length:0,t+=i.mid?i.mid.length:0,t+=i.post?i.post.length:0;else if(this._adsAdapter)try{t=this._adsAdapter.getExpectedBreaks()}catch(t){n.warn(u,"An error occured while calling expectedBreaks",t)}return t},getExpectedPattern:function(){return this._safeGetterAdsAdapter("getExpectedPattern","ad.expectedPattern")},getBreaksTime:function(){return this._safeGetterAdsAdapter("getBreaksTime","ad.breaksTime")},getGivenAds:function(){return this._safeGetterAdsAdapter("getGivenAds","ad.givenAds")},getExpectedAds:function(){let t;try{if(this._adsAdapter){const e=this.options["ad.expectedPattern"];if(e&&this.getAdPosition()){let i=[];if(e.pre&&(i=i.concat(e.pre)),e.mid&&(i=i.concat(e.mid)),e.post&&(i=i.concat(e.post)),i.length>0){let e=this.requestBuilder.lastSent.breakNumber;e>i.length&&(e=i.length),t=i[e-1]}}else t=this._adsAdapter.getExpectedAds()}}catch(t){n.warn(u,"An error occured while calling expectedAds",t)}return t},getAdsExpected:function(){let t;try{t=this.getExpectedPattern()||this.getGivenAds()||!1}catch(t){n.warn(u,"An error occured while calling givenAds or expectedPattern",t)}return t},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1},getAdViewedDuration:function(){return this._getTimeMaxOrAcum(!0)},getAdViewability:function(){return this._getTimeMaxOrAcum()},_getTimeMaxOrAcum:function(t){let e=0;return this._adsAdapter&&this._adsAdapter.chronos.viewedMax.forEach((function(i){t?e+=i.getDeltaTime(!1):e=Math.max(i.getDeltaTime(!1),e)})),e},getAudioEnabled:function(){return this._safeGetterAdsAdapter("getAudioEnabled")},getIsSkippable:function(){return this._safeGetterAdsAdapter("getIsSkippable")},getIsFullscreen:function(){return this._safeGetterAdsAdapter("getIsFullscreen")},_safeGetterAdsAdapter:function(t,e){let i;if(e&&this.options[e])i=this.options[e];else try{this._adsAdapter&&"function"==typeof this._adsAdapter[t]&&(i=this._adsAdapter[t]())}catch(e){n.warn(u,"An error occured while calling "+t,e)}return i},getNewAdNumber:function(){let t=this.requestBuilder.lastSent.adNumber;return t&&this.requestBuilder.lastSent.position===this.getAdPosition()?t+=1:t=1,this.requestBuilder.lastSent.adNumber=t,t},getNewAdNumberInBreak:function(){return this._adNumberInBreak++,this.requestBuilder.lastSent.adNumberInBreak=this._adNumberInBreak,this._adNumberInBreak},getNewBreakNumber:function(){let t=1;return this._adNumberInBreak=0,this.requestBuilder.lastSent.breakNumber&&(t=this.requestBuilder.lastSent.breakNumber+1),t&&this.requestBuilder.lastSent.position!==this.getAdPosition()&&(t=1),this.requestBuilder.lastSent.breakNumber=t,t},getAccurateGeoLocation:function(){return this.lastKnownLocation}};t.exports=h},3777:(t,e,i)=>{const{default:s}=i(3582);var n=i(5100);const{default:r}=i(4243),{default:a}=i(99),{default:o}=i(7829),{AnalyticsTag:d,Method:c}=i(9982),{default:u}=i(9743),{default:l}=i(6443);var h={_startPings:function(){if(!this.sendingPings){var t=this.plugin.isMethodPostEnabled()?c.POST:c.GET;const e=1e3*a.getInstance().getFastDataService().getPingTime();a.getInstance().pushPeriodicDataFromCallback(this.plugin.options.offline?l.Consumer.PERSISTENT:l.Consumer.NQS,this.getVideoKey(),n.Service.PING,e,t,this._sendPing.bind(this),this._onPingSuccess.bind(this)),this.sendingPings=!0}},_onPingSuccess:function(){r.getInstance().addNQSRequest(n.Service.PING),this.lastEventTime=(new Date).getTime()},_stopPings:function(){a.getInstance().unregisterPeriodicPush(this.getVideoKey()),this.sendingPings=!1},_sendPing:function(){if(!this.plugin.analyticsRequestHandler.shouldSendStats())return;const t=(new Date).getTime(),e=this.timeSinceLastPing?t-this.timeSinceLastPing:5e3;this.timeSinceLastPing=t;var i={diffTime:e,entities:this.requestBuilder.getChangedEntities([this,this.plugin])};if(this._adapter&&(i=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(i,["pauseDuration"],!1,[this,this.plugin],this.options):this.requestBuilder.fetchParams(i,["bitrate","throughput","fps"],!1,[this,this.plugin],this.options),this._adapter.flags.isJoined&&(i=this.requestBuilder.fetchParams(i,["playhead"],!1,[this,this.plugin],this.options)),this._adapter.flags.isBuffering&&(i=this.requestBuilder.fetchParams(i,["bufferDuration"],!1,[this,this.plugin],this.options)),this._adapter.flags.isSeeking&&(i=this.requestBuilder.fetchParams(i,["seekDuration"],!1,[this,this.plugin],this.options))),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(i=this.requestBuilder.fetchParams(i,["adPlayhead","adViewedDuration","adViewability"],!1,[this,this.plugin],this.options),i=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(i,["adPauseDuration"],!1,[this,this.plugin],this.options):this.requestBuilder.fetchParams(i,["adBitrate"],!1,[this,this.plugin],this.options)),this._adsAdapter.flags.isBuffering&&(i=this.requestBuilder.fetchParams(i,["adBufferDuration"],!1,[this,this.plugin],this.options))),i=this.requestBuilder.buildParams(i,n.Service.PING,[this,this.plugin],this.options),this.controlPlayerExists()&&this._adapter&&!this._adapter.checkExistsPlayer())return s.debug(d,"Detected player no exists, and fire stop event"),void this._adapter.fireStop();r.getInstance().setTriedSendingNQSStats(!0);var a=this.plugin.isMethodPostEnabled()?c.POST:c.GET;const u=new o(n.Service.PING,i,this.getVideoKey(),a);let l=u.getVideoKey(),h=u.getService();const p=this.plugin.analyticsRequestHandler.onWillSendVideoRequestListeners;for(const t of p)t(h,l,i);return this.plugin.analyticsRequestHandler.prepareParams(u),s.verbose(d,n.Service.PING),this.startDelayed&&this._retryStart(),u.getParams()}};t.exports=h},829:(t,e,i)=>{var s=i(1075);const{default:n}=i(3582),{AnalyticsTag:r}=i(9982);var a=s.extend({constructor:function(t){this.plugin=t,this.videos={}},existsVideo:function(t){return t=t||"default",!!this.videos[t]},getVideo:function(t){if(t=t||"default",this.videos[t])return this.videos[t]},setVideo:function(t){this.videos[this._parseVideoKey(t.getVideoKey())]=t},getVideoKeys:function(){return Object.keys(this.videos)},existsAdapter:function(t){return t=t||"default",!(!this.videos[t]||!this.videos[t]._adapter)},getAdapter:function(t){if(t=t||"default",this.videos[t])return this.videos[t].getAdapter()},setAdapter:function(t,e){e=e||"default",this.videos[e]&&this.videos[e].setAdapter(t,this.plugin)},getAdsAdapter:function(t){if(t=t||"default",this.videos[t])return this.videos[t].getAdsAdapter()},removeAdapter:function(t,e){e=e||"default";try{this.videos[e]&&this.videos[e].removeAdapter()}catch(t){n.error(r,"Is not possible to remove adapter for video: "+e)}},removeAllAdapters:function(){for(const t of Object.keys(this.videos))this.videos[t].removeAdapter(),this.videos[t].removeAdsAdapter()},sendRequest:function(t,e,i,s,a,o,d,c){t=t||"default",this.videos[t]?this.videos._send(this._key,e,i,s,a,o,d,c):n.error(r,"Can't send request for not existent video object")},updateAllOptions:function(t){for(const e in this.videos)for(const i in t)this.videos[e].options[i]=t[i];t["adapters.templates"]&&(this.plugin._setAdapterTemplates(t["adapters.templates"]),this.updateAdapterTemplates(t["adapters.templates"]))},updatePingInterval:function(t){for(var e in this.videos)this.videos[e]._ping.interval=t},updateAdapterTemplates:function(t){if(t&&this.videos)for(var e in this.videos)this.videos[e]._adapter&&this.videos[e]._adapter.updateAdapterTemplates(t)},resetVideo:function(t){t=t||"default",this.video[t]&&this.video[t]._reset()},_parseVideoKey:function(t){return t||"default"}});t.exports=a}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{"use strict";i.d(s,{default:()=>Ji});var t={};i.r(t),i.d(t,{VERSION:()=>Re,addSidxSegmentsToPlaylist:()=>zt,generateSidxKey:()=>te,inheritAttributes:()=>De,parse:()=>Le,parseUTCTiming:()=>Ce,stringToMpdXml:()=>Pe,toM3u8:()=>ce,toPlaylists:()=>ve});var e=i(99),n=i(3582),r=i(9982),a=i(912);function o(){const t=["origin","1214467dpVUUC","fromCharCode","map","regex","returnRandom","endsWith","isHeaderMatch","isSubtitles","1679152akbaqs","5552280retDho","split","push","bufferToString","keys","getPath","replace","3210912fSDyrB","length","pathname","formatParameters","http://","sliceByFirstSpecial","type","url","12nERUYQ","forEach","isMedia","random","round","1954309RBoALG","getRouteAndFilename","https://","pattern","toString","findPathMach","isAudio","min","55059RYcsnU","lastIndexOf","ifByteArrayToString","list","apply","string","includes","host","slice","98OWlASR","4786960fazUek","substr","filter"];return(o=function(){return t})()}function d(t,e){const i=o();return(d=function(t,e){return i[t-=453]})(t,e)}const c=d;!function(t){const e=d,i=t();for(;;)try{if(714863==-parseInt(e(499))/1+parseInt(e(494))/2*(parseInt(e(485))/3)+-parseInt(e(456))/4+parseInt(e(495))/5+-parseInt(e(472))/6*(parseInt(e(477))/7)+parseInt(e(457))/8+parseInt(e(464))/9)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(o);class u{static[c(478)](t){const e=c,i=new URL(t),s=i[e(498)]+i[e(466)],n=s[e(486)]("/")+1;return{route:s[e(493)](0,n),fileName:s[e(493)](n)}}static[c(462)](t){return{path:new URL(t).pathname}}static delay(t){return new Promise((e=>setTimeout(e,t)))}static[c(482)](t,e,i){const s=c;let n=i[s(471)];t=t[s(458)]("?")[0];let r=new URL(t),a=new URL(e);r[s(492)]!=a.host&&(r.host=a.host,t=r[s(481)]());let o=e;if(null!=e&&""!=e)for(;!t[s(491)](o)&&o[s(491)]("/");){o[s(453)]("/")&&(o=o.substr(0,o[s(465)]-1));let t=o[s(496)](o[s(486)]("/"),o[s(465)]);if((n[s(453)](t)||n.endsWith(t+"/"))&&(n[s(453)]("/")&&(n=n.substr(0,n[s(465)]-1)),n=n[s(496)](0,n[s(486)]("/")+1)),o=o[s(496)](0,o.lastIndexOf("/")+1),o==s(479)||o==s(468))return""}return t[s(463)](o,n)}static[c(469)](t,e=!1){const i=c;let s=[t.indexOf("?")];return e&&s[i(459)](t.indexOf(";")),s=s[i(497)]((t=>-1!=t)),t[i(493)](0,Math[i(484)](...s))}static[c(474)](t){let e=!1;return a.Y4.forEach((i=>{e=e||t[d(453)](i)})),e}static isManifest(t,e=!1){const i=c;let s=!1;const n=e?u.sliceByFirstSpecial(t,e):t;return a.w2[i(473)]((t=>{s=s||n[i(453)](t)})),s}static[c(483)](t){let e=!1;return a.hj.forEach((i=>{e=e||t[d(453)](i)})),e}static[c(455)](t){const e=c;let i=!1;return a.zU[e(473)]((s=>{i=i||t[e(453)](s)})),i}static[c(460)](t){const e=c;return String[e(500)][e(489)](null,new Uint8Array(t))}static[c(503)](t){const e=c;let i="";const s=t[e(465)]-1;return s>0&&(i=t[Math[e(476)](Math[e(475)]()*s)]),i}static[c(467)](t){const e=c;return"?"+Object[e(461)](t)[e(501)]((function(e){return""===t[e]?"":e+"="+encodeURIComponent(t[e])})).join("&")}static[c(487)](t){const e=c;if(typeof t!=e(490)){const s=new Uint8Array(t);let n="";for(var i=0;i<s[e(465)];i++)n+=String[e(500)](s[i]);return n}return t}static isValidUrl(t){try{return new URL(t),!0}catch(t){return!1}}static[c(454)](t,e){const i=c;let s=!1;return e[i(470)]===i(488)?s=e[i(480)][i(501)]((t=>t))[i(491)](t):e[i(470)]===i(502)&&(s=new RegExp(e.pattern).test(t)),s}}function l(t,e){const i=p();return(l=function(t,e){return i[t-=377]})(t,e)}const h=l;function p(){const t=["Theoplayer interceptor - Intercepting request to -> ","endsWith","manifest","ifByteArrayToString","_player","headers","27653sWUyYb","1414qwoSep","_interceptor","120UdoqIQ","removeRequestInterceptor",".m3u8","unload","send","status","byteLength","2bVQPab","readyState","statusText","respondWith","verbose","_totalDownloadedBytes","load","response","5208380QhXtiP","method","25100427OsrwRj","Theoplayer interceptor - Completed request for -> ","url","onreadystatechange","string","waitUntil","_totalDownloadTime","length","6283800NNydzQ","now","responseType","setEstimator","185454ENJUPq","setRequestHeader","body","127864brpdEM","12KHFudg","responseURL","network","open","pathname","760XNoEhk","isNaN",".mpd","_cdnBalancer","type","addRequestInterceptor"];return(p=function(){return t})()}!function(t){const e=l,i=t();for(;;)try{if(402024==-parseInt(e(411))/1*(parseInt(e(421))/2)+parseInt(e(394))/3*(parseInt(e(393))/4)+-parseInt(e(414))/5*(parseInt(e(390))/6)+-parseInt(e(412))/7*(parseInt(e(399))/8)+-parseInt(e(386))/9+-parseInt(e(429))/10+parseInt(e(378))/11)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(p);class f{constructor(t,e){const i=l;this._totalDownloadedBytes=0,this[i(384)]=0,this._player=t,this[i(402)]=e}[h(427)](){const t=h;this[t(409)]&&this[t(402)]&&(this._totalDownloadedBytes=0,this[t(384)]=0,this[t(402)].useTheoplayer(),this.addRequestInterceptor())}[h(417)](){const t=h;this[t(409)].network[t(415)](this[t(413)])}[h(404)](){const t=h;this[t(413)]=e=>{const i=t;e[i(383)]((t=>{const s=i,a=new XMLHttpRequest;let o=0,d=0,c=0;"stream"===e[s(388)]?a.responseType="arraybuffer":a[s(388)]=e.responseType,a[s(381)]=i=>{const l=s;if(1===a.readyState&&e[l(403)]!==l(407)&&(o=Date[l(387)]()),2===a.readyState&&e[l(403)]!==l(407)&&(d=Date[l(387)](),c=d-o),4===a[l(422)]){const i={status:a[l(419)],statusText:a[l(423)],body:void 0};if(a[l(419)]>=200&&a[l(419)]<400){const t=new URL(e[l(380)])[l(398)];if(t[l(406)](l(416))||t[l(406)](l(401))?i[l(392)]=u[l(408)](a.response):i[l(392)]=a.response,e[l(403)]!==l(407)&&c>0){let t=Date[l(387)]()-d;this[l(384)]+=t,this[l(426)]+=a[l(428)][l(420)];let e=this[l(426)]/(this._totalDownloadTime/1e3);Number[l(400)](e)&&(e=(typeof a.response===l(382)?a[l(428)][l(385)]:a[l(428)][l(420)])/(c/1e3)),this[l(409)][l(396)][l(389)]({bandwidth:8*e,roundTripTime:c/1e3,createMeasurer:()=>{}})}e.respondWith(i)}else e[l(424)](i);n.default[l(425)](r.BalancerTag,l(379)+a[l(395)]),t()}},n.default[s(425)](r.BalancerTag,s(405)+e[s(380)]),a[s(397)](e[s(377)],e.url);for(const t in e[s(410)])a[s(391)](t,e[s(410)][t]);a[s(418)](e[s(392)])}))},this[t(409)][t(396)][t(404)](this[t(413)])}}function g(){const t=["11436128ZXkNaU","unload","947714TcACVX","13404393KqgkaH","push","8HPdjMq","load","85tpdBOc","466188cffiHk","816856yLTtPH","theoplayer","loadInterceptor","_cdnBalancer","loadedInterceptors","15153450iwptDw","removeInterceptors","12ueyBQr","3enCIwj","2212620jujweG","91IakKqe","toLowerCase"];return(g=function(){return t})()}const m=v;function v(t,e){const i=g();return(v=function(t,e){return i[t-=196]})(t,e)}!function(t){const e=v,i=t();for(;;)try{if(765286==parseInt(e(214))/1*(-parseInt(e(199))/2)+parseInt(e(215))/3*(-parseInt(e(202))/4)+parseInt(e(204))/5*(parseInt(e(205))/6)+parseInt(e(216))/7*(parseInt(e(206))/8)+parseInt(e(200))/9+-parseInt(e(211))/10+-parseInt(e(197))/11*(-parseInt(e(213))/12))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(g);class y{constructor(t){const e=v;this[e(210)]=[],this[e(209)]=t}[m(208)](t,e){const i=m;let s;t[i(196)]()===i(207)&&(s=new f(e,this._cdnBalancer)),s&&(s[i(203)](),this[i(210)][i(201)](s))}[m(212)](){const t=m;for(const e of this.loadedInterceptors)null==e||e[t(198)]()}}function T(t,e){var i=S();return(T=function(t,e){return i[t-=270]})(t,e)}function S(){var t=["forceDecisionCall","domainWhitelist","updateTime","1607480RgdnXA","88176ccQYXZ","noProbing","balanceSubtitles","119qsukBP","probeOnlyOnBanned","495SXlAku","446948gEDLXN","193945ZxjETB","isDev","dynamicRules","balanceManifests","isLive","reportTime","domainWhitelistRegex","jwtAuthType","videoId","profileName","allowSpecialDelimitersInUrl","resource","469554vOVqhM","signManifestUsingApi","balanceAudio","20uQiTGf","debug","278ktCsjJ","1315053QdnLhU","bucketName"];return(S=function(){return t})()}!function(t){for(var e=T,i=t();;)try{if(168540==-parseInt(e(270))/1*(parseInt(e(289))/2)+-parseInt(e(284))/3+parseInt(e(271))/4+parseInt(e(272))/5+-parseInt(e(296))/6*(parseInt(e(299))/7)+parseInt(e(295))/8+-parseInt(e(290))/9*(-parseInt(e(287))/10))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(S);class E{constructor(t){var e,i,s,n,r,a,o,d,c,u,l,h,p,f=T;this.isLive=!1,this[f(294)]=0,this[f(277)]=5,this[f(292)]=!1,this[f(293)]=[],this[f(278)]=[],this[f(300)]=!1,this[f(297)]=!1,this.allowSpecialDelimitersInUrl=!1,this.signManifestUsingApi=!1,this[f(275)]=!1,this[f(286)]=!0,this[f(298)]=!0,this[f(274)]={},this[f(281)]=null==t?void 0:t[f(281)],this[f(291)]=null==t?void 0:t[f(291)],this[f(276)]=(null==t?void 0:t.isLive)||!1,this.videoId=null==t?void 0:t[f(280)],this[f(283)]=null==t?void 0:t.resource,this[f(294)]=null!==(e=null==t?void 0:t[f(294)])&&void 0!==e?e:0,this[f(277)]=null!==(i=null==t?void 0:t[f(277)])&&void 0!==i?i:0,this[f(288)]=null==t?void 0:t[f(288)],this[f(273)]=null==t?void 0:t[f(273)],this.timeBetweenHeads=null==t?void 0:t.timeBetweenHeads,this[f(293)]=null!==(s=null==t?void 0:t[f(293)])&&void 0!==s?s:[],this[f(278)]=null!==(n=null==t?void 0:t[f(278)])&&void 0!==n?n:[],this[f(300)]=null!==(r=null==t?void 0:t[f(300)])&&void 0!==r&&r,this.noProbing=null!==(a=null==t?void 0:t.noProbing)&&void 0!==a&&a,this[f(282)]=null!==(o=null==t?void 0:t[f(282)])&&void 0!==o&&o,this[f(285)]=null!==(d=null==t?void 0:t[f(285)])&&void 0!==d&&d,this[f(275)]=null!==(c=null==t?void 0:t.balanceManifests)&&void 0!==c&&c,this[f(286)]=null===(u=null==t?void 0:t[f(286)])||void 0===u||u,this.balanceSubtitles=null===(l=null==t?void 0:t[f(298)])||void 0===l||l,this[f(274)]=null!==(h=null==t?void 0:t[f(274)])&&void 0!==h?h:{},this.jwtToken=null==t?void 0:t.jwtToken,this[f(279)]=null!==(p=null==t?void 0:t.jwtAuthType)&&void 0!==p?p:"Bearer"}}function b(){const t=["splice","1435585GnSPcX","2612840lpauIz","6QmYtwf","2kXCFMg","forEach","304305Ogbika","data","50301UNNqOJ","push","3730016qmlALq","5369445lnQnbL","_listeners","430213JXUDua"];return(b=function(){return t})()}function A(t,e){const i=b();return(A=function(t,e){return i[t-=167]})(t,e)}!function(t){const e=A,i=t();for(;;)try{if(686439==-parseInt(e(176))/1+parseInt(e(172))/2*(parseInt(e(174))/3)+-parseInt(e(170))/4+-parseInt(e(169))/5*(-parseInt(e(171))/6)+-parseInt(e(167))/7+parseInt(e(178))/8+parseInt(e(179))/9)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(b);class w{constructor(){this._listeners={}}on(t,e){const i=A;return!this[i(180)][t]&&(this[i(180)][t]=[]),this._listeners[t][i(177)](e),this}off(t,e){const i=A;if(this[i(180)][t])if(e){const s=this._listeners[t].indexOf(e);-1!==s&&this[i(180)][t][i(168)](s,1)}else this[i(180)][t]=[];return this}emit(t,e={},i){const s=A;return[t,"*"][s(173)]((n=>{const r=s;this[r(180)][n]&&this[r(180)][n].forEach((s=>{const n=i||r(175);s({type:t,[n]:e})}))})),this}}var _=i(1048).hp;const I=P;function N(){const t=["next","peerFailedSegmentAbsent","peerSegmentProgress","getOldestRequestTS","getDownloadedBytes","floor","_totalDownloaded","debug","from","getVersion","timeout","isDownloading","pong","getLastUploadsTraffic","_version","_totalSendTime","activeP2PSendProcesses","getByteArrayFromIdentifier","getLastBandwith","_loader","size","peerFailedSegmentTimeout","newSegmentAvailable","now","getLastDownloadsTraffic","_send","Canceling operation -> 0 ","close","getDownloadBandwidth","_totalDownloadTime","get","_peer","Close callback","This peer may timeout in ","1943230LNUSjN","_lastBandwith","sendNewSegmentAvailable","CREATEPEERCONNECTING?","sendSegment","208rESnhW","stringify","getLastLatencyP2P","sendNoSegment","_downloaded","isBehind","getSegmentMap","_onConnect","peerSegmentUpload","Absent","map","sendMap","parse","_getLastSecondsTraffic","5601KxhpdD","splice","6MEVyIw","getLastResponses","error","unshift","_ip","concat","peerCanceledSegmentUpload","throw","getDownloadedChunks","_activeDownloads","_answer","splits","min","isAhead","getIdentifierFromByteArray","_segmendDataMessages","bind","errorDetail","_totalSendSegments","version","getSegment","maxMessageSize","__awaiter","ping","getStorage","6813819YHKRvO","startTime","connect","peerConnect","sdp","command","395508fCofhi","destroy","c=IN IP4","downloadingProcessActive","decode","slice","_lastResponses","_operationId","_lastSegmendDataMessagesTime","addPeerLatency","_lastLatencyP2P","getTotalSendSegments","absent","dateTime","P2P Pong to ","_lastSent","_onData","Probable algorithm failed","consecutiveHaveSegment","259vXJnkW","buffer","P2P Ping to ","split","message","_cancel","sctp-failure","getIp","_totalSendBytes","_destroyed","trim","length","testLatencyDone","P2P: ","foreSegmentsInfo","forEach","verbose","OPERATION ID -> ","Closing p2p download ","pop","getLastSegmentDataMessagesTime","byteLength","123272ucIRwx","delete","createdAt","8998TvEZNV","_onClose","storageSize","totalErrors","testBandwidthDone","_endDownload","push","Could not send message to peer (maybe it was destroyed)","send","apply","_segmentMap","time","data","_identifierShort","value","P2P onConnect to ","PTT-> TIMEOUT CREATION ","947928nscqpY","peerCloseListener","set","2330FHQagW","identifier","_startTimeout","then","done","_totalDownloadedBytes","_onError","P2P Upload canceled.","request","_lastLatencySegment","_decoder"];return(N=function(){return t})()}!function(t){const e=P,i=t();for(;;)try{if(387378==parseInt(e(125))/1+parseInt(e(186))/2+-parseInt(e(253))/3*(parseInt(e(239))/4)+-parseInt(e(234))/5*(parseInt(e(255))/6)+-parseInt(e(144))/7*(-parseInt(e(166))/8)+-parseInt(e(119))/9+parseInt(e(189))/10*(parseInt(e(169))/11))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(N);var D=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){const a=P;function o(t){try{c(s.next(t))}catch(t){r(t)}}function d(t){const e=P;try{c(s[e(262)](t))}catch(t){r(t)}}function c(t){const e=P;var s;t[e(193)]?n(t[e(183)]):(s=t[e(183)],s instanceof i?s:new i((function(t){t(s)})))[e(192)](o,d)}c((s=s[a(178)](t,e||[]))[a(200)]())}))};function P(t,e){const i=N();return(P=function(t,e){return i[t-=105]})(t,e)}class R extends w{getIceAnswer(){return this[I(265)]}getTotalSendBytes(){return this[I(152)]}getTotalSendTime(){return this[I(215)]}[I(136)](){return this._totalSendSegments}[I(204)](){return this._totalDownloadedBytes}[I(263)](){return this[I(206)]}[I(228)](){const t=I;return 0==this[t(229)]?0:this[t(194)]*(this._totalDownloadTime/1e3)}[I(241)](){return this[I(135)]}getLastLatencySegment(){return this[I(198)]}[I(218)](){return this[I(235)]}[I(151)](){const t=I;var e;if(null!=this[t(259)])return this[t(259)];let i=null===(e=this[t(265)])||void 0===e?void 0:e[t(123)];if(null!=i)try{let e=i[t(147)](t(127))[1];e=e[t(154)]();let s=e[t(147)](" ")[0];s=e[t(147)]("a=")[0],s=s[t(154)](),this[t(259)]=s}catch(t){}}[I(256)](){return this[I(131)]}constructor(t,e,i){const s=I;super(),this._segmentMap=[],this[s(264)]=new Map,this[s(131)]=[],this[s(140)]=[],this._decoder=new TextDecoder,this[s(182)]=Math.round(65536*Math.random())-32768,this._downloaded=[],this[s(206)]=0,this[s(194)]=0,this[s(229)]=0,this[s(143)]=0,this.timeouts=0,this[s(128)]=!1,this[s(214)]=0,this._totalSendBytes=0,this[s(215)]=0,this[s(112)]=0,this[s(135)]=0,this[s(198)]=0,this[s(235)]=0,this[s(259)]=void 0,this[s(109)]=0,this[s(133)]=0,this[s(153)]=!1,this[s(158)]=!1,this[s(107)]=!1,this[s(244)]=!1,this.timeGap=0,this[s(132)]=0,this[s(172)]=0,this[s(149)]=new Map,this[s(156)]=!1,this[s(173)]=!1,this.testLatencyResult=0,this.testBandwidthResult=0,this[s(265)]=i,this.id=e.id,this[s(231)]=e,this[s(219)]=t,e.on(a.Lg[s(121)],this[s(246)][s(110)](this)),e.on(a.Lg[s(227)],this[s(170)][s(110)](this)),e.on(a.Lg.error,this[s(195)][s(110)](this)),e.on(a.Lg[s(181)],this._onData[s(110)](this))}[I(209)](){return this[I(214)]}[I(211)](){const t=I;return this[t(264)][t(220)]>0}getSegmentDataMessages(){return this[I(109)]}[I(164)](){return this[I(133)]}[I(126)](){const t=I;this[t(231)][t(126)](),this[t(170)](),this[t(153)]=!0}[I(246)](){const t=I;n.default[t(160)](r.BalancerTag,t(237)+this.id),this[t(153)]||(n.default[t(207)](r.BalancerTag,t(184)+this.id),this[t(219)][t(122)](this))}[I(195)](t){const e=I;var i,s;n.default[e(207)](r.BalancerTag,"P2P onError to "+this.id+" "+(null===(i=null==t?void 0:t[e(257)])||void 0===i?void 0:i[e(111)])),(null===(s=null==t?void 0:t.error)||void 0===s?void 0:s[e(111)])===e(150)&&this._onClose(),this[e(143)]=0,this[e(172)]++}[I(170)](){const t=I;this[t(231)][t(126)](),this[t(264)].clear(),this._endDownload(t(232),0),this._loader[t(187)](this)}[I(174)](t,e){const i=I;t===i(248)&&(n.default[i(207)](r.BalancerTag,i(142)),this.consecutiveHaveSegment=0);let s=this._activeDownloads[i(230)](e);s&&n.default[i(207)](r.BalancerTag,i(162)+s.id),this[i(264)][i(167)](e)}[I(141)](t){const e=I;if(this[e(153)])return;const i=t[e(130)](0,4),s=t[e(130)](4,t[e(165)]),o=i[0],d=this[e(108)](t.slice(1,3)),c=i[3];if(this._version<c&&(this[e(214)]=c),o==a.b3[e(148)]){const t=JSON[e(251)](this[e(199)][e(129)](s));if(t[a.CE.command])switch(t[a.CE.command]){case a.mH.request:this._loader.peerSegmentUploadRequest(this,t[a.CE.id],t[a.CE[e(190)]]);break;case a.mH[e(249)]:this._segmentMap=t[a.CE[e(249)]],this[e(109)]++,this[e(133)]=Date[e(223)]();break;case a.mH[e(222)]:let i=t[a.CE.id],s=(t[a.CE[e(220)]],t[a.CE[e(171)]]);this[e(135)]=Date.now()-t[a.CE.dateTime],this._lastLatencySegment=Date[e(223)]()-t[a.CE.createdAt],this[e(219)][e(134)](this._lastLatencyP2P);let o=0,c=this[e(219)][e(118)]()[e(114)](i);c&&(o=c[e(120)]-t[a.CE[e(168)]]),o>=0?(this.isAhead=!0,this[e(244)]=!1):(this[e(107)]=!1,this[e(244)]=!0),this._segmentMap[e(258)](i),this[e(179)][e(155)]>s&&this[e(179)][e(163)]();break;case a.mH[e(117)]:let u=t[a.CE[e(190)]],l=t[a.CE[e(180)]];this[e(212)](u,l);break;case a.mH[e(212)]:const h=Date[e(223)]()-t[a.CE.time];this[e(219)][e(134)](h);break;case a.mH.cancel:this[e(149)][e(188)](t[a.CE[e(190)]],t[a.CE[e(190)]]);break;case a.mH.absent:{let i=t[a.CE[e(190)]]||0,s=this[e(264)][e(230)](i);s&&s.id===t[a.CE.id]&&(this._loader[e(201)](this,s.id),this[e(174)](e(248),d))}break;case a.mH[e(181)]:{let i=this._activeDownloads[e(230)](t[a.CE[e(190)]]);if(i&&(i[e(220)]=t[a.CE[e(220)]],0==i.startTime&&(i[e(120)]=Date[e(223)]()),this._totalDownloaded>=3&&this[e(228)]()>0)){const t=1e3*i[e(220)]/this[e(228)]();t>1.15*a.LI[e(210)]&&n.default[e(160)](r.BalancerTag,e(233)+t+"ms")}}}}else if(o==a.b3.data){let t=this[e(264)].get(d);if(t&&t.id){0==t[e(120)]&&(t.startTime=Date[e(223)]()),t[e(181)].push(s);let i=0;t[e(181)][e(159)]((t=>{i+=t[e(165)]}));const a=Date[e(223)]()-(t[e(120)]||Date[e(223)]());if(i>t.size&&n.default[e(207)](r.BalancerTag,"SOMETHING IS WRONG, Total p2p file size is bigger than expected size. "+i+" "+t[e(220)]),i==t.size){let s=0;const o=new Uint8Array(i);for(const i of t.data)o[e(188)](new Uint8Array(i),s),s+=i[e(165)];this._totalDownloadedBytes=this._totalDownloadedBytes+o[e(165)],this[e(206)]++,this[e(229)]=this[e(229)]+a;const c={time:Date.now(),size:o[e(165)]};this[e(131)].push(c),this[e(219)].addPeerResponse(c);let u=(Date[e(223)]()-t[e(120)])/1e3,l=t[e(220)]/u;this._lastBandwith=l,this[e(243)][e(175)](t.id),this[e(219)].peerSegmentLoaded(this,t.id,a,o[e(145)]),n.default.debug(r.BalancerTag,"p2p not wrong -> "+t.id+" download end "+t[e(220)]),this[e(174)]("Download ended "+t.id+" "+t[e(220)]+" | "+i,d)}else{let s=0;const n=new Uint8Array(i);for(const i of t.data)n[e(188)](new Uint8Array(i),s),s+=i.byteLength;0!=t[e(220)]&&this._loader[e(202)](this,t.id,a,n,t[e(220)])}}else n.default[e(207)](r.BalancerTag,e(157)+this.id+" not an active download id")}}[I(197)](t){const e=I;if(this[e(153)])return;this[e(214)]>=2&&(this[e(132)]++,0==this._operationId&&this[e(132)]++);let i=this[e(132)];n.default[e(207)](r.BalancerTag,e(161)+i),this[e(191)](t,i),this[e(225)]({[a.CE[e(124)]]:a.mH[e(197)],[a.CE.id]:t,[a.CE[e(190)]]:i},a.b3.message)}[I(117)](t){const e=I;n.default.debug(r.BalancerTag,e(146)+this.id),this[e(225)]({[a.CE.command]:a.mH[e(117)],[a.CE.time]:Date[e(223)](),[a.CE.id]:t,[a.CE.identifier]:this.id},a.b3[e(148)])}[I(212)](t,e){const i=I;n.default[i(207)](r.BalancerTag,i(139)+this.id),this[i(225)]({[a.CE[i(124)]]:a.mH[i(212)],[a.CE[i(180)]]:e,[a.CE.id]:t,[a.CE[i(190)]]:this.id},a.b3[i(148)])}_cancelRequest(t,e){const i=I;this[i(225)]({[a.CE[i(124)]]:a.mH.cancel,[a.CE.id]:t,[a.CE.identifier]:e},a.b3[i(148)])}[I(250)](t){return D(this,void 0,void 0,(function*(){const e=P;this[e(153)]||this[e(225)]({[a.CE.command]:a.mH[e(249)],[a.CE.map]:t},a.b3[e(148)])}))}[I(238)](t,e,i){var s;return D(this,void 0,void 0,(function*(){const o=P;if(!this[o(153)]){if(e[o(181)]&&this._cancel&&null==this._cancel[o(230)](i)){this[o(225)]({[a.CE[o(124)]]:a.mH[o(181)],[a.CE.id]:t,[a.CE[o(220)]]:e.realBodySize,[a.CE[o(190)]]:i,[a.CE[o(105)]]:Math[o(205)](e[o(181)][o(165)]/a.LI.maxMessageSize)+1},a.b3.message);let d=e.realBodySize,c=0,u=this[o(217)](i),l=_.from([a.b3[o(181)],u[0],u[1],0]),h=d;e[o(216)]++;let p=Date[o(223)]();try{for(;h>0&&!this[o(149)][o(230)](i);){const t=Math[o(106)](h,a.LI[o(115)]);for(;e&&e[o(181)]&&e[o(181)][o(165)]&&t+c>e.data[o(165)]&&!this[o(149)][o(230)](i);)yield new Promise((t=>setTimeout(t,2)));this._peer[o(177)](_[o(260)]([l,_[o(208)](e[o(181)],(null===(s=e.data)||void 0===s?void 0:s.byteLength)-h,t)])),c+=t,h-=t}}catch(t){n.default[o(207)](r.BalancerTag,o(176))}this[o(152)]=this[o(152)]+c,this[o(215)]=Date[o(223)]()-p,this._totalSendSegments++,e[o(216)]--,this._cancel[o(230)](i)?this[o(219)][o(261)](e[o(181)].byteLength-h):(this[o(140)][o(175)]({time:Date.now(),size:e[o(181)][o(165)]}),this[o(219)][o(247)](e[o(181)][o(165)]))}else n.default.debug(r.BalancerTag,o(196));null!=this._cancel[o(230)](i)&&(n.default[o(207)](r.BalancerTag,o(226)),this[o(149)][o(167)](i))}}))}getByteArrayFromIdentifier(t){let e=[0,0];return e[0]=t>>8&255,e[1]=255&t,e}[I(108)](t){return(255&t[0])<<8|255&t[1]}[I(242)](t,e){const i=I;this[i(225)]({[a.CE[i(124)]]:a.mH[i(137)],[a.CE.id]:t,[a.CE.identifier]:e},a.b3[i(148)])}[I(236)](t,e,i,s){return D(this,void 0,void 0,(function*(){const n=P;this[n(153)]||this[n(225)]({[a.CE[n(124)]]:a.mH[n(222)],[a.CE.id]:t,[a.CE[n(220)]]:e,[a.CE[n(171)]]:i,[a.CE[n(138)]]:Date[n(223)](),[a.CE.createdAt]:s},a.b3.message)}))}[I(225)](t,e){const i=I;try{this[i(231)].send(_[i(260)]([_[i(208)]([e,0,0,a.jQ[i(113)]]),_.from(JSON[i(240)](t))]))}catch(t){n.default.debug(r.BalancerTag,i(176))}}[I(245)](){return this[I(179)]}[I(191)](t,e){const i=I;n.default[i(207)](r.BalancerTag,i(185)+e),this._activeDownloads.set(e,{id:t,data:[],startTime:0,size:0}),setTimeout((()=>{const s=i;var n;const r=this._downloaded.indexOf(t);if(r<0){this._cancelRequest(t,e);let i=0;i=(null===(n=this[s(264)][s(230)](e))||void 0===n?void 0:n[s(220)])||0,this._loader[s(221)](this,t,i),this[s(174)]("Timeout "+t+" "+a.LI[s(210)],e)}else this._downloaded[s(254)](r,1)}),a.LI.timeout)}[I(203)](){var t;return(null===(t=this[I(131)][0])||void 0===t?void 0:t.time)||0}static[I(252)](t){const e=I;let i=0;const s=Date[e(223)]();for(let n=0;n<t.length;)t[n][e(180)]+a.Ji.totalDataInterval<s?t.splice(n,1):(i+=t[n].size,++n);return i}[I(224)](){return R[I(252)](this._lastResponses)}[I(213)](){const t=I;return R[t(252)](this[t(140)])}}function L(){const t=["7309434dheORb","assign","removeFirst","2286448RzSybQ","splice","4618396HAjOUF","peek","210780KKkUyM","size","3784425sJeZpw","push","isEmpty","14oaPfIb","768414TmiWcT","add","5247035TmItxP","length","copyArray","3qAsSxN","array","shift"];return(L=function(){return t})()}function C(t,e){const i=L();return(C=function(t,e){return i[t-=360]})(t,e)}const O=C;!function(t){const e=C,i=t();for(;;)try{if(706017==-parseInt(e(372))/1*(-parseInt(e(367))/2)+parseInt(e(363))/3+parseInt(e(380))/4+-parseInt(e(369))/5+-parseInt(e(375))/6+parseInt(e(366))/7*(-parseInt(e(378))/8)+-parseInt(e(361))/9)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(L);class B{constructor(t){const e=C;this[e(373)]=[],this[e(362)]=t}[O(368)](t){const e=O;for(this[e(373)][e(364)](t);this.array[e(370)]>this[e(362)];)this[e(377)]()}[O(377)](){const t=O;if(!this[t(365)]())return this[t(373)][t(374)]()}[O(360)](){const t=O;if(!this[t(365)]())return this[t(373)][0]}[O(365)](){return 0===this[O(373)].length}[O(371)](){return Object[O(376)]([],this.array)}lastn(t){const e=O,i=Object[e(376)]([],this[e(373)]);return i[e(370)]<=t?i:i[e(379)](i[e(370)]-t)}}var x=i(4243);const M=U;function k(){const t=["getAvgRecentBandwidth","usedOrProbed","test","getInstance","host","getWeightedBandwidth","list","uncompressedBytes","length","updateStatusCodeCounters","original","score","incrementSwitchesDueToQuality","updateAvailability","auth","http2xxResponses","12lVeXou","4749870rIGBzk","verbose","switchesDueToConnectivity","_checked","getAvgRecentWBandwidth","downloadedBytes","numberOfCdnCacheHits","pushLastPreferedVideoBandwidth","lastPreferedVideoBandwidth","maxResponseBytes","bannedCount","minNetworkLatency","map","maxBandwidth","highestSegmentBandwidth","minThroughput","numberOfCdnCacheMisses","undefined","_accumBw","downloadedChunksVideo","switchesDueToQuality","usedOnce","now","_incrementCacheCount","minRequestSizeForBwEstimateKB","downloadTimeForScoring","min","_lastResponses","wBandwidthForScoring","wBandwidth","pattern","getVideoBandwidth","provider","time","downloadedSegments","initialBw","updateCdnInfo","route","samplesResponseBytes","failures","_updateCacheCount","kb in ","isHeaderMatch","hugeChunks","685599uuyqoX","getLastResponse","downloadMillis","retries","add","type","sumVideoBytes","resetBandwidth","internal_provider","path","sumThroughput","getBandwidth","calculateEffectiveBandwidth","toFixed","firstHugeChunkSize","bannedTime","4801902gIJwIY","copyArray","1335048sZlUpm","browserCacheHits","lastn","setChecked","totalFail","http1xxResponses","_lastsPreferedVideoBandwidth","active","incrementSwitchesDueToErrors","isChecked","keys","lastPreferedVideoChunkDownloadTime","statusCode","push","8440mNBDKR","banned","bandwidth","rendition","downloadedBytesVideo","lastPingTime","cdnName","samplesNetworkLatency","maxNetworkLatency","incrementSwitches","regex","downloadTimeMs","header","addProbe","name","MAX_SAFE_INTEGER","STREBOPX","switches","CODAVEL","getCdnCacheMisses","failed","addResponse","dnsEnabled","video","numberOfCdnCacheUnknowns","sumNetworkLatency","http3xxResponses","_updateCacheCounts","samplesThroughput","lastUpdatedState","isAudio","getOldestRequestTS","11885538iUdiAW","18234yqXfts","absolute","sumVideoTime","url","downloadMillisVideo","indexOf","price","sumResponseTime","lastMeasurementWeight","isCodavel","includes","downloadedBytesForScoring","incrementSwitchesDueToConnectivity","maxThroughput","shift","getAvgBandwidth","headers","maxResponseTime"," at ","bannedRefTicToc","toLowerCase","getAvgWBandwidth","trunc","weight","unBannedCount","downloadedChunks","switchesDueToErrors","unbannedTime","max","forEach","minResponseBytes","assign","lowestPingTime","_processCdnCache","fromEntries","highestPingTime","compressedBytes","samplesResponseTime","MB/s size-> ","sumResponseBytes","bandwidthForScoring","clone","minResponseTime","3534052aFCCTW","http4xxResponses","cache","_parser","s from ","lastPreferedVideoChunkSize"];return(k=function(){return t})()}function U(t,e){const i=k();return(U=function(t,e){return i[t-=199]})(t,e)}!function(t){const e=U,i=t();for(;;)try{if(967496==-parseInt(e(232))/1+-parseInt(e(340))/2+parseInt(e(362))/3*(parseInt(e(250))/4)+-parseInt(e(363))/5+-parseInt(e(248))/6+parseInt(e(296))/7+parseInt(e(264))/8*(parseInt(e(297))/9))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(k);class V{constructor(t,e,i,s,n,r,a,o,d,c,u,l,h){const p=U;this[p(373)]=0,this[p(321)]=0,this[p(322)]=0,this.downloadedBytes=0,this[p(308)]=0,this[p(213)]=0,this[p(231)]=0,this[p(246)]=0,this[p(337)]=new B(20),this[p(216)]=new B(20),this[p(227)]=0,this[p(235)]=0,this[p(254)]=0,this[p(251)]=0,this[p(369)]=0,this[p(204)]=0,this[p(288)]=0,this.downloadMillis=0,this.usedOnce=!1,this[p(268)]=0,this[p(301)]=0,this[p(207)]=0,this[p(324)]=0,this[p(247)]=0,this[p(316)]=Date.now(),this[p(293)]=0,this[p(201)]=1e12,this[p(371)]=0,this[p(256)]=[],this.highestRenditionBandwidth=0,this[p(345)]=0,this[p(261)]=0,this[p(269)]=0,this[p(206)]=V[p(223)],this[p(266)]=new B(20),this[p(217)]=new B(20),this[p(215)]=[],this[p(202)]=0,this.lowestSegmentBandwidth=Number[p(279)],this[p(332)]=0,this[p(329)]=Number.MAX_SAFE_INTEGER,this.avgPingTime=0,this.isRangeCompatible=!0,this[p(366)]=!1,this[p(222)]=new Array,this.usedOrProbed=!1,this.provider=t,this[p(240)]=[p(282),"STREBOOS",p(280)].includes(t)?e:t,this.name=e,this[p(350)]=i,this[p(241)]=s,this[p(300)]=n,this[p(357)]=r,this[p(303)]=o,this[p(320)]=d,this[p(298)]=c,this.dnsEnabled=u,this[p(360)]=l,this.original=a,this[p(257)]=!0,this[p(265)]=!1,this[p(343)]=h}[M(370)](t){const e=M;this[e(256)][e(263)](t),this._lastsPreferedVideoBandwidth[e(354)]>5&&this[e(256)][e(311)]()}getAvgLastVideoBandwidth(){const t=M;let e=0,i=0;for(i=0;i<this[t(256)][t(354)];i++)e+=this[t(256)][i];return e/i}[M(233)](){const t=M;return 0===this._lastResponses[t(354)]?{time:Date.now(),size:0}:this._lastResponses[this._lastResponses.length-1]}setLastResponses(t){this._lastResponses=t}[M(285)](t){this._lastResponses.push(t)}getAvgResponseTime(){const t=M;return 0==this[t(322)]?0:this[t(234)]/this[t(322)]}getCdnCacheHits(){return this[M(369)]}[M(283)](){return this.numberOfCdnCacheMisses}[M(330)](t){const e=M;if(!this._parser||!t[e(313)])return;const i=Object[e(331)](Object.entries(t[e(313)])[e(200)]((([t,i])=>[t[e(317)](),i]))),{hit:s,miss:n}=this[e(343)][e(342)];s&&n?this[e(291)](s,n,i):this[e(228)](s||n,i,!!s)}[M(291)](t,e,i){const s=M;var n,r;const a=null!==(n=null==t?void 0:t.header[s(317)]())&&void 0!==n?n:"",o=null!==(r=null==e?void 0:e[s(276)][s(317)]())&&void 0!==r?r:"",d=a in i&&u[s(230)](i[a],t),c=o in i&&u[s(230)](i[o],e);d?this[s(369)]++:c?this[s(204)]++:this.numberOfCdnCacheUnknowns++}[M(228)](t,e,i){const s=M;var n;const r=null!==(n=null==t?void 0:t.header.toLowerCase())&&void 0!==n?n:"";if(r in e){const n=e[r];let a=!1;t[s(237)]===s(352)?a=t[s(218)][s(307)](n):t[s(237)]===s(274)&&(a=new RegExp(t[s(218)])[s(348)](n)),a?this[s(211)](i):this[s(211)](!i)}else this[s(211)](!i)}[M(211)](t){const e=M;t?this[e(369)]++:this[e(204)]++}addResp(t){const e=M;var i,s;const o=t[e(225)],d=t.bandwidth||0,c=t.size||0,u=t[e(275)]||0,l=t[e(284)];if(this[e(347)]=!0,this[e(355)](t[e(262)]),l)return this.retries++,this[e(254)]++,void x.default[e(349)]().updateCdnInfo(this.name,this[e(322)],this[e(368)],this[e(254)]);this[e(322)]++,this[e(368)]+=c,typeof this[e(336)]===e(205)?this.sumResponseBytes=c:this[e(336)]+=c,typeof this[e(327)]===e(205)?this[e(327)]=c:this[e(327)]=Math.min(this[e(327)],c),typeof this[e(372)]===e(205)?this[e(372)]=c:this[e(372)]=Math[e(325)](this[e(372)],c),typeof this[e(226)]===e(205)?this.samplesResponseBytes=1:this[e(226)]+=1,null!=t[e(333)]&&null!=t.uncompressedBytes&&(typeof this[e(333)]===e(205)?this[e(333)]=t[e(333)]:this[e(333)]+=t[e(333)],void 0===this[e(353)]?this[e(353)]=t[e(353)]:this.uncompressedBytes+=t[e(353)]),this[e(330)](t),x.default.getInstance()[e(224)](this[e(278)],this[e(322)],this[e(368)],this[e(254)]),null!=t[e(267)]&&t[e(267)].isAudio&&0==this[e(231)]&&(this[e(209)]=!1),(null==t[e(267)]||!t[e(267)][e(294)])&&(this[e(308)]+=c,this[e(213)]+=u,this[e(209)]=!0,this[e(231)]++,0==this[e(246)]&&(this[e(246)]=c)),a.Y4[e(326)]((i=>{const s=e;if(o[s(302)](i)>=0){let e=!0;d>0?(c>1e3*a._C[s(212)]&&(e=!1,this[s(206)]=this._accumBw!==V.initialBw?Math[s(319)](this[s(206)]*(1-a.Zq[s(305)])+d*a.Zq.lastMeasurementWeight):d),this.bandwidth.add(d),this[s(217)][s(236)]({bw:d*c,ct:c}),(null==t[s(267)]||!t.rendition.isAudio)&&(this[s(337)][s(236)](d),this[s(216)][s(236)]({bw:d*c,ct:c}),this.downloadMillisVideo+=u,this[s(268)]+=c,this.downloadedChunksVideo++,typeof this[s(242)]===s(205)?this.sumThroughput=d:this.sumThroughput+=d,typeof this[s(203)]===s(205)?this[s(203)]=d:this[s(203)]=Math[s(214)](this[s(203)],d),void 0===this[s(310)]?this[s(310)]=d:this.maxThroughput=Math[s(325)](this[s(310)],d),typeof this[s(292)]===s(205)?this.samplesThroughput=1:this[s(292)]+=1,typeof this[s(238)]===s(205)?this[s(238)]=c:this.sumVideoBytes+=c,typeof this.sumVideoTime===s(205)?this[s(299)]=u:this[s(299)]+=u)):this[s(251)]++,0==this[s(206)]&&!e&&(this[s(209)]=!1)}})),0==this.downloadedBytes&&(this[e(209)]=!1),d>this.highestSegmentBandwidth&&(this[e(202)]=d),d<this.lowestSegmentBandwidth&&(this.lowestSegmentBandwidth=d),this[e(234)]+=u,void 0===this.sumResponseTime?this[e(304)]=u:this[e(304)]+=u,typeof this[e(339)]===e(205)?this.minResponseTime=u:this[e(339)]=Math[e(214)](this[e(339)],u),typeof this[e(314)]===e(205)?this[e(314)]=u:this[e(314)]=Math.max(this[e(314)],u),typeof this[e(334)]===e(205)?this[e(334)]=1:this[e(334)]+=1,this[e(215)][e(263)]({time:Date[e(210)](),size:c}),(null==t[e(267)]||!(null===(i=t[e(267)])||void 0===i?void 0:i[e(294)]))&&(this.lastPreferedVideoChunkSize=c,this[e(261)]=u),null!=t[e(267)]&&this.highestRenditionBandwidth<t[e(267)][e(266)]&&(this.highestRenditionBandwidth=t[e(267)][e(266)]),(null==t[e(267)]||!(null===(s=t[e(267)])||void 0===s?void 0:s[e(294)]))&&(this[e(371)]=t[e(266)],this[e(370)](t[e(266)]));let h="Unknown";t[e(267)]&&(h=t[e(267)].isAudio?"Audio":e(287));let p=0;t[e(267)]&&(p=t.rendition.targetDuration),n.default[e(364)](r.BalancerTag,"Downloaded a "+h+" segment of "+p+e(344)+t[e(270)]+e(315)+Number(d/1e6)[e(245)](2)+e(335)+Number(c/1024)[e(245)](2)+e(229)+u)}[M(244)](t,e){const i=M,s=this[i(261)],n=this[i(345)];let r=this[i(269)],a=s-r;if(a<=0&&(r=s,a=s),n<=0)return 0;const o=t/8*e,d=o*a/n+2*r;return 0==d?0:8*o/(d/1e3)}[M(219)](){const t=M;return(this[t(308)]||0)/((this[t(213)]||1)/1e3)*8}[M(243)](){return this[M(206)]}setBandwidth(t){this[M(206)]=t}getBandwidthInBits(){return 8*this._accumBw}[M(312)](){const t=M;let e=0,i=0;for(const s of this.bandwidth[t(249)]())e+=s,i++;return i>0?e/i:0}[M(346)](){const t=M;let e=0,i=0;for(const s of this[t(266)][t(252)](4))e+=s,i++;return i>0?e/i:0}getAvgWBandwidth(){const t=M;let e=0,i=0;for(const s of this[t(216)][t(249)]())e+=s.bw,i+=s.ct;return i>0?e/i:0}[M(367)](){const t=M;let e=0,i=0;for(const s of this[t(216)].lastn(4))e+=s.bw,i+=s.ct;return i>0?e/i:0}[M(351)](){const t=M;return.45*this[t(318)]()+.55*this[t(367)]()}[M(239)](){const t=M;this[t(206)]=V[t(223)]}[M(295)](){const t=M;var e;return(null===(e=this[t(215)][0])||void 0===e?void 0:e[t(221)])||0}[M(338)](){const t=M,e=new V(this[t(220)],this[t(278)],this[t(350)],this[t(241)],this.url,this[t(357)],this[t(356)],this[t(303)],this[t(320)],this.absolute,this[t(286)],this[t(360)],this[t(343)]);return Object[t(260)](this).forEach((i=>{const s=t,n=i,r={};r[n]=this[n],Object[s(328)](e,r)})),e}[M(277)](t){const e=M;void 0===this.sumNetworkLatency?this[e(289)]=t:this[e(289)]+=t,typeof this[e(199)]===e(205)?this.minNetworkLatency=t:this[e(199)]=Math[e(214)](this[e(199)],t),void 0===this[e(272)]?this[e(272)]=t:this[e(272)]=Math[e(325)](this.maxNetworkLatency,t),void 0===this[e(271)]?this[e(271)]=1:this[e(271)]+=1}[M(355)](t){const e=M;null!=t&&(t>=100&&t<=199?this[e(255)]=(this[e(255)]||0)+1:t>=200&&t<=299?this.http2xxResponses=(this[e(361)]||0)+1:t>=300&&t<=399?this[e(290)]=(this[e(290)]||0)+1:t>=400&&t<=499?this.http4xxResponses=(this[e(341)]||0)+1:t>=500&&t<=599&&(this.http5xxResponses=(this.http5xxResponses||0)+1))}[M(359)](){const t=M,e=Date[t(210)]();this[t(265)]?(this[t(247)]+=e-this[t(316)],this.bannedRefTicToc=e):(this[t(324)]+=e-this[t(316)],this.bannedRefTicToc=e)}[M(273)](){const t=M;typeof this.switches===t(205)?this[t(281)]=1:this.switches+=1}[M(358)](){const t=M;typeof this[t(208)]===t(205)?this.switchesDueToQuality=1:this[t(208)]+=1}[M(309)](){const t=M;typeof this[t(365)]===t(205)?this.switchesDueToConnectivity=1:this[t(365)]+=1}[M(258)](){const t=M;typeof this[t(323)]===t(205)?this[t(323)]=1:this.switchesDueToErrors+=1}resetOnPing(){const t=M;this[t(336)]=void 0,this.minResponseBytes=void 0,this[t(372)]=void 0,this[t(226)]=void 0,this.sumResponseTime=void 0,this[t(339)]=void 0,this[t(314)]=void 0,this.samplesResponseTime=void 0,this[t(289)]=void 0,this[t(199)]=void 0,this[t(272)]=void 0,this[t(271)]=void 0,this[t(242)]=void 0,this[t(203)]=void 0,this[t(310)]=void 0,this[t(292)]=void 0,this[t(238)]=void 0,this[t(299)]=void 0,this[t(324)]=0,this.bannedTime=0,this[t(316)]=Date[t(210)]()}[M(306)](){const t=M;return[t(282),"STREBOOS",t(280)][t(307)](this[t(220)])}[M(253)](){this[M(366)]=!0}[M(259)](){return this[M(366)]}}V[M(223)]=9e12;var q=F;function F(t,e){var i=X();return(F=function(t,e){return i[t-=253]})(t,e)}function X(){var t=["1062813NgohyI","3994632VkgDiq","1361174JXuhlS","48llJDeg","averagePing","getAvgPingTime","lastMeasurementWeight","_minPing","214315NhocLC","getMinPingTime","pingsCounter","getMaxPingTime","min","pingsTime","4qrpSEb","554582HRHzUU","trunc","2099096xUAfNS","max","1SMMYzO","MAX_SAFE_INTEGER","4785790tmdGsF","_maxPing"];return(X=function(){return t})()}!function(t){for(var e=F,i=t();;)try{if(362338==parseInt(e(256))/1*(parseInt(e(262))/2)+parseInt(e(260))/3*(-parseInt(e(274))/4)+parseInt(e(268))/5*(parseInt(e(263))/6)+-parseInt(e(275))/7+-parseInt(e(254))/8+-parseInt(e(261))/9+parseInt(e(258))/10)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(X);class H{constructor(){var t=F;this.pingsCounter=0,this[t(273)]=0,this.averagePing=0,this[t(259)]=0,this[t(267)]=Number[t(257)]}add(t){var e=F;this[e(259)]=Math[e(255)](this[e(259)],t),this._minPing=Math[e(272)](this._minPing,t),this[e(273)]+=t,this[e(270)]++,this[e(264)]=0===this.averagePing?t:Math[e(253)](this[e(264)]*(1-a.Zq.lastMeasurementWeight)+t*a.Zq[e(266)])}[q(265)](){return this[q(264)]}[q(271)](){return this[q(259)]}[q(269)](){return this._minPing}getSimpleAveragePingTime(){var t=q;return this[t(273)]/this[t(270)]}}const G=j;function j(t,e){const i=Y();return(j=function(t,e){return i[t-=276]})(t,e)}!function(t){const e=j,i=t();for(;;)try{if(671168==-parseInt(e(287))/1+-parseInt(e(278))/2+-parseInt(e(279))/3+parseInt(e(282))/4*(-parseInt(e(281))/5)+parseInt(e(289))/6+parseInt(e(280))/7*(parseInt(e(300))/8)+parseInt(e(286))/9*(parseInt(e(298))/10))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(Y);class W{constructor(t){const e=G;this[e(308)]=new Map,this[e(305)]=new Map,this[e(283)]=!1,this[e(304)]=60,this._lastPingBroadcast=Date[e(277)](),this[e(290)]=t}[G(292)](t){this[G(291)]=t}[G(303)](){return t=this,e=void 0,s=function*(){const t=j;if(!this[t(283)])for(this[t(283)]=!0;;){if(Date.now()-this[t(302)]>1e3*this[t(304)])for(let e of this.p2pLoader[t(301)]().values())this[t(306)](e);else{for(;!this[t(291)];)yield new Promise((t=>setTimeout(t,1e3)));const e=this[t(290)].getPeersWithContent(this[t(291)]);e[t(284)]>0&&this[t(306)](e[0])}yield new Promise((e=>setTimeout(e,a.wc[t(297)])))}},new((i=void 0)||(i=Promise))((function(n,r){const a=j;function o(t){try{c(s.next(t))}catch(t){r(t)}}function d(t){const e=j;try{c(s[e(295)](t))}catch(t){r(t)}}function c(t){const e=j;var s;t[e(299)]?n(t.value):(s=t[e(296)],s instanceof i?s:new i((function(t){t(s)})))[e(276)](o,d)}c((s=s[a(288)](t,e||[]))[a(307)]())}));var t,e,i,s}[G(306)](t){const e=G;this[e(290)][e(294)]()&&t.ping(t.id)}static getInstance(t){const e=G;return null!=t&&(this[e(293)]=new W(t)),this[e(293)]}}function Y(){const t=["_pingBroadcastTimeInSeconds","pingTime","testPeer","next","bandwidth","then","now","209218ajHLIm","3120945phFUIV","7076517wyyyec","10hbvbUC","124532bEsSzX","_isMonitoring","length","__awaiter","144hiypsr","435709BdHvgf","apply","3745728hCcNRI","p2pLoader","lastDownloadedSegment","newDownloadedSegment","_instance","isEnabled","throw","value","timeBetweenBurstsMilliseconds","424280mochqC","done","8oDvYPA","getPeers","_lastPingBroadcast","monitor"];return(Y=function(){return t})()}const z=K;function K(t,e){const i=Q();return(K=function(t,e){return i[t-=359]})(t,e)}function Q(){const t=["getLastSegmentCreatedAt","_byteDownloadCount"," last msg -> ","min","_downloadMillis","getMinPingTime","_accumBw","_activePeerSet"," delay ","_maxResponseTime","_maxConcurrent","P2P Warning ","P2P Unable to request to more peers max concurrency (","rendition","addResponse","_samplesResponseTime","trunc","endTime","BANNING Peer -> ","maxConnectedPeers","addPeerResponse","reduce"," available from peer ","peerSegmentLoaded","_peers","onDiscovery","getSegmentDataMessages","_p2pManager","85105bKWSLU","getLastResponses","_segmentAbsentRequests","Problem peer doen't exists?","getUploadedUniqPeers","_timeoutRequests","getStats","P2P ADDPEERCANDIDATE - received message from ","getId","119452JJPJUV","random","indexOf","1238520aMZyvA","_downloadMillisVideo","now","WebRtcEvents","_samplesThroughput","_chunkDownloadCount","P2P support enabled ","getSegmentMap","p2pId","addPeerCandidate","_activeDownloads","createMap","_peersAvailable","_downloadedBytesVideo","isDownloading","setLastResponses","_uploadRequests","sort"," / ","_availablePeersMap","concat","_destroyed","max","tracker","_minThroughput","_sendMapToPeer","Constants","isMaxPeers","Already have max peers","peerFailedSegmentTimeout","_byteUploadCount","upload","_downloadedChunksVideo","_peerConnectionTime","maxParallelP2PDownloads","peerConnect","warn","3074770YPJrYY","data","_failedRequests","_timeoutDiscardedBytes","getVersion","getLastLatencyP2P","P2P Error: ","setBandwidth","pathname","P2P New peer candidate ","p2p","peerCanceledSegmentUpload","notice","P2PSMAP new segment to all peers: ","isBehind","verbose","getCdnObject","_bannedPeers","delete","onOffer","P2P","_sendMapToAllPeersV0","_minPeersAvailable","storeSegment","from","_maxNetworkLatency","time","getDownloadBandwidth","push","getPeersAhead","debug","P2P adding the candidate. "," size -> ","getAvgPingTime","isAhead","getLastBandwith","size","_maxPeersParallelUsed","109534Pjeitf","_chunkUploadDiscardedCount","P2P Requesting segment ","Problem max concurrency "," SM Size-> ","resource","P2P dependency does not exist. Disabling P2P!","_sumVideoBytes","origRes","1lyUVng","rejoin","Warning","_segmentsRequested","_maxBandwidth","destroy","Error","getStorage"," | ","getOldestRequestTS","isAudio","_sendNewSegmentToAllPeersV1","_maxThroughput","maxConcurrency","Active downloads vs max concurrencui P2PMO -> ","P2P Requesting new segment ","_downloadedPeers","_candidates","getUploadedBytes","_monitoringStarted","peerSegmentProgress","values","updatePeerMetrics","forEach","_sumResponseBytes","startMonitoring","noContentObtained","_peersUsed","_maxPeersAvailable","map","getTotalSendTime","disable","_sumResponseTime","add","trackerAnnounce","3535BkbRDg","_minPeersParallelUsed","resetOnPing","https://localhost","_maxConnectedPeers","_storage","_cdnPingTimeBean","initialBw","P2P peer already exist. ","_performReset","length","getSegment","790110WeyncL","_errorRequests","Already banned peer -> ","getBannedPeers","set","_sumNetworkLatency","_warningListener","getMissingPeers","_sumThroughput","getUploadedChunks","_minNetworkLatency","_byteUploadDiscardedCount","getLastDownloadsTraffic","_accountCode","sendJoin","yes","_options","setContent","_uploadRequestsFailed","_peersParallelUsed","setSettings","get","P2PManager","peerSegmentUpload","start","peerFailedSegmentAbsent","_chunkUploadCount","peerSegmentUploadRequest","  audio -> ","enabled","byteLength","splice","resetP2PConnection","MAX_SAFE_INTEGER","_totalPeerSet","_uplodadedPeers","P2PUR Peer requested segment -> ","_samplesNetworkLatency","slice","avgPingTime","monitor","_sumVideoTime","_maxResponseBytes","realBodySize","12saifOY","s messages: ","timeouts","_isEnabled","_offerInterval","enable","getLastSegmentDataMessagesTime","getInstance"," peer-timeouts: "," peers: ","Max peers reached -> ","_packageFound","getPeersWithContent","CREATEPEERCONNECTING","onConnected","_minResponseTime","1698Glbwcf","has"," not available ","_minBandwidth","addPeerLatency","P2PRS Requesting segment ","_updatePeersMetricsRefCounter","peerCloseListener","undefined","getLastUploadsTraffic","_peerDiscoveryTime","_minResponseBytes","_cdnObject","_activeDownloadIds","_samplesResponseBytes","announcedP2P","getUploadRequests","request","videoId","sendMap"];return(Q=function(){return t})()}!function(t){const e=K,i=t();for(;;)try{if(125707==-parseInt(e(471))/1*(parseInt(e(462))/2)+parseInt(e(562))/3*(parseInt(e(384))/4)+-parseInt(e(375))/5+-parseInt(e(578))/6*(-parseInt(e(506))/7)+parseInt(e(387))/8+parseInt(e(518))/9+-parseInt(e(424))/10)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(Q);class J{constructor(t,e,i){const s=K;this[s(418)]=a.LI[s(418)],this[s(565)]=!1,this[s(573)]=!1,this._maxConcurrent=a.LI[s(484)],this[s(510)]=a.LI.maxConnectedPeers,this[s(371)]=new Map,this[s(441)]=new Map,this._candidates=new Map,this[s(397)]=0,this[s(474)]=new Map,this[s(591)]=[],this[s(490)]=!1,this[s(515)]=!1,this[s(487)]=new Map,this[s(553)]=new Map,this[s(475)]=0,this[s(581)]=Number[s(551)],this._timeoutDiscardedBytes=0,this[s(426)]=0,this[s(380)]=0,this._segmentAbsentRequests=0,this[s(519)]=0,this._downloadMillis=0,this._byteDownloadCount=0,this[s(392)]=0,this[s(552)]=new Set,this[s(605)]=new Set,this[s(406)]=new Map,this._updatePeersMetricsRefCounter=0,this[s(566)]=45e3,this[s(604)]=V.initialBw,this._downloadMillisVideo=0,this[s(400)]=0,this[s(419)]=0,this[s(529)]=0,this._chunkUploadDiscardedCount=0,this._chunkUploadCount=0,this._byteUploadCount=0,this._uploadRequests=0,this[s(536)]=0,this[s(408)]=!1,this[s(531)]=t,this[s(534)]=e,this[s(511)]=i,this._cdnObject=new V(s(444),s(444),"","","",1,!1,0,0,!1,!1),this._cdnObject[s(431)](this[s(604)]),this[s(590)][s(402)](this[s(376)]()),this[s(512)]=new H,window.P2PManager?this[s(573)]=!0:n.default[s(436)](r.BalancerTag,s(468))}isEnabled(){return this[K(573)]&&this._isEnabled}[z(567)](){this[z(565)]=!0}[z(502)](){this[z(565)]=!1}[z(478)](){return this._storage}[z(379)](){const t=z;return this._uplodadedPeers[t(460)]}[z(453)](){const t=z;let e=0;for(const i of this[t(371)].values())i[t(458)]&&e++;return e}getPeersBehind(){const t=z;let e=0;for(const i of this[t(371)][t(492)]())i.isBehind&&e++;return e}getPeersNothing(){const t=z;let e=0;for(const i of this[t(371)][t(492)]())i[t(458)]||i[t(438)]||e++;return e}[z(383)](){const t=z;var e;return null===(e=this._p2pManager)||void 0===e?void 0:e[t(383)]()}[z(440)](){return this[z(590)]}[z(550)](){this[z(515)]=!0}[z(532)](){const t=z;var e,i;if(this._packageFound&&this[t(565)]){const s=new URL(null!==(e=this[t(534)][t(467)])&&void 0!==e?e:"https://localhost"),n=this._accountCode+(this._options[t(596)]||s[t(432)]);null===(i=this[t(374)])||void 0===i||i[t(472)](n)}}[z(538)](t){const e=z;var i;if(this._packageFound&&!this[e(565)])if(t[e(434)]&&t[e(434)][e(547)]){this[e(565)]=!0,this.upload=!t.p2p.consumeOnly||a.LI[e(418)],this._maxConcurrent=t[e(434)][e(421)]||a.LI[e(484)],this[e(510)]=t[e(434)].maxConnectedPeers||a.LI[e(366)];const s=new URL(null!==(i=this[e(534)][e(467)])&&void 0!==i?i:e(509)),o=this[e(531)]+(this[e(534)][e(596)]||s[e(432)]);this[e(374)]=new window.P2PManager(this,o,{tracker:t[e(434)][e(505)]||a.LI[e(410)],accountCode:this._accountCode,announcePeers:t[e(434)].peerRequestsPerAnnounce}),this[e(374)].on(window[e(540)][e(413)][e(390)][e(477)],J._errorListener.bind(this)).on(window[e(540)][e(413)][e(390)][e(473)],J[e(524)].bind(this))[e(542)](),n.default.debug(r.BalancerTag,e(393)+this.getId())}else n.default[e(454)](r.BalancerTag,"P2P support disabled."),this[e(565)]=!1}[z(496)](){const t=z;this._monitoringStarted||(this[t(490)]=!0,W[t(569)]()[t(558)]())}[z(414)](){const t=z;return this[t(371)][t(460)]>this[t(510)]&&(n.default[t(439)](r.BalancerTag,t(572)+this[t(371)][t(460)]),!0)}[z(525)](){const t=z;return this[t(510)]-this[t(371)].size}getMaxPeers(){return this._maxConnectedPeers}[z(521)](){return this._bannedPeers}[z(594)](){return this[z(403)]}getUploadRequestsFailed(){return this[z(536)]}[z(517)](t){const e=z;return this[e(511)][e(517)](t[e(395)])}[z(574)](t){const e=z;if(this[e(408)]||0==this[e(371)].size)return[];const i=[];for(const s of this._peers.values())if(0==s[e(394)]()[e(516)]){const t=Date[e(389)]()-s[e(568)]();(t>3e4&&s.getSegmentDataMessages()<2||t>12e4)&&(this[e(441)][e(522)](s.id,!0),s[e(476)](),this[e(585)](s),n.default[e(439)](r.BalancerTag,e(365)+s.id+e(466)+s[e(394)]()[e(516)]+e(600)+t/1e3+e(563)+s[e(373)]()))}else(!s[e(401)]()||s[e(428)]()>=2)&&s[e(394)]().length>0&&s[e(394)]()[e(386)](t[e(395)])>=0&&i.push(s);if(0==i.length)return[];let s=[];for(const t of i)t[e(429)]()>0&&t.getLastLatencyP2P()<5&&s[e(452)](t);if(0==s.length)for(const t of i)t[e(429)]()>0&&t[e(429)]()<7&&s[e(452)](t);if(0==s[e(516)]){let t=[];for(const n of i)0==n[e(459)]()&&0==n.timeouts&&s[e(452)](n),n[e(459)]()>0&&t.push(n);t=t[e(404)](((t,i)=>i.getLastBandwith()-t[e(459)]())),s=t[e(516)]<4?s[e(407)](t):s.concat(t[e(556)](0,3))}return 0==s[e(516)]&&(s=i),s}[z(595)](t,e){const i=z;var s,a,o;if(!this[i(573)])return!1;if(n.default[i(439)](r.BalancerTag,i(485)+this[i(397)]+" "+this._maxConcurrent),this[i(397)]>this[i(608)]&&n.default.verbose(r.BalancerTag,i(465)+this[i(397)]),!(this._activeDownloads<=this[i(608)]))return n.default[i(454)](r.BalancerTag,i(359)+this[i(608)]+") already reached"),!1;{n.default[i(439)](r.BalancerTag,i(486)+t.p2pId+i(479)+(null===(s=t[i(360)])||void 0===s?void 0:s[i(481)])+i(571)+this[i(371)].size);const e=this[i(574)](t);if(e[i(516)]>0){const s=Array[i(448)](e)[i(404)](((t,e)=>.5-Math[i(385)]()))[0];return this[i(474)].set(t[i(395)],t),this[i(397)]++,t.triedP2P=!0,s[i(595)](t.p2pId),t.peer=s,s.consecutiveHaveSegment++,n.default.verbose(r.BalancerTag,i(583)+t[i(395)]+i(546)+(null===(a=t.rendition)||void 0===a||a.isAudio,i(533),"no")+i(369)+s.id+i(456)+s.getSegmentMap()[i(516)]+" pos: "+s[i(394)]()[i(386)](t[i(395)])+i(570)+s[i(564)]),!0}}return n.default[i(439)](r.BalancerTag,i(464)+t[i(395)]+i(546)+(null===(o=t[i(360)])||void 0===o?void 0:o[i(481)])+i(580)),!1}[z(367)](t){const e=z;this[e(590)][e(361)](t)}getLastResponses(){const t=z;return Array[t(448)](this[t(371)][t(492)]())[t(500)]((e=>e[t(376)]()))[t(368)](((t,e)=>[...t,...e]),[])[t(404)](((e,i)=>i[t(450)]-e.time))}[z(582)](t){const e=z;this[e(512)][e(504)](t),this[e(590)][e(557)]=this[e(512)].getAvgPingTime(),typeof this[e(523)]===e(586)?this[e(523)]=t:this[e(523)]+=t,void 0===this[e(528)]?this[e(528)]=t:this[e(528)]=Math[e(601)](this._minNetworkLatency,t),void 0===this[e(449)]?this[e(449)]=t:this[e(449)]=Math[e(409)](this[e(449)],t),typeof this._samplesNetworkLatency===e(586)?this._samplesNetworkLatency=1:this._samplesNetworkLatency+=1}static _errorListener(t){const e=z;n.default.error(r.BalancerTag,e(430),t)}static[z(524)](t){const e=z;n.default[e(423)](r.BalancerTag,e(609),t)}[z(447)](t){const e=z;if(this[e(418)]){const i=this[e(511)][e(447)](t);!t.announcedP2P&&i&&(t[e(593)]=!0,this._sendNewSegmentToAllPeersV1(t),this[e(445)]());const s=this[e(591)][e(386)](t[e(395)]);s>=0&&this[e(591)].splice(s)}else if(!t[e(593)]){t.announcedP2P=!0;const i=this[e(511)][e(398)]();this[e(371)][e(494)]((t=>{t[e(597)](i)}))}}[z(445)](){const t=z;if(this._destroyed)return;const e=this[t(511)][t(398)](),i=Date[t(389)]()-this[t(511)][t(598)]();n.default[t(439)](r.BalancerTag,"P2PSMAP Send map all v0 size: "+e[t(516)]+t(405)+this[t(371)][t(460)]+t(606)+i),e.length>0&&this[t(371)].forEach((i=>{0==i[t(428)]()&&i.sendMap(e)}))}[z(482)](t){const e=z;if(this._destroyed)return;const i=this[e(511)].createMap();n.default[e(439)](r.BalancerTag,e(437)+i[e(516)]),i[e(516)]>0&&this[e(371)][e(494)]((i=>{const s=e;i[s(428)]()>0&&i.sendNewSegmentAvailable(t[s(395)],t[s(460)],this[s(511)].getMaxSize(),t.createdAt)}))}_sendMapToPeer(t){const e=z;if(this[e(408)])return;const i=this[e(511)][e(398)]();n.default.verbose(r.BalancerTag,"P2P MAP send map to peer  "+i.length+" "+t);let s=!1;this[e(371)][e(494)]((e=>{e.id==t&&(e.sendMap(i),s=!0)})),!s&&n.default[e(439)](r.BalancerTag,e(378))}[z(396)](t,e){const i=z;var s;if(!this[i(408)])if(this[i(406)][i(522)](t.id,Date.now()),null==this[i(441)][i(539)](t.id))if(n.default[i(439)](r.BalancerTag,i(382)+t.id+" "),this[i(414)]())n.default[i(454)](r.BalancerTag,i(415));else{if(!this[i(371)].has(t.id)){!this[i(488)][i(579)](t.id)&&this._candidates[i(522)](t.id,[]);const a=new R(this,t,e);null===(s=this._candidates[i(539)](t.id))||void 0===s||s[i(452)](a),n.default[i(439)](r.BalancerTag,i(433)+a.id)}this[i(493)]()}else n.default[i(454)](r.BalancerTag,i(520)+t.id)}[z(422)](t){const e=z;var i;n.default[e(439)](r.BalancerTag,e(575)),this._destroyed||(this[e(406)][e(522)](t.id,Date.now()),this[e(521)]().get(t.id)||(this[e(414)]()?n.default.debug(r.BalancerTag,"Already have max peers"):(this._peers.has(t.id)?(n.default[e(454)](r.BalancerTag,e(514)+t.id),t[e(476)]()):(n.default[e(454)](r.BalancerTag,e(455)+t.id),this[e(371)][e(522)](t.id,t),this[e(605)][e(504)](t.id),this[e(552)][e(504)](t.id),null===(i=this[e(488)][e(539)](t.id))||void 0===i||i[e(494)]((e=>{t!=e&&e.destroy()})),this[e(488)][e(442)](t.id),this[e(412)](t.id)),this[e(493)]())))}[z(585)](t){const e=z,i=t;this._peers[e(442)](i.id),this[e(605)][e(442)](i.id);const s=this[e(488)][e(539)](i.id);if(s){const t=s[e(386)](i);t>-1&&(s[e(549)](t,1),!s[e(516)]&&this[e(488)][e(442)](i.id))}this[e(493)]()}[z(545)](t,e,i){const s=z;this[s(403)]++;let a=this[s(553)][s(539)](t.id);if(null==a&&(a=0),this[s(553)].set(t.id,a),this[s(408)])return;const o=this[s(511)][s(517)](e);let d=!1;o&&o[s(425)].byteLength>1?(t.sendSegment(e,o,i),d=!0):(t.sendNoSegment(e,i),this[s(412)](t.id),this[s(536)]++),n.default[s(439)](r.BalancerTag,s(554)+d+s(479)+e+" "+(null==o?void 0:o.size)+" "+(null==o?void 0:o[s(425)][s(548)])+s(479)+t.id+" "+i+" "+(null==o?void 0:o[s(470)]))}[z(370)](t,e,i,s){const n=z;var r;this[n(397)]--,this._chunkDownloadCount++,this._downloadMillis+=i,this[n(599)]+=s[n(548)],void 0===this[n(495)]?this._sumResponseBytes=s.byteLength:this._sumResponseBytes+=s[n(548)],void 0===this._minResponseBytes?this[n(589)]=s[n(548)]:this[n(589)]=Math[n(601)](this[n(589)],s[n(548)]),typeof this[n(560)]===n(586)?this[n(560)]=s[n(548)]:this[n(560)]=Math.max(this[n(560)],s.byteLength),typeof this[n(592)]===n(586)?this[n(592)]=1:this[n(592)]+=1,null===(r=this[n(474)][n(539)](e))||void 0===r||r[n(535)](s);const o=Math.trunc(s[n(548)]/(i/1e3));this[n(604)]=this._accumBw!==V[n(513)]?Math.trunc(this[n(604)]*(1-a.Zq.lastMeasurementWeight)+o*a.Zq.lastMeasurementWeight):o,this[n(590)].setBandwidth(this[n(604)]),typeof this[n(526)]===n(586)?this[n(526)]=o:this[n(526)]+=o,void 0===this[n(411)]?this[n(411)]=o:this[n(411)]=Math[n(601)](this[n(411)],o),void 0===this[n(483)]?this[n(483)]=o:this[n(483)]=Math[n(409)](this._maxThroughput,o),typeof this[n(391)]===n(586)?this[n(391)]=1:this[n(391)]+=1,void 0===this[n(469)]?this._sumVideoBytes=s[n(548)]:this[n(469)]+=s[n(548)],typeof this._sumVideoTime===n(586)?this[n(559)]=i:this[n(559)]+=i,typeof this[n(503)]===n(586)?this._sumResponseTime=i:this[n(503)]+=i,typeof this[n(577)]===n(586)?this[n(577)]=i:this[n(577)]=Math[n(601)](this._minResponseTime,i),void 0===this[n(607)]?this[n(607)]=i:this._maxResponseTime=Math[n(409)](this[n(607)],i),void 0===this[n(362)]?this[n(362)]=1:this[n(362)]+=1;const d=this._segmentsRequested.get(e);if(d){const t=d.route;a.Y4[n(494)]((e=>{const r=n;t[r(386)](e)>=0&&(null==d[r(360)]||!d[r(360)][r(481)])&&(this._downloadMillisVideo+=i,this[r(400)]+=s.byteLength,this._downloadedChunksVideo++)})),d[n(364)]=Date.now(),d[n(561)]=s[n(548)],this[n(447)](d),this[n(474)][n(442)](e)}}[z(491)](t,e,i,s,n){const r=z;if(0==n)return;const a=this._segmentsRequested[r(539)](e);if(a&&(a[r(364)]=Date[r(389)]()),a&&!this[r(511)][r(517)](a.id)&&(n>0&&(a[r(561)]=n),this[r(447)](a)),a&&(a.data=s),a&&a.id){const t=this[r(511)].getSegment(a.id);t&&(t.data=s)}}[z(416)](t,e,i){const s=z;var n;this._timeoutDiscardedBytes+=i||0,this[s(380)]++,this[s(397)]--,this._failedRequests++,null===(n=this[s(474)][s(539)](e))||void 0===n||n[s(497)](),this[s(474)][s(442)](e)}[z(543)](t,e){const i=z;var s;this[i(377)]++,this[i(397)]--,this[i(426)]++,null===(s=this._segmentsRequested[i(539)](e))||void 0===s||s[i(497)](),this[i(474)].delete(e)}[z(541)](t){const e=z;this[e(417)]+=t,this[e(544)]++}[z(489)](){return this[z(417)]}[z(527)](){return this[z(544)]}[z(435)](t){const e=z;this[e(529)]+=t,this[e(463)]++}destroy(){const t=z;if(this[t(374)])try{this[t(374)][t(476)](),delete this[t(374)]}catch(t){}for(const[,e]of this[t(488)])e[t(494)]((e=>{e[t(476)]()}));for(const[,e]of this[t(371)])e[t(476)]();try{this[t(408)]=!0,this[t(511)][t(476)]()}catch(t){}}[z(480)](){const t=z;let e=Date[t(389)]();return this._peers[t(494)]((i=>{const s=i[t(480)]();s&&(e=Math.min(e,s))})),e}getPeers(){return this[z(371)]}[z(381)](){const t=z;let e=0,i=0,s=0,n=0,r=0;return this._peers[t(494)]((a=>{const o=t;a.getDownloadBandwidth()>0&&(e+=a[o(451)](),this._maxBandwidth=Math[o(363)](Math[o(409)](this[o(475)],a[o(451)]())),this._minBandwidth=Math[o(363)](Math[o(601)](this[o(581)],a[o(451)]())),i++),s+=a[o(530)](),n+=a[o(587)](),r+=a[o(501)]()})),e/=i||1,e=Math[t(363)](e),{downloadEnabled:!0,uploadEnabled:this.upload,uploadedBytes:this[t(417)],uploadedTime:r,uploadedChunks:this[t(544)],discardedUploadedChunks:this[t(463)],discardedUploadedBytes:this._byteUploadDiscardedCount,downloadedSegments:this[t(392)],downloadedBytes:this._byteDownloadCount,discardedDownloadedBytes:this[t(427)],failedRequests:{total:this[t(426)],absent:this[t(377)],timeout:this[t(380)],error:this[t(519)]},activePeers:this._peers[t(460)],totalPeers:this[t(371)][t(460)],downloadMillis:this[t(602)],maxBandwidth:this[t(475)],minBandwidth:this[t(581)],downloadAvgBw:e,lastSecondsDownloadTraffic:s,lastSecondsUploadTraffic:n,downloadMillisVideo:this[t(388)],downloadBytesVideo:this[t(400)],downloadChunksVideo:this._downloadedChunksVideo,avgPingTime:this[t(512)][t(457)](),minPingTime:this[t(512)][t(603)](),maxPingTime:this._cdnPingTimeBean.getMaxPingTime(),sumResponseBytes:this._sumResponseBytes,minResponseBytes:this[t(589)],maxResponseBytes:this._maxResponseBytes,samplesResponseBytes:this[t(592)],sumResponseTime:this[t(503)],minResponseTime:this[t(577)],maxResponseTime:this._maxResponseTime,samplesResponseTime:this[t(362)],sumNetworkLatency:this[t(523)],minNetworkLatency:this._minNetworkLatency,maxNetworkLatency:this[t(449)],samplesNetworkLatency:this[t(555)],sumThroughput:this[t(526)],minThroughput:this[t(411)],maxThroughput:this._maxThroughput,samplesThroughput:this[t(391)],sumVideoBytes:this[t(469)],sumVideoTime:this[t(559)],peersAvailable:this[t(399)],maxPeersAvailable:this[t(499)],minPeersAvailable:this[t(446)],peersUsed:this[t(498)],peersParallelUsed:this[t(537)],maxPeersParallelUsed:this[t(461)],minPeersParallelUsed:this[t(507)],peerDiscoveryTime:this._peerDiscoveryTime,peerConnectionTime:this[t(420)]}}[z(508)](){const t=z;this._sumResponseBytes=void 0,this[t(589)]=void 0,this[t(560)]=void 0,this._samplesResponseBytes=void 0,this[t(503)]=void 0,this[t(577)]=void 0,this[t(607)]=void 0,this[t(362)]=void 0,this[t(523)]=void 0,this[t(528)]=void 0,this[t(449)]=void 0,this._samplesNetworkLatency=void 0,this[t(526)]=void 0,this[t(411)]=void 0,this._maxThroughput=void 0,this[t(391)]=void 0,this[t(469)]=void 0,this[t(559)]=void 0,this._peerConnectionTime=void 0,this[t(588)]=void 0,this._updatePeersMetricsRefCounter=0}[z(443)](t,e){const i=z;this[i(566)]=e,this[i(406)][i(522)](t,Date.now())}[z(493)](){const t=z,e=Date[t(389)]()-this._offerInterval+15e3;this[t(406)][t(494)](((i,s)=>{const n=t;i<e&&this[n(406)][n(442)](s)})),this[t(584)]++,this[t(498)]=this[t(371)][t(460)],this._peersParallelUsed=this[t(605)][t(460)],this[t(399)]=this._availablePeersMap[t(460)],1==this[t(584)]?(this[t(507)]=this[t(605)].size,this[t(461)]=this[t(605)][t(460)],this[t(446)]=this._availablePeersMap[t(460)],this[t(499)]=this[t(406)][t(460)]):((null==this[t(507)]||this._minPeersParallelUsed>this._activePeerSet[t(460)])&&(this._minPeersParallelUsed=this._activePeerSet[t(460)]),(null==this[t(461)]||this[t(461)]<this._activePeerSet.size)&&(this[t(461)]=this[t(605)][t(460)]),(null==this[t(446)]||this[t(446)]>this[t(406)].size)&&(this._minPeersAvailable=this._availablePeersMap[t(460)]),(null==this[t(499)]||this[t(499)]<this._availablePeersMap[t(460)])&&(this[t(499)]=this[t(406)][t(460)]))}[z(576)](t){this[z(420)]=t}[z(372)](t){this[z(588)]=t}}const $=Z;function Z(t,e){const i=et();return(Z=function(t,e){return i[t-=188]})(t,e)}!function(t){const e=Z,i=t();for(;;)try{if(799266==parseInt(e(229))/1+parseInt(e(252))/2*(-parseInt(e(207))/3)+parseInt(e(260))/4+parseInt(e(235))/5+parseInt(e(226))/6*(-parseInt(e(211))/7)+-parseInt(e(214))/8*(parseInt(e(247))/9)+parseInt(e(219))/10)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(et);class tt{constructor(t,e,i,s,n,r){const a=Z;this[a(243)]=t,this[a(221)]=s,this._bandwidthThreshold=e,this[a(206)]=i,this._p2pLoader=n,this[a(262)]=r}getCDN(t,e){const i=Z;let s=i(202);const o=new Map;let d=0,c=!0;if(this[i(243)][i(249)]((function(t,e){const s=i;d+=t[s(195)],!t[s(208)]&&t[s(212)]&&(o.set(e,t),c=!1)})),c&&(o[i(241)](),this[i(243)][i(249)]((function(t,e){const s=i;t[s(212)]&&(t[s(208)]=!1,o[s(220)](e,t))}))),(0===this._p2pLoader[i(215)](t)[i(248)]||!t[i(196)])&&o[i(236)](i(216)),n.default.verbose(r.BalancerTag,i(192)+o[i(254)]+i(189)+this[i(243)][i(254)]+i(224)+this._activeSwitching),o.delete(i(202)),0==o.size)return s=i(202),!this[i(221)]&&d>0&&(s=e.currentCDN),e[i(204)]=s,0===s[i(248)]?i(202):s;if(o[i(254)]>0)if(x.default.getInstance().usedSelectorAPIResponse(!0),x.default[i(209)]()[i(237)](void 0!==this[i(221)]),this._activeSwitching){const n=e[i(204)];switch(this[i(221)]){case a.m[i(259)]:s=this._qualityPriority(t,o,e);break;case a.m[i(198)]:s=this[i(251)](t,o,e);break;default:let n;n=this[i(218)](t,o),s=null===n?"":n[i(230)]}""!==n&&s!==i(202)&&n!==s&&x.default[i(209)]()[i(233)](!0)}else{let n;n=this[i(218)](t,o),null===n||n[i(210)]()?s=0!==d||t[i(205)]?e.currentCDN:"":(s=n[i(230)],e[i(204)]=s,n.setChecked())}return s&&""!=s[i(200)]()?s:"Original"}[$(242)](t,e,i){const s=$,o=this[s(262)].noProbing?new Map(this[s(243)]):e;0===this[s(223)][s(215)](t)[s(248)]&&o[s(236)](s(216));const d=this[s(256)](o,a.m[s(259)],i[s(204)]);if(d)return n.default[s(203)](r.BalancerTag,"Performing probe to "+d[s(230)]),i[s(204)]=d[s(230)],d[s(230)];const c=this[s(244)](t);if(c)return n.default[s(203)](r.BalancerTag,s(234)+c+s(199)),c;let u="",l=0;return e.forEach((t=>{const e=s,i=t[e(245)]();n.default.verbose(r.BalancerTag,t[e(230)]+e(193)+i/1e6+e(240)+t.getBandwidth()+" highest segment bandwidth -> "+this[e(206)]/1e6),l<t.getBandwidth()&&(l=t[e(217)](),u=t[e(230)])})),n.default[s(203)](r.BalancerTag,s(191)+u),i[s(204)]=u,u}[$(251)](t,e,i){const s=$;var o,d;const c=this[s(262)].noProbing?new Map(this[s(243)]):e;0===this._p2pLoader.getPeersWithContent(t)[s(248)]&&c[s(236)](s(216));const u=this[s(256)](c,a.m[s(198)],i[s(204)]);if(u)return n.default.debug(r.BalancerTag,"Performing probe to "+u.name),i[s(204)]=u[s(230)],u[s(230)];const l=Array.from(e[s(238)]())[s(194)]((t=>t[s(197)]()/1e3>this[s(261)]&&!t[s(208)]));if(!l[s(250)]((t=>t[s(230)]===i.currentCDN))){const t=e.get(i[s(204)]);t&&(t.lastUpdatedState=3)}let h=null!==(d=null===(o=l[0])||void 0===o?void 0:o.name)&&void 0!==d?d:"";if(""===h){const t=Array[s(257)](e[s(238)]());t[s(258)](((t,e)=>e[s(217)]()-t[s(217)]())),h=t[0].name}return i[s(204)]=h,h}_bestScoredCdn(t,e){var i;return null!==(i=Array[$(257)](e.values())[0])&&void 0!==i?i:null}_getNotUsedCdn(t){const e=$,i=[];for(const[t,s]of this[e(243)])s[e(212)]&&!s[e(208)]&&!s[e(255)]&&i.push(s[e(230)]);if(0===this[e(223)][e(215)](t)[e(248)]||!t.useP2P){const t=i.indexOf(e(216));t>-1&&i[e(228)](t,1)}if(0==i.length)return;const s=i[Math[e(253)](Math.random()*i.length)],n=this[e(243)][e(239)](s);return null!=n&&(n.usedOnce=!0),s}[$(256)](t,e,i){const s=$;let o=Array[s(257)](t[s(238)]())[s(194)]((t=>t[s(230)]!==i));if(e===a.m[s(198)]){o=[];for(const[e,n]of t){if(e===i)break;o[s(201)](n)}}o[s(258)](((t,e)=>t[s(232)]()[s(213)]-e[s(232)]()[s(213)]));const d=t.get(i);if(!d)return;const c=d[s(190)],u=d[s(197)](),l=e===a.m[s(198)]?1e3*this[s(261)]:d[s(197)](),h=o[s(194)]((t=>{const e=s;if(Date.now()-t[e(232)]()[e(213)]>=a.Zq.minimumDurationSinceLastUsedForTrialMilliseconds)return!0;const o=!0===this._options.noProbing,d=o?t.getBandwidthInBits():c*u/t[e(190)];return n.default[e(203)](r.BalancerTag,e(227)+(o?"last bandwidth":"latency")+e(246)+t[e(230)]+e(188)+(d/1e6)[e(225)](2)+e(222)),n.default[e(203)](r.BalancerTag,e(231)+i+": "+(u/1e6)[e(225)](2)+e(222)),(d-l)/l>=-a.Zq.maximumRelativeDeltaForTrial}));return 0===h[s(248)]?void 0:h[s(258)](((t,e)=>t.getLastResponse()[s(213)]-e[s(232)]()[s(213)]))[0]}}function et(){const t=["_highetsSegmentBandwidth","3vQhukj","banned","getInstance","isChecked","91TluFRu","active","time","8EjCzNQ","getPeersWithContent","P2P","getBandwidth","_bestScoredCdn","16341150xPqvcz","set","_activeSwitching"," Mbps","_p2pLoader"," Active switching method -> ","toFixed","388296UzyyhY","Estimated bandwidth based on ","splice","621950PxYHZJ","name","Current bandwidth for ","getLastResponse","setSwitchedCdns","Selected ","3745090NasDLI","delete","wasActiveSwitchingDecisionPerformed","values","get"," | estimated bandwidth ","clear","_qualityPriority","_cdnList","_getNotUsedCdn","getVideoBandwidth"," for ","5162229OdJWHK","length","forEach","some","_cdnPriority","2271898gAbLxj","floor","size","usedOnce","_getCdnToProbe","from","sort","qualityPriority","1380084cdiNQf","_bandwidthThreshold","_options"," is: "," of ","avgPingTime","Fastest CDN is -> ","CDN Candidates -> "," reference bandwidth ","filter","downloadedChunks","useP2P","getBandwidthInBits","cdnPriority"," because not used yet","trim","push","Original","debug","currentCDN","isManifest"];return(et=function(){return t})()}const it=nt;!function(t){const e=nt,i=t();for(;;)try{if(607624==parseInt(e(384))/1+parseInt(e(377))/2*(-parseInt(e(302))/3)+-parseInt(e(346))/4*(parseInt(e(334))/5)+parseInt(e(376))/6+-parseInt(e(308))/7+parseInt(e(336))/8*(-parseInt(e(330))/9)+parseInt(e(369))/10*(parseInt(e(348))/11))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(rt);var st=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){const a=nt;function o(t){try{c(s.next(t))}catch(t){r(t)}}function d(t){const e=nt;try{c(s[e(301)](t))}catch(t){r(t)}}function c(t){const e=nt;var s;t[e(350)]?n(t[e(359)]):(s=t[e(359)],s instanceof i?s:new i((function(t){t(s)}))).then(o,d)}c((s=s[a(368)](t,e||[]))[a(371)]())}))};function nt(t,e){const i=rt();return(nt=function(t,e){return i[t-=291]})(t,e)}function rt(){const t=["auth","now","monitor","avgPingTime","authenticate_probes","_afterCheck","_instance","timeout","probeOnlyOnBanned","throw","267WnWmnj","_performHeadCheck","unbannedTime","CDNLoader","HEAD","__awaiter","2923109cLzHxX","BANNING CDN DUE TO TIMEOUT ","updateCdnList","P2P","setRequestHeader","open","updateUrl","monitoring","failures","unBannedCount","testCdn","&rnpaw=","name","timeBetweenBurstsMilliseconds","bannedCount","getAvgPingTime","_performGetCheck","bannedTime","readyState","values","banned","GET","783zHxUVZ","addProbe","_isMonitoring","onCodavelSucessfullResponse","2452495NdNwxy","setLoader","45896anZCof","usedOrProbed","ontimeout","UNABLE TO GENERATE URL FOR PROBING CHECK ","status","lastDownloadedSegment","Probing with range failed failed. Falling back to HEAD request on the next probe","getInstance","lastUpdatedState","set","8tVjmQB","HEALTHY CDN ","7073forGyg","setHeadOnBannedOnly","done","_cdns","addParametersToUrl","stopMonitor","includes","bannedRefTicToc","PINGTIME No available resources to test ","enabled","verbose","value","onerror","BANNING CDN ","isCodavel","bytes=0-0","pingsTime","noProbing","getMaxPingTime","ORIGINAL","apply","31300AuKmIh","shouldMonitor","next","callTimeoutMilliseconds","getMinPingTime","add","onload","2929920jUOnjb","15572crcLmq","lowestPingTime","random","Range","getIsEnabled","onCodavelFailedResponse","?rnpaw=","697372LrQPbO","url","isRangeCompatible","loader","highestPingTime","provider"];return(rt=function(){return t})()}class at{constructor(){const t=it;this[t(364)]=new Map,this[t(315)]=new Map,this._isMonitoring=!1,this[t(351)]=new Map,this.shouldMonitor=!0,this.probeOnlyOnBanned=!1,this[t(365)]=!1}static getInstance(t){const e=it;return!this[e(298)]&&(this._instance=new at),null!=t&&this._instance[e(335)](t),this[e(298)]}[it(335)](t){const e=it;this.loader=t,this[e(370)]=!0}[it(310)](t){this._cdns=t}newDownloadedSegment(t){this[it(341)]=t}[it(353)](){this.shouldMonitor=!1}[it(349)](t=!1){this.probeOnlyOnBanned=t}setNoProbing(t=!1){this[it(365)]=t}[it(294)](t){return st(this,void 0,void 0,(function*(){const e=nt;this._cdns=t;const i=new Map;for(const s of t[e(327)]())i.set(s[e(320)],new H),this[e(364)]=i;if(!this._isMonitoring)for(this[e(332)]=!0;this[e(370)];){for(;!this[e(341)];)yield new Promise((t=>setTimeout(t,1e3)));if(!this[e(365)])for(const t of this[e(351)][e(327)]())this[e(341)]&&t[e(320)]!==e(311)&&(yield this[e(318)](t,this.lastDownloadedSegment),yield new Promise((t=>setTimeout(t,a.wc.timeBetweenCallsMilliseconds))));yield new Promise((t=>setTimeout(t,a.wc[e(321)])))}}))}[it(297)](t,e){const i=it;var s,n,r;const a=Date[i(293)]()-t;at[i(343)]().monitoring[i(345)](e[i(320)],a);const o=at[i(343)]()[i(364)].get(e[i(320)]);null==o||o[i(374)](a),e.lastPingTime=a,e.avgPingTime=null!==(s=null==o?void 0:o[i(323)]())&&void 0!==s?s:e[i(295)],e[i(388)]=null!==(n=null==o?void 0:o[i(366)]())&&void 0!==n?n:e[i(388)],e[i(378)]=null!==(r=null==o?void 0:o[i(373)]())&&void 0!==r?r:e[i(378)],e[i(331)](a)}[it(318)](t,e){return st(this,void 0,void 0,(function*(){const i=nt;if(this[i(387)]&&this[i(387)][i(381)]&&t.active&&t[i(291)]!=i(367)&&(!this[i(300)]||t[i(328)]))if(e){let s=this.loader[i(305)][i(314)](e,!0,t.name);if(s=e[i(352)](s),s){const e=Math.floor(1e9*Math[i(379)]());s=s[i(354)]("?")?s+i(319)+e:s+i(383)+e;let a=0;t[i(386)]&&(a=yield this[i(324)](t,s)),(!t[i(386)]||1===a)&&(t.isRangeCompatible=!1,n.default[i(358)](r.BalancerTag,i(342)))}else n.default[i(358)](r.BalancerTag,i(339)+t[i(320)]+" // "+e[i(385)])}else n.default[i(358)](r.BalancerTag,i(356)+t[i(320)])}))}[it(324)](t,e){return st(this,void 0,void 0,(function*(){const i=nt;return yield this._performCheck(i(329),t,e)}))}[it(303)](t,e){return st(this,void 0,void 0,(function*(){const i=nt;return yield this._performCheck(i(306),t,e)}))}_performCheck(t,e,i){return st(this,void 0,void 0,(function*(){const s=nt,o=new XMLHttpRequest,d=Date[s(293)](),c=this;return e[s(337)]=!0,new Promise((function(u,l){const h=s;o[h(375)]=function(){const s=h;if(4===o[s(326)]){let a=0;if(t===s(329)&&206!==o[s(340)]&&o.status>=200&&o[s(340)]<400)a=1;else if(o[s(340)]>=200&&o[s(340)]<300){if(e[s(328)]){const t=Date.now();e.bannedTime+=t-e[s(355)],e[s(355)]=t,e[s(328)]=!1,e[s(317)]++}e[s(316)]=0,n.default[s(358)](r.BalancerTag,s(347)+i+" "+o[s(340)]),e.lastUpdatedState=0,e.isCodavel()&&null!=c[s(387)]&&c.loader[s(305)][s(333)]()}else if(o[s(340)]>=400){if(n.default.verbose(r.BalancerTag,s(361)+i+" "+o.status),null!=e[s(292)]&&e.auth[s(357)]&&!e[s(292)][s(296)]){if(403!=o.status&&!e[s(328)]){const t=Date[s(293)]();e[s(304)]+=t-e[s(355)],e[s(355)]=t,e.banned=!0,e[s(322)]++}}else if(!e[s(328)]){const t=Date[s(293)]();e[s(304)]+=t-e[s(355)],e[s(355)]=t,e[s(328)]=!0,e[s(322)]++}e.lastUpdatedState=1,e.isCodavel()&&null!=c[s(387)]&&c.loader[s(305)][s(382)](1)}0===a&&c[s(297)](d,e),u(a)}},o[h(360)]=function(){const t=h;if(n.default[t(358)](r.BalancerTag,t(361)+i+" "+o[t(340)]),e[t(328)]){const i=Date[t(293)]();e[t(325)]+=i-e.bannedRefTicToc,e[t(355)]=i}else{const i=Date[t(293)]();e[t(304)]+=i-e[t(355)],e[t(355)]=i,e[t(328)]=!0,e[t(322)]++}e[t(344)]=2,e[t(362)]()&&null!=c[t(387)]&&c[t(387)][t(305)][t(382)](2),u(0)},o[h(338)]=function(){const t=h;if(n.default[t(358)](r.BalancerTag,t(309)+i+" "+o.status),e[t(328)]){const i=Date[t(293)]();e[t(325)]+=i-e[t(355)],e[t(355)]=i}else{const i=Date[t(293)]();e.unbannedTime+=i-e.bannedRefTicToc,e[t(355)]=i,e[t(328)]=!0,e[t(322)]++}e[t(344)]=2,e[t(362)]()&&null!=c[t(387)]&&c.loader[t(305)][t(382)](2),u(0)},o[h(313)](t,i),t===h(329)&&o[h(312)](h(380),h(363)),o[h(299)]=a.wc[h(372)],o.send()}))}))}}class ot{constructor(t,e){this.columns=["CDN","Provider","# of requests","% of failed req.","Traffic served (MB)"],this.requestsPerformed=0,this.trafficServedInBytes=0,this.failedRequests=0,this.name=t,this.provider=e}setRequestsPerformed(t){this.requestsPerformed=t}setTrafficServerInBytes(t){this.trafficServedInBytes=t}setFailedRequests(t){this.failedRequests=t}getFailedRequestsPercentage(){const t=this.requestsPerformed+this.failedRequests;return 0!==t?this.failedRequests/t*100:0}generateRow(){let t=0!==this.requestsPerformed?this.failedRequests/this.requestsPerformed*100:0;t=0===this.requestsPerformed&&this.failedRequests>0?100:t;let e="";return t>70?e="red":t>30&&(e="yellow"),{row:"%c"+[this.name,this.provider,this.requestsPerformed+this.failedRequests,t.toFixed(0),(this.trafficServedInBytes/1048576).toFixed(2)].map((t=>t.toString().padEnd(18))).join(""),color:e}}}var dt=i(6443);const ct=ut;function ut(t,e){const i=ht();return(ut=function(t,e){return i[t-=272]})(t,e)}!function(t){const e=ut,i=t();for(;;)try{if(268502==parseInt(e(316))/1*(-parseInt(e(535))/2)+parseInt(e(515))/3*(parseInt(e(293))/4)+-parseInt(e(504))/5*(-parseInt(e(388))/6)+-parseInt(e(508))/7*(parseInt(e(445))/8)+parseInt(e(455))/9+-parseInt(e(439))/10+parseInt(e(505))/11)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(ht);class lt extends w{constructor(t,e,i,s){const n=ct;super(),this[n(418)]=a.Ow[n(412)],this._cdnList=new Map,this[n(345)]=new Map,this[n(366)]=new Map,this[n(452)]=0,this[n(319)]=0,this[n(338)]={currentCDN:""},this[n(458)]=0,this._highestRenditionBandwidth=0,this[n(318)]=new Map,this[n(530)]=new Map,this[n(275)]=new Map,this[n(373)]=new Map,this._totalDownloadedBytes=0,this[n(348)]=0,this[n(442)]=0,this[n(502)]=0,this[n(501)]=0,this.currentRenditionPos=0,this.renditionCount=0,this[n(311)]=!1,this[n(468)]=!1,this[n(526)]=!1,this[n(341)]=0,this[n(370)]=0,this[n(497)]=0,this.codavelUnbanTime=0,this[n(518)]=0,this[n(477)]=0,this[n(336)]=0,this.codavelSwitchesDueToQuality=0,this.codavelBanRefTicToc=Date[n(471)](),this[n(349)]=0,this.codavelProvidersState=new Map,this[n(399)]=!1,this.avgApiCallResponseTime=void 0,this[n(527)]=void 0,this[n(433)]=void 0,this[n(375)]=void 0,this[n(496)]=void 0,this[n(352)]=!1,this.bolinaAvailable=!1,this[n(474)]="",this[n(281)]="",this.announcedCdns=0,this[n(476)]=void 0,this[n(404)]=t,this[n(314)]=e,this._p2pLoader=i,this.apiHost=s}[ct(273)](){const t=ct;return null!=this._secure&&this[t(365)]}getActiveRequests(){return this._activeRequests}gotEmptyResponse(){const t=ct;this[t(311)]=!1,this[t(440)][t(369)]()}[ct(303)](t,e){const i=ct;var s,o,d,c,l,h,p,f,g,m,v,y,T,S,E,b;if(this[i(311)])return this[i(422)](t,e);this._cdnList=new Map;try{!0===(null==t?void 0:t[i(444)])&&n.default[i(301)](n.LogLevel[i(321)]);let r=u[i(337)](null!==(s=this[i(404)][i(312)])&&void 0!==s?s:"")?u.getRouteAndFilename(this[i(404)].resource):{route:"",fileName:""};this[i(365)]=(null!==(d=null===(o=this[i(404)][i(312)])||void 0===o?void 0:o[i(306)](i(310)))&&void 0!==d?d:-1)>-1||void 0,this._resource[i(456)]=r[i(456)],this[i(314)][i(383)]=r[i(383)],this._responseUUID=t[i(448)],this[i(512)]=t[i(401)],this[i(500)]=t.activeSwitching,this[i(418)]=null!==(c=t.bandwidthThreshold)&&void 0!==c?c:a.Ow[i(412)],this[i(414)]=t.probeOnlyOnBanned,this[i(297)]=t[i(279)];let A=void 0!==t.activeSwitching;at.getInstance()[i(286)](null!==(l=this[i(297)])&&void 0!==l?l:this[i(404)][i(279)]),this[i(500)]===a.m[i(292)]?at[i(296)]()[i(453)](null!==(h=this._probeOnBanned)&&void 0!==h?h:this._options[i(428)]):at[i(296)]()[i(453)](!1),x.default[i(296)]()[i(489)](A),a.Zq[i(523)]=null!==(p=t[i(523)])&&void 0!==p?p:a.Zq.lastMeasurementWeight,a.Zq[i(289)]=null!==(f=t[i(289)])&&void 0!==f?f:a.Zq.maximumRelativeDeltaForTrial,a.Zq[i(408)]=null!==(g=t[i(408)])&&void 0!==g?g:a.Zq[i(408)],a.wc[i(450)]=null!==(m=t.callTimeoutMilliseconds)&&void 0!==m?m:a.wc.callTimeoutMilliseconds,a.wc[i(282)]=null!==(v=t[i(282)])&&void 0!==v?v:a.wc[i(282)],a.wc[i(372)]=null!==(y=t[i(372)])&&void 0!==y?y:a.wc[i(372)],a.df[i(528)]=null!==(T=t[i(528)])&&void 0!==T?T:a.df.decisionCallWaitTime,a.df[i(473)]=null!==(S=t[i(473)])&&void 0!==S?S:a.df[i(473)],a._C[i(300)]=null!==(E=t[i(300)])&&void 0!==E?E:a._C.minRequestSizeForBwEstimateKB;let w=0,_=!1,I=[];I=A?(null===(b=t.providers)||void 0===b?void 0:b[i(382)](t[i(290)]||[]))||[]:t[i(524)]||[],x.default.getInstance()[i(498)](),this[i(513)][i(295)]()&&(this[i(345)][i(371)]=0,this[i(440)][i(323)](i(371),this[i(513)].getCdnObject())),this[i(352)]=this[i(513)].isEnabled(),this[i(500)]==i(276)?this[i(474)]=i(419):this[i(500)]==i(292)?this[i(474)]="CDN priority":this.activeSwitchingPriority=i(475),I.forEach((t=>{w+=t[i(411)]||0}));let N=!1;I[i(317)]((s=>{const n=i,r=s[n(411)]||0,a=u[n(337)](s[n(305)])?u[n(364)](s[n(305)])[n(383)]:"";_=_||a===e;const o=new V(s[n(387)],s.name,s[n(394)],s.path,a,r,a===e,s[n(377)],s.weight,s[n(429)],s[n(481)],s.auth,t[n(415)]);o.host=s.host,x.default[n(296)]()[n(362)](s.name,new ot(s[n(304)],s[n(387)])),this[n(440)][n(323)](s[n(304)],o),this.codavelProvidersState=new Map(Array[n(405)](this[n(440)][n(360)]())[n(277)]((t=>t.isCodavel()))[n(385)]((t=>[t[n(304)],t[n(432)]]))),this.updateCodavelBanTimes(),this[n(345)][s[n(304)]]=0,!N&&(this[n(281)]=s[n(304)],N=!0)}))}catch(t){n.default.warn(r.BalancerTag,t)}this[i(514)]=this[i(440)][i(350)]-(this[i(513)][i(295)]()?1:0),this[i(311)]=!0}[ct(422)](t,e){const i=ct;var s,r,o;!0===(null==t?void 0:t[i(444)])&&n.default.setLogLevel(n.LogLevel[i(321)]),this[i(512)]=t[i(401)],this[i(500)]=t.activeSwitching,this[i(414)]=t[i(428)],this[i(297)]=t[i(279)],this[i(352)]=this._p2pLoader[i(295)](),this[i(500)]==i(276)?this[i(474)]=i(419):"cdnPriority"==this[i(500)]?this[i(474)]="CDN priority":this[i(474)]="Disabled",at[i(296)]().setNoProbing(null!==(s=this[i(297)])&&void 0!==s?s:this[i(404)][i(279)]),this[i(500)]===a.m[i(292)]?at[i(296)]()[i(453)](null!==(r=this._probeOnBanned)&&void 0!==r?r:this._options[i(428)]):at[i(296)]()[i(453)](!1);let d=!1;const c=(null===(o=t[i(524)])||void 0===o?void 0:o[i(382)](t[i(290)]||[]))||[],l=new Map;let h=!1;c.forEach((s=>{const n=i,r=this[n(440)][n(315)](s[n(304)]);if(r){r[n(291)]=!0,r[n(394)]!=s[n(394)]&&(r[n(394)]=s[n(394)]),r.path!=s.path&&(r[n(332)]=s[n(332)]);let t=u.getRouteAndFilename(s[n(305)])[n(383)];r.url!=t&&(r[n(305)]=t),r.auth!=s[n(531)]&&(r[n(531)]=s[n(531)]),l[n(323)](s[n(304)],r)}else{const i=s[n(411)]||0,r=u[n(364)](s[n(305)])[n(383)];d=d||r===e;const a=new V(s[n(387)],s.name,s.host,s.path,r,i,r===e,s[n(377)],s[n(309)],s.absolute,s[n(481)],s.auth,t[n(415)]);this[n(440)].set(s[n(304)],a),l[n(323)](s.name,a),this[n(345)][s[n(304)]]=0}!h&&(this[n(281)]=s.name,h=!0)})),this[i(514)]=this._cdnList.size-(this[i(513)].isEnabled()?1:0),this[i(440)]=l;const p=c[i(385)]((t=>t[i(304)]));this[i(440)][i(317)]((t=>{const e=i;p[e(493)](t[e(304)])||t[e(387)]==e(441)||t[e(387)]==e(371)||(t[e(291)]=!1)})),this.codavelProvidersState=new Map(Array[i(405)](this[i(440)][i(360)]())[i(277)]((t=>t.isCodavel()))[i(385)]((t=>[t.name,t[i(432)]]))),this[i(507)]()}startMonitoring(){const t=ct;this[t(500)]&&(this[t(468)]?at.getInstance()[t(343)](this[t(440)]):(this[t(468)]=!0,at[t(296)]()[t(459)](this[t(440)])))}[ct(525)](t,e){const i=ct;if(this[i(345)][t]<1)return;this.updateProgressStats();const s=this[i(440)].get(t);if(this[i(345)][t]--,0==e[i(484)]&&this[i(452)]++,null!=s&&s[i(484)]--,s&&!s.banned){if(s[i(432)]){const t=Date.now();s[i(353)]+=t-s[i(486)],s[i(486)]=t}else{const t=Date[i(471)]();s[i(326)]+=t-s.bannedRefTicToc,s.bannedRefTicToc=t,s.banned=!0,s.bannedCount++}s[i(432)]=!0,s[i(284)]++}s&&n.default.verbose(r.BalancerTag,i(402)+s[i(304)]+i(347)+s.banned),s&&(e[i(479)]=!0,s[i(466)](e),s[i(437)]++,s[i(294)]++,s[i(407)]=!0),this.codavelProvidersState=new Map(Array[i(405)](this[i(440)][i(360)]())[i(277)]((t=>t.isCodavel()))[i(385)]((t=>[t[i(304)],t[i(432)]]))),this.updateCodavelBanTimes()}[ct(334)](t){const e=ct;this[e(366)][e(287)](t.id),this[e(345)][t[e(446)]]--,this[e(319)]++}[ct(359)](t){const e=ct;var i,s;if(t[e(435)]&&(this[e(476)]=t[e(476)]),this[e(381)](),null!=t[e(392)]){if(this[e(283)]=this[e(283)]+t[e(350)],0!=t[e(346)]){const i=8*t.size/t[e(346)];this._highestChunkBandwidth<i&&(this._highestChunkBandwidth=i)}null===(i=this._cdnList[e(315)]((null==t?void 0:t[e(446)])||""))||void 0===i||i.addResp(t)}else t[e(393)]&&(this[e(404)][e(420)]||this[e(404)][e(509)])&&(null===(s=this[e(440)][e(315)]((null==t?void 0:t.cdnName)||""))||void 0===s||s[e(466)](t));this[e(469)]=new Map(Array[e(405)](this[e(440)].values())[e(277)]((t=>t[e(499)]()))[e(385)]((t=>[t[e(304)],t[e(432)]]))),this[e(507)]()}getCdnList(){return this[ct(440)]}[ct(381)](){const t=ct,e=new Map,i=new Map;this[t(366)][t(317)]((i=>{const s=t,n=i[s(532)],r=i[s(446)];let a=e[s(315)](r);null==a&&(a=0),a+=n,e[s(323)](r,a)})),this[t(530)]=e,e[t(317)](((e,i)=>{const s=t,n=this[s(275)][s(315)](i);null==n?this[s(275)][s(323)](i,e):n<e&&this[s(275)].set(i,e)})),e[t(317)](((e,i)=>{0!=e&&this[t(318)].set(i,e)}));let s=0;i[t(317)](((t,e)=>{s+=t}))}[ct(325)](t,i,s){const a=ct;var o,d,c;const l=e.default[a(296)]()[a(451)]()[a(495)](),h=null!==(o=this._options[a(390)])&&void 0!==o?o:"",p=null!==(d=this[a(404)][a(431)])&&void 0!==d?d:a(412),f=(this._options[a(335)],null!==(c=this._options[a(410)])&&void 0!==c&&c);let g=i;const m=new XMLHttpRequest;let v=g+"/"+l+"/"+(this._options[a(390)]?h+"/":"")+a(457);v=v[a(355)]("//","/"),v=a(310)+v;const y={resource:t,live:""+f,extended:"true",npawPluginInfo:a(396),originCode:null!==this._options.bucketName&&void 0!==this._options[a(431)]?p:"",v:e.default[a(438)]()};if(m[a(465)](a(447),v+u[a(423)](y),!1),m[a(534)](),m[a(461)]>=200&&m[a(461)]<=300)try{if(m[a(313)]){const t=JSON.parse(m[a(313)]);for(const e of t[a(524)])if(e[a(304)]===s&&e[a(531)]&&e[a(531)].signed_url_info)return e[a(531)][a(302)].signed_url}}catch(t){n.default[a(444)](r.BalancerTag,a(379)+t)}else n.default.debug(r.BalancerTag,"Error: unable to obtain API response for signed URL (status: "+m[a(461)]+")")}[ct(449)](t,i=!1,s){const a=ct;var o,d,c,u,l,h,p,f,g,m,v,y,T,S;const E=this[a(516)](t[a(305)]),b=this.isNotOnWhitelist(t[a(305)]),A=t.isManifest&&!t[a(479)],w=E&&b,_=null!==(o=this[a(404)][a(509)])&&void 0!==o&&o||null!==(d=this[a(404)][a(420)])&&void 0!==d&&d;if(_){if(E&&b){const e=Array[a(405)](this[a(440)][a(360)]())[a(385)]((t=>'"'+t[a(394)]+'"')),i=(null!==(c=this[a(404)][a(519)])&&void 0!==c?c:[]).concat(null!==(u=this[a(404)][a(487)])&&void 0!==u?u:[])[a(385)]((t=>'"'+t+'"'));return void n.default[a(444)](r.BalancerTag,a(361)+t.url+a(340)+e.join(",")+a(363)+i.join(",")+a(330)+_+")")}}else if(A||w){if(E&&b){const e=Array[a(405)](this[a(440)][a(360)]()).map((t=>'"'+t[a(394)]+'"')),i=(null!==(l=this[a(404)][a(519)])&&void 0!==l?l:[])[a(382)](null!==(h=this[a(404)][a(487)])&&void 0!==h?h:[])[a(385)]((t=>'"'+t+'"'));n.default.debug(r.BalancerTag,"Bypassed "+t[a(305)]+a(340)+e[a(308)](",")+a(363)+i[a(308)](",")+"]")}return}if(s){const n=this._cdnList.get(s);if(n){let s=(t[a(305)][a(376)](a(426))?"https://":a(480))+n[a(394)];if(n.provider===a(280)||n[a(387)]===a(488)?s+="/"+e.default.getInstance()[a(451)]()[a(495)]()+"/"+(null!==(p=this._options[a(390)])&&void 0!==p?p:a(412))+"/"+(null!==(f=this[a(404)][a(431)])&&void 0!==f?f:a(412)):s+=n[a(332)],s+=t[a(478)],(n[a(387)]===a(280)||n[a(387)]===a(488))&&(s+=s[a(493)]("?")?a(272)+t.origRes:a(357)+t[a(386)]),n[a(387)]===a(488)&&(s+=a(288)),null!=n[a(531)]&&n[a(531)][a(417)]&&(!i||i&&n.auth[a(470)]))if(n[a(531)][a(483)]===a(425)){const t=(null===(g=n[a(531)].signed_url_info)||void 0===g?void 0:g[a(354)])||"";s+=s[a(493)]("?")?"&"+t:"?"+t}else if(n[a(531)][a(483)]===a(320)){const t=this[a(325)](s,this.apiHost,n[a(304)]);t&&(s=t)}return s}}let I=new Map;I=new Map(this._cdnList);let N="",D="";const P=(null===(m=t[a(413)])||void 0===m?void 0:m[a(421)])||0;for(this._highestRenditionBandwidth<P&&(this[a(520)]=P);(!N||""==N)&&(D=new tt(I,this[a(418)],this[a(520)],this[a(500)],this._p2pLoader,this[a(404)])[a(398)](t,this[a(338)]),e.default.getInstance().registerCommonVariable(dt.default.Products[a(395)],dt.default[a(400)][a(463)],D===a(397)?a(462):D),"P2P"!==D);){const i=this[a(440)].get(D);try{if(i&&D!=a(397)){if(N=(t[a(305)][a(376)]("https")?a(310):a(480))+i.host,i[a(387)]===a(280)||"STREBOPX"===i.provider){const t=e.default[a(296)]()[a(451)]()[a(495)]();N+="/"+t+"/"+(null!==(v=this[a(404)].profileName)&&void 0!==v?v:a(412))+"/"+(null!==(y=this[a(404)][a(431)])&&void 0!==y?y:a(412))}else N+=i[a(332)];N+=t[a(478)],(i[a(387)]===a(280)||i[a(387)]===a(488))&&(N+=N[a(493)]("?")?"&orresource= "+t[a(386)]:"?orresource="+t[a(386)]),i[a(387)]===a(488)&&(N+="&advanceproxy=true"),""==N&&n.default[a(444)](r.BalancerTag,a(378)+t.url+" / "+(null===(T=this[a(314)])||void 0===T?void 0:T[a(383)])+a(529)+i.name)}else"Original"==D&&(N=t[a(305)])}catch(t){}I[a(287)](D)}if(D===a(371))N=a(371);else{this[a(345)][D]++;const e=this[a(440)][a(315)](D);if(null!=e&&null!=e[a(531)]&&e[a(531)][a(417)]&&(!i||i&&e[a(531)][a(470)]))if("append_to_url"===e[a(531)][a(483)]){const t=(null===(S=e[a(531)][a(302)])||void 0===S?void 0:S[a(354)])||"";N+=N.includes("?")?"&"+t:"?"+t}else if(e.auth[a(483)]===a(320)){const t=this[a(325)](N,this[a(329)],e.name);t&&(N=t)}if(t.finalUrl=N,e&&t[a(327)](N,e[a(304)],e[a(387)]),n.default[a(494)](r.BalancerTag,a(533)+N+a(324)+t.cdnName),this[a(339)]!=D&&"Original"!==this[a(339)]&&void 0!==this.lastUsedCdn){const t=this._cdnList.get(this[a(339)]),e=this._cdnList[a(315)](D);null!=t&&(t[a(499)]()&&null!=e&&!e[a(499)]()&&(3==t[a(424)]&&this[a(328)](3),this.onCodavelSwitched()),t[a(491)](),2==t[a(424)]?t[a(436)]():1==t[a(424)]?t[a(356)]():3==t[a(424)]&&t.incrementSwitchesDueToQuality())}this[a(339)]=D}return N}setResourceInfo(t){const e=ct,i=u[e(337)](null!=t?t:"")?u[e(364)](t):{route:"",fileName:""};this[e(314)][e(456)]=i[e(456)],this[e(314)][e(383)]=i[e(383)]}[ct(490)](){return t=this,i=void 0,n=function*(){const t=ut;let i=0;for(;!e.default[t(296)]()[t(464)](dt.default[t(389)][t(395)],dt.default[t(400)][t(409)])&&i++<5;)yield u.delay(300);if(5===i)return this[t(314)].route+this[t(314)][t(456)];const s=Array.from(this[t(440)][t(360)]()).filter((e=>e[t(304)]!==t(371)));return s[t(416)]>0?s[0][t(305)]+this[t(314)][t(456)]:this[t(314)][t(383)]+this._resource[t(456)]},new((s=void 0)||(s=Promise))((function(e,r){const a=ut;function o(t){const e=ut;try{c(n[e(427)](t))}catch(t){r(t)}}function d(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){const i=ut;var n;t[i(472)]?e(t[i(482)]):(n=t.value,n instanceof s?n:new s((function(t){t(n)})))[i(307)](o,d)}c((n=n[a(333)](t,i||[]))[a(427)]())}));var t,i,s,n}[ct(367)](){const t=ct,e=[];let i=0,s=0,n=0,r=0,a=0,o=0,d=0,c=0;return this[t(440)][t(317)]((u=>{const l=t;if(u.name===l(371))return;u[l(506)]();let h=(u.downloadedBytes||0)/((u[l(298)]||1)/1e3)*8;const p=(u[l(358)]||0)/((u.downloadTimeForScoring||1)/1e3)*8;null==h&&(h=0);const f=this._totalDownloadedBytes/((Date[l(471)]()-this[l(348)])/1e3)*8,g=this[l(275)][l(315)](u[l(304)])||0,m=this[l(530)][l(315)](u[l(304)])||0,v=this[l(318)][l(315)](u[l(304)])||0;e[l(368)]({downloadedBytes:u.downloadedBytes,downloadedChunks:u[l(521)],bandwidth:Math.trunc(h),instantBandwidth:Math[l(434)](m),lastInstantBandwidth:Math[l(434)](v),peakBandwidth:Math.trunc(g),failures:u[l(437)],totalFailures:u[l(294)],retries:u[l(484)],downloadTime:u[l(298)],provider:u[l(387)],profileName:u.name,isActive:u[l(291)],ptb:f,usedOnce:u[l(407)],hugeChunks:u[l(403)],firstHugeChunkSize:u[l(331)],lastChunksLapse:this[l(502)],maxBandwidth:u[l(274)],banned:u.banned,lastBandwidth:u.lastPreferedVideoBandwidth,scoringBandwidth:p}),i+=u[l(510)],s+=h,n+=g,r+=m,a+=u[l(521)],o+=u.downloadMillis,d+=u.failures,c+=u[l(484)]})),{responseUUID:this[t(522)],totalDownloadedBytes:i,totalDownloadedChunks:a,totalDownloadedTime:o,totalFailures:d,totalRetries:c,activeSwitching:this[t(500)]||"",mode:this[t(512)]||"",totalBandwidth:Math[t(434)](s),totalInstantBandwidth:Math[t(434)](r),totalPeakBandwidth:Math[t(434)](n),cdns:e,currentRenditionBandwidth:this[t(501)],currentRenditionPos:this.currentRenditionPos,renditionCount:this[t(467)]}}[ct(285)](t,e){const i=ct;let s=!1,n=0;return!e&&this._cdnList[i(317)]((t=>{t[i(291)]&&n++})),this[i(440)][i(317)]((r=>{const a=i;r[a(304)]===t&&(e&&(r.active=!0,s=!0),!e&&n>1&&(r[a(291)]=!1,s=!0))})),s}setMaxBandwidth(t,e){const i=ct,s=this[i(440)][i(315)](t);return null!=s&&(s[i(274)]=e,this[i(492)](a.yl[i(374)],{loader:this}),!0)}[ct(406)](t){const e=ct,i=this[e(440)][e(315)](t);return null!=i?i[e(274)]:0}[ct(507)](){const t=ct,e=Date[t(471)]();if(0===this.codavelProvidersState[t(350)])return void(this.codavelBanRefTicToc=e);const i=Array[t(405)](this[t(469)].values())[t(430)]((t=>t));i!==this[t(526)]?i?(this[t(380)]+=e-this[t(460)],this[t(460)]=e,this[t(341)]++):(this[t(497)]+=e-this[t(460)],this[t(460)]=e,this[t(370)]++):i?(this[t(497)]+=e-this[t(460)],this[t(460)]=e):(this[t(380)]+=e-this.codavelBanRefTicToc,this.codavelBanRefTicToc=e),this[t(526)]=i}[ct(511)](){const t=ct;this[t(497)]=0,this[t(380)]=0,this[t(460)]=Date.now(),this[t(399)]=!1,this[t(384)]=void 0,this[t(527)]=void 0,this[t(433)]=void 0,this[t(375)]=void 0,this[t(496)]=void 0}[ct(454)](){const t=ct;this[t(518)]++,2==this.lastCodavelRequestStatus?this.codavelSwitchesDueToConnectivity++:1==this.lastCodavelRequestStatus?this[t(336)]++:3==this[t(349)]&&this[t(443)]++}onCodavelSucessfullResponse(){this[ct(349)]=0}[ct(328)](t){this[ct(349)]=t}[ct(517)](){null==this[ct(375)]?this.apiCallErrors=1:this.apiCallErrors+=1,this.processedApiCall=!0}onSucessfullApiResponse(t){const e=ct;null==this[e(496)]?this.apiCallResponses=1:this[e(496)]+=1,null==this[e(527)]?this[e(527)]=t:this[e(527)]=Math.min(this.minApiCallResponseTime,t),null==this[e(384)]?this[e(384)]=t:this[e(384)]=this[e(384)]+(t-this[e(384)])/this[e(496)],null==this[e(433)]?this[e(433)]=t:this[e(433)]=Math.max(this[e(433)],t),this[e(399)]=!0}[ct(351)](){const t=ct;return this._options[t(431)]}[ct(391)](){const t=ct;return this._options[t(410)]}[ct(344)](){const t=ct;return this[t(404)][t(503)]}[ct(342)](){return this[ct(476)]}[ct(516)](t){const e=ct;let i=!1;const s=new URL(t);for(const t of this[e(440)][e(360)]())if(t.host===s.host){i=!0;break}return!i}[ct(299)](t){const e=ct;var i,s;let a=!1;const o=new URL(t);for(const t of null!==(i=this[e(404)][e(487)])&&void 0!==i?i:[])try{if(new RegExp(t)[e(485)](o.host)){a=!0;break}}catch(i){n.default[e(444)](r.BalancerTag,e(322)+t)}for(const t of null!==(s=this._options[e(519)])&&void 0!==s?s:[]){if(a)break;if(t===o[e(394)]){a=!0;break}}return!a}}function ht(){const t=["getMaxBandwidth","usedOnce","minimumDurationSinceLastUsedForTrialMilliseconds","DECISION_FINISHED","isLive","score","default","rendition","_probeOnBanned","parser","length","enabled","_bandwidthThreshold","Quality priority","signManifestUsingApi","bandwidth","updateSettings","formatParameters","lastUpdatedState","append_to_url","https","next","probeOnlyOnBanned","absolute","every","bucketName","banned","maxApiCallResponseTime","trunc","isMasterPlaylist","incrementSwitchesDueToConnectivity","failures","getPluginVersion","2267140auJDfG","_cdnList","ORIGINAL","_lastChunkTime","codavelSwitchesDueToQuality","debug","51608gAjIgJ","cdnName","GET","UUID","updateUrl","callTimeoutMilliseconds","getFastDataService","_failedRequests","setHeadOnBannedOnly","onCodavelSwitched","396909jjWavQ","fileName","signUrl","_highestChunkBandwidth","monitor","codavelBanRefTicToc","status","Origin","LAST_USED_CDN","getCommonVariable","open","addResp","renditionCount","monitoringStarted","codavelProvidersState","authenticate_probes","now","done","decisionReloadIntervalPerManifestMilliseconds","activeSwitchingPriority","Disabled","segmentDuration","codavelSwitchesDueToConnectivity","pathName","failed","http://","dnsEnabled","value","auth_action_info","retries","test","bannedRefTicToc","domainWhitelistRegex","STREBOPX","setActiveSwitchingEnabled","getRecommendedManifest","incrementSwitches","emit","includes","verbose","getAccountCode","apiCallResponses","codavelBanTime","cleanCdnList","isCodavel","_activeSwitching","currentRenditionBandwidth","_lastChunksLapse","forceDecisionCall","20QaPvvx","2690182PKxrSD","updateAvailability","updateCodavelBanTimes","427OeTsBW","balanceManifests","downloadedBytes","resetOnPing","_method","_p2pLoader","announcedCdns","172812ZIhGTV","isNotOnCdnList","onFailedApiResponse","codavelSwitches","domainWhitelist","_highestRenditionBandwidth","downloadedChunks","_responseUUID","lastMeasurementWeight","providers","updateCDNStatsOnFailure","codavelAllBanned","minApiCallResponseTime","decisionCallWaitTime"," / ","_cdnInstantBandwith","auth","instantBandwidth","New url -> ","send","4SnOkKM","&orresource= ","getSecure","maxBandwidth","_cdnPeakBandwidth","qualityPriority","filter","__awaiter","noProbing","STREBOOS","priorityCdn","timeBetweenBurstsMilliseconds","_totalDownloadedBytes","bannedCount","changeStatusCDN","setNoProbing","delete","&advanceproxy=true","maximumRelativeDeltaForTrial","discarded","active","cdnPriority","12BBXvrW","totalFail","isEnabled","getInstance","_noProbing","downloadMillis","isNotOnWhitelist","minRequestSizeForBwEstimateKB","setLogLevel","signed_url_info","setSettings","name","url","indexOf","then","join","weight","https://","initializated","resource","response","_resource","get","2028vQHGxu","forEach","_cdnLastInstantBandwith","_chunkCount","sign_all_requests","VERBOSE","Invalid regex expression ","set"," | ","getSignedUrlFromApi","unbannedTime","changeCDN","onCodavelFailedResponse","apiHost","] (balancerManifest: ","firstHugeChunkSize","path","apply","removeActiveSegment","isDev","codavelSwitchesDueToErrors","isValidUrl","_probingInfo","lastUsedCdn"," because its host is not one of the currently active CDN hosts: [","codavelBanCount","getSegmentDuration","updateCdnList","getForceDecision","_activeCdnRequests","duration"," -> banned ","_firstRequestTime","lastCodavelRequestStatus","size","getBucket","p2pAvailable","bannedTime","token","replace","incrementSwitchesDueToErrors","?orresource=","downloadedBytesForScoring","updateCDNStatsOnSuccess","values","Bypassed ","addCdn","], nor one of the whitelisted domains [","getRouteAndFilename","_secure","_activeRequests","getStats","push","clear","codavelUnbanCount","P2P","timeBetweenCallsMilliseconds","_retries","Updated","apiCallErrors","startsWith","price","Error updating url -> ","Error parsing Balancer API response for signed URL: ","codavelUnbanTime","updateProgressStats","concat","route","avgApiCallResponseTime","map","origRes","provider","646962ZMGSuG","Products","profileName","getIsLive","progressDownloadedBytes","isManifest","host","BALANCER","true","Original","getCDN","processedApiCall","BalancerVariables","cdnBalanceMethod","FAILED -> ","hugeChunks","_options","from"];return(ht=function(){return t})()}const pt=ft;function ft(t,e){const i=mt();return(ft=function(t,e){return i[t-=276]})(t,e)}!function(t){const e=ft,i=t();for(;;)try{if(430900==parseInt(e(282))/1*(parseInt(e(298))/2)+-parseInt(e(317))/3+-parseInt(e(312))/4*(parseInt(e(311))/5)+-parseInt(e(292))/6+parseInt(e(302))/7*(parseInt(e(301))/8)+parseInt(e(287))/9*(parseInt(e(305))/10)+-parseInt(e(294))/11*(parseInt(e(277))/12))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(mt);class gt{constructor(t){const e=ft;this[e(319)]=new Map,this[e(318)]=a.dR.count,this[e(313)]=a.dR[e(308)],this[e(303)]="",this[e(290)]=t,setInterval((()=>{this[e(299)]()}),1e3)}[pt(320)](t){const e=pt,i=t.p2p;i&&(this._expTime=i[e(284)]||a.dR[e(308)],this[e(318)]=Math.min(i[e(283)]||a.dR[e(295)],a.dR.safeMaxCount))}[pt(280)](){return this._maxSize}getSegment(t){return this[pt(319)].get(t)}[pt(288)](t){const e=pt;return this[e(319)][e(310)](t)}[pt(279)](t){const e=pt;return!this[e(288)](t[e(307)])&&typeof t.data!==e(296)&&(this[e(303)]=t[e(307)],this[e(319)][e(286)](t.p2pId,t),this[e(289)](),!0)}[pt(299)](){const t=pt,e=Date[t(304)]()-this[t(313)];this._localMem[t(281)](((i,s)=>{const n=t;i[n(276)]<e&&this[n(319)][n(285)](s)}))}_reduceMemSize(){const t=pt;let e,i;this[t(319)][t(314)]-this[t(318)]>0&&(i=Date[t(304)](),e="",this[t(319)][t(281)](((s,n)=>{const r=t;s[r(316)]<i&&(e=n,i=s[r(316)])})),this[t(319)][t(285)](e),this[t(289)]())}[pt(278)](){const t=pt,e=[];for(const[,i]of this[t(319)])i[t(293)]?e[t(321)](i[t(307)]):n.default[t(315)](r.BalancerTag,t(291));return e}[pt(306)](){const t=pt;this._localMem[t(309)]()}getSize(){const t=pt;return this._localMem[t(314)]}[pt(300)](){return this[pt(303)]}getLastSegmentCreatedAt(){const t=pt;var e;return(null===(e=this[t(319)].get(this[t(303)]))||void 0===e?void 0:e[t(297)])||0}}function mt(){const t=["435MqaHio","20380XrlezV","_expTime","size","debug","endTime","535005dTJGqV","_maxSize","_localMem","setSettings","push","startTime","624oRTjUI","createMap","storeSegment","getMaxSize","forEach","7187jOTADA","cachedSegmentsCount","cachedSegmentExpiration","delete","set","1197FvpPvB","hasSegment","_reduceMemSize","_loader","P2P: Segment not ready yet for segment map","655998BSIpUM","readyForP2P","60610tpDomE","count","undefined","createdAt","90UalMkm","_removeOldSegments","getLastSegmentId","3165592rnRTSy","7aBZBVj","_lastSegmentId","now","54830GqOYjd","destroy","p2pId","expiration","clear","has"];return(mt=function(){return t})()}var vt=i(8641),yt=i.n(vt);function Tt(){var t=["2628DKyZJk","1134495XTmRuc","pos","uri","25070inNgsL","40230EYMoiY","3065898VCFRNP","72976CXPMXu","217910vDLNUM","77nxAgSP","5cOhwqA","3297788ffdbeO"];return(Tt=function(){return t})()}function St(t,e){var i=Tt();return(St=function(t,e){return i[t-=479]})(t,e)}!function(t){for(var e=St,i=t();;)try{if(618500==-parseInt(e(482))/1+-parseInt(e(485))/2+-parseInt(e(490))/3+parseInt(e(488))/4*(parseInt(e(487))/5)+-parseInt(e(483))/6+parseInt(e(486))/7*(parseInt(e(484))/8)+parseInt(e(489))/9*(parseInt(e(481))/10))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(Tt);class Et{constructor(){var t=St;this[t(480)]="",this[t(479)]=0}}const bt=At;function At(t,e){const i=wt();return(At=function(t,e){return i[t-=454]})(t,e)}function wt(){const t=["6236560uUogMI","581475rLNyZQ","121096DVGtwZ","3EFhwHE","2178JLUqoj","getSegmentsSize","isAudio","4LrSRWq","11431PuhJMF","uri","segments","50PmThCe","isMaxRendition","9VmrIUu","targetDuration","1467873TxezMW","34270pXOrTM","bandwidth","getSegment","getSegments","2298084UaoegA","bandwidthPosition"];return(wt=function(){return t})()}!function(t){const e=At,i=t();for(;;)try{if(407973==-parseInt(e(454))/1+parseInt(e(468))/2*(-parseInt(e(455))/3)+parseInt(e(459))/4*(-parseInt(e(475))/5)+-parseInt(e(456))/6*(parseInt(e(460))/7)+parseInt(e(474))/8*(parseInt(e(465))/9)+parseInt(e(463))/10*(parseInt(e(467))/11)+-parseInt(e(472))/12)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(wt);class _t{constructor(){const t=At;this.uri="",this[t(469)]=0,this[t(458)]=!1,this[t(473)]=-1,this[t(466)]=0,this[t(462)]=new Map,this[t(464)]=!1}addSegment(t,e,i){const s=At;let n=new Et;n[s(461)]=e,n.pos=i,this[s(462)].set(t,n)}[bt(470)](t){return this[bt(462)].get(t)}[bt(457)](){return this[bt(462)].size}[bt(471)](){return this[bt(462)]}}const It=Nt;function Nt(t,e){const i=Pt();return(Nt=function(t,e){return i[t-=444]})(t,e)}!function(t){const e=Nt,i=t();for(;;)try{if(601546==parseInt(e(451))/1*(-parseInt(e(454))/2)+parseInt(e(458))/3*(parseInt(e(452))/4)+-parseInt(e(459))/5+-parseInt(e(453))/6+-parseInt(e(444))/7+parseInt(e(456))/8*(-parseInt(e(445))/9)+-parseInt(e(446))/10*(-parseInt(e(449))/11))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(Pt);class Dt{static[It(450)](t,e,i){const s=It,n=yt()[s(450)](e);if(n.isMasterPlaylist)null!=n.variants&&n[s(463)][s(448)]((function(t){const e=s,n=new _t;n[e(465)]=t[e(465)],n[e(462)]=t.uri,i.addRendition(t[e(462)],n),null!=t.audio&&t[e(457)][e(448)]((function(t){const s=e,n=new _t;n[s(462)]=t.uri,n[s(455)]=!0,i[s(447)](t[s(462)],n)}))}));else{let e=!1;i[s(464)]()[s(448)](((r,a)=>{const o=s;t[o(461)](a)&&(null!=n[o(466)]&&n[o(466)].forEach((function(t){const e=o;i[e(467)](a,t[e(462)],t[e(462)])})),null!=n[o(460)]&&(r[o(460)]=n[o(460)]),e=!0)}))}return n}}function Pt(){const t=["2056610HlpQTE","targetDuration","endsWith","uri","variants","getRenditions","bandwidth","segments","addSegment","8052079czTtGY","2070171xXQOxn","16087430bNGPht","addRendition","forEach","22mTnGhr","parse","7dKLIkV","516452FMDFmu","6695364oxWCbv","174914aQweif","isAudio","8WKcSXk","audio","21VzCDNF"];return(Pt=function(){return t})()}var Rt=i(9731),Lt=i.n(Rt),Ct=i(2553),Ot=i.n(Ct);const Bt=function(t,e){if(/^[a-z]+:/i.test(e))return e;/^data:/.test(t)&&(t=Ot().location&&Ot().location.href||"");var i="function"==typeof Ot().URL,s=/^\/\//.test(t),n=!Ot().location&&!/\/\//i.test(t);if(i?t=new(Ot().URL)(t,Ot().location||"http://example.com"):/\/\//i.test(t)||(t=Lt().buildAbsoluteURL(Ot().location&&Ot().location.href||"",t)),i){var r=new URL(e,t);return n?r.href.slice(18):s?r.href.slice(r.protocol.length):r.href}return Lt().buildAbsoluteURL(t,e)};var xt=i(1048).hp;var Mt=i(7937),kt=function(t){return!!t&&"object"==typeof t},Ut=function t(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return i.reduce((function(e,i){return"object"!=typeof i||Object.keys(i).forEach((function(s){Array.isArray(e[s])&&Array.isArray(i[s])?e[s]=e[s].concat(i[s]):kt(e[s])&&kt(i[s])?e[s]=t(e[s],i[s]):e[s]=i[s]})),e}),{})},Vt=function(t){return Object.keys(t).map((function(e){return t[e]}))},qt=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},Ft=function(t){if(!t.length)return[];for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},Xt=function(t,e){for(var i=0;i<t.length;i++)if(e(t[i]))return i;return-1},Ht=function(t){var e=t.baseUrl,i=void 0===e?"":e,s=t.source,n=void 0===s?"":s,r=t.range,a=void 0===r?"":r,o=t.indexRange,d=void 0===o?"":o,c={uri:n,resolvedUri:Bt(i||"",n)};if(a||d){var u,l=(a||d).split("-"),h=Ot().BigInt?Ot().BigInt(l[0]):parseInt(l[0],10),p=Ot().BigInt?Ot().BigInt(l[1]):parseInt(l[1],10);h<Number.MAX_SAFE_INTEGER&&"bigint"==typeof h&&(h=Number(h)),p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),"bigint"==typeof(u="bigint"==typeof p||"bigint"==typeof h?Ot().BigInt(p)-Ot().BigInt(h)+Ot().BigInt(1):p-h+1)&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),c.byterange={length:u,offset:h}}return c},Gt=function(t){return t&&"number"!=typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t},jt={static:function(t){var e=t.duration,i=t.timescale,s=void 0===i?1:i,n=t.sourceDuration,r=t.periodDuration,a=Gt(t.endNumber),o=e/s;return"number"==typeof a?{start:0,end:a}:"number"==typeof r?{start:0,end:r/o}:{start:0,end:n/o}},dynamic:function(t){var e=t.NOW,i=t.clientOffset,s=t.availabilityStartTime,n=t.timescale,r=void 0===n?1:n,a=t.duration,o=t.periodStart,d=void 0===o?0:o,c=t.minimumUpdatePeriod,u=void 0===c?0:c,l=t.timeShiftBufferDepth,h=void 0===l?1/0:l,p=Gt(t.endNumber),f=(e+i)/1e3,g=s+d,m=f+u-g,v=Math.ceil(m*r/a),y=Math.floor((f-g-h)*r/a),T=Math.floor((f-g)*r/a);return{start:Math.max(0,y),end:"number"==typeof p?p:Math.min(v,T)}}},Wt=function(t){var e=t.type,i=t.duration,s=t.timescale,n=void 0===s?1:s,r=t.periodDuration,a=t.sourceDuration,o=jt[e](t),d=function(t,e){for(var i=[],s=t;s<e;s++)i.push(s);return i}(o.start,o.end).map(function(t){return function(e){var i=t.duration,s=t.timescale,n=void 0===s?1:s,r=t.periodStart,a=t.startNumber;return{number:(void 0===a?1:a)+e,duration:i/n,timeline:r,time:e*i}}}(t));if("static"===e){var c=d.length-1,u="number"==typeof r?r:a;d[c].duration=u-i/n*c}return d},Yt=function(t){var e=t.baseUrl,i=t.initialization,s=void 0===i?{}:i,n=t.sourceDuration,r=t.indexRange,a=void 0===r?"":r,o=t.periodStart,d=t.presentationTime,c=t.number,u=void 0===c?0:c,l=t.duration;if(!e)throw new Error("NO_BASE_URL");var h=Ht({baseUrl:e,source:s.sourceURL,range:s.range}),p=Ht({baseUrl:e,source:e,indexRange:a});if(p.map=h,l){var f=Wt(t);f.length&&(p.duration=f[0].duration,p.timeline=f[0].timeline)}else n&&(p.duration=n,p.timeline=o);return p.presentationTime=d||o,p.number=u,[p]},zt=function(t,e,i){var s,n=t.sidx.map?t.sidx.map:null,r=t.sidx.duration,a=t.timeline||0,o=t.sidx.byterange,d=o.offset+o.length,c=e.timescale,u=e.references.filter((function(t){return 1!==t.referenceType})),l=[],h=t.endList?"static":"dynamic",p=t.sidx.timeline,f=p,g=t.mediaSequence||0;s="bigint"==typeof e.firstOffset?Ot().BigInt(d)+e.firstOffset:d+e.firstOffset;for(var m=0;m<u.length;m++){var v,y=e.references[m],T=y.referencedSize,S=y.subsegmentDuration;v="bigint"==typeof s?s+Ot().BigInt(T)-Ot().BigInt(1):s+T-1;var E=Yt({baseUrl:i,timescale:c,timeline:a,periodStart:p,presentationTime:f,number:g,duration:S,sourceDuration:r,indexRange:s+"-"+v,type:h})[0];n&&(E.map=n),l.push(E),s+="bigint"==typeof s?Ot().BigInt(T):T,f+=S/c,g++}return t.segments=l,t},Kt=["AUDIO","SUBTITLES"],Qt=1/60,Jt=function(t){return(e=t,i=function(t){return t.timeline},Vt(e.reduce((function(t,e){return e.forEach((function(e){t[i(e)]=e})),t}),{}))).sort((function(t,e){return t.timeline>e.timeline?1:-1}));var e,i},$t=function(t){var e,i,s=[];return e=t,i=function(t,e,i,n){s=s.concat(t.playlists||[])},Kt.forEach((function(t){for(var s in e.mediaGroups[t])for(var n in e.mediaGroups[t][s]){var r=e.mediaGroups[t][s][n];i(r)}})),s},Zt=function(t){var e=t.playlist,i=t.mediaSequence;e.mediaSequence=i,e.segments.forEach((function(t,i){t.number=e.mediaSequence+i}))},te=function(t){return t&&t.uri+"-"+(i="bigint"==typeof(e=t.byterange).offset||"bigint"==typeof e.length?Ot().BigInt(e.offset)+Ot().BigInt(e.length)-Ot().BigInt(1):e.offset+e.length-1,e.offset+"-"+i);var e,i},ee=function(t){return Vt(t.reduce((function(t,e){var i,s=e.attributes.id+(e.attributes.lang||"");t[s]?(e.segments&&(e.segments[0]&&(e.segments[0].discontinuity=!0),(i=t[s].segments).push.apply(i,e.segments)),e.attributes.contentProtection&&(t[s].attributes.contentProtection=e.attributes.contentProtection)):(t[s]=e,t[s].attributes.timelineStarts=[]);return t[s].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),t}),{})).map((function(t){var e;return t.discontinuityStarts=(e=t.segments||[],e.reduce((function(t,e,i){return e.discontinuity&&t.push(i),t}),[])),t}))},ie=function(t,e){var i=te(t.sidx),s=i&&e[i]&&e[i].sidx;return s&&zt(t,s,t.sidx.resolvedUri),t},se=function(t,e){if(void 0===e&&(e={}),!Object.keys(e).length)return t;for(var i in t)t[i]=ie(t[i],e);return t},ne=function(t){var e,i=t.attributes,s=t.segments,n=t.sidx,r=t.discontinuityStarts,a={attributes:(e={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:r,timelineStarts:i.timelineStarts,segments:s};return i.contentProtection&&(a.contentProtection=i.contentProtection),n&&(a.sidx=n),a},re=function(t){var e=t.attributes;return"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType},ae=function(t){var e=t.attributes;return"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType},oe=function(t){var e=t.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType},de=function(t){return t?Object.keys(t).reduce((function(e,i){var s=t[i];return e.concat(s.playlists)}),[]):[]},ce=function(t){var e,i=t.dashPlaylists,s=t.locations,n=t.sidxMapping,r=void 0===n?{}:n,a=t.previousManifest;if(!i.length)return{};var o=i[0].attributes,d=o.sourceDuration,c=o.type,u=o.suggestedPresentationDelay,l=o.minimumUpdatePeriod,h=ee(i.filter(re)).map(ne),p=ee(i.filter(ae)),f=ee(i.filter(oe)),g=i.map((function(t){return t.attributes.captionServices})).filter(Boolean),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(e={AUDIO:{},VIDEO:{}},e["CLOSED-CAPTIONS"]={},e.SUBTITLES={},e),uri:"",duration:d,playlists:se(h,r)};l>=0&&(m.minimumUpdatePeriod=1e3*l),s&&(m.locations=s),"dynamic"===c&&(m.suggestedPresentationDelay=u);var v,y,T,S,E,b,A,w=0===m.playlists.length,_=p.length?function(t,e,i){var s;void 0===e&&(e={}),void 0===i&&(i=!1);var n=t.reduce((function(t,n){var r=n.attributes.role&&n.attributes.role.value||"",a=n.attributes.lang||"",o=n.attributes.label||"main";if(a&&!n.attributes.label){var d=r?" ("+r+")":"";o=""+n.attributes.lang+d}t[o]||(t[o]={language:a,autoselect:!0,default:"main"===r,playlists:[],uri:""});var c=ie(function(t,e){var i,s=t.attributes,n=t.segments,r=t.sidx,a=t.mediaSequence,o=t.discontinuitySequence,d=t.discontinuityStarts,c={attributes:(i={NAME:s.id,BANDWIDTH:s.bandwidth,CODECS:s.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===s.type,timeline:s.periodStart,resolvedUri:"",targetDuration:s.duration,discontinuitySequence:o,discontinuityStarts:d,timelineStarts:s.timelineStarts,mediaSequence:a,segments:n};return s.contentProtection&&(c.contentProtection=s.contentProtection),r&&(c.sidx=r),e&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c}(n,i),e);return t[o].playlists.push(c),void 0===s&&"main"===r&&((s=n).default=!0),t}),{});return s||(n[Object.keys(n)[0]].default=!0),n}(p,r,w):null,I=f.length?function(t,e){return void 0===e&&(e={}),t.reduce((function(t,i){var s=i.attributes.lang||"text";return t[s]||(t[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),t[s].playlists.push(ie(function(t){var e,i=t.attributes,s=t.segments,n=t.mediaSequence,r=t.discontinuityStarts,a=t.discontinuitySequence;void 0===s&&(s=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var o=((e={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,e);return i.codecs&&(o.CODECS=i.codecs),{attributes:o,uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:r,discontinuitySequence:a,mediaSequence:n,segments:s}}(i),e)),t}),{})}(f,r):null,N=h.concat(de(_),de(I)),D=N.map((function(t){return t.timelineStarts}));return m.timelineStarts=Jt(D),v=N,y=m.timelineStarts,v.forEach((function(t){t.mediaSequence=0,t.discontinuitySequence=Xt(y,(function(e){return e.timeline===t.timeline})),t.segments&&t.segments.forEach((function(t,e){t.number=e}))})),_&&(m.mediaGroups.AUDIO.audio=_),I&&(m.mediaGroups.SUBTITLES.subs=I),g.length&&(m.mediaGroups["CLOSED-CAPTIONS"].cc=g.reduce((function(t,e){return e?(e.forEach((function(e){var i=e.channel,s=e.language;t[s]={autoselect:!1,default:!1,instreamId:i,language:s},e.hasOwnProperty("aspectRatio")&&(t[s].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(t[s].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(t[s]["3D"]=e["3D"])})),t):t}),{})),a?(S=(T={oldManifest:a,newManifest:m}).oldManifest,E=T.newManifest,b=S.playlists.concat($t(S)),A=E.playlists.concat($t(E)),E.timelineStarts=Jt([S.timelineStarts,E.timelineStarts]),function(t){var e=t.oldPlaylists,i=t.timelineStarts;t.newPlaylists.forEach((function(t){t.discontinuitySequence=Xt(i,(function(e){return e.timeline===t.timeline}));var s=function(t,e){for(var i=0;i<t.length;i++)if(t[i].attributes.NAME===e)return t[i];return null}(e,t.attributes.NAME);if(s&&!t.sidx){var n=t.segments[0],r=Xt(s.segments,(function(t){return Math.abs(t.presentationTime-n.presentationTime)<Qt}));if(-1===r)return Zt({playlist:t,mediaSequence:s.mediaSequence+s.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!s.segments.length&&t.timeline>s.timeline||s.segments.length&&t.timeline>s.segments[s.segments.length-1].timeline)&&t.discontinuitySequence--);s.segments[r].discontinuity&&!n.discontinuity&&(n.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),Zt({playlist:t,mediaSequence:s.segments[r].number})}}))}({oldPlaylists:b,newPlaylists:A,timelineStarts:E.timelineStarts}),E):m},ue=function(t,e,i){var s=t.NOW,n=t.clientOffset,r=t.availabilityStartTime,a=t.timescale,o=void 0===a?1:a,d=t.periodStart,c=void 0===d?0:d,u=t.minimumUpdatePeriod,l=(s+n)/1e3+(void 0===u?0:u)-(r+c);return Math.ceil((l*o-e)/i)},le=function(t,e){for(var i=t.type,s=t.minimumUpdatePeriod,n=void 0===s?0:s,r=t.media,a=void 0===r?"":r,o=t.sourceDuration,d=t.timescale,c=void 0===d?1:d,u=t.startNumber,l=void 0===u?1:u,h=t.periodStart,p=[],f=-1,g=0;g<e.length;g++){var m=e[g],v=m.d,y=m.r||0,T=m.t||0;f<0&&(f=T),T&&T>f&&(f=T);var S=void 0;if(y<0){var E=g+1;S=E===e.length?"dynamic"===i&&n>0&&a.indexOf("$Number$")>0?ue(t,f,v):(o*c-f)/v:(e[E].t-f)/v}else S=y+1;for(var b=l+p.length+S,A=l+p.length;A<b;)p.push({number:A,duration:v/c,time:f,timeline:h}),f+=v,A++}return p},he=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,pe=function(t,e){return t.replace(he,function(t){return function(e,i,s,n){if("$$"===e)return"$";if(void 0===t[i])return e;var r=""+t[i];return"RepresentationID"===i?r:(n=s?parseInt(n,10):1,r.length>=n?r:""+new Array(n-r.length+1).join("0")+r)}}(e))},fe=function(t,e){var i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},s=t.initialization,n=void 0===s?{sourceURL:"",range:""}:s,r=Ht({baseUrl:t.baseUrl,source:pe(n.sourceURL,i),range:n.range}),a=function(t,e){return t.duration||e?t.duration?Wt(t):le(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]}(t,e);return a.map((function(e){i.Number=e.number,i.Time=e.time;var s=pe(t.media||"",i),n=t.timescale||1,a=t.presentationTimeOffset||0,o=t.periodStart+(e.time-a)/n;return{uri:s,timeline:e.timeline,duration:e.duration,resolvedUri:Bt(t.baseUrl||"",s),map:r,number:e.number,presentationTime:o}}))},ge=function(t,e){var i=t.duration,s=t.segmentUrls,n=void 0===s?[]:s,r=t.periodStart;if(!i&&!e||i&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");var a,o=n.map((function(e){return function(t,e){var i=t.baseUrl,s=t.initialization,n=void 0===s?{}:s,r=Ht({baseUrl:i,source:n.sourceURL,range:n.range}),a=Ht({baseUrl:i,source:e.media,range:e.mediaRange});return a.map=r,a}(t,e)}));return i&&(a=Wt(t)),e&&(a=le(t,e)),a.map((function(e,i){if(o[i]){var s=o[i],n=t.timescale||1,a=t.presentationTimeOffset||0;return s.timeline=e.timeline,s.duration=e.duration,s.number=e.number,s.presentationTime=r+(e.time-a)/n,s}})).filter((function(t){return t}))},me=function(t){var e,i,s=t.attributes,n=t.segmentInfo;n.template?(i=fe,e=Ut(s,n.template)):n.base?(i=Yt,e=Ut(s,n.base)):n.list&&(i=ge,e=Ut(s,n.list));var r={attributes:s};if(!i)return r;var a=i(e,n.segmentTimeline);if(e.duration){var o=e,d=o.duration,c=o.timescale,u=void 0===c?1:c;e.duration=d/u}else a.length?e.duration=a.reduce((function(t,e){return Math.max(t,Math.ceil(e.duration))}),0):e.duration=0;return r.attributes=e,r.segments=a,n.base&&e.indexRange&&(r.sidx=a[0],r.segments=[]),r},ve=function(t){return t.map(me)},ye=function(t,e){return Ft(t.childNodes).filter((function(t){return t.tagName===e}))},Te=function(t){return t.textContent.trim()},Se=function(t){var e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;var i=e.slice(1),s=i[0],n=i[1],r=i[2],a=i[3],o=i[4],d=i[5];return 31536e3*parseFloat(s||0)+2592e3*parseFloat(n||0)+86400*parseFloat(r||0)+3600*parseFloat(a||0)+60*parseFloat(o||0)+parseFloat(d||0)},Ee={mediaPresentationDuration:function(t){return Se(t)},availabilityStartTime:function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=t)&&(e+="Z"),Date.parse(e)/1e3;var e},minimumUpdatePeriod:function(t){return Se(t)},suggestedPresentationDelay:function(t){return Se(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return Se(t)},start:function(t){return Se(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?Se(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},be=function(t){return t&&t.attributes?Ft(t.attributes).reduce((function(t,e){var i=Ee[e.name]||Ee.DEFAULT;return t[e.name]=i(e.value),t}),{}):{}},Ae={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},we=function(t,e){return e.length?qt(t.map((function(t){return e.map((function(e){return Bt(t,Te(e))}))}))):t},_e=function(t){var e=ye(t,"SegmentTemplate")[0],i=ye(t,"SegmentList")[0],s=i&&ye(i,"SegmentURL").map((function(t){return Ut({tag:"SegmentURL"},be(t))})),n=ye(t,"SegmentBase")[0],r=i||e,a=r&&ye(r,"SegmentTimeline")[0],o=i||n||e,d=o&&ye(o,"Initialization")[0],c=e&&be(e);c&&d?c.initialization=d&&be(d):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var u={template:c,segmentTimeline:a&&ye(a,"S").map((function(t){return be(t)})),list:i&&Ut(be(i),{segmentUrls:s,initialization:be(d)}),base:n&&Ut(be(n),{initialization:be(d)})};return Object.keys(u).forEach((function(t){u[t]||delete u[t]})),u},Ie=function(t,e,i){return function(s){var n,r=be(s),a=we(e,ye(s,"BaseURL")),o=ye(s,"Role")[0],d={role:be(o)},c=Ut(t,r,d),u=ye(s,"Accessibility")[0],l="urn:scte:dash:cc:cea-608:2015"===(n=be(u)).schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map((function(t){var e,i;if(i=t,/^CC\d=/.test(t)){var s=t.split("=");e=s[0],i=s[1]}else/^CC\d$/.test(t)&&(e=t);return{channel:e,language:i}})):"urn:scte:dash:cc:cea-708:2015"===n.schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map((function(t){var e={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var i=t.split("="),s=i[0],n=i[1],r=void 0===n?"":n;e.channel=s,e.language=t,r.split(",").forEach((function(t){var i=t.split(":"),s=i[0],n=i[1];"lang"===s?e.language=n:"er"===s?e.easyReader=Number(n):"war"===s?e.aspectRatio=Number(n):"3D"===s&&(e["3D"]=Number(n))}))}else e.language=t;return e.channel&&(e.channel="SERVICE"+e.channel),e})):void 0;l&&(c=Ut(c,{captionServices:l}));var h=ye(s,"Label")[0];if(h&&h.childNodes.length){var p=h.childNodes[0].nodeValue.trim();c=Ut(c,{label:p})}var f=ye(s,"ContentProtection").reduce((function(t,e){var i=be(e);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var s=Ae[i.schemeIdUri];if(s){t[s]={attributes:i};var n=ye(e,"cenc:pssh")[0];if(n){var r=Te(n);t[s].pssh=r&&function(t){for(var e,i=(e=t,Ot().atob?Ot().atob(e):xt.from(e,"base64").toString("binary")),s=new Uint8Array(i.length),n=0;n<i.length;n++)s[n]=i.charCodeAt(n);return s}(r)}}return t}),{});Object.keys(f).length&&(c=Ut(c,{contentProtection:f}));var g=_e(s),m=ye(s,"Representation"),v=Ut(i,g);return qt(m.map(function(t,e,i){return function(s){var n=ye(s,"BaseURL"),r=we(e,n),a=Ut(t,be(s)),o=_e(s);return r.map((function(t){return{segmentInfo:Ut(i,o),attributes:Ut(a,{baseUrl:t})}}))}}(c,a,v)))}},Ne=function(t,e){return function(i,s){var n=we(e,ye(i.node,"BaseURL")),r=Ut(t,{periodStart:i.attributes.start});"number"==typeof i.attributes.duration&&(r.periodDuration=i.attributes.duration);var a=ye(i.node,"AdaptationSet"),o=_e(i.node);return qt(a.map(Ie(r,n,o)))}},De=function(t,e){void 0===e&&(e={});var i=e,s=i.manifestUri,n=void 0===s?"":s,r=i.NOW,a=void 0===r?Date.now():r,o=i.clientOffset,d=void 0===o?0:o,c=ye(t,"Period");if(!c.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var u=ye(t,"Location"),l=be(t),h=we([n],ye(t,"BaseURL"));l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=a,l.clientOffset=d,u.length&&(l.locations=u.map(Te));var p=[];return c.forEach((function(t,e){var i=be(t),s=p[e-1];i.start=function(t){var e=t.attributes,i=t.priorPeriodAttributes,s=t.mpdType;return"number"==typeof e.start?e.start:i&&"number"==typeof i.start&&"number"==typeof i.duration?i.start+i.duration:i||"static"!==s?null:0}({attributes:i,priorPeriodAttributes:s?s.attributes:null,mpdType:l.type}),p.push({node:t,attributes:i})})),{locations:l.locations,representationInfo:qt(p.map(Ne(l,h)))}},Pe=function(t){if(""===t)throw new Error("DASH_EMPTY_MANIFEST");var e,i,s=new Mt.DOMParser;try{i=(e=s.parseFromString(t,"application/xml"))&&"MPD"===e.documentElement.tagName?e.documentElement:null}catch(t){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i},Re="0.21.1",Le=function(t,e){void 0===e&&(e={});var i=De(Pe(t),e),s=ve(i.representationInfo);return ce({dashPlaylists:s,locations:i.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest})},Ce=function(t){return function(t){var e=ye(t,"UTCTiming")[0];if(!e)return null;var i=be(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i}(Pe(t))};const Oe=Be;function Be(t,e){const i=xe();return(Be=function(t,e){return i[t-=446]})(t,e)}function xe(){const t=["segments","attributes","uri","parse","6594145tegTgy","addRendition","BANDWIDTH","2933217EvSLHn","replace","1314bAqwkt","4fhhlMQ","Error parsing MPD manifest: ","bandwidth","1579365kaJGId","1082482pmfMzf","debug","startsWith","15757exNSJs","targetDuration","resolvedUri","6493553JFXtIR","7631ymvaLT","8LVzkko","playlists","../","addSegment","50sCptMT"];return(xe=function(){return t})()}!function(t){const e=Be,i=t();for(;;)try{if(724515==-parseInt(e(462))/1+-parseInt(e(455))/2+-parseInt(e(454))/3+parseInt(e(451))/4*(-parseInt(e(472))/5)+parseInt(e(450))/6*(parseInt(e(458))/7)+-parseInt(e(463))/8*(parseInt(e(448))/9)+-parseInt(e(467))/10*(-parseInt(e(461))/11))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(xe);class Me{static[Oe(471)](e,i,s,a){const o=Oe,d=i;try{let i=t[o(471)](d,{url:e})[o(464)];for(var c of i){let t=new _t;t[o(453)]=c.attributes[o(447)],t[o(470)]=c[o(460)],t[o(459)]=c[o(459)];let e=t[o(470)];for(var u of((!t[o(470)]||""==t[o(470)])&&(e=c[o(469)]),s[o(446)](e,t),c[o(468)])){let t=u[o(470)];for(;t[o(457)](o(465));)t=t[o(449)]("../","");s[o(466)](e,u[o(460)],t)}}}catch(t){n.default[o(456)](r.BalancerTag,o(452),t)}}}const ke=Ue;function Ue(t,e){const i=Ve();return(Ue=function(t,e){return i[t-=332]})(t,e)}function Ve(){const t=["319872YWsvLh","trunc","instantBandwidth","arrayBuffer","parse","targetDuration","updateP2PId","_resource","ifByteArrayToString","54467WUglGy",".mpd","downloadTimeMs","total","311188diguaR","download","progressDownloadedBytes","peer","verbose","getRenditions","Util","Done ","round","undefined","p2pId","loaded","96pDaRfJ","function","triedCdns","timeout","toJSON","host","compressedBytes","changeCDN","BYTLELENGHT ","hash"," Total time -> ","search","High risk of buffer. ","startTime","segmentDuration","2dyoaiu","realBodySize"," downloaded by p2p -> ","floor","size","4jdhFUW","isManifest","endTime","Success","1815579BerdXG","progressDownloadedBytesLastUpdate","failed","ORIGINAL","Range","onProgress","cdnName","cdnProvider","isMedia","initialEstimatedTime","10zpkFxy","slice","route","headers","isMasterPlaylist","data","forceHttp","bandwidth","params","failedOriginalCount","Parsed DASH manifest -> ","finalUrl","P2PManager","Parsed HLS manifest -> ","length","url","announcedP2P","getNewUrl","onSuccess","retryBecauseNewHeaders","resource","303787VJVHkJ","debug","131889HnEwad","pathname","emit","retries","readyForP2P","now","Update P2P ID ","getPerfLoadTime","useP2P","duration","includes","byteLength","random","noContentObtained","name","triedP2P","pathName","endsWith","origRes","575755Agrhzg"," renditions -> ","push","lastEstimatedTime","cachedSize"];return(Ve=function(){return t})()}!function(t){const e=Ue,i=t();for(;;)try{if(175132==parseInt(e(344))/1+parseInt(e(371))/2*(parseInt(e(413))/3)+-parseInt(e(376))/4*(parseInt(e(432))/5)+-parseInt(e(356))/6*(-parseInt(e(340))/7)+parseInt(e(437))/8+-parseInt(e(380))/9*(parseInt(e(390))/10)+-parseInt(e(411))/11)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(Ve);class qe extends w{constructor(t,e,i,s={},n=3,r=!1,a=!1){const o=Ue;var d;super(),this[o(429)]="",this[o(395)]=new ArrayBuffer(1),this[o(375)]=0,this.bandwidth=0,this[o(369)]=0,this[o(378)]=0,this[o(342)]=0,this[o(382)]=!1,this[o(359)]=!1,this[o(346)]=0,this[o(381)]=0,this[o(333)]=0,this[o(422)]=0,this[o(389)]=0,this[o(435)]=0,this[o(377)]=!1,this[o(394)]=!1,this[o(388)]=!1,this[o(345)]=!0,this.realBodySize=0,this[o(417)]=!0,this[o(406)]=!1,this.activeP2PSendProcesses=0,this[o(409)]=0,this[o(396)]=!1,this[o(347)]=void 0,this.createdAt=Date[o(418)](),this[o(399)]=0,this[o(370)]=void 0;const c=new URL(e);this[o(405)]=e,this[o(401)]=e,this[o(431)]=e,this.host=c[o(361)],this.route=c[o(414)],this[o(398)]=c[o(367)],this[o(393)]=s,this[o(416)]=n,this[o(421)]=r,this[o(428)]=!1,this[o(386)]="",this[o(387)]="",this[o(334)]=a,this[o(358)]=[],this[o(338)]=i,this[o(429)]=t,this.id=Math[o(374)](100*Math[o(425)]())+"-"+Date.now();const u=(null===(d=this[o(393)])||void 0===d?void 0:d[o(384)])||"";this[o(354)]=window[o(402)]?window.P2PManager[o(350)].hash(this[o(429)]+u):""+this[o(429)]+u}[ke(337)](){const t=ke;var e;if(!window.P2PManager)return;const i=(null===(e=this[t(393)])||void 0===e?void 0:e[t(384)])||"";n.default[t(412)](r.BalancerTag,t(419)+this[t(429)]+i),this.p2pId=window[t(402)][t(350)][t(365)](this[t(429)]+i)}[ke(407)](t){const e=ke;let i=!1;this.isManifest?(this.isManifest&&this.failed||this[e(377)]&&t)&&(i=!0):i=!0;let s=i?this.finalUrl:this[e(405)];return this[e(398)]&&(s=s[e(423)]("?")?s+"&"+this[e(398)]:s+"?"+this[e(398)]),s}addParametersToUrl(t){const e=ke;let i=t;return this[e(398)]&&i&&(i=i[e(423)]("?")?i+"&"+this[e(398)]:i+"?"+this[e(398)]),i}[ke(363)](t,e,i){const s=ke;if(i!=s(383)){const i=new URL(t);this[s(361)]=i.host,this[s(392)]=i[s(414)],this[s(358)][s(434)](e)}this[s(386)]=e,this.cdnProvider=i}setContent(t){const e=ke;this[e(395)]=t,this.size=t.byteLength,this[e(415)](a.yL[e(379)],{segment:this,data:t})}[ke(426)](){this[ke(415)](a.yL.Fail,{segment:this})}getPerfLoadTime(t){const e=ke;var i;if(typeof performance!==e(353)&&typeof performance.getEntriesByType===e(357)){const s=performance.getEntriesByType(e(410));if(s&&s[e(404)]>0)for(const n of s){const s=n[e(360)]();if(null===(i=null==s?void 0:s[e(427)])||void 0===i?void 0:i[e(423)](t))return Math[e(352)](null==s?void 0:s[e(422)])}}return-1}[ke(385)](t,e){const i=ke;e[i(343)]>0&&(this[i(372)]=e[i(343)]),0==this.progressDownloadedBytesLastUpdate&&(this[i(381)]=this[i(369)]);const s=Date[i(418)](),a=s-this[i(381)];if(this[i(378)]=Date[i(418)](),a<150)return;0!=a&&(this.instantBandwidth=(e[i(355)]-this.progressDownloadedBytes)/((s-this[i(381)])/1e3)*8,this.progressDownloadedBytesLastUpdate=s,e[i(355)]&&(this[i(346)]=e.loaded));const o=(s-this[i(369)])/(e[i(355)]/e.total);this.initialEstimatedTime=0==this[i(389)]?o:this.initialEstimatedTime,this.lastEstimatedTime=o,this[i(422)]>0&&0!=o&&1e3*this[i(422)]<o&&n.default[i(412)](r.BalancerTag,i(368)+this[i(431)]),n.default[i(348)](r.BalancerTag,i(351)+this[i(431)]+i(366)+(Date[i(418)]()-this[i(369)]))}[ke(408)](t,e,i=!1){const s=ke;if(this[s(378)]=Date[s(418)](),null==t||0==t.length)return!1;this[s(342)]=this.endTime-this[s(369)],this[s(420)](this.route);const a=i?u.sliceByFirstSpecial(this.url):this[s(405)],o=new URL(a)[s(414)];if(o.endsWith(".m3u8")){t=u[s(339)](t);const e=Dt[s(335)](this.url,t,this[s(338)]);this[s(394)]=e[s(394)],n.default[s(412)](r.BalancerTag,s(403)+this[s(405)]+s(433)+this[s(338)][s(349)]()[s(375)]),null!=e[s(336)]&&(this[s(370)]=1e3*e[s(336)])}if(o[s(430)](s(341))){t=u[s(339)](t);const e={duration:void 0};Me.parse(this[s(405)],t,this[s(338)],e),this[s(394)]=!0,n.default.debug(r.BalancerTag,s(400)+this[s(405)]+s(433)+this[s(338)][s(349)]()[s(375)]),null!=e.duration&&(this[s(370)]=1e3*e[s(422)])}if(n.default[s(348)](r.BalancerTag,s(364)+t[s(424)]+s(373)+this[s(428)]),0!=t[s(424)])try{this[s(395)]=t[s(391)](0,t[s(424)]),this[s(375)]=this[s(342)]>5?this.data[s(424)]:0,this[s(436)]=this.downloadTimeMs>5?0:this[s(395)][s(424)],this[s(397)]=Math[s(332)](this.downloadTimeMs>5?this[s(395)].byteLength/(this[s(342)]/1e3):0),this[s(395)][s(424)]>0&&(this[s(372)]=this[s(395)].byteLength),this[s(333)]=0,this.progressDownloadedBytes=this[s(375)];const i=parseInt(e,10);!isNaN(i)&&i>0&&(this[s(362)]=i,this.uncompressedBytes=this.data[s(424)]||t[s(424)]||this.realBodySize)}catch(t){n.default[s(412)](r.BalancerTag,"Problem slicing the array")}else this[s(395)].byteLength!=this[s(372)]&&(this[s(395)]=new ArrayBuffer(1));return this[s(381)]=this[s(378)],!0}}const Fe=Xe;function Xe(t,e){const i=Ge();return(Xe=function(t,e){return i[t-=230]})(t,e)}!function(t){const e=Xe,i=t();for(;;)try{if(293034==-parseInt(e(264))/1+-parseInt(e(231))/2+-parseInt(e(234))/3+-parseInt(e(255))/4*(parseInt(e(263))/5)+parseInt(e(242))/6*(parseInt(e(249))/7)+parseInt(e(233))/8*(-parseInt(e(237))/9)+parseInt(e(252))/10)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(Ge);class He{constructor(){const t=Xe;this.masterUri="",this[t(240)]=new Map,this[t(258)]="",this[t(257)]="",this[t(239)]=[],this[t(243)]=0,this[t(236)]=0,this[t(246)]=!1}[Fe(235)](){const t=Fe;this[t(246)]||this.pos-this[t(236)]>1e5&&(this[t(246)]=!0,this[t(230)](this[t(236)],this[t(236)]+5e3),this[t(236)]=this.lastCleanPos+5e3,this[t(246)]=!1)}[Fe(259)](t,e,i){const s=Fe;var n;this[s(243)]++,null===(n=this[s(240)].get(t))||void 0===n||n[s(259)](e,i,this[s(243)])}[Fe(247)](){const t=Fe;let e=0;for(let i of this[t(240)].values())e+=i[t(250)]();return e}[Fe(230)](t,e){const i=Fe;for(let s of this[i(240)][i(241)]())for(let[n,r]of s.getSegments())r[i(243)]>=t&&r[i(243)]<=e&&s.getSegments().delete(n)}[Fe(244)](t,e){const i=Fe;this[i(240)].set(t,e),this[i(261)]()}getRenditions(){return this[Fe(240)]}getVideoRenditions(){const t=Fe;let e=new Map;return this[t(240)][t(245)]((function(i,s){const n=t;i[n(248)]||e[n(260)](s,i)})),e}getRendition(t){const e=Fe;let i;return this[e(240)][e(245)]((function(s){const n=e;s[n(232)]().forEach((function(e){const r=n;t[r(251)](e[r(254)])&&(i=s)}))})),i}updateAvailableBandwidths(){const t=Fe;let e=new Array;this[t(240)][t(245)]((function(i){const s=t;i.isAudio||e[s(256)](Number(i[s(238)]))})),e[t(266)]((function(t,e){return t-e})),this[t(239)]=e,this[t(240)].forEach((e=>{const i=t;!e[i(248)]&&(e[i(262)]=this[i(265)](e.bandwidth),e[i(262)]+1==this.bandwidths.length&&(e[i(253)]=!0))}))}[Fe(265)](t){let e=0,i=-1;return this[Fe(239)].forEach((function(s){t==s&&(i=e),e++})),i}}function Ge(){const t=["9ayIILB","bandwidth","bandwidths","renditions","values","685530UUVMXO","pos","addRendition","forEach","cleaning","getSize","isAudio","7xszkyK","getSegmentsSize","endsWith","14546920nmQcNc","isMaxRendition","uri","44ScTAsS","push","fileName","route","addSegment","set","updateAvailableBandwidths","bandwidthPosition","92185PeNzht","223159TNwKoh","getBandwidthsPos","sort","delete","239332nfteXp","getSegments","4453744DrJQXa","520689UJsacX","clean","lastCleanPos"];return(Ge=function(){return t})()}function je(){const t=["DECISION_FINISHED","createUpdateTimer","route","_jwtToken","API call failed with status code ","onerror","getIsEnabled","shouldPerformDecision","options","size","split","2036744izkYoX","2022bmUwEC","getRouteAndFilename"," in manifest hashmap","_manifestMap","adsAnalyticsEnabled","performHashmapCleanup","pathname","wasSelectorCommunicationSuccessful","get","BalancerVariables","42RuiaVI","GET","_jwtAuthType","verbose","P2PLoader","startMonitoring","Empty response received","BUCKET","response","decisionReloadIntervalPerManifestMilliseconds","820930xsDMVy","true","open","getInstance","Authorization","delete","signManifestUsingApi","Not performing decision since time between requests has not passed yet."," for /decision requests","BALANCER","Creating setTimeout for decision request with resource ","setBalancerEnabled","status","9HMrPhp","slice","host","LAST_USED_CDN","value","next","then","Products","__awaiter","27neacmq","now","start","apply","https://","devHost","getReportTimeout","40628ZzkQWi","has","forEach","Using ","9165XnKGnW","Performing decision request with URL ","debug","PROFILE_NAME","disable"," from manifest hashmap since older than ","clearReportTimeout","includes","loadBalancerData","setActiveSwitchingOnLegacy","parse","Origin","gotEmptyResponse","timeout","messages","registerCommonVariable","173692fQeXeO","-js","API call failed due to a network error.","done","activeSwitching","onload","replace","2634205JRvBxh","isUsingLegacy","setAdsAnalyticsEnabled","4133890afnXGd","CDNLoader","AS_ENABLED","code","diagnosticTool","isValidUrl","qualityPriority","send","onFailedApiResponse","balancerEnabled","setRequestHeader","formatParameters","unregisterCommonVariable","Using development environment -> ","_loader","setSettings"];return(je=function(){return t})()}const We=Ye;!function(t){const e=Ye,i=t();for(;;)try{if(447489==parseInt(e(406))/1*(-parseInt(e(445))/2)+-parseInt(e(438))/3*(-parseInt(e(465))/4)+parseInt(e(449))/5*(parseInt(e(503))/6)+parseInt(e(472))/7+parseInt(e(502))/8+-parseInt(e(429))/9*(parseInt(e(475))/10)+parseInt(e(416))/11)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(je);function Ye(t,e){const i=je();return(Ye=function(t,e){return i[t-=399]})(t,e)}class ze{constructor(t,e,i){const s=We;this[s(399)]=new Map,this._loader=t,this[s(408)]=e,this[s(494)]=i}[We(457)](t,i,s,o,d,c,l,h,p,f,g){return m=this,v=void 0,T=function*(){const m=Ye;if(!this[m(489)][m(497)]())return void e.default.getInstance().registerCommonVariable(dt.default[m(436)][m(425)],dt.default[m(405)][m(491)],!0);if(!this[m(498)](i))return n.default[m(451)](r.BalancerTag,m(423)),void this[m(492)](t,i,s,o,null!=d&&d,null!=c&&c,h,p,f,g);const v=Date[m(439)](),y=u[m(480)](i)?this[m(504)](i):{route:"",fileName:""};n.default.verbose(r.BalancerTag,m(488)+c);let T=c?a.df[m(443)]:a.df[m(431)];T=f||T,n.default[m(451)](r.BalancerTag,m(448)+T+m(424));const S=new XMLHttpRequest;let E=T+"/"+t+"/"+(h?h+"/":"")+"decision";E=E[m(471)]("//","/"),E=m(442)+E;const b={resource:""+y[m(493)]+y.fileName,live:""+s,extended:m(417),npawPluginInfo:"true",originCode:null!=p?p:"",v:e.default.getPluginVersion()[m(501)](m(466))[0],dynamicRules:null!=g?g:""},A=this;yield new Promise(((t,s)=>{const o=m;S[o(470)]=function(){const s=o;var d,c,u,l,f,g,m,T,E,b,w;if(4===S.readyState){if(S.status>0&&(10===A[s(399)][s(500)]&&!A[s(399)][s(446)](i)&&A.deleteOldestFromManifestMap(),A[s(401)](),A[s(399)].set(i,Date[s(439)]()),n.default.verbose(r.BalancerTag,"Storing "+i+s(505))),S.status>=200&&S[s(428)]<=300){const t=Date[s(439)]()-v;A[s(489)][s(476)].onSucessfullApiResponse(t);try{if(S[s(414)]){A[s(499)]=JSON.parse(S[s(414)]),e.default[s(419)]()[s(464)](dt.default[s(436)].BALANCER,dt.default[s(405)][s(452)],h),e.default[s(419)]()[s(464)](dt.default[s(436)].BALANCER,dt.default[s(405)][s(413)],p),A[s(489)].storage[s(490)](A[s(499)]),A._loader[s(410)]&&(A[s(489)][s(410)][s(490)](A[s(499)]),A._loader.P2PLoader[s(411)]()),A[s(489)][s(476)][s(490)](A[s(499)],y[s(493)]),A._loader[s(476)][s(411)]();const t=[a.m.cdnPriority,a.m[s(481)]][s(456)](A.options[s(469)])&&A[s(489)].CDNLoader.getCdnList().size>0;e.default[s(419)]()[s(473)]()?e.default.getInstance()[s(458)](t):e.default[s(419)]()[s(464)](dt.default[s(436)].BALANCER,dt.default[s(405)][s(477)],t),x.default[s(419)]()[s(403)](!0),x.default[s(419)]()[s(427)](null===(c=null===(d=A.options)||void 0===d?void 0:d[s(479)])||void 0===c?void 0:c[s(484)]),x.default[s(419)]().setVideoAnalyticsEnabled(null===(l=null===(u=A[s(499)])||void 0===u?void 0:u[s(479)])||void 0===l?void 0:l.videoAnalyticsEnabled),x.default[s(419)]()[s(474)](null===(g=null===(f=A[s(499)])||void 0===f?void 0:f[s(479)])||void 0===g?void 0:g[s(400)]),x.default[s(419)]().setReportTimeout(null===(T=null===(m=A[s(499)])||void 0===m?void 0:m.diagnosticTool)||void 0===T?void 0:T[s(462)])}else n.default[s(451)](r.BalancerTag,"Empty response received from Balancer API"),A[s(489)][s(410)][s(453)](),A[s(489)][s(476)][s(461)](),x.default[s(419)]()[s(403)](!1,s(412)),e.default[s(419)]()[s(464)](dt.default[s(436)][s(425)],dt.default[s(405)][s(432)],"Origin")}catch(t){n.default[s(451)](r.BalancerTag,"Error parsing Balancer API response: ",t)}}else{const t=JSON[s(459)](S[s(414)]);x.default.getInstance()[s(403)](!1,t[s(463)][0][s(478)]),e.default[s(419)]()[s(464)](dt.default[s(436)][s(425)],dt.default.BalancerVariables[s(432)],s(460)),n.default[s(451)](r.BalancerTag,s(495)+S[s(428)]),A[s(489)][s(476)][s(483)]()}e.default[s(419)]()[s(464)](dt.default[s(436)].BALANCER,dt.default[s(405)][s(491)],!0);const t=x.default.getInstance()[s(444)]();t!=x.default.defaultReportTimeout&&(null!==(w=null===(b=null===(E=A[s(499)])||void 0===E?void 0:E[s(479)])||void 0===b?void 0:b[s(462)])&&void 0!==w?w:t)!=t&&(x.default[s(419)]()[s(455)](),x.default[s(419)]()[s(440)]())}t()},S[o(496)]=function(){const e=o;A[e(489)].CDNLoader[e(483)](),n.default[e(451)](r.BalancerTag,e(467)),t()},l?S[o(418)]("GET",E+u.formatParameters(b),!1):S[o(418)](o(407),E+u[o(486)](b)),e.default[o(419)]()[o(464)](dt.default[o(436)][o(425)],dt.default.BalancerVariables[o(491)],!1),e.default.getInstance()[o(487)](dt.default.Products[o(425)],dt.default[o(405)][o(452)]),e.default[o(419)]()[o(487)](dt.default.Products[o(425)],dt.default[o(405)][o(413)]),e.default[o(419)]()[o(487)](dt.default[o(436)][o(425)],dt.default[o(405)][o(477)]),n.default[o(409)](r.BalancerTag,o(450)+E+u[o(486)](b)+" + (host: "+T+")"),A[o(494)]&&S[o(485)](o(420),A._jwtAuthType+" "+A._jwtToken),S[o(482)]()})),this[m(492)](t,i,s,o,null!=d&&d,null!=c&&c,h,p,f)},new((y=void 0)||(y=Promise))((function(t,e){const i=Ye;function s(t){const i=Ye;try{r(T[i(434)](t))}catch(t){e(t)}}function n(t){try{r(T.throw(t))}catch(t){e(t)}}function r(e){const i=Ye;var r;e[i(468)]?t(e.value):(r=e[i(433)],r instanceof y?r:new y((function(t){t(r)})))[i(435)](s,n)}r((T=T[i(441)](m,v||[]))[i(434)]())}));var m,v,y,T}[We(492)](t,e,i,s,a,o,d,c,u,l){const h=We;s>0&&(n.default[h(409)](r.BalancerTag,h(426)+e),setTimeout((()=>{const n=h;var r;this[n(457)](t,e,i,s,a,o,null!==(r=this.options[n(422)])&&void 0!==r&&r,d,c,u,l)}),1e3*s))}[We(504)](t){const e=We,i=new URL(t),s=i.origin+i[e(402)],n=s.lastIndexOf("/")+1;return{route:s[e(430)](0,n),fileName:s[e(430)](n)}}shouldPerformDecision(t){const e=We;var i;if(!this._manifestMap[e(446)](t))return!0;{const s=null!==(i=this[e(399)][e(404)](t))&&void 0!==i?i:Date[e(439)]();if(Date[e(439)]()-s>a.df.decisionReloadIntervalPerManifestMilliseconds)return!0}return!1}[We(401)](){const t=We;this._manifestMap[t(447)](((e,i)=>{const s=t;Date[s(439)]()-e>a.df.decisionReloadIntervalPerManifestMilliseconds&&(n.default[s(409)](r.BalancerTag,"Removing "+i+s(454)+a.df[s(415)]+"ms"),this[s(399)][s(421)](i))}))}deleteOldestFromManifestMap(){const t=We;let e,i=1/0;this[t(399)][t(447)](((t,s)=>{t<i&&(i=t,e=s)})),void 0!==e&&this[t(399)][t(421)](e)}}const Ke=Qe;function Qe(t,e){const i=Je();return(Qe=function(t,e){return i[t-=363]})(t,e)}function Je(){const t=["3999375ysKOtG","delay","apply","81176BptgfB","value","endTime","size","1797845rQfhMl","throw","__awaiter","now","downloadTimeMs","1490319pwwScq","12UdQAwD","5752zLAzbq","startTime","limit","next","done","4361XTeSGh","1136280DleZwc","591784MrHGXi","instantBandwidth"];return(Je=function(){return t})()}!function(t){const e=Qe,i=t();for(;;)try{if(290496==-parseInt(e(385))/1*(-parseInt(e(375))/2)+parseInt(e(384))/3+-parseInt(e(370))/4+-parseInt(e(379))/5+-parseInt(e(369))/6+-parseInt(e(368))/7*(-parseInt(e(363))/8)+-parseInt(e(372))/9)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(Je);class $e{[Ke(365)](t,e){return i=this,s=void 0,r=function*(){const i=Qe;let s=e.size/(e.downloadTimeMs/1e3)*8;if(0!=t&&s>t){let s=1e3*e[i(378)]*8/t,n=(Date[i(382)](),e[i(364)],s-e.downloadTimeMs);n>0&&(yield u[i(373)](n)),e[i(377)]=Date[i(382)](),e.downloadTimeMs=e[i(377)]-e[i(364)],e.bandwidth=e[i(378)]/(e[i(383)]/1e3),e[i(371)]=0,e.progressDownloadedBytesLastUpdate=e[i(377)]}},new((n=void 0)||(n=Promise))((function(t,e){const a=Qe;function o(t){const i=Qe;try{c(r[i(366)](t))}catch(t){e(t)}}function d(t){const i=Qe;try{c(r[i(380)](t))}catch(t){e(t)}}function c(e){const i=Qe;var s;e[i(367)]?t(e[i(376)]):(s=e[i(376)],s instanceof n?s:new n((function(t){t(s)}))).then(o,d)}c((r=r[a(374)](i,s||[]))[a(366)]())}));var i,s,n,r}}function Ze(t,e){var i=ti();return(Ze=function(t,e){return i[t-=493]})(t,e)}function ti(){var t=["internal_switches_due_connectivity","switches_due_quality","video_downloaded_chunks","1293149dfQlcz","6302516HwaEZY","unbanned_time","response_bytes","http_3XX","avg_ping_time","max_throughput","min_response_time","is_p2p","min_network_latency","internal_switches_due_errors","internal_banned","12MNmgaL","switches","unbanned","network_latency_samples","throughput_samples","369Tonpsd","switches_due_errors","max_response_time","is_active","downloaded_bytes","is_banned","min_response_bytes","banned","response_time","http_1XX","internal_switches_due_quality","min_bandwidth","switches_due_connectivity","226TQXPDd","internal_provider","internal_is_banned","throughput","response_time_samples","204310jCpXQP","http_2XX","internal_banned_time","internal_unbanned_time","downloaded_chunks","http_5XX","errors","3805544xtUBmI","network_latency","video_downloaded_bytes","14LJuAOC","banned_time","7528386SqTsqq","internal_switches","internal_unbanned","max_network_latency","uncompressed_video_bytes","min_throughput","12486298yqEyDx","video_time","5diNabk","max_ping_time","4017UpgwFy","max_bandwidth"];return(ti=function(){return t})()}!function(t){for(var e=Ze,i=t();;)try{if(808801==parseInt(e(528))/1+-parseInt(e(496))/2*(parseInt(e(523))/3)+parseInt(e(529))/4*(parseInt(e(521))/5)+-parseInt(e(513))/6+-parseInt(e(511))/7*(parseInt(e(508))/8)+-parseInt(e(545))/9*(parseInt(e(501))/10)+-parseInt(e(519))/11*(-parseInt(e(540))/12))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(ti);class ei{constructor(t,e,i,s,n,r,a,o,d,c,u,l,h,p,f,g,m,v,y,T,S,E,b,A,w,_,I,N,D,P,R,L,C,O,B,x,M,k,U,V,q,F,X,H,G,j,W,Y,z,K,Q,J,$,Z,tt,et,it,st,nt,rt){var at=Ze;this.provider=t,this[at(497)]=e,this[at(536)]=i,this[at(549)]=n,this[at(505)]=r,this[at(531)]=T,this[at(551)]=S,this.max_response_bytes=E,this.response_bytes_samples=b,this[at(553)]=A,this[at(535)]=w,this[at(547)]=_,this[at(500)]=I,this[at(509)]=N,this[at(537)]=D,this[at(516)]=P,this[at(543)]=R,this[at(499)]=L,this[at(518)]=C,this[at(534)]=O,this[at(544)]=B,this[at(507)]=a,this[at(554)]=x,this[at(502)]=M,this[at(532)]=k,this.http_4XX=U,this[at(506)]=V,this[at(530)]=q,this[at(512)]=F,this.compressed_video_bytes=H,this[at(517)]=X,this[at(541)]=G,this[at(495)]=j,this[at(546)]=W,this[at(526)]=Y,this.time=o,this[at(524)]=d,this[at(494)]=c,this[at(552)]=K,this[at(542)]=Q,this[at(533)]=u,this.min_ping_time=l,this[at(522)]=h,this[at(550)]=z,this[at(548)]=s,this.resource=p,this[at(553)]=A,this.cache_hit_chunks=f,this.cache_miss_chunks=g,this[at(510)]=m,this[at(527)]=v,this[at(520)]=y,this[at(498)]=J,this[at(539)]=$,this[at(515)]=Z,this[at(514)]=tt,this[at(493)]=et,this[at(525)]=it,this[at(538)]=st,this[at(503)]=nt,this[at(504)]=rt}}function ii(){var t=["min_response_time","max_response_time","resource","downloaded_bytes","max_ping_time","response_time","peer_connection_time","6466140UtBHEn","throughput","upload_time","3276938zSuABa","1918836FsIJub","395954sNUaGi","video_downloaded_chunks","errors","late_downloaded_bytes","downloaded_chunks","video_downloaded_bytes","min_bandwidth","max_peers_available","internal_provider","max_peers_parallel_used","timeout_errors","peers","time","min_peers_parallel_used","missed_downloaded_chunks","max_response_bytes","min_ping_time","min_response_bytes","uploaded_bytes","is_p2p","peers_parallel_used","max_bandwidth","min_network_latency","response_bytes_samples","other_errors","uploaded_chunks","28624FGsAFQ","max_throughput","3119784YTsgVf","max_network_latency","avg_ping_time","response_bytes","5809510WZJHnu","582kMzYrO","peers_available","2qRNyMc","network_latency_samples","network_latency","peers_used","active_peers"];return(ii=function(){return t})()}function si(t,e){var i=ii();return(si=function(t,e){return i[t-=388]})(t,e)}!function(t){for(var e=si,i=t();;)try{if(790513==-parseInt(e(430))/1*(parseInt(e(395))/2)+-parseInt(e(428))/3*(-parseInt(e(421))/4)+-parseInt(e(427))/5+parseInt(e(394))/6+-parseInt(e(393))/7+parseInt(e(423))/8+parseInt(e(390))/9)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(ii);class ni{constructor(t,e,i,s,n,r,a,o,d,c,u,l,h,p,f,g,m,v,y,T,S,E,b,A,w,_,I,N,D,P,R,L,C,O,B,x,M,k,U,V,q,F,X,H,G,j,W,Y,z,K,Q,J){var $=si;this.provider=t,this[$(403)]=e,this[$(414)]=i,this[$(438)]=s,this[$(399)]=n,this[$(397)]=r,this[$(407)]=a,this[$(416)]=o,this[$(401)]=d,this[$(425)]=c,this[$(411)]=u,this[$(439)]=l,this[$(437)]=h,this[$(400)]=p,this[$(396)]=f,this.video_time=g,this[$(413)]=m,this[$(420)]=v,this[$(392)]=y,this.late_uploaded_chunks=T,this.late_uploaded_bytes=S,this[$(398)]=E,this[$(409)]=b,this[$(405)]=A,this[$(419)]=w,this[$(434)]=_,this[$(406)]=I,this[$(426)]=N,this[$(412)]=D,this[$(410)]=P,this[$(418)]=R,this[$(388)]=L,this[$(435)]=C,this[$(436)]=O,this.response_time_samples=B,this[$(432)]=x,this[$(417)]=M,this[$(424)]=k,this[$(431)]=U,this[$(391)]=V,this.min_throughput=q,this[$(422)]=F,this.throughput_samples=X,this[$(429)]=H,this[$(402)]=G,this.min_peers_available=j,this[$(433)]=W,this[$(415)]=Y,this[$(404)]=z,this[$(408)]=K,this.peer_discovery_time=Q,this[$(389)]=J}}function ri(t,e){var i=oi();return(ri=function(t,e){return i[t-=271]})(t,e)}!function(t){for(var e=ri,i=t();;)try{if(147892==parseInt(e(288))/1+-parseInt(e(274))/2+parseInt(e(289))/3*(parseInt(e(284))/4)+parseInt(e(283))/5*(parseInt(e(276))/6)+parseInt(e(273))/7+parseInt(e(285))/8*(parseInt(e(293))/9)+-parseInt(e(282))/10)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(oi);class ai{constructor(t,e,i,s,n,r,a,o,d,c,u,l,h,p,f,g){var m=ri;this[m(275)]=t,this[m(292)]=e,this.apiCallsMinResponseTime=i,this.apiCallsAvgResponseTime=s,this[m(287)]=n,this[m(286)]=r,this.isLive=a,this[m(281)]=o,this[m(291)]=d,this[m(272)]=c,this[m(290)]=u,this[m(279)]=l,this[m(277)]=h,this[m(278)]=p,this[m(271)]=f,this[m(280)]=g}}function oi(){var t=["bolinaAvailable","announcedCdns","videoId","6608790kfVKBd","5ElVzsp","1684ZxQfHk","634864yIXGvv","bucket","apiCallsMaxResponseTime","174727aiTbRr","1383nRdPfF","p2pAvailable","forceDecision","apiCallResponses","27KSpqne","chunkDuration","requestPlatform","157045HRrWfa","30510ZQUPKX","apiCallErrors","1168254WuvFfe","activeSwitchingPriority","priorityCdn"];return(oi=function(){return t})()}const di=ui;!function(t){const e=ui,i=t();for(;;)try{if(695837==parseInt(e(329))/1*(-parseInt(e(364))/2)+parseInt(e(353))/3+-parseInt(e(256))/4+-parseInt(e(404))/5+parseInt(e(363))/6+parseInt(e(239))/7*(parseInt(e(402))/8)+parseInt(e(316))/9)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(ci);function ci(){const t=["downloadedBytes","minResponseBytes","offline","maxPeersAvailable","172332bpzMvh","name","minNetworkLatency","stringify","split","_instance","http_1XX","downloadedChunks","getPingTime","trunc","lastP2pStats","minPingTime","undefined","internal_provider","sumNetworkLatency","compressedBytes","samplesNetworkLatency","next","getIsLive","downloadedBytesVideo","minApiCallResponseTime","pushPeriodicDataFromCallback","total","-js","http_4XX","getFastDataSessionToken","apiCallResponses","missedDownloadedChunks","getReportInterval","uploadedTime","switchesDueToErrors","minThroughput","MIN_SAFE_INTEGER","uuid","samplesResponseBytes","started","size","report","downloadedChunksVideo","sumVideoTime","lastReportedCodavelSwitchesDueToConnectivity","takeMin","CDNLoader","some","avgPingTime","stopped","usedOrProbed","VIDEO_ANALYTICS","BALANCER_TRAFFIC","lowestPingTime","BalancerPing: ","getCdnList","getBucket","bolinaAvailable","uploadedBytes","maxResponseTime","timeout","Plugin","lastReportedCodavelBanCount","sumThroughput","829755oKGeRe","lastReportedCodavelUnbanTime","maxPeersParallelUsed","minPeersAvailable","startsWith","getForceDecision","provider","lastCdnStats","codavelSwitchesDueToConnectivity","cacheMiss","getSegmentDuration","getOptions","uploadedChunks","1405CXfLRO","getCdnCacheMisses","lastReportedCodavelSwitchesDueToQuality","Consumer","MAX_SAFE_INTEGER","Products","isEnabled","isLive","peerConnectionTime","uncompressedBytes","resetOnPing","minPeersParallelUsed","takeIf","forEach","maxNetworkLatency","GET","isCodavel","AnalyticsVariables","bucket","BALANCER","getPluginVersion","peerDiscoveryTime","http1xxResponses","millis","3695325woYyEC","switchesDueToQuality","downloadMillisVideo","maxPingTime","maxThroughput","codavelBanCount","minResponseTime","totalFail","throw","token","1710006fSECuU","820DvqQFR","maxBandwidth","reportRequest","P2P","NQS","getTime","codavelUnbanTime","lastReportedCodavelUnbanCount","processedApiCall","downloadedSegments","lastReportedCodavelBanTime","getViewCode","discardedUploadedChunks","codavelSwitchesDueToQuality","highestPingTime","downloadMillis","resource","codavelAllBanned","failedRequests","switchesDueToConnectivity","profileName","switches","isUsingLegacy","peersParallelUsed","codavelSwitches","sumResponseBytes","sumResponseTime","maxResponseBytes","timeoutErrors","CDN","values","absent","http2xxResponses","addNQSRequest","lateUploadedBytes","unbannedCount","http_2XX","lateDownloadedBytes","8wRMCvB","bannedCount","1956420FjHaGg","discardedUploadedBytes","totalFailures","__awaiter","unBannedCount","takeMax","value","getCdnCacheHits","registerCommonVariable","totalPeers","http5xxResponses","wasStartSent","apiCallsAvgResponseTime","http_3XX","host","apiCallErrors","activeSwitchingPriority","downloadChunksVideo","p2pAvailable","codavelSwitchesDueToErrors","BALANCER_BITRATE","keys","peersUsed","done","P2PLoader","samplesThroughput","requestPlatform","codavelBanTime","setTriedSendingBalancerStats","http_5XX","getFastDataService","banned","codavelUnbanCount","http4xxResponses","loader","active","bannedTime","videoId","avgApiCallResponseTime","lateUploadedChunks","updatePeerMetrics","from","activePeers","videoTime","unbannedTime","accountCode","chunkDuration","peersAvailable","highestSegmentBandwidth","set","lowestSegmentBandwidth","sumVideoBytes","minBandwidth","getInstance","otherErrors","priorityCdn","maxApiCallResponseTime","CODAVEL","lastReportedCodavelSwitches","680981GUkqAJ","lastReportedCodavelSwitchesDueToErrors","get","http3xxResponses","errors","cacheHit","BLACK_HOLE","error","downloadBytesVideo","samplesResponseTime","announcedCdns","updateData","getStats"];return(ci=function(){return t})()}function ui(t,e){const i=ci();return(ui=function(t,e){return i[t-=189]})(t,e)}class li{static[di(233)](t){const e=di;return null==this[e(261)]&&null!=t?this[e(261)]=new li(t):null!=t&&null!=this[e(261)]&&(null==t?void 0:t[e(289)])!=this[e(261)].loader.uuid&&(this._instance[e(293)](),this[e(261)]=new li(t)),this[e(261)]}constructor(t){const e=di;this[e(291)]=!1,this[e(301)]=!1,this[e(323)]=new Map,this[e(266)]=new Map,this[e(194)]="",this[e(362)]="",this[e(225)]="",this.profileName="",this[e(380)]="",this[e(374)]=void 0,this[e(317)]=void 0,this[e(314)]=void 0,this[e(371)]=void 0,this[e(238)]=void 0,this[e(331)]=void 0,this[e(240)]=void 0,this[e(296)]=void 0,this.loader=t}[di(250)](t,i,s,n,o){var d,c,u,l,h;return c=this,u=void 0,h=function*(){const c=ui;if(this[c(194)]=t,this[c(362)]=i,this[c(225)]=s,this[c(384)]=null!=n?n:"",this[c(380)]=o,!(e.default[c(233)]().isUsingLegacy()&&this[c(362)][c(320)](c(268))||this[c(291)])){const t=a.xC[c(393)];e.default[c(233)]()[c(277)](e.default.getInstance()[c(327)]()[c(254)]?dt.default[c(332)][c(245)]:dt.default.Consumer[c(368)],t,t,1e3*this.loader[c(284)](),null!==(d=e.default[c(233)]().getCommonVariable(dt.default[c(334)][c(303)],dt.default[c(346)].METHOD_OPTION))&&void 0!==d?d:r.Method[c(344)],(()=>{const t=c;if(e.default[t(233)]()[t(191)]())return x.default[t(233)]()[t(208)](!0),li[t(233)]().report()}),(()=>{const e=c;x.default.getInstance()[e(397)](t)})),this.started=!0}},new((l=void 0)||(l=Promise))((function(t,e){const i=ui;function s(t){const i=ui;try{r(h[i(273)](t))}catch(t){e(t)}}function n(t){const i=ui;try{r(h[i(361)](t))}catch(t){e(t)}}function r(e){const i=ui;var r;e[i(203)]?t(e[i(410)]):(r=e.value,r instanceof l?r:new l((function(t){t(r)}))).then(s,n)}r((h=h.apply(c,u||[]))[i(273)]())}))}[di(293)](){const t=di;try{if(!this[t(301)]){const i=this[t(214)].CDNLoader[t(307)](),s=Array[t(221)](i[t(394)]()).every((e=>!e[t(302)])),a=new Map;let o;o=s?new Map:new Map(i);let d=0,c=0;this[t(214)][t(298)].updateCodavelBanTimes(),this[t(214)][t(204)][t(220)]();let u=!1;if(o[t(342)]((e=>{const i=t;e.updateAvailability();const s=e.clone(),n=this[i(323)][i(241)](e[i(257)]);d+=s[i(231)]||0,c+=s[i(295)]||0;const r={downloadedBytesVideo:s[i(275)],downloadedChunksVideo:s.downloadedChunksVideo,videoTime:s.downloadMillisVideo,downloadedBytes:s[i(252)],downloadedChunks:s[i(263)],sumResponseBytes:s[i(389)],minResponseBytes:s[i(253)],maxResponseBytes:s.maxResponseBytes,samplesResponseBytes:s.samplesResponseBytes,sumResponseTime:s.sumResponseTime,minResponseTime:s.minResponseTime,maxResponseTime:s[i(311)],samplesResponseTime:s[i(248)],sumNetworkLatency:s[i(270)],minNetworkLatency:s.minNetworkLatency,maxNetworkLatency:s[i(343)],samplesNetworkLatency:s.samplesNetworkLatency,sumThroughput:s[i(315)],minThroughput:s.minThroughput,maxThroughput:s[i(357)],samplesThroughput:s[i(205)],totalFailures:s[i(360)],http_1XX:s[i(351)],http_2XX:s.http2xxResponses,http_3XX:s[i(242)],http_4XX:s[i(213)],http_5XX:s[i(190)],unbannedTime:s[i(224)],bannedTime:s[i(216)],compressedBytes:s[i(271)],uncompressedBytes:s.uncompressedBytes,switches:s[i(385)],switchesDueToConnectivity:s[i(383)],switchesDueToErrors:s[i(286)],switchesDueToQuality:s[i(354)],millis:s[i(379)],bannedCount:s.bannedCount,unbannedCount:s[i(408)],avgPingTime:s[i(300)],minPingTime:s[i(305)]===Number.MAX_SAFE_INTEGER?0:s[i(305)],maxPingTime:s[i(378)],cacheHit:s.getCdnCacheHits(),cacheMiss:s[i(330)](),minBandwidth:s[i(230)]===Number[i(333)]?0:s.lowestSegmentBandwidth,maxBandwidth:s[i(228)]};n&&(r[i(275)]-=n[i(275)],r[i(294)]-=n[i(294)],r[i(223)]-=n[i(355)],r[i(252)]-=n[i(252)],r.downloadedChunks-=n.downloadedChunks,r.totalFailures-=n[i(360)],null!=r[i(262)]&&null!=n.http1xxResponses&&(r.http_1XX-=n[i(351)]),null!=r[i(400)]&&null!=n[i(396)]&&(r[i(400)]-=n[i(396)]),null!=r[i(193)]&&null!=n[i(242)]&&(r[i(193)]-=n[i(242)]),null!=r.http_4XX&&null!=n[i(213)]&&(r[i(280)]-=n[i(213)]),null!=r[i(209)]&&null!=n[i(190)]&&(r[i(209)]-=n[i(190)]),null!=r.compressedBytes&&null!=n[i(271)]&&(r[i(271)]-=n[i(271)]),null!=r[i(338)]&&null!=n[i(338)]&&(r.uncompressedBytes-=n[i(338)]),null!=r.switches&&null!=n[i(385)]&&(r[i(385)]-=n[i(385)]),null!=r[i(383)]&&null!=n[i(383)]&&(r.switchesDueToConnectivity-=n[i(383)]),null!=r[i(286)]&&null!=n[i(286)]&&(r[i(286)]-=n[i(286)]),null!=r[i(354)]&&null!=n[i(354)]&&(r.switchesDueToQuality-=n[i(354)]),r[i(352)]-=n[i(379)],r[i(403)]-=n[i(403)],r.unbannedCount-=n[i(408)],r.avgPingTime-=n[i(300)],r[i(267)]=0==r.minPingTime?r[i(267)]:r[i(267)]-n[i(305)],r[i(356)]=0==r[i(356)]?r[i(356)]:r[i(356)]-n[i(378)],r[i(244)]-=n[i(411)](),r.cacheMiss-=n.getCdnCacheMisses(),r.minBandwidth=0==r.minBandwidth?r.minBandwidth:r[i(232)]-n[i(230)],r[i(365)]=0==r[i(365)]?r.maxBandwidth:r[i(365)]-n[i(228)]);const o=e[i(345)]()?i(237):e[i(322)];if(e.isCodavel())if(u){const t=new ei(o,e.internal_provider,!1,e[i(215)],this.takeIf(r[i(252)],(t=>0!=t)),this[i(341)](r[i(263)],(t=>0!=t)),this[i(341)](r[i(406)],(t=>0!=t)),this[i(341)](r[i(352)],(t=>0!=t)),this[i(341)](r[i(365)],(t=>0!=t)),this[i(341)](r.minBandwidth,(t=>0!=t)),this[i(341)](r[i(300)],(t=>0!=t)),this.takeIf(r[i(267)],(t=>0!=t)),this[i(341)](r.maxPingTime,(t=>0!=t)),this[i(380)],this[i(341)](r[i(244)],(t=>0!=t)),this.takeIf(r[i(325)],(t=>0!=t)),this.takeIf(r[i(275)],(t=>0!=t)),this[i(341)](r[i(294)],(t=>0!=t)),this.takeIf(r.videoTime,(t=>0!=t)),r[i(389)],this[i(297)](r[i(253)]),this[i(409)](r[i(391)]),r.samplesResponseBytes,r[i(390)],this[i(297)](r[i(359)]),this[i(409)](r[i(311)]),r[i(248)],r.sumNetworkLatency,this.takeMin(r[i(258)]),this.takeMax(r.maxNetworkLatency),r[i(272)],r[i(315)],this[i(297)](r[i(287)]),this[i(409)](r.maxThroughput),r.samplesThroughput,this[i(341)](r[i(262)],(t=>0!=t)),this.takeIf(r[i(400)],(t=>0!=t)),this[i(341)](r[i(193)],(t=>0!=t)),this[i(341)](r[i(280)],(t=>0!=t)),this[i(341)](r.http_5XX,(t=>0!=t)),void 0,void 0,this.takeIf(r.uncompressedBytes,(t=>0!=t)),this[i(341)](r[i(271)],(t=>0!=t)),void 0,void 0,void 0,void 0,void 0,void 0,void 0,e[i(211)],this[i(341)](r[i(403)],(t=>0!=t)),this[i(341)](r[i(399)],(t=>0!=t)),this[i(341)](r[i(385)],(t=>0!=t)),this.takeIf(r[i(383)],(t=>0!=t)),this[i(341)](r.switchesDueToErrors,(t=>0!=t)),this[i(341)](r[i(354)],(t=>0!=t)),r[i(216)],r.unbannedTime);a[i(229)](e[i(257)],t),this.lastCdnStats[i(229)](e[i(257)],s)}else{let t=0;null!=this.loader[i(298)][i(358)]&&(t=null!=this[i(314)]?this[i(214)][i(298)].codavelBanCount-this[i(314)]:this[i(214)][i(298)].codavelBanCount);let n=0;null!=this[i(214)][i(298)][i(212)]&&(n=null!=this[i(371)]?this[i(214)][i(298)].codavelUnbanCount-this[i(371)]:this[i(214)][i(298)][i(212)]);let d=0;null!=this[i(214)][i(298)][i(207)]&&(d=null!=this[i(374)]?this[i(214)][i(298)][i(207)]-this[i(374)]:this.loader.CDNLoader[i(207)]);let c=0;null!=this[i(214)].CDNLoader[i(370)]&&(c=null!=this[i(317)]?this[i(214)].CDNLoader[i(370)]-this.lastReportedCodavelUnbanTime:this[i(214)].CDNLoader[i(370)]);let l=0;null!=this[i(214)][i(298)].codavelSwitches&&(l=null!=this[i(238)]?this[i(214)][i(298)].codavelSwitches-this.lastReportedCodavelSwitches:this.loader[i(298)][i(388)]);let h=0;null!=this[i(214)][i(298)].codavelSwitchesDueToQuality&&(h=null!=this[i(331)]?this[i(214)].CDNLoader[i(377)]-this[i(331)]:this[i(214)][i(298)][i(377)]);let p=0;null!=this[i(214)].CDNLoader.codavelSwitchesDueToConnectivity&&(p=null!=this[i(296)]?this[i(214)].CDNLoader[i(324)]-this[i(296)]:this[i(214)][i(298)][i(324)]);let f=0;null!=this[i(214)].CDNLoader[i(199)]&&(f=null!=this[i(240)]?this.loader[i(298)][i(199)]-this.lastReportedCodavelSwitchesDueToErrors:this.loader.CDNLoader[i(199)]);const g=new ei(o,e.internal_provider,!1,e[i(215)],this[i(341)](r.downloadedBytes,(t=>0!=t)),this.takeIf(r.downloadedChunks,(t=>0!=t)),this[i(341)](r[i(406)],(t=>0!=t)),this[i(341)](r.millis,(t=>0!=t)),this[i(341)](r.maxBandwidth,(t=>0!=t)),this.takeIf(r.minBandwidth,(t=>0!=t)),this[i(341)](r.avgPingTime,(t=>0!=t)),this[i(341)](r[i(267)],(t=>0!=t)),this[i(341)](r[i(356)],(t=>0!=t)),this[i(380)],this.takeIf(r[i(244)],(t=>0!=t)),this.takeIf(r.cacheMiss,(t=>0!=t)),this[i(341)](r.downloadedBytesVideo,(t=>0!=t)),this[i(341)](r.downloadedChunksVideo,(t=>0!=t)),this[i(341)](r.videoTime,(t=>0!=t)),r.sumResponseBytes,this.takeMin(r[i(253)]),this.takeMax(r.maxResponseBytes),r[i(290)],r[i(390)],this[i(297)](r[i(359)]),this[i(409)](r[i(311)]),r[i(248)],r[i(270)],this[i(297)](r[i(258)]),this[i(409)](r[i(343)]),r[i(272)],r.sumThroughput,this[i(297)](r.minThroughput),this[i(409)](r.maxThroughput),r[i(205)],this.takeIf(r[i(262)],(t=>0!=t)),this[i(341)](r.http_2XX,(t=>0!=t)),this[i(341)](r[i(193)],(t=>0!=t)),this[i(341)](r[i(280)],(t=>0!=t)),this.takeIf(r[i(209)],(t=>0!=t)),c,d,this[i(341)](r[i(338)],(t=>0!=t)),this.takeIf(r[i(271)],(t=>0!=t)),this[i(341)](l,(t=>0!=t)),this.takeIf(p,(t=>0!=t)),this[i(341)](f,(t=>0!=t)),this[i(341)](h,(t=>0!=t)),this[i(214)][i(298)][i(381)],this.takeIf(t,(t=>0!=t)),this[i(341)](n,(t=>0!=t)),e.banned,this[i(341)](r.bannedCount,(t=>0!=t)),this.takeIf(r[i(399)],(t=>0!=t)),this[i(341)](r.switches,(t=>0!=t)),this[i(341)](r.switchesDueToConnectivity,(t=>0!=t)),this[i(341)](r[i(286)],(t=>0!=t)),this[i(341)](r[i(354)],(t=>0!=t)),r[i(216)],r[i(224)]);a.set(e[i(257)],g),this[i(323)][i(229)](e.name,s),u=!0}else{const t=new ei(o,e[i(269)],!1,e.active,this.takeIf(r[i(252)],(t=>0!=t)),this[i(341)](r.downloadedChunks,(t=>0!=t)),this[i(341)](r[i(406)],(t=>0!=t)),this[i(341)](r.millis,(t=>0!=t)),this[i(341)](r.maxBandwidth,(t=>0!=t)),this[i(341)](r.minBandwidth,(t=>0!=t)),this[i(341)](r.avgPingTime,(t=>0!=t)),this.takeIf(r[i(267)],(t=>0!=t)),this[i(341)](r[i(356)],(t=>0!=t)),this[i(380)],this[i(341)](r[i(244)],(t=>0!=t)),this[i(341)](r.cacheMiss,(t=>0!=t)),this[i(341)](r[i(275)],(t=>0!=t)),this[i(341)](r[i(294)],(t=>0!=t)),this[i(341)](r[i(223)],(t=>0!=t)),r[i(389)],this.takeMin(r[i(253)]),this[i(409)](r.maxResponseBytes),r[i(290)],r[i(390)],this[i(297)](r[i(359)]),this[i(409)](r[i(311)]),r[i(248)],r[i(270)],this.takeMin(r[i(258)]),this[i(409)](r[i(343)]),r[i(272)],r[i(315)],this.takeMin(r[i(287)]),this[i(409)](r.maxThroughput),r.samplesThroughput,this[i(341)](r[i(262)],(t=>0!=t)),this.takeIf(r[i(400)],(t=>0!=t)),this[i(341)](r[i(193)],(t=>0!=t)),this[i(341)](r[i(280)],(t=>0!=t)),this[i(341)](r[i(209)],(t=>0!=t)),r[i(224)],r[i(216)],this[i(341)](r[i(338)],(t=>0!=t)),this.takeIf(r.compressedBytes,(t=>0!=t)),this[i(341)](r[i(385)],(t=>0!=t)),this[i(341)](r[i(383)],(t=>0!=t)),this.takeIf(r.switchesDueToErrors,(t=>0!=t)),this[i(341)](r.switchesDueToQuality,(t=>0!=t)),e[i(211)],this[i(341)](r.bannedCount,(t=>0!=t)),this[i(341)](r[i(399)],(t=>0!=t)));a[i(229)](e.name,t),this.lastCdnStats[i(229)](e[i(257)],s)}})),this[t(214)][t(204)].isEnabled()){const e=this[t(214)][t(204)][t(251)](),i=this.lastP2pStats[t(241)](t(367));d+=e.sumVideoBytes||0,c+=e[t(295)]||0;const s={downloadedBytes:e[t(252)],downloadedChunks:e[t(373)],errors:e[t(382)][t(278)],millis:e[t(379)],maxBandwidth:e.maxBandwidth,minBandwidth:e.minBandwidth===Number[t(333)]?0:e[t(232)],avgPingTime:e[t(300)],minPingTime:e[t(267)]===Number[t(333)]?0:e[t(267)],maxPingTime:e[t(356)],downloadMillisVideo:e[t(355)],downloadBytesVideo:e[t(247)],downloadChunksVideo:e[t(197)],uploadedBytes:e[t(310)],uploadedChunks:e.uploadedChunks,uploadedTime:e.uploadedTime,lateUploadedChunks:e[t(376)],lateUploadedBytes:e[t(405)],lateDownloadedBytes:e.discardedDownloadedBytes,missedDownloadedChunks:e[t(382)][t(395)],timeoutErrors:e[t(382)][t(312)],otherErrors:e.failedRequests[t(246)],activePeers:e.activePeers,totalPeers:e[t(189)],sumResponseBytes:e[t(389)],minResponseBytes:e[t(253)],maxResponseBytes:e.maxResponseBytes,samplesResponseBytes:e[t(290)],sumResponseTime:e[t(390)],minResponseTime:e.minResponseTime,maxResponseTime:e[t(311)],samplesResponseTime:e[t(248)],sumNetworkLatency:e[t(270)],minNetworkLatency:e[t(258)],maxNetworkLatency:e[t(343)],samplesNetworkLatency:e[t(272)],sumThroughput:e[t(315)],minThroughput:e[t(287)],maxThroughput:e[t(357)],samplesThroughput:e[t(205)],peersAvailable:e.peersAvailable,minPeersAvailable:e.minPeersAvailable,maxPeersAvailable:e[t(255)],peersUsed:e[t(202)],peersParallelUsed:e[t(387)],minPeersParallelUsed:e.minPeersParallelUsed,maxPeersParallelUsed:e[t(318)],peerDiscoveryTime:e[t(350)],peerConnectionTime:e[t(337)]};i&&(s[t(252)]-=i.downloadedBytes,s[t(263)]-=i.downloadedSegments,s[t(243)]-=i[t(382)][t(278)],s[t(352)]-=i[t(379)],s[t(365)]=0==s[t(365)]?s[t(365)]:s.maxBandwidth-i[t(365)],s[t(232)]=0==s.minBandwidth?s[t(232)]:s.minBandwidth-i.minBandwidth,s[t(300)]-=i.avgPingTime,s[t(267)]=0==s[t(267)]?s[t(267)]:s.minPingTime-i[t(267)],s.maxPingTime=0==s[t(356)]?s.maxPingTime:s[t(356)]-i[t(356)],s[t(267)]-=i[t(267)],s[t(356)]-=i[t(356)],s[t(355)]-=i[t(355)],s[t(247)]-=i[t(247)],s[t(197)]-=i[t(197)],s[t(310)]-=i[t(310)],s[t(328)]-=i[t(328)],s[t(285)]-=i[t(285)],s[t(219)]-=i[t(376)],s[t(398)]-=i[t(405)],s.lateDownloadedBytes-=i.discardedDownloadedBytes,s[t(283)]-=i[t(382)][t(395)],s[t(392)]-=i[t(382)].timeout,s[t(234)]-=i.failedRequests[t(246)],s[t(222)]-=i[t(222)],s.totalPeers-=i[t(189)],null!=s[t(227)]&&null!=i[t(227)]&&(s[t(227)]-=i.peersAvailable),null!=s[t(202)]&&null!=i[t(202)]&&(s[t(202)]-=i[t(202)]),null!=s[t(387)]&&null!=i.peersParallelUsed&&(s[t(387)]-=i.peersParallelUsed),null!=s[t(350)]&&null!=i[t(350)]&&(s[t(350)]-=i[t(350)]),null!=s[t(337)]&&null!=i[t(337)]&&(s[t(337)]-=i[t(337)]));const n=new ni(t(367),"P2P",!0,this.takeIf(s[t(252)],(t=>0!=t)),this[t(341)](s[t(263)],(t=>0!=t)),this[t(341)](s.errors,(t=>0!=t)),this.takeIf(s[t(352)],(t=>0!=t)),this[t(341)](s[t(365)],(t=>0!=t)),this[t(341)](s[t(232)],(t=>0!=t)),this[t(341)](s[t(300)],(t=>0!=t)),this[t(341)](s[t(267)],(t=>0!=t)),this[t(341)](s[t(356)],(t=>0!=t)),this[t(380)],this[t(341)](s[t(247)],(t=>0!=t)),this[t(341)](s[t(197)],(t=>0!=t)),this.takeIf(s[t(355)],(t=>0!=t)),this[t(341)](s[t(310)],(t=>0!=t)),this[t(341)](s[t(328)],(t=>0!=t)),this[t(341)](s[t(285)],(t=>0!=t)),this[t(341)](s[t(219)],(t=>0!=t)),this[t(341)](s[t(398)],(t=>0!=t)),this[t(341)](s[t(401)],(t=>0!=t)),this[t(341)](s.missedDownloadedChunks,(t=>0!=t)),this[t(341)](s[t(392)],(t=>0!=t)),this[t(341)](s.otherErrors,(t=>0!=t)),this[t(341)](s[t(222)],(t=>0!=t)),this[t(341)](s[t(189)],(t=>0!=t)),s[t(389)],s[t(253)],s[t(391)],s[t(290)],s[t(390)],s.minResponseTime,s.maxResponseTime,s.samplesResponseTime,s[t(270)],s[t(258)],s[t(343)],s[t(272)],s.sumThroughput,s[t(287)],s[t(357)],s[t(205)],this.takeIf(s[t(227)],(t=>0!=t)),this[t(409)](s[t(255)]),this[t(297)](s[t(319)]),this[t(341)](s[t(202)],(t=>0!=t)),this[t(341)](s[t(387)],(t=>0!=t)),this[t(409)](s[t(318)]),this[t(297)](s[t(340)]),this[t(341)](s[t(350)],(t=>0!=t)),this.takeIf(s[t(337)],(t=>0!=t)));a[t(229)](t(367),n),this[t(266)].set(t(367),e)}const l={};a[t(342)](((t,e)=>{l[e]=t}));const h=c>0?8*d*1e3/c:0;let p;if(e.default[t(233)]()[t(412)](dt.default[t(334)][t(348)],dt.default.BalancerVariables[t(304)],d),e.default.getInstance().registerCommonVariable(dt.default[t(334)][t(348)],dt.default.BalancerVariables[t(200)],h),this[t(214)].CDNLoader[t(372)]&&(p=new ai(this[t(214)][t(298)][t(195)],this[t(214)].CDNLoader[t(282)],void 0!==this[t(214)][t(298)].minApiCallResponseTime?Math[t(265)](this[t(214)][t(298)][t(276)]):void 0,void 0!==this[t(214)].CDNLoader[t(218)]?Math[t(265)](this[t(214)].CDNLoader[t(218)]):void 0,void 0!==this[t(214)][t(298)][t(236)]?Math[t(265)](this[t(214)][t(298)][t(236)]):void 0,this[t(214)].CDNLoader[t(308)](),this[t(214)][t(298)][t(274)](),this[t(362)],this[t(214)][t(298)][t(321)](),t(313),this.loader[t(298)][t(198)],this.loader[t(298)][t(309)],this[t(214)].CDNLoader[t(196)],this[t(214)][t(298)][t(235)],this[t(214)][t(298)][t(326)](),this[t(214)][t(298)][t(249)])),o[t(342)]((e=>{e[t(339)]()})),this[t(214)].P2PLoader[t(335)]()&&this.loader[t(204)][t(339)](),this[t(214)][t(298)][t(339)](),n.default.verbose(r.BalancerTag,t(306)+JSON[t(259)](l)),a[t(292)]>0)return this[t(366)](this[t(362)],this[t(225)],this[t(384)],this[t(380)],JSON[t(259)](l),p)}}catch(t){}}hasValuesChanged(t){const e=di;return Object[e(201)](t)[e(299)]((e=>0!=t[e]))}[di(341)](t,e){return void 0!==t&&e(t)?t:void 0}[di(297)](t){return void 0!==t?t:Number[di(333)]}takeMax(t){return void 0!==t?t:Number[di(288)]}reportRequest(t,i,s,n,r,a){const o=di;if(""==r||"{}"==r)return;let d={};return d=null!=a?{timemark:(new Date)[o(369)](),code:e.default.getInstance()[o(386)]()?e.default.getInstance()[o(375)]():t,sessionRoot:e.default.getInstance()[o(281)](),v:e.default[o(349)]()[o(260)](o(279))[0],pluginVersion:e.default.getPluginVersion(),pingTime:e.default.getInstance()[o(210)]().getPingTime(),token:t,accountCode:i,profileName:s,data:r,api_errors:a.apiCallErrors,api_responses:a[o(282)],api_min_response_time:a.apiCallsMinResponseTime,api_avg_response_time:a.apiCallsAvgResponseTime,api_max_response_time:a[o(192)],bucket:a[o(347)],is_live:a[o(336)],video_id:a[o(217)],force_decision:a.forceDecision,request_platform:a[o(206)],p2p_available:a[o(198)],bolina_available:a[o(309)],active_switching_priority:a[o(196)],priority_cdn:a[o(235)],chunk_duration:a[o(226)],announced_cdns:a[o(249)]}:{timemark:(new Date).getTime(),code:e.default[o(233)]().isUsingLegacy()?e.default[o(233)]()[o(375)]():t,sessionRoot:e.default[o(233)]().getFastDataSessionToken(),v:e.default.getPluginVersion()[o(260)]("-js")[0],pingTime:e.default[o(233)]()[o(210)]()[o(264)](),token:t,accountCode:i,profileName:s,data:r},d}}const hi={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let pi;const fi=new Uint8Array(16);function gi(){if(!pi&&(pi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pi(fi)}const mi=[];for(let t=0;t<256;++t)mi.push((t+256).toString(16).slice(1));const vi=function(t,e,i){if(hi.randomUUID&&!e&&!t)return hi.randomUUID();const s=(t=t||{}).random||(t.rng||gi)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){i=i||0;for(let t=0;t<16;++t)e[i+t]=s[t];return e}return function(t,e=0){return mi[t[e+0]]+mi[t[e+1]]+mi[t[e+2]]+mi[t[e+3]]+"-"+mi[t[e+4]]+mi[t[e+5]]+"-"+mi[t[e+6]]+mi[t[e+7]]+"-"+mi[t[e+8]]+mi[t[e+9]]+"-"+mi[t[e+10]]+mi[t[e+11]]+mi[t[e+12]]+mi[t[e+13]]+mi[t[e+14]]+mi[t[e+15]]}(s)},yi=Si;!function(t){const e=Si,i=t();for(;;)try{if(180567==-parseInt(e(251))/1+-parseInt(e(230))/2*(-parseInt(e(210))/3)+-parseInt(e(166))/4*(-parseInt(e(134))/5)+-parseInt(e(149))/6*(parseInt(e(138))/7)+-parseInt(e(243))/8*(-parseInt(e(169))/9)+parseInt(e(175))/10+parseInt(e(232))/11*(parseInt(e(193))/12))break;i.push(i.shift())}catch(t){i.push(i.shift())}}(Ti);function Ti(){const t=["downloadAvgBw","isLive","readTimeoutMilliseconds","toString","_options","trunc","onProgress","totalBandwidth","reportTime","retries","useP2P","timeout","onProcessSegmentSuccess","updateProgressStats","allowSpecialDelimitersInUrl","getReportInterval","12BRjYjv","toLowerCase","cdns","_accountCode","next"," isAudio ","realBodySize","onProcessSegmentFail","_segments","getIsEnabled","onAbort","_$1","camelToSnake","readyStateChangeEM","uuid","SEGMENT FAILED WITH STATUS ","storeSegment","7506BUxMVS","failed","debug","forceDecisionCall","CDNLoader","host","VIDEO_ANALYTICS","isAudio","renditionCount","Detected rendition -> ","cdnName","updateUrl","targetDuration","delete","currentRenditionBandwidth","clean","getStats","downloadedBytes","headers","VIEW_CODE","122oMBoyT","size","960894PnacUc","Content-Length","the status is -> ","getMaxBandwidth","newDownloadedSegment","data","then","profileName","set","d1.npaw.com","P2PLoader","21688ReDLjX","timeBetweenHeads","dynamicRules","getActiveRequests","href","loadCDNBalancerData","disable","requestReadTimeout","325498iBhPww","getFastDataSessionToken","enableCDN","bandwidthPosition","getResponseHeader","off","isEnabled","changeStatusCDN","resource","signManifestUsingApi","warn","verbose","isManifest","errorEM","triedP2P","status","jwtAuthType","_resource","updateTime","getInstance","setMaxBandwidth","duration","isDev","replace","abort","160TmxzDc","downloadedSegments","loadEM","total","98651TwhPQx","P2P","download","downloadMillis","request","Products","Success","balanceManifests","byteLength","isMedia","bucketName","90cuSRtP","Fail","getSegment","Request was canceled due a timeout -> ","url","startTime","length","updateCDNStatsOnSuccess","jwtToken","apiHost","apply","error","loadBalancerData","bandwidth","updateCDNStatsOnFailure","totalDownloadedBytes","response","36220WOkTaZ","Segment request failed, no more retries ","_balancerBusinessObject","126vuwYCg","statsReportBusinessObject","options","onSuccess","setActive","rendition","1497700qfJedt","enable"];return(Ti=function(){return t})()}function Si(t,e){const i=Ti();return(Si=function(t,e){return i[t-=122]})(t,e)}class Ei{constructor(t,e,i){const s=Si;this[s(201)]=new Map,this.segmentsMap=new Map,this[s(257)]=!0,this[s(196)]=t,this._options=e,this[s(126)]=new He,this.storage=new gt(this),this[s(158)]=i,this[s(181)].timeBetweenHeads&&this[s(181)][s(244)]>=1e3&&(a.wc.timeBetweenBurstsMilliseconds=this._options[s(244)]),this[s(242)]=new J(this[s(196)],e,this.storage),this[s(214)]=new lt(e,this._resource,this[s(242)],this[s(158)]),this.statsReportBusinessObject=li.getInstance(this),at[s(128)](this),W[s(128)](this[s(242)]),this[s(207)]=vi();const n=new ze(this,null==e?void 0:e[s(125)],null==e?void 0:e[s(157)]);this._balancerBusinessObject=n,(e[s(213)]||e[s(260)])&&this[s(248)](!0)}[yi(192)](){const t=yi;return!this._options.reportTime||this[t(181)][t(185)]<1?5:this[t(181)].reportTime}[yi(205)](t){const e=yi,i={};for(const s in t)t.hasOwnProperty(s)&&(i[s[e(132)](/([A-Z])/g,e(204))[e(194)]()]=t[s]);return i}[yi(248)](t){const e=yi;var i,s,n,r,a,o,d,c,u,l;const h=this[e(181)][e(245)]?JSON.stringify(this[e(205)](this[e(181)][e(245)])):"";null!=t&&t&&this._balancerBusinessObject[e(161)](this[e(196)],"/",null!==(i=this[e(181)].isLive)&&void 0!==i&&i,null!==(s=this[e(181)][e(127)])&&void 0!==s?s:0,null!==(n=this._options[e(212)])&&void 0!==n&&n,null!==(r=this._options[e(131)])&&void 0!==r&&r,null!==(a=this[e(181)].signManifestUsingApi)&&void 0!==a&&a,this[e(181)][e(239)],this[e(181)][e(148)],this[e(181)][e(215)],h),this._options[e(259)]&&""!=this[e(181)].resource&&this[e(168)].loadBalancerData(this[e(196)],this._options[e(259)],null!==(o=this._options[e(178)])&&void 0!==o&&o,null!==(d=this[e(181)][e(127)])&&void 0!==d?d:0,null!==(c=this[e(181)].debug)&&void 0!==c&&c,null!==(u=this[e(181)].isDev)&&void 0!==u&&u,null!==(l=this._options[e(260)])&&void 0!==l&&l,this._options[e(239)],this._options[e(148)],this._options.host,h)}processSegment(t,i,s,o,d=a._C[yi(186)],c=!1,l){const h=yi,p=u.isMedia(t.pathname),f=!p&&u[h(263)](t.pathname,this._options[h(191)]),g=this[h(242)][h(257)]()&&p;n.default[h(262)](r.BalancerTag,"P2P PATH FOR ID "+t.pathname);const m=new qe(t.pathname,t[h(247)],this._resource,o,d,g,c);if(m[h(140)]=i,m[h(228)]=o,this[h(201)][h(240)](m.id,m),!f){const e=this[h(126)].getRendition(t.pathname);null!=e&&(n.default[h(262)](r.BalancerTag,h(219)+e[h(162)]+" "+(null==e?void 0:e[h(254)])+h(198)+e[h(217)]+" for "+t),m[h(130)]=e[h(222)],m[h(174)]=e,!e[h(217)]&&(this[h(214)][h(224)]=e[h(162)],this[h(214)].currentRenditionPos=e[h(254)]+1,this[h(214)][h(218)]=this[h(126)].getVideoRenditions()[h(231)]))}this._resource&&this[h(126)][h(225)]();const v=e.default[h(128)]().getCommonVariable(dt.default[h(143)][h(216)],dt.default.AnalyticsVariables[h(229)]);let y=e.default.getInstance()[h(252)]()+(v?"_"+v:"");!y&&(y=this.uuid),this[h(170)].updateData(h(241),y,this._accountCode,this[h(181)][h(239)],t[h(180)]()),m[h(263)]=f,m[h(147)]=p,i&&(m.on(a.yL[h(144)],(t=>{return e=this,i=void 0,r=function*(){this[h(189)](m),s[0](m)},new((n=void 0)||(n=Promise))((function(t,s){const a=Si;function o(t){const e=Si;try{c(r[e(197)](t))}catch(t){s(t)}}function d(t){try{c(r.throw(t))}catch(t){s(t)}}function c(e){const i=Si;var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)})))[i(238)](o,d)}c((r=r[a(159)](e,i||[]))[a(197)]())}));var e,i,n,r})),m.on(a.yL.Fail,(t=>{const e=h;this[e(200)](m,!0),0==m[e(186)]&&s[e(155)]>1&&s[1](),n.default[e(160)](r.BalancerTag,e(167)+m.route)})));const T=this[h(214)][h(221)](m);return m[h(263)]&&this[h(181)][h(145)]&&(m[h(153)]=null!=T?T:m[h(153)]),T!==h(139)?this[h(214)][h(246)]()[h(240)](m.id,m):(m.cdnName="P2P",m.cdnProvider="P2P",this[h(242)][h(142)](m,void 0)),m[h(154)]=Date.now(),m}[yi(200)](t,e){const i=yi,s=t[i(220)];t[i(211)]=!0,this.CDNLoader[i(163)](s,t),t[i(123)]&&1==t[i(187)]&&(t.useP2P=!1,this[i(214)][i(221)](t))}onProcessSegmentSuccess(t){const e=yi;at[e(128)]()[e(236)](t),W[e(128)]()[e(236)](t),t[e(256)](a.yL[e(144)]),t.off(a.yL[e(150)]);const i=this[e(214)][e(235)](t[e(220)]);i>0&&(new $e).limit(i,t),this[e(214)][e(156)](t),this[e(214)].removeActiveSegment(t),this[e(242)].isEnabled()&&t.isMedia&&!this[e(242)][e(151)](t)&&this[e(242)][e(209)](t),this[e(201)][e(223)](t.id)}[yi(253)](t,e){const i=yi;return n.default[i(261)](r.BalancerTag,"enableCDN will be deprecated use setActive instead."),this[i(173)](t,e)}[yi(173)](t,e){const i=yi;return t===i(139)?(e?this[i(242)][i(176)]():this.P2PLoader[i(249)](),!0):this[i(214)][i(258)](t,e)}setMaxBandwith(t,e){const i=yi;return t!==i(139)&&(this[i(214)][i(129)](t,e)||!1)}[yi(203)](t,e){const i=yi;e&&!e.failed&&e[i(188)]&&(n.default.debug(r.BalancerTag,i(152)+e[i(153)]),this[i(200)](e,!1))}[yi(136)](t,e,i){}loadStartEM(t,e,i){const s=yi;null!=e&&i.total>0&&this.P2PLoader[s(257)]()&&e[s(147)]&&!this[s(242)].getSegment(e)&&t.response&&t[s(165)][s(146)]&&t.response[s(146)]>0&&(e[s(237)]=t[s(165)],e[s(199)]=i.total,this[s(242)].storeSegment(e))}progressEM(t,e,i){const s=yi;null!=e&&(this[s(242)][s(257)]()&&e[s(147)]&&!this.P2PLoader[s(151)](e)&&t[s(165)]&&t[s(165)][s(146)]&&t[s(165)].byteLength>0&&(n.default.debug(r.BalancerTag,s(234)+t[s(124)]),e[s(237)]=t[s(165)],i[s(137)]>0&&(e[s(199)]=i[s(137)]),this[s(242)][s(209)](e)),e[s(183)](t,i),this[s(214)][s(190)]())}[yi(206)](t,e,i){const s=yi;switch(t.readyState){case 2:e&&!e[s(250)]&&(e.requestReadTimeout=setTimeout((()=>this[s(188)](t,e)),a._C[s(179)]));break;case 4:if(null!=e){if(clearTimeout(e.requestReadTimeout),delete e[s(250)],e.statusCode=t[s(124)],t[s(124)]>=200&&t.status<400){const n=e[s(172)](t[s(165)],t[s(255)](s(233))||"0",i[s(171)][s(191)]);return e[s(263)]&&i.setManifestResource(e[s(153)]),n?this[s(189)](e):this[s(200)](e,!1),!0}return n.default[s(212)](r.BalancerTag,s(208)+t[s(124)]+" -> "+e.id),this[s(200)](e,!1),!1}}return!0}[yi(188)](t,e){const i=yi;e[i(188)]=!0,t[i(133)]()}loadEndEM(t,e,i){}[yi(122)](t,e,i){}[yi(226)](){const t=yi,e=this[t(214)][t(226)](),i=this[t(242)].getStats();let s=!1,n=0;return i&&this[t(242)]&&this[t(214)].getStats()[t(164)]>0&&(s=!0,n=8*i[t(227)]/(i[t(141)]/1e3)),this[t(242)][t(257)]()&&(e[t(195)].push({downloadedBytes:i.downloadedBytes||0,downloadedChunks:i[t(135)]||0,bandwidth:Math.trunc(n||0),instantBandwidth:Math[t(182)](0),lastInstantBandwidth:Math[t(182)](0),peakBandwidth:Math[t(182)](0),failures:0,totalFailures:0,retries:0,downloadTime:i[t(141)],provider:t(139),profileName:t(139),isActive:this[t(242)][t(257)](),ptb:0,usedOnce:s,hugeChunks:0,firstHugeChunkSize:0,lastChunksLapse:0,maxBandwidth:0,banned:!1,lastBandwidth:0,scoringBandwidth:0}),e[t(184)]=e.totalBandwidth+(i[t(177)]||0),e[t(164)]=e[t(164)]+(i.downloadedBytes||0)),e}[yi(176)](){this[yi(257)]=!0}[yi(249)](){this.isEnabled=!1}[yi(202)](){return this[yi(257)]}}const bi=Ai;function Ai(t,e){const i=wi();return(Ai=function(t,e){return i[t-=471]})(t,e)}function wi(){const t=["size","FORCE","getNewUrl","requestHeader","getPeers","blob","addEventListener","dispatchEvent","Sending join to tracker due to new manifest","abort","verbose","__awaiter","delete","done","gnsnpaw.com","P2P DISPATCH LOAD START","6140870TMgwpT","58218vUMoQu","6XilReh","processSegment","P2P TIMEOUTERROR ","segment","trim"," real size-> ","downloadedChunks","arraybuffer","status","108fLDDlg","getAllResponseHeaders","host","kb ","getUploadRequests","Fetching segment via CDN for -> ","P2P Error on event load start","undefined","throw","peers: ","apply","getUploadRequestsFailed","setRequestHeader","notice","method","segmentsMap","slice","lastDecisionTimestamp","updateP2PId","forceHttp","byteLength","params","getUploadedChunks","P2P DISPATCH LOAD END","removeInterceptors","loadStartEM","overrideMimeType"," peer id: ","includes","open"," peer id -> ","P2PLoader","setInterceptedRequests","getStats","search","defaultChunkDownloadTimeout","startsWith","downloadedBytes","loader","origRes"," PEER ID -> ","buffer","stopMonitor","split","progressEM","addInterceptor"," UniqPeers: ","resetP2PConnection"," TIMEOUTS ","_accountCode","responseType"," segmnet p2p id -> ","isDev","openAndSend","ifByteArrayToString","prototype","segments-> (","join","getVersion","cdns","Fetching segment via P2P for -> ","disable","devHost","getIsEnabled","allResponseHeader","destroy","resource","elapsedTime","getBitmovinSendHttpRequest","getUploadedBytes","CDNLoader","setManifestResource","P2P","isMedia","P2P Failure Update url on problems with p2p ","getId","signManifestUsingApi","headers","getPeersBehind","getSegment","loadEndEM","getAccountCode","peer","2513605qwjPPK","Range","6975JRThWj","readyState","responseURL","P2P Error on event load event"," size -> ","simpleRequest","timeouts","onreadystatechange","load","getResponseHeader","265815ehartN"," peer version ","interceptors","components","onAbort","cdnName"," peer version: ","map","rnpaw","P2P TIMEOUTERROR BY ME: ","readystatechange","debug","getActiveRequests","toString","timeToFirstByte","Error on request ","connectTimeoutMilliseconds","getRecommendedManifest","p2pId","length","HTTP for -> "," original -> ","pathname","P2P DISPATCH READY STATE","response","loadend","P2P READY FOR ","provider","isEnabled","next","466824aZBGFI","timeout","ur: "," ip: ","options","P2P/SMB Traffic ","realBodySize","defineProperty","loadstart","P2P Error on event load end","balanceSubtitles","P2P2 Download done -> ","updateUrl","isTheoplayer","537236SWiHTF","isBitmovin","useTheoplayer","loadInterceptor","getPeersNothing","GET","sliceByFirstSpecial","balanceAudio","getIp","getInstance","responseHeader","?rnpaw=","toFixed","balancer","set","apiHost","body","enable","getLoader","retryBecauseNewHeaders","301ipLYPM","statusText","XHR-not-intercepted -> ","call","reload","progress","now","sendJoin","request","send"," TIME: ","data","manifest","getPeersAhead","DONE"];return(wi=function(){return t})()}!function(t){const e=Ai,i=t();for(;;)try{if(415480==parseInt(e(560))/1*(parseInt(e(667))/2)+parseInt(e(570))/3+parseInt(e(614))/4+parseInt(e(558))/5+-parseInt(e(666))/6*(parseInt(e(634))/7)+parseInt(e(600))/8*(parseInt(e(475))/9)+-parseInt(e(665))/10)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(wi);class _i extends w{constructor(t,e){const i=bi;var s;if(super(),this.isEnabled=!0,this[i(510)]=0,this[i(615)]=!1,this[i(613)]=!1,this[i(492)]=0,this[i(629)]=i(663),this._accountCode=t,this[i(604)]=new E,this[i(513)]=new Ei(this[i(524)],this[i(604)],this[i(629)]),this[i(572)]=new y(this),e&&typeof(null===(s=e[i(573)])||void 0===s?void 0:s.balancer)!==i(482)&&!e[i(573)][i(627)])return this[i(598)]=!1,this[i(513)][i(536)](),void this.loader[i(506)].disable();const o=this;this[i(624)]=XMLHttpRequest[i(530)][i(569)],XMLHttpRequest[i(530)][i(569)]=function(t){const e=i;return o[e(624)][e(637)](this,t)},this[i(539)]=XMLHttpRequest[i(530)].getAllResponseHeaders,XMLHttpRequest.prototype[i(476)]=function(){return o[i(539)].call(this)},this.abort=XMLHttpRequest[i(530)][i(658)],XMLHttpRequest[i(530)][i(658)]=function(){const t=i,e=this[t(670)];o.getLoader()[t(574)](this,e),o.abort[t(637)](this)},this[i(501)]=XMLHttpRequest[i(530)][i(501)],XMLHttpRequest[i(530)][i(501)]=function(t){o.overrideMimeType.call(this,t)},this[i(652)]=XMLHttpRequest[i(530)].setRequestHeader,XMLHttpRequest[i(530)][i(487)]=function(t,e,...s){const n=i,r=this[n(670)];r&&(r[n(552)][t]=e,r[n(633)]=0==r.retryBecauseNewHeaders?1:r.retryBecauseNewHeaders),o.requestHeader[n(637)](this,t,e,...s)},this[i(643)]=XMLHttpRequest[i(530)].send,XMLHttpRequest.prototype[i(643)]=function(t,...e){var i,s,d,c,u,l,h,p,f,g,m,v,y,T,S,E;return y=this,T=void 0,E=function*(){const y=Ai;(!this[y(601)]||this[y(601)]>a._C[y(586)])&&this.isAsync&&(this[y(601)]=a._C.connectTimeoutMilliseconds);const T=this.segment;if((!o.isEnabled||!T||T.isManifest)&&(!T||!(null!==(i=o[y(604)].balanceManifests)&&void 0!==i&&i||null!==(s=o[y(604)].signManifestUsingApi)&&void 0!==s&&s)))return void o.send[y(637)](this,t,...e);if(1==T[y(633)])return T[y(633)]=2,T[y(493)](),void o[y(528)](this,T);try{const t=o[y(632)]()[y(508)]()[y(534)];let e=0,i=0,s=0,a=0,p=0,f=0,g=(null===(d=o[y(632)]())||void 0===d?void 0:d[y(506)][y(544)]())||0;const m=(null===(c=o.getLoader())||void 0===c?void 0:c[y(506)][y(497)]())||0;g=g/1024/1024;for(let n=0;n<t.length;n++)t[n][y(597)]===y(547)?(i+=t[n].downloadedBytes,a+=t[n][y(472)]):"STREBOOS"===t[n].provider||"STREBOPX"===t[n][y(597)]?(p+=t[n].downloadedBytes,f+=t[n].downloadedChunks):(e+=t[n][y(512)],s+=t[n][y(472)]);const v=null===(u=o.getLoader())||void 0===u?void 0:u[y(506)][y(479)](),T=null===(l=o[y(632)]())||void 0===l?void 0:l.P2PLoader[y(486)](),S=null===(h=o[y(632)]())||void 0===h?void 0:h[y(506)].getUploadedUniqPeers();let E=0,b=0,A=0;try{E=i/(i+e+p)*100,b=p/(i+e+p)*100,A=g/((i+e+p)/1024/1024)*100}catch(t){}const w=o.getLoader()[y(506)][y(653)]()[y(649)]||0,_=" ("+o[y(632)]()[y(506)][y(553)]()+"/"+o[y(632)]()[y(506)][y(618)]()+"/"+o[y(632)]()[y(506)][y(647)]()+") ";n.default[y(659)](r.BalancerTag,y(605)+E.toFixed(2)+"% "+b.toFixed(2)+"%\nMB(CDN/SB/P2P) "+(e/1024/1024)[y(626)](2)+"/"+(p/1024/1024)[y(626)](2)+"/"+(i/1024/1024)[y(626)](2)+"\n"+y(531)+s+"/"+f+"/"+a+")\n"+y(484)+w+_+"\nuploaded: (MB/#/%) "+g[y(626)](2)+"/"+m+"/"+A[y(626)](2)+"\n"+y(602)+v+"|"+T+y(521)+S)}catch(t){}const S=Date[y(640)]();T[y(493)]();let E=o[y(513)].P2PLoader[y(554)](T);if(T[y(575)]!==y(547)||T[y(494)])n.default.verbose(r.BalancerTag,(T[y(494)]?y(650):"")+y(590)+T[y(514)]),o.getLoader()[y(545)].getActiveRequests().set(T.id,T),n.default.notice(r.BalancerTag,y(480)+T[y(514)]),o[y(643)][y(637)](this,t,...e);else{let t=!1;n.default[y(488)](r.BalancerTag,y(535)+T[y(514)]),T[y(494)]=!0,T.useP2P=!1;let e=null==E?void 0:E[y(645)],i=E&&(null==E?void 0:E[y(645)][y(495)])>0&&(null==e?void 0:e[y(495)])===(null==E?void 0:E[y(606)])&&(null==E?void 0:E.realBodySize)&&(null==E?void 0:E[y(606)])>0,s=0;for(;!i;)yield new Promise((t=>setTimeout(t,20))),E=o[y(513)][y(506)][y(554)](T),e=null==E?void 0:E[y(645)],s=(null==e?void 0:e[y(495)])||0,i=E&&(null==E?void 0:E.realBodySize)>0&&(null==E?void 0:E[y(645)][y(495)])>0&&(null==e?void 0:e.byteLength)===(null==E?void 0:E[y(606)])&&null!=(null==E?void 0:E[y(606)]),Date.now()-S>a.LI[y(601)]?(i=!0,e=void 0,t=!0,n.default[y(659)](r.BalancerTag,y(579)+o[y(513)].P2PLoader[y(550)]()+y(644)+(Date[y(640)]()-S)+y(502)+T[y(557)].id+y(576)+T[y(557)].getVersion()+y(603)+T[y(557)][y(622)]()+" "+s/((null==E?void 0:E[y(606)])||1)*100+"%")):Date[y(640)]()-S>2e3&&(null==E||null==E[y(645)]||s<20)&&(i=!0,e=void 0,t=!0,n.default[y(659)](r.BalancerTag,"P2P TIMEOUTERROR BY NO DATA ME:"+o[y(513)][y(506)].getId()+" "+(Date[y(640)]()-S>2e3)+y(502)+T[y(557)].id+y(576)+T[y(557)][y(533)]()+y(603)+T[y(557)][y(622)]()+" last length -> "+s));if(e&&(e=e[y(491)](0,e.byteLength)),t&&(T[y(557)]&&(T[y(557)][y(566)]=T[y(557)].timeouts+1),n.default[y(659)](r.BalancerTag,y(669)+T[y(514)]+" "+T.id+" "+(null===(p=null==E?void 0:E[y(645)])||void 0===p?void 0:p[y(495)])+" "+(null==E?void 0:E[y(606)])+y(515)+(null===(f=T.peer)||void 0===f?void 0:f.id)+y(523)+T.peer.timeouts)),n.default[y(659)](r.BalancerTag,y(596)+T[y(514)]+" "+(null==e?void 0:e.byteLength)+" "+(null==E?void 0:E[y(606)])+y(505)+T[y(557)].id+y(526)+T[y(588)]),E=o[y(513)][y(506)][y(554)](T),e&&(null===(g=null==E?void 0:E.data)||void 0===g?void 0:g[y(495)])==(null==E?void 0:E.realBodySize)&&null!=(null==E?void 0:E[y(606)])&&(null==E?void 0:E[y(606)])>0){n.default[y(488)](r.BalancerTag,T[y(514)]+" downloaded through P2P. Size: "+((null===(m=null==E?void 0:E[y(645)])||void 0===m?void 0:m.byteLength)/1048576).toFixed(2)+"MB"),e instanceof Uint8Array&&(e=e[y(516)]);const t=new CustomEvent("readystatechange"),i=new CustomEvent(y(595)),s=new CustomEvent(y(568)),a=new CustomEvent("loadstart");Object[y(607)](this,y(594),{writable:!0}),Object[y(607)](this,"status",{writable:!0}),Object[y(607)](this,y(635),{writable:!0}),Object[y(607)](this,"readyState",{writable:!0}),Object.defineProperty(this,y(495),{writable:!0}),Object[y(607)](this,"responseURL",{writable:!0}),Object[y(607)](this,y(525),{writable:!0}),this[y(495)]=e.byteLength,this[y(594)]=e,this[y(474)]=200,this[y(635)]="OK",this.readyState=XMLHttpRequest[y(648)],this[y(562)]=T[y(514)],this.responseType=y(473),n.default[y(659)](r.BalancerTag,y(664));try{this[y(656)](a)}catch(t){n.default[y(659)](r.BalancerTag,y(481))}yield new Promise((t=>setTimeout(t,6))),n.default[y(659)](r.BalancerTag,y(593));try{this.dispatchEvent(t)}catch(t){n.default.verbose(r.BalancerTag,"P2P Error on event ready state change")}n.default[y(659)](r.BalancerTag,"P2P DISPATCH LOAD ");try{this.dispatchEvent(s)}catch(t){n.default.verbose(r.BalancerTag,y(563))}n.default[y(659)](r.BalancerTag,y(498));try{this[y(656)](i)}catch(t){n.default[y(659)](r.BalancerTag,y(609))}n.default[y(659)](r.BalancerTag,y(611)+(Date.now()-S)+"ms id:"+T[y(588)]+y(564)+e[y(495)]/1024+y(478)+T[y(514)]+y(571)+T[y(557)].getVersion()+y(603)+T[y(557)][y(622)]())}else n.default.verbose(r.BalancerTag,y(549)+(Date[y(640)]()-S)+"ms timeout: "+a.LI[y(601)]+" byte length-> "+(null===(v=null==E?void 0:E[y(645)])||void 0===v?void 0:v[y(495)])+y(471)+(null==E?void 0:E[y(606)])+y(591)+T[y(514)]),T[y(494)]=!0,o[y(632)]().CDNLoader[y(582)]().set(T.id,T),o[y(632)]()[y(545)][y(612)](T),o[y(528)](this,T)}},new((S=void 0)||(S=Promise))((function(t,e){const i=Ai;function s(t){const i=Ai;try{r(E[i(599)](t))}catch(t){e(t)}}function n(t){const i=Ai;try{r(E[i(483)](t))}catch(t){e(t)}}function r(e){var i;e[Ai(662)]?t(e.value):(i=e.value,i instanceof S?i:new S((function(t){t(i)}))).then(s,n)}r((E=E[i(485)](y,T||[]))[i(599)]())}))},this.open=XMLHttpRequest[i(530)][i(504)],XMLHttpRequest[i(530)][i(504)]=function(t,e,s=!0,...a){const d=i;var c;if(this.isAsync=s,!o[d(598)])return o.open[d(637)](this,t,e,s,...a);let l=e;"string"!=typeof e&&(l=e.toString());let h=l;const p=h[d(518)]("?");h=u[d(620)](h,o[d(604)].allowSpecialDelimitersInUrl);try{const i=new URL(h),n=u.isManifest(i[d(592)]),r=u[d(548)](i.pathname),f=u.isAudio(i.pathname),g=u.isSubtitles(i.pathname);if(null==this[d(670)]&&Object[d(607)](this,d(670),{writable:!0}),l.includes("&rnpaw=")||l[d(503)](d(625))){const t=new URL(l),i=t.searchParams;i[d(661)](d(578)),t[d(509)]=i[d(583)](),e=t[d(583)]()}else if(t===d(619)&&(n||r||f&&o.options[d(621)]||g&&o.options[d(610)])){let e;p[d(589)]>1&&(e=p[1]);let i=this.segment;null==i&&(i=o[d(565)](p[0],e,{})),null==this[d(670)]&&(this[d(670)]=i),this[d(655)]("load",(function(t){const e=d;o.getLoader()[e(500)](this,i,t)})),this[d(655)](d(608),(function(t){o[d(632)]().loadStartEM(this,i,t)}));const n=this[d(567)],r=t=>{const e=d;null==n||n.call(this,t),o[e(632)]().readyStateChangeEM(this,i,o)};return o[d(615)]||o[d(613)]?this[d(567)]=r:this[d(655)](d(580),r),this[d(655)](d(639),(function(t){const e=d;o[e(632)]()[e(519)](this,i,t)})),this.addEventListener(d(595),(function(t){const e=d;o[e(632)]()[e(555)](this,i,t)})),this[d(655)]("error",(function(t){})),o[d(504)][d(637)](this,t,i[d(651)](null!==(c=o[d(604)][d(551)])&&void 0!==c&&c),s,...a)}}catch(t){n.default[d(581)](r.BalancerTag,"Could not parse URL "+h)}return n.default.debug(r.BalancerTag,d(636)+e),o[d(504)][d(637)](this,t,e,s,...a)}}destroy(){const t=bi;n.default[t(581)](r.BalancerTag,"Destroying CDN Balancer"),at[t(623)]()[t(517)](),this.loader[t(506)][t(540)](),this[t(598)]&&(XMLHttpRequest[t(530)][t(569)]=this[t(624)],XMLHttpRequest[t(530)][t(476)]=this[t(539)],XMLHttpRequest.prototype[t(658)]=this.abort,XMLHttpRequest[t(530)].overrideMimeType=this[t(501)],XMLHttpRequest[t(530)][t(487)]=this.requestHeader,XMLHttpRequest[t(530)][t(643)]=this[t(643)],XMLHttpRequest[t(530)][t(504)]=this[t(504)]),this[t(572)][t(499)]()}[bi(556)](){return this._accountCode}setOptions(t){const e=bi;var i;for(const e in t)this.options[e]=t[e];this[e(629)]=(null!==(i=this[e(604)][e(477)])&&void 0!==i?i:this[e(604)][e(527)])?a.df[e(537)]:a.df[e(477)],this.loader=new Ei(this[e(524)],this[e(604)],this[e(629)])}[bi(528)](t,e){const i=bi;var s,a,o;try{t[i(504)](i(619),e[i(651)](null!==(s=this.options[i(551)])&&void 0!==s&&s)),(null===(a=e[i(552)])||void 0===a?void 0:a[i(559)])&&t[i(487)](i(559),e.headers[i(559)]),t[i(643)]()}catch(t){n.default[i(581)](r.BalancerTag,i(585)+e[i(651)](null!==(o=this.options[i(551)])&&void 0!==o&&o))}}[bi(642)](t,e,i,s,n,r,a){const o=bi;this[o(513)][o(668)](t,!0,i,s,n,r,a)}[bi(546)](t){const e=bi,i=Date[e(640)]()-this[e(492)];t&&(this[e(604)][e(541)]!==t||i>a.df.decisionCallWaitTime)&&(this[e(604)][e(541)]=t,this[e(513)]&&this.loader[e(506)]&&this[e(513)][e(506)][e(598)]()&&(n.default[e(581)](r.BalancerTag,e(657)),this[e(513)][e(506)][e(641)]()),!this[e(513)]&&(this[e(513)]=new Ei(this[e(524)],this[e(604)],this[e(629)])),this[e(513)].CDNLoader.setResourceInfo(t),this[e(513)].loadCDNBalancerData(),this[e(492)]=Date.now())}[bi(632)](){return this[bi(513)]}[bi(520)](t,e){const i=bi;this[i(572)][i(617)](t,e)}[bi(587)](){const t=bi;return this[t(513)][t(545)].getRecommendedManifest()}[bi(616)](){this[bi(613)]=!0}[bi(543)](){return this.isBitmovin=!0,function(t,e){const i=Ai;return typeof t===i(482)||!t[i(511)]("media")&&!t.startsWith(i(646))?null:{getResponse:()=>new Promise((t=>{const i=Ai;var s;let n=Date[i(640)]();const r={request:e,url:e.url,headers:[],status:0,statusText:"",body:void 0},a=new XMLHttpRequest;a[i(525)]=null!==(s=e[i(525)])&&void 0!==s?s:i(473),a[i(567)]=function(e){const s=i;if(2===a[s(561)])r[s(584)]=(Date.now()-n)/1e3;else if(4===a[s(561)])if(r[s(474)]=a[s(474)],r[s(635)]=a.statusText,r[s(542)]=(Date.now()-n)/1e3,a[s(474)]>=200&&a[s(474)]<400){a[s(525)]!==s(473)&&a.responseType!==s(654)?(r[s(630)]=u[s(529)](a[s(594)]),r.length=r.body[s(589)]):(r.body=a[s(594)],a[s(525)]===s(473)?r[s(589)]=r[s(630)][s(495)]:a[s(525)]===s(654)&&(r[s(589)]=r[s(630)].size));const e=a[s(476)]()[s(671)]().split(/[\r\n]+/)[s(577)]((t=>{const e=s,i=t[e(518)](": ");return{name:i.shift(),value:i[e(532)](": ")}}));r[s(552)]=e,t(r)}else t(r)},a[i(504)](e[i(489)],e.url);for(const t in e[i(552)])a[i(487)](t,e[i(552)][t]);a[i(643)](null==e?void 0:e.body)})),cancel(){},setProgressListener(){}}}}[bi(522)](){const t=bi;this.loader[t(506)].resetP2PConnection(),this[t(604)][t(541)]=void 0}[bi(565)](t,e,i){const s=bi;var n;x.default[s(623)]()[s(507)](!0);const r=new URL(t),a=this[s(513)][s(668)](r,!1,[],i);a[s(496)]=e;const o=(null==i?void 0:i[s(559)])||"";return this[s(513)][s(490)][s(628)](a[s(651)](null!==(n=this.options[s(551)])&&void 0!==n&&n)+o,r[s(583)]()),a}[bi(631)](){const t=bi;this[t(598)]=!0,this.loader.enable(),this[t(513)][t(506)].enable()}[bi(536)](){const t=bi;this[t(598)]=!1,this.loader[t(536)](),this.loader[t(506)][t(536)]()}[bi(538)](){return this[bi(598)]}[bi(638)](t){const e=bi;null!=t&&(this[e(604)]=new E(t)),this[e(513)][e(506)][e(540)](),this.loader=new Ei(this[e(524)],this.options,this[e(629)]),this[e(598)]=!0}}var Ii=i(9264),Ni=i.n(Ii),Di=i(8661),Pi=i.n(Di),Ri=i(1516),Li=i.n(Ri),Ci=i(5100),Oi=i.n(Ci),Bi=i(7499),xi=i.n(Bi),Mi=i(3569),ki=i.n(Mi);class Ui{constructor(t,e,i,s,n){this.method=r.Method.GET,this.service=t,this.params=e||{},this.body=i,this.onSuccessCallback=s,this.onFailCallback=n}getService(){return this.service}getMethod(){return this.method}setMethod(t){this.method=t}getParams(){return this.params}getOnSuccess(){return this.onSuccessCallback}getOnFail(){return this.onFailCallback}getParam(t){return this.params[t]}setParam(t,e){return this.params[t]=e,this}setParams(t){this.params=t}getBody(){return this.body}setBody(t){this.body=t}isPost(){return this.method===r.Method.POST}}var Vi=i(9794);class qi{constructor(){this.readyToSend=!1,this.servicesToWait=[Vi.A.Service.SESSION_START],this.onWillSendAnalyticsRequestListeners=[],this._requests=[],this._waitingForToken=[]}destroy(){this._requests=[],this._waitingForToken=[],this.readyToSend=!1}shouldSendStats(){return this.readyToSend}sendRequest(t){if(""===e.default.getInstance().getFastDataSessionToken())return void this._waitingForToken.push(t);this._waitingForToken.forEach((t=>this.prepareParams(t))),this._requests.push(...this._waitingForToken),this._waitingForToken=[];let i=t.getParams(),s=t.getService();const n=this.onWillSendAnalyticsRequestListeners;for(const t of n)t(s,i);this.prepareParams(t),this._requests.push(t),this._processRequests()}prepareParams(t){const i=t.getService();t.setParam("sessionId",t.getParam("sessionId")||e.default.getInstance().getFastDataSessionToken()),i==Vi.A.Service.SESSION_START&&t.setParam("beatTime",t.getParam("beatTime")||e.default.getInstance().getFastDataService().getBeatTime())}buildRequest(t,e,i,s,n,a){i=i||r.Method.GET;const o=new Ui(t,e,s,n,a);return o.setMethod(i),o}_processRequests(){const t=this._requests;this._requests=[];const i=[];for(;t.length;){const s=t.shift();if(-1!==this.servicesToWait.indexOf(s.getService())&&(this.readyToSend=!0),this.readyToSend)for(e.default.getInstance().pushData(e.default.getInstance().getOptions().offline?dt.default.Consumer.BLACK_HOLE:dt.default.Consumer.NQS,s.getService(),s.getMethod(),s.getParams(),s.getOnSuccess(),s.getOnFail());i.length;){const t=i.shift();e.default.getInstance().pushData(e.default.getInstance().getOptions().offline?dt.default.Consumer.BLACK_HOLE:dt.default.Consumer.NQS,t.getService(),t.getMethod(),t.getParams(),t.getOnSuccess(),t.getOnFail())}else i.push(s)}this._requests.push(...i)}}var Fi=i(859),Xi=i.n(Fi),Hi=i(9743),Gi=i(9965),ji=i.n(Gi),Wi=i(6274),Yi=i.n(Wi);class zi{constructor(t){this.options=t}getUsername(){return this.options["user.name"]}getPluginVersion(){return e.default.getPluginVersion()}getRequestNumber(){return Math.random()}getUserType(){return this.options["user.type"]}getAnonymousUser(){return this.options["user.anonymousId"]}getReferer(){let t=this.options.referer||"";return!t&&"undefined"!=typeof window&&window.location&&(t=window.location.href),t}getReferral(){let t=this.options.referral||"";return t||"undefined"==typeof document||(t=document.referrer),t}getPageName(){let t=this.options.title||"";return t||"undefined"==typeof document||(t=document.title),t}getLanguage(){return"undefined"!=typeof navigator?navigator.language:void 0}getScreenResolution(){let t;try{if(window&&window.screen){const e=window.devicePixelRatio||1;t=window.screen.width*e+"x"+window.screen.height*e}}catch(t){}return t}getDeviceInfo(){let t={};return this.getDeviceCode()&&(t.deviceCode=this.getDeviceCode()),this.getModel()&&(t.model=this.getModel()),this.getBrand()&&(t.brand=this.getBrand()),this.getDeviceType()&&(t.deviceType=this.getDeviceType()),this.getDeviceName()&&(t.deviceName=this.getDeviceName()),this.getOsName()&&(t.osName=this.getOsName()),this.getOsVersion()&&(t.osVersion=this.getOsVersion()),this.getBrowserName()&&(t.browserName=this.getBrowserName()),this.getBrowserVersion()&&(t.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(t.browserType=this.getBrowserType()),this.getBrowserEngine()&&(t.browserEngine=this.getBrowserEngine()),0!==Object.keys(t).length?t:void 0}getDeviceCode(){return this.options["device.code"]}getModel(){return this.options["device.model"]}getBrand(){return this.options["device.brand"]}getDeviceType(){return this.options["device.type"]}getDeviceName(){return this.options["device.name"]}getOsName(){return this.options["device.osName"]}getOsVersion(){return this.options["device.osVersion"]}getBrowserName(){return this.options["device.browserName"]}getBrowserVersion(){return this.options["device.browserVersion"]}getBrowserType(){return this.options["device.browserType"]}getBrowserEngine(){return this.options["device.browserEngine"]}getIsBlocked(){return this.options["ad.blockerDetected"]}isMethodPostEnabled(){return this.options.method&&this.options.method.toUpperCase()===Xi().POST}getDeviceUUID(){let t;return this.options["device.isAnonymous"]||(t=this.options["device.id"]||(new(Yi())).getKey()),t}getLibVersion(){return ji()}getAppName(){return this.options["app.name"]}getAppReleaseVersion(){return this.options["app.releaseVersion"]}getIp(){return this.options["network.ip"]}getIsp(){return this.options["network.isp"]}getConnectionType(){return this.options["network.connectionType"]}getEDID(){const t=this.options["device.EDID"];return t?t.toString():void 0}getObfuscateIp(){return this.options["user.obfuscateIp"]}getPrivacyProtocol(){let t=this.options["user.privacyProtocol"];return"string"==typeof t&&(t=t.toLowerCase()),"optin"===t||"optout"===t?t:void 0}getCustomDimensions(){const t=this.options["content.customDimensions"];return"object"==typeof t?t:void 0}getExtraparam1(){return this.options["content.customDimension.1"]}getExtraparam2(){return this.options["content.customDimension.2"]}getExtraparam3(){return this.options["content.customDimension.3"]}getExtraparam4(){return this.options["content.customDimension.4"]}getExtraparam5(){return this.options["content.customDimension.5"]}getExtraparam6(){return this.options["content.customDimension.6"]}getExtraparam7(){return this.options["content.customDimension.7"]}getExtraparam8(){return this.options["content.customDimension.8"]}getExtraparam9(){return this.options["content.customDimension.9"]}getExtraparam10(){return this.options["content.customDimension.10"]}getExtraparam11(){return this.options["content.customDimension.11"]}getExtraparam12(){return this.options["content.customDimension.12"]}getExtraparam13(){return this.options["content.customDimension.13"]}getExtraparam14(){return this.options["content.customDimension.14"]}getExtraparam15(){return this.options["content.customDimension.15"]}getExtraparam16(){return this.options["content.customDimension.16"]}getExtraparam17(){return this.options["content.customDimension.17"]}getExtraparam18(){return this.options["content.customDimension.18"]}getExtraparam19(){return this.options["content.customDimension.19"]}getExtraparam20(){return this.options["content.customDimension.20"]}isParseManifest(){return this.options["parse.manifest"]}isParseCdnNode(){return this.options["parse.cdnNode"]}isCdnSwitch(){return this.options["parse.cdnSwitchHeader"]}getParseCdnNodeList(){return this.options["parse.cdnNode.list"]}getParseCdnNodeNameHeader(){return this.options["parse.cdnNameHeader"]}getParseNodeHeader(){return this.options["parse.cdnNodeHeader"]}canOverwriteAdapters(){return Hi.default.parseBoolean(this.options["adapters.overwrite"])}getAdaptersProperties(){return this.options["adapters.properties"]}isAppAnalyticsAutoBegin(){return Hi.default.parseBoolean(this.options["check.appAnalytics.autoBegin"])}isAppAnalyticsEnabled(){return Hi.default.parseBoolean(this.options["check.appAnalytics.enabled"])}isVideoAnalyticsEnabled(){return Hi.default.parseBoolean(this.options["check.videoAnalytics.enabled"])}isRefreshLMAConfigurationEnabled(){return Hi.default.parseBoolean(this.options["lma.refresh.configuration.enabled"])}isPluginLogsEnabled(){return Hi.default.parseBoolean(this.options["debug.pluginLogs.enabled"])}isPlayerLogsEnabled(){return Hi.default.parseBoolean(this.options["debug.playerLogs.enabled"])}refreshLMAConfigurationSeconds(){return this.options["lma.refresh.configuration.seconds"]}getPlayheadMonitorEnabled(){return this.options["playhead.monitor"]}getReadyStateMonitorEnabled(){return this.options["readyState.monitor"]}}class Ki{constructor(t){this.options=new(xi()),this.core=e.default.getInstance(),this.coreStorage=this.core.getCoreStorage(),this.analyticsRequestHandler=new qi,this.accountCode=t,this.requestBuilder=new(ki()),this._beat=new(Li())(this._sendBeat.bind(this),3e4),this.sessionExpire=this.coreStorage.getSessionExpire()||18e4,this.appAnalyticsStarted=!1,this.appAnalyticsStopped=!1,this._lastNavigation={page:"",route:""},this._registeredProperties=null}destroy(){this._beat.stop(),this.analyticsRequestHandler.destroy()}setOptions(t){this.options=t}getOptions(){return this.options}begin(t={}){this.core.isUsingLegacy()||(this.appAnalyticsStarted||(this._logBeginEvent(t),this._registeredProperties=this.coreStorage.getAppAnalyticsRegisteredProperties()),this.fireSessionStart(t))}newSession(t,e={}){this.core.isUsingLegacy()||(this._logFireNewSessionListener(null!=t?t:{},e),(this.appAnalyticsStarted||this.appAnalyticsStopped)&&this.endSession(),t&&this.setOptions(t),this.begin(e))}endSession(t={}){this.core.isUsingLegacy()||this.appAnalyticsStarted&&this.fireSessionStop(t)}_setLastActive(){this._firstActive||(this._firstActive=this.getFirstActive()),this.coreStorage.setLastActive((new Date).getTime().toString())}getAccountCode(){return this.accountCode}getFirstActive(){return this.coreStorage.getLastActive()||0}getIsDataExpired(){const t=(new Date).getTime();return!this.coreStorage.isEnabled()||!this.coreStorage.getStoredData()||this.getFirstActive()<t-this.sessionExpire}fireSessionStart(t={}){this.core.isUsingLegacy()||(this._logFireSessionStartEvent(t),this.appAnalyticsStopped&&(this.core.refreshSessionToken(),this.appAnalyticsStopped=!1),this.appAnalyticsStarted||(this.coreStorage.setAppAnalyticsStarted(!0),this.appAnalyticsStarted=!0,this._processSessionStart(this._getParamsJson(t,null,null,!0,!0)),this._setLastActive()))}fireSessionStop(t={}){this.core.isUsingLegacy()||(this._logFireSessionStopEvent(t),this.appAnalyticsStarted&&(this.appAnalyticsStopped=!0,this.appAnalyticsStarted=!1,this.coreStorage.removeAppAnalyticsStarted(),this._processSessionStop(t),this.coreStorage.removeStoredData(),this.coreStorage.removeSession(),this.coreStorage.removeLastActive(),this.core.refreshSessionToken()))}fireNav(t={}){this.core.isUsingLegacy()||(this._logFireNavListener(t),this.isActive()&&(this.appAnalyticsStarted=!0,this._processNavigation(this._getParamsJson(t,null,null,!0))))}fireEvent(t="",e={},i={},s={}){if(!this.core.isUsingLegacy()&&(this._logFireEventListener(t),this.appAnalyticsStarted)){const n=this._getParamsJson(e,i,t);Pi().assign(n.params,s||{}),this._processCustomEvent(n),this._setLastActive()}}register(t={},e={}){this._registeredProperties={dimensions:t,values:e},this.coreStorage.setAppAnalyticsRegisteredProperties(JSON.stringify(this._registeredProperties))}registerOnce(t,e){this._registeredProperties||this.register(t,e)}unregister(){this._registeredProperties=null,this.coreStorage.removeAppAnalyticsRegisteredProperties()}_getParamsJson(t,e,i,s,n){const r={};if(i&&(r.name=i),r.dimensions=t||{},r.values=e||{},this._registeredProperties){for(const t in this._registeredProperties.dimensions)r.dimensions[t]=this._registeredProperties.dimensions[t];for(const t in this._registeredProperties.values)r.values[t]=this._registeredProperties.values[t]}const a={params:r};return s&&(a.params.dimensions.page&&(a.params.page=a.params.dimensions.page,delete a.params.dimensions.page),a.params.dimensions.route&&(a.params.route=a.params.dimensions.route,delete a.params.dimensions.route),n||delete a.params.dimensions,delete a.params.values),a}isActive(){if(this.core.isUsingLegacy())return!1;if(this.appAnalyticsStarted||this.coreStorage.getAppAnalyticsStarted())return!0;const t=(new Date).getTime();return this.coreStorage.getLastActive()+this.sessionExpire>t}_sendAppAnalytics(t,e){if(!this.core.isUsingLegacy()&&null!==(e=this.requestBuilder.buildParams(e,t,[this,new zi(this.options)]))&&this.options.enabled){const i=new Ui(t,e);this.isMethodPostEnabled()&&i.setMethod(r.Method.POST),this.analyticsRequestHandler.prepareParams(i),this.analyticsRequestHandler.sendRequest(i)}}addOnWillSendRequestListener(t){var e;null===(e=this.analyticsRequestHandler)||void 0===e||e.onWillSendAnalyticsRequestListeners.push(t)}removeOnWillSendRequestListener(t){var e;this.analyticsRequestHandler&&(this.analyticsRequestHandler.onWillSendAnalyticsRequestListeners=null===(e=this.analyticsRequestHandler)||void 0===e?void 0:e.onWillSendAnalyticsRequestListeners.filter((e=>e!==t)))}_processNavigation(t){t=this._parseInternalParams(t),this._checkDifferentNavigation(t)?(this._sendAppAnalytics(Oi().Service.NAV,t),this._beat.isRunning||this._beat.start(),n.default.notice(r.AppAnalyticsTag,"["+this.core.getFastDataSessionToken()+"] "+Oi().Service.NAV+" "+t.route),this._lastNavigation.page=t.page,this._lastNavigation.route=t.route):n.default.warn(r.AppAnalyticsTag,"Same navigation detected and ignored for Page and Route")}_processSessionStart(t){t=this._parseInternalParams(t),this._sendAppAnalytics(Oi().Service.SESSION_START,t),this._beat.isRunning||this._beat.start(),n.default.notice(r.AppAnalyticsTag,"["+this.core.getFastDataSessionToken()+"] "+Oi().Service.SESSION_START+" "+t.route)}_processSessionStop(t){t=this._parseInternalParams(t),this._sendAppAnalytics(Oi().Service.SESSION_STOP,t),this._beat.isRunning&&this._beat.stop(),n.default.notice(r.AppAnalyticsTag,"["+this.core.getFastDataSessionToken()+"] "+Oi().Service.SESSION_STOP+" "+t.route)}_processCustomEvent(t){t=this._parseInternalParams(t),this._sendAppAnalytics(Oi().Service.EVENT,t),n.default.notice(r.AppAnalyticsTag,"["+this.core.getFastDataSessionToken()+"] "+Oi().Service.EVENT+" "+t.name)}_parseInternalParams(t){return t&&(t.params||t)||{}}_sendBeat(t){const e={diffTime:t};this._sendAppAnalytics(Oi().Service.BEAT,e),this&&this._setLastActive(),n.default.verbose(r.AppAnalyticsTag,Oi().Service.BEAT)}_checkDifferentNavigation(t){t=t||{};const e=this._lastNavigation&&t.route===this._lastNavigation.route,i=this._lastNavigation&&t.page===this._lastNavigation.page;return!e||!i}getSessionMetrics(){return Pi().getMetricsFrom(this.options["session.metrics"])}isPlayerLogsEnabled(){return n.default.debug(r.AppAnalyticsTag,"isPlayerLogsEnabled: "+this.options["debug.playerLogs.enabled"]),Pi().parseBoolean(this.options["debug.playerLogs.enabled"])}isPluginLogsEnabled(){return n.default.debug(r.AppAnalyticsTag,"isPluginLogsEnabled: "+this.options["debug.pluginLogs.enabled"]),Pi().parseBoolean(this.options["debug.pluginLogs.enabled"])}isMethodPostEnabled(){return this.options.method&&this.options.method.toUpperCase()===Fi.POST}_sendPluginLogs(t,e,i){if(!this.core.isUsingLegacy()&&this.isPluginLogsEnabled()){try{if(i&&i.logType&&i.logAction){const t=this.core.getFastDataSessionToken();n.default.notice(r.AppAnalyticsTag,t.length?"["+t+"] ":i.logType+": Action "+i.logAction)}}catch(t){}if(i.timemark=(new Date).getTime(),null!==(i=this.requestBuilder.buildParams(i,e))&&this.options.enabled){const t=new Ui(e,i);this.isMethodPostEnabled()&&t.setMethod(r.Method.POST),this.analyticsRequestHandler.prepareParams(t),this.analyticsRequestHandler.sendRequest(t)}}}_logBeginEvent(t){const e={logs:{data:t},logAction:"beginSession",logType:"pluginMethod"};this._sendPluginLogs(Oi().WillSendLog.WILL_SEND_LOG_INFINITY_BEGIN,Oi().Service.APP_ANALYTICS_PLUGIN_LOGS,e)}_logFireSessionStartEvent(t){const e={logs:{data:t},logAction:"startSession",logType:"pluginMethod"};this._sendPluginLogs(Oi().WillSendLog.WILL_SEND_LOG_INFINITY_START,Oi().Service.APP_ANALYTICS_PLUGIN_LOGS,e)}_logFireSessionStopEvent(t){const e={logs:{data:t},logAction:"stopSession",logType:"pluginMethod"};this._sendPluginLogs(Oi().WillSendLog.WILL_SEND_LOG_INFINITY_START,Oi().Service.APP_ANALYTICS_PLUGIN_LOGS,e)}_logFireEventListener(t){const e={logs:{data:t},logAction:"eventSession",logType:"pluginMethod"};this._sendPluginLogs(Oi().WillSendLog.WILL_SEND_LOG_INFINITY_EVENT,Oi().Service.APP_ANALYTICS_PLUGIN_LOGS,e)}_logFireNavListener(t){const e={logs:{data:t},logAction:"nav",logType:"pluginMethod"};this._sendPluginLogs(Oi().WillSendLog.WILL_SEND_LOG_INFINITY_NAV,Oi().Service.APP_ANALYTICS_PLUGIN_LOGS,e)}_logFireNewSessionListener(t,e){const i={logs:{data:t,params:e},logAction:"newSession",logType:"pluginMethod"};this._sendPluginLogs(Oi().WillSendLog.WILL_SEND_LOG_INFINITY_NAV,Oi().Service.APP_ANALYTICS_PLUGIN_LOGS,i)}}var Qi=i(668);i.g.LogLevel=n.LogLevel,i.g.NpawPluginOptions=Qi.A;class Ji{constructor(t,i){this.core=e.default.getInstance(t,i,!0),this.cdnBalancer=new _i(t,i),this.appAnalytics=new Ki(t),this.videoAnalytics=new(Ni().Plugin)(this.appAnalytics),this.diagnostic=x.default.getInstance(!0),this.diagnostic.start(this)}destroy(){this.cdnBalancer.destroy(),this.videoAnalytics.videos.getVideoKeys().forEach((t=>{var e,i;void 0!==this.videoAnalytics&&(null===(e=this.videoAnalytics.getAdapter(t))||void 0===e||e.fireStop(),null===(i=this.videoAnalytics.getAdsAdapter(t))||void 0===i||i.fireStop())})),this.videoAnalytics.destroy(),this.appAnalytics.destroy(),this.diagnostic.destroy(),this.core.destroy()}setLogLevel(t){n.default.setLogLevel(t)}setBalancerOptions(t){this.cdnBalancer.setOptions(t)}setManifestResource(t){this.cdnBalancer.setManifestResource(t)}addInterceptor(t,e){this.cdnBalancer.addInterceptor(t,e)}getBitmovinSendHttpRequest(){return this.cdnBalancer.getBitmovinSendHttpRequest()}getRecommendedManifest(){return this.cdnBalancer.getRecommendedManifest()}isBalancerEnabled(){return this.cdnBalancer.getIsEnabled()}registerAdapter(t,e,i,s,n){this.core.isUsingLegacy()||this.registerAdapterInModule(!1,t,e,i,s,n)}registerAdapterFromClass(t,e,i,s,a){void 0!==e&&"function"==typeof e?this.registerAdapterFromClassInModule(!1,t,new e,i,s,a):n.default.error(r.AnalyticsTag,"Adapter is not valid")}registerAdapterFromString(t,e,i,s,a){void 0!==e&&"string"==typeof e?(this.videoAnalytics.registerAdapter(t,e,i,s),null==a||a()):n.default.error(r.AnalyticsTag,"The provided adapter is not from a valid type")}registerDefaultAdapter(t,e){this.core.isUsingLegacy()||this.videoAnalytics.registerAdapter(void 0,"{}",e,t)}removeAdapter(t){this.core.isUsingLegacy()||(t&&this.videoAnalytics.videos.existsVideo(t)&&this.getAdapter(t)&&this.getAdapter(t).fireStop&&this.getAdapter(t).fireStop(),this.videoAnalytics.removeAdapter(t))}getAdapter(t){return this.videoAnalytics.getAdapter(t)}getAdsAdapter(t){return void 0!==this.videoAnalytics?this.videoAnalytics.getAdsAdapter(t):void 0}registerAdsAdapter(t,e,i,s,n){this.core.isUsingLegacy()||this.registerAdapterInModule(!0,t,e,i,s,n)}registerAdsAdapterFromClass(t,e,i,s,a){void 0!==e&&"function"==typeof e?this.registerAdapterFromClassInModule(!0,t,new e,i,s,a):n.default.error(r.AnalyticsTag,"Adapter is not valid")}registerAdsAdapterFromString(t,e,i,s,a){void 0!==e&&"string"==typeof e?(this.videoAnalytics.registerAdsAdapter(t,e,i,s),null==a||a()):n.default.error(r.AnalyticsTag,"The provided adapter is not from a valid type")}updateAdsAdapter(t,e){e=null!=e?e:"default",void 0!==t&&""!=t?this.videoAnalytics.updateAdsAdapter(t,e):n.default.debug(r.AnalyticsTag,"Invalid ads adapter name")}registerDefaultAdsAdapter(t,e){this.core.isUsingLegacy()||this.videoAnalytics.registerAdsAdapter(void 0,"{}",e,t)}removeAdsAdapter(t){this.core.isUsingLegacy()||this.videoAnalytics.removeAdsAdapter(t)}setAnalyticsOptions(t){this.core.isUsingLegacy()||(this.videoAnalytics.setOptions(t),this.appAnalytics.setOptions(this.videoAnalytics.options),this.core.setOptions(this.videoAnalytics.options),this.diagnostic.setOptions(this.videoAnalytics.options))}setVideoOptions(t,e){t?this.videoAnalytics.setVideoOptions(t,null!=e?e:"default"):n.default.debug(r.AnalyticsTag,"Provided options object is not valid")}updateMetrics(t,e){t?this.videoAnalytics.updateCustomMetrics(t,null!=e?e:"default"):n.default.debug(r.AnalyticsTag,"Provided metrics object is not valid")}fireOfflineEvents(){this.core.isUsingLegacy()||(this.videoAnalytics.videos.getVideoKeys().length>0?n.default.notice(r.AnalyticsTag,"Unable to send offline events because there's at least one adapter registered"):this.core.sendOfflineEvents())}registerAdapterFromClassInModule(t,e,i,s,n,r){t?this.videoAnalytics.registerAdsAdapter(e,i,s,n):this.videoAnalytics.registerAdapter(e,i,s,n),null==r||r()}registerAdapterInModule(t,e,i,s,r,a){if(0===i.length&&n.default.error("Adapter URL can't be empty!"),"undefined"!=typeof fetch)fetch(i).then((t=>t.json())).then((i=>{const n=JSON.stringify(i);t?this.videoAnalytics.registerAdsAdapter(e,n,s,r):this.videoAnalytics.registerAdapter(e,n,s,r),null==a||a()}));else{const n=new XMLHttpRequest;n.addEventListener("readystatechange",(()=>{if(4===n.readyState&&n.status>=200&&n.status<400){const i=n.response;t?this.videoAnalytics.registerAdsAdapter(e,i,s,r):this.videoAnalytics.registerAdapter(e,i,s,r),null==a||a()}})),n.open("GET",i),n.send()}}}})(),s.default})()));
//# sourceMappingURL=NpawPlugin-nwf.js.map