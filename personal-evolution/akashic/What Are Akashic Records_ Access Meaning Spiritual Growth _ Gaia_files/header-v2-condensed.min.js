$(document).ready(function(){let e=$(".nav-primary__item--has-children");function i(e,a){$(e).attr("aria-expanded",function(e,n){return"true"===n||a?"false":"true"})}function o(){e.each(function(){i($(this).find("a").first(),!0)}),$(".nav-secondary").hide(),$(".nav-primary__item").removeClass("nav-primary__item--active").find("a").removeClass("active"),$(".autocomplete-suggestions").css("display","none")}function n(e){console.log("q.length: ",e.length),3<e.length&&(window.location="/search?q="+e)}$.fn.isLoggedIn()&&$("#login_webapp_header, #signup_webapp_header").hide(),$(window).resize(function(){$(document).trigger("resize.webappNavigationDropdownMenu")}),$(".navbar-toggler").on("click",function(){$(this).toggleClass("open"),$(".header-v2__nav").toggleClass("header-v2__nav--open"),$(".header-v2").toggleClass("header-v2--open"),$(this).hasClass("open")?($(".content-wrapper").css({position:"fixed",width:"100%"}),$("footer").hide()):($(".content-wrapper").css({position:"relative",width:"auto"}),$(".nav-primary__item").removeClass("nav-primary__item--active").find("a").removeClass("active"),$(".nav-secondary").hide(),$("footer").show())}),$(".nav-primary__item--mobile-no-link").on("click",function(e){e.preventDefault(),$(".navbar-toggler").hasClass("open")||$.fn.linkCheck($(this))}),e.on("click",function(e){var n;e.preventDefault(),($(".navbar-toggler").hasClass("open")||$(this).hasClass("nav-primary__item--more"))&&(e=$(this).find(".nav-secondary"),n=$(this),"none"===e.css("display"))&&(o(),n.addClass("nav-primary__item--active").find("a").first().addClass("active"),i(n.find("a").first()),e.fadeIn(250,function(){"block"===$(this).css("display")&&($(document).on("resize.webappNavigationDropdownMenu",function(){o(),$(document).off("resize.webappNavigationDropdownMenu")}),1199<$(window).width())&&$(document).on("click",function(){o(),$(document).off("click")})}))}),$(".header-v2__language-item").on("click",function(e){$(".header-v2__language-label").text($(this).text()),$(".header-v2__language-select").hide(),$(".header-v2__toggle-down-select").show(),$.fn.setLanguagePreference($(this).attr("data-lang"))}),$(".header-v2__language-toggle").on("click",function(){let e=$(this),n=(i(e),$(".header-v2__toggle-down")),a=$(".header-v2__toggle-up"),t=$(".header-v2__language-select");n.is(":visible")?(n.hide(),a.show(),t.fadeIn(50,function(){$(document).on("click.webappNavigation",function(){$(document).off("click.webappNavigation"),n.show(),a.hide(),t.hide(),i(e)}).on("resize.webappNavigationDropdownMenu",function(){o(),$(document).off("resize.webappNavigationDropdownMenu")})})):(n.show(),a.hide(),t.hide())}),$("#webapp-search-input").autocomplete({serviceUrl:GAIA_GLOBALS.dbi_brooklyn_api+"/search/autocomplete?language="+GAIA_GLOBALS.lang,triggerSelectOnValidInput:!1,paramName:"searchTerm",preventBadQueries:!1,transformResult:function(e){return{suggestions:$.map(jQuery.parseJSON(e),function(e){return{value:e.value,data:e.type}})}},onSelect:function(e){n(e.value)}}),$("#webapp-search-button").on("click",function(e){e.preventDefault()}),$(".header-v2__search-button").on("mouseenter",function(e){e.preventDefault(),$(".header-v2__search-container").addClass("header-v2__search-container--expanded"),$(document).off("click.search-input").on("click.search-input",function(e){$(e.target).closest("#webapp-search-input").length||$(e.target).closest("#webapp-search-button").length||setTimeout(function(){$(".header-v2__search-container").removeClass("header-v2__search-container--expanded")},250)})}),$(".header-v2__search-container").on("mouseleave",function(){$(".autocomplete-suggestions").is(":hidden")&&($(".header-v2__search-container").removeClass("header-v2__search-container--expanded"),$(window).off("click.search-input"))}),$(".header-v2__search-form").on("keypress","input",function(e){13===e.which&&(e.preventDefault(),n($(this).val()))}),$("#nav-primary-more").on("keyup",function(e){"Enter"!==e.key&&13!==e.keyCode||$("#nav-primary-more").click()}),$.fn.isLoggedIn()&&$(".header-v2 li").find("[data-tracking-id='10009']").attr("href","/shop")});