!function(l){var i="unobtrusiveAjaxClick",r="unobtrusiveAjaxClickTarget";function c(e,t){for(var n=window,a=(e||"").split(".");n&&a.length;)n=n[a.shift()];return"function"==typeof n?n:(t.push(e),Function.constructor.apply(null,t))}function d(e){return"GET"===e||"POST"===e}function a(o,e){var a,i,r,s,t=o.getAttribute("data-ajax-confirm");t&&!window.confirm(t)||(a=l(o.getAttribute("data-ajax-loading")),r=parseInt(o.getAttribute("data-ajax-loading-duration"),10)||0,l.extend(e,{type:o.getAttribute("data-ajax-method")||void 0,url:o.getAttribute("data-ajax-url")||void 0,cache:"true"===(o.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(e){var t,n;return t=e,d(n=i)||t.setRequestHeader("X-HTTP-Method-Override",n),!1!==(t=c(o.getAttribute("data-ajax-begin"),["xhr"]).apply(o,arguments))&&a.show(r),t},complete:function(){a.hide(r),c(o.getAttribute("data-ajax-complete"),["xhr","status"]).apply(o,arguments)},success:function(e,t,n){var a,i,r;a=o,i=e,-1===(n.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(r=(a.getAttribute("data-ajax-mode")||"").toUpperCase(),l(a.getAttribute("data-ajax-update")).each(function(e,t){switch(r){case"BEFORE":l(t).prepend(i);break;case"AFTER":l(t).append(i);break;case"REPLACE-WITH":l(t).replaceWith(i);break;default:l(t).html(i)}})),c(o.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(o,arguments)},error:function(){c(o.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(o,arguments)}}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),d(i=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:i})),(t=l(o)).is("form")&&"multipart/form-data"==t.attr("enctype")&&(s=new FormData,l.each(e.data,function(e,t){s.append(t.name,t.value)}),l("input[type=file]",t).each(function(){var n=this;l.each(n.files,function(e,t){s.append(n.name,t)})}),l.extend(e,{processData:!1,contentType:!1,data:s})),l.ajax(e))}l(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),a(this,{url:this.href,type:"GET",data:[]})}),l(document).on("click","form[data-ajax=true] input[type=image]",function(e){var t=e.target.name,n=l(e.target),a=l(n.parents("form")[0]),n=n.offset();a.data(i,[{name:t+".x",value:Math.round(e.pageX-n.left)},{name:t+".y",value:Math.round(e.pageY-n.top)}]),setTimeout(function(){a.removeData(i)},0)}),l(document).on("click","form[data-ajax=true] :submit",function(e){var t=e.currentTarget.name,n=l(e.target),a=l(n.parents("form")[0]);a.data(i,t?[{name:t,value:e.currentTarget.value}]:[]),a.data(r,n),setTimeout(function(){a.removeData(i),a.removeData(r)},0)}),l(document).on("submit","form[data-ajax=true]",function(e){var t=l(this).data(i)||[],n=l(this).data(r),n=n&&(n.hasClass("cancel")||void 0!==n.attr("formnovalidate"));e.preventDefault(),!n&&(e=l(e=this).data("unobtrusiveValidation"))&&e.validate&&!e.validate()||a(this,{url:this.action,type:this.method||"GET",data:t.concat(l(this).serializeArray())})})}(jQuery),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(d){d.extend(d.fn,{validate:function(e){var a;if(this.length)return(a=d.data(this[0],"validator"))||(this.attr("novalidate","novalidate"),a=new d.validator(e,this[0]),d.data(this[0],"validator",a),a.settings.onsubmit&&(this.on("click.validate",":submit",function(e){a.submitButton=e.currentTarget,d(this).hasClass("cancel")&&(a.cancelSubmit=!0),void 0!==d(this).attr("formnovalidate")&&(a.cancelSubmit=!0)}),this.on("submit.validate",function(n){function e(){var e,t;return a.submitButton&&(a.settings.submitHandler||a.formSubmitted)&&(e=d("<input type='hidden'/>").attr("name",a.submitButton.name).val(d(a.submitButton).val()).appendTo(a.currentForm)),!(a.settings.submitHandler&&!a.settings.debug)||(t=a.settings.submitHandler.call(a,a.currentForm,n),e&&e.remove(),void 0!==t&&t)}return a.settings.debug&&n.preventDefault(),a.cancelSubmit?(a.cancelSubmit=!1,e()):a.form()?a.pendingRequest?!(a.formSubmitted=!0):e():(a.focusInvalid(),!1)}))),a;e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,n;return d(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,t=d(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(n=n.concat(t.errorList))}),t.errorList=n),e},rules:function(e,t){var n,a,i,r,o,s=this[0],l=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=s&&(!s.form&&l&&(s.form=this.closest("form")[0],s.name=this.attr("name")),null!=s.form)){if(e)switch(a=(n=d.data(s.form,"validator").settings).rules,i=d.validator.staticRules(s),e){case"add":d.extend(i,d.validator.normalizeRule(t)),delete i.messages,a[s.name]=i,t.messages&&(n.messages[s.name]=d.extend(n.messages[s.name],t.messages));break;case"remove":return t?(o={},d.each(t.split(/\s/),function(e,t){o[t]=i[t],delete i[t]}),o):(delete a[s.name],i)}return(l=d.validator.normalizeRules(d.extend({},d.validator.classRules(s),d.validator.attributeRules(s),d.validator.dataRules(s),d.validator.staticRules(s)),s)).required&&(r=l.required,delete l.required,l=d.extend({required:r},l)),l.remote&&(r=l.remote,delete l.remote,l=d.extend(l,{remote:r})),l}}});function t(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}d.extend(d.expr.pseudos||d.expr[":"],{blank:function(e){return!t(""+d(e).val())},filled:function(e){e=d(e).val();return null!==e&&!!t(""+e)},unchecked:function(e){return!d(e).prop("checked")}}),d.validator=function(e,t){this.settings=d.extend(!0,{},d.validator.defaults,e),this.currentForm=t,this.init()},d.validator.format=function(n,e){return 1===arguments.length?function(){var e=d.makeArray(arguments);return e.unshift(n),d.validator.format.apply(this,e)}:(void 0!==e&&((e=2<arguments.length&&e.constructor!==Array?d.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),d.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),n)},d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==d.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):d(e)).addClass(t).removeClass(n)},unhighlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):d(e)).removeClass(t).addClass(n)}},setDefaults:function(e){d.extend(d.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:d.validator.format("Please enter no more than {0} characters."),minlength:d.validator.format("Please enter at least {0} characters."),rangelength:d.validator.format("Please enter a value between {0} and {1} characters long."),range:d.validator.format("Please enter a value between {0} and {1}."),max:d.validator.format("Please enter a value less than or equal to {0}."),min:d.validator.format("Please enter a value greater than or equal to {0}."),step:d.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=d(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||d(this.currentForm),this.containers=d(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.currentForm,a=this.groups={};function e(e){var t,n,a=void 0!==d(this).attr("contenteditable")&&"false"!==d(this).attr("contenteditable");!this.form&&a&&(this.form=d(this).closest("form")[0],this.name=d(this).attr("name")),i===this.form&&(a=d.data(this.form,"validator"),t="on"+e.type.replace(/^validate/,""),(n=a.settings)[t])&&!d(this).is(n.ignore)&&n[t].call(a,this,e)}d.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),d.each(e,function(e,t){a[t]=n})}),n=this.settings.rules,d.each(n,function(e,t){n[e]=d.validator.normalizeRule(t)}),d(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&d(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),d.extend(this.submitted,this.errorMap),this.invalid=d.extend({},this.errorMap),this.valid()||d(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,n,a=this.clean(e),i=this.validationTargetFor(a),r=this,o=!0;return void 0===i?delete this.invalid[a.name]:(this.prepareElement(i),this.currentElements=d(i),(n=this.groups[i.name])&&d.each(this.groups,function(e,t){t===n&&e!==i.name&&(a=r.validationTargetFor(r.clean(r.findByName(e))))&&a.name in r.invalid&&(r.currentElements.push(a),o=r.check(a)&&o)}),t=!1!==this.check(i),o=o&&t,this.invalid[i.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),d(e).attr("aria-invalid",!t)),o},showErrors:function(t){var n;t&&(d.extend((n=this).errorMap,t),this.errorList=d.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=d.grep(this.successList,function(e){return!(e.name in t)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){d.fn.resetForm&&d(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)void 0!==e[t]&&null!==e[t]&&!1!==e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{d(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===d.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var n=this,a={};return d(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||d(this).attr("name"),t=void 0!==d(this).attr("contenteditable")&&"false"!==d(this).attr("contenteditable");return!e&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),t&&(this.form=d(this).closest("form")[0],this.name=e),this.form===n.currentForm&&!(e in a||!n.objectLength(d(this).rules()))&&(a[e]=!0)})},clean:function(e){return d(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return d(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=d([]),this.toHide=d([])},reset:function(){this.resetInternals(),this.currentElements=d([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=d(e),n=e.type,a=void 0!==t.attr("contenteditable")&&"false"!==t.attr("contenteditable");return"radio"===n||"checkbox"===n?this.findByName(e.name).filter(":checked").val():"number"===n&&void 0!==e.validity?e.validity.badInput?"NaN":t.val():(e=a?t.text():t.val(),"file"===n?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(a=e.lastIndexOf("/"))||0<=(a=e.lastIndexOf("\\"))?e.substr(a+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,a,i,r=d(t).rules(),o=d.map(r,function(e,t){return t}).length,s=!1,l=this.elementValue(t);for(n in"function"==typeof r.normalizer?i=r.normalizer:"function"==typeof this.settings.normalizer&&(i=this.settings.normalizer),i&&(l=i.call(t,l),delete r.normalizer),r){a={method:n,parameters:r[n]};try{if("dependency-mismatch"===(e=d.validator.methods[n].call(this,l,t,a.parameters))&&1===o)s=!0;else{if(s=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,a),!1}}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+a.method+"' method."),e}}if(!s)return this.objectLength(r)&&this.successList.push(t),!0},customDataMessage:function(e,t){return d(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||d(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var n=this.findDefined(this.customMessage(e.name,(t="string"==typeof t?{method:t}:t).method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,d.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),a=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,t.parameters,e):a.test(n)&&(n=d.validator.format(n.replace(a,"{$1}"),t.parameters)),n},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,e=this.validElements();e[n];n++)this.settings.unhighlight.call(this,e[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return d(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n,a,i,r=this.errorsFor(e),o=this.idOrName(e),s=d(e).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(t)):(a=r=d("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(a=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(a):this.settings.errorPlacement?this.settings.errorPlacement.call(this,a,d(e)):a.insertAfter(e),r.is("label")?r.attr("for",o):0===r.parents("label[for='"+this.escapeCssMeta(o)+"']").length&&(a=r.attr("id"),s?s.match(new RegExp("\\b"+this.escapeCssMeta(a)+"\\b"))||(s+=" "+a):s=a,d(e).attr("aria-describedby",s),n=this.groups[e.name])&&d.each((i=this).groups,function(e,t){t===n&&d("[name='"+i.escapeCssMeta(e)+"']",i.currentForm).attr("aria-describedby",r.attr("id"))})),!t&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,e)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),e=d(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+this.escapeCssMeta(e).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(e){return void 0===e?"":e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),d(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return d(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return d("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!d(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!d.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,d(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],d(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()&&0===this.pendingRequest?(d(this.currentForm).trigger("submit"),this.submitButton&&d("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(d(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",d.data(e,"previousValue")||d.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),d(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:d.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=d(e).attr("class");return e&&d.each(e.split(" "),function(){this in d.validator.classRuleSettings&&d.extend(t,d.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,n,a){(a=/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(a=Number(a),isNaN(a))?void 0:a)||0===a?e[n]=a:t===n&&"range"!==t&&(e["date"===t?"dateISO":n]=!0)},attributeRules:function(e){var t,n,a={},i=d(e),r=e.getAttribute("type");for(t in d.validator.methods)n="required"===t?!!(n=""===(n=e.getAttribute(t))?!0:n):i.attr(t),this.normalizeAttributeRule(a,r,t,n);return a.maxlength&&/-1|2147483647|524288/.test(a.maxlength)&&delete a.maxlength,a},dataRules:function(e){var t,n,a={},i=d(e),r=e.getAttribute("type");for(t in d.validator.methods)""===(n=i.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()))&&(n=!0),this.normalizeAttributeRule(a,r,t,n);return a},staticRules:function(e){var t={},n=d.data(e.form,"validator");return t=n.settings.rules?d.validator.normalizeRule(n.settings.rules[e.name])||{}:t},normalizeRules:function(a,i){return d.each(a,function(e,t){if(!1===t)delete a[e];else if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!d(t.depends,i.form).length;break;case"function":n=t.depends.call(i,i)}n?a[e]=void 0===t.param||t.param:(d.data(i.form,"validator").resetElements(d(i)),delete a[e])}}),d.each(a,function(e,t){a[e]="function"==typeof t&&"normalizer"!==e?t(i):t}),d.each(["minlength","maxlength"],function(){a[this]&&(a[this]=Number(a[this]))}),d.each(["rangelength","range"],function(){var e;a[this]&&(Array.isArray(a[this])?a[this]=[Number(a[this][0]),Number(a[this][1])]:"string"==typeof a[this]&&(e=a[this].replace(/[\[\]]/g,"").split(/[\s,]+/),a[this]=[Number(e[0]),Number(e[1])]))}),d.validator.autoCreateRanges&&(null!=a.min&&null!=a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),null!=a.minlength)&&null!=a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength),a},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},d.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,n){d.validator.methods[e]=t,d.validator.messages[e]=void 0!==n?n:d.validator.messages[e],t.length<3&&d.validator.addClassRules(e,d.validator.normalizeRule(e))},methods:{required:function(e,t,n){return this.depend(n,t)?"select"===t.nodeName.toLowerCase()?(n=d(t).val())&&0<n.length:this.checkable(t)?0<this.getLength(e,t):null!=e&&0<e.length:"dependency-mismatch"},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})+(?::(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:(n=!1,function(e,t){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())}),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=e},maxlength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=n},rangelength:function(e,t,n){e=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=n[0]&&e<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(e,t,n){function a(e){return(e=(""+e).match(/(?:\.(\d+))?$/))&&e[1]?e[1].length:0}function i(e){return Math.round(e*Math.pow(10,r))}var r,o=d(t).attr("type"),s="Step attribute on input type "+o+" is not supported.",l=new RegExp("\\b"+o+"\\b"),c=!0;if(o&&!l.test(["text","number","range"].join()))throw new Error(s);return r=a(n),(a(e)>r||i(e)%i(n)!=0)&&(c=!1),this.optional(t)||c},equalTo:function(e,t,n){n=d(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){d(t).valid()}),e===n.val()},remote:function(a,i,e,r){if(this.optional(i))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var o,t,s=this.previousValue(i,r);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=s.originalMessage||this.settings.messages[i.name][r],this.settings.messages[i.name][r]=s.message,t=d.param(d.extend({data:a},(e="string"==typeof e?{url:e}:e).data)),s.old===t?s.valid:(s.old=t,(o=this).startRequest(i),(t={})[i.name]=a,d.ajax(d.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:t,context:o.currentForm,success:function(e){var t,n=!0===e||"true"===e;o.settings.messages[i.name][r]=s.originalMessage,n?(t=o.formSubmitted,o.resetInternals(),o.toHide=o.errorsFor(i),o.formSubmitted=t,o.successList.push(i),o.invalid[i.name]=!1,o.showErrors()):(t={},e=e||o.defaultMessage(i,{method:r,parameters:a}),t[i.name]=s.message=e,o.invalid[i.name]=!0,o.showErrors(t)),s.valid=n,o.stopRequest(i,n)}},e)),"pending")}}});var n,a,i={};return d.ajaxPrefilter?d.ajaxPrefilter(function(e,t,n){var a=e.port;"abort"===e.mode&&(i[a]&&i[a].abort(),i[a]=n)}):(a=d.ajax,d.ajax=function(e){var t=("mode"in e?e:d.ajaxSettings).mode,n=("port"in e?e:d.ajaxSettings).port;return"abort"===t?(i[n]&&i[n].abort(),i[n]=a.apply(this,arguments),i[n]):a.apply(this,arguments)}),d}),!function(e){"function"==typeof define&&define.amd?define("jquery.validate.unobtrusive",["jquery-validation"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery-validation")):jQuery.validator.unobtrusive=e(jQuery)}(function(l){var e,o=l.validator,s="unobtrusiveValidation";function c(e,t,n){e.rules[t]=n,e.message&&(e.messages[t]=e.message)}function d(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function n(e){return e.substr(0,e.lastIndexOf(".")+1)}function u(e,t){return e=0===e.indexOf("*.")?e.replace("*.",t):e}function h(e){var t=l(this),n="__jquery_unobtrusive_validation_form_reset";if(!t.data(n)){t.data(n,!0);try{t.data("validator").resetForm()}finally{t.removeData(n)}t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function p(n){function e(e,t){(e=r[e])&&l.isFunction(e)&&e.apply(n,t)}var t=l(n),a=t.data(s),i=l.proxy(h,n),r=o.unobtrusive.options||{};return a||(a={options:{errorClass:r.errorClass||"input-validation-error",errorElement:r.errorElement||"span",errorPlacement:function(){!function(e,t){var t=l(this).find("[data-valmsg-for='"+d(t[0].name)+"']"),n=(n=t.attr("data-valmsg-replace"))?!1!==l.parseJSON(n):null;t.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",t),n?(t.empty(),e.removeClass("input-validation-error").appendTo(t)):e.hide()}.apply(n,arguments),e("errorPlacement",arguments)},invalidHandler:function(){!function(e,t){var n=l(this).find("[data-valmsg-summary=true]"),a=n.find("ul");a&&a.length&&t.errorList.length&&(a.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),l.each(t.errorList,function(){l("<li />").html(this.message).appendTo(a)}))}.apply(n,arguments),e("invalidHandler",arguments)},messages:{},rules:{},success:function(){!function(e){var t,n=e.data("unobtrusiveContainer");n&&(t=(t=n.attr("data-valmsg-replace"))?l.parseJSON(t):null,n.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),t)&&n.empty()}.apply(n,arguments),e("success",arguments)}},attachValidation:function(){t.off("reset."+s,i).on("reset."+s,i).validate(this.options)},validate:function(){return t.validate(),t.valid()}},t.data(s,a)),a}return o.unobtrusive={adapters:[],parseElement:function(a,e){var t,i,r,o=l(a),s=o.parents("form")[0];s&&((t=p(s)).options.rules[a.name]=i={},t.options.messages[a.name]=r={},l.each(this.adapters,function(){var e="data-val-"+this.name,t=o.attr(e),n={};void 0!==t&&(e+="-",l.each(this.params,function(){n[this]=o.attr(e+this)}),this.adapt({element:a,form:s,message:t,params:n,rules:i,messages:r}))}),l.extend(i,{__dummy__:!0}),e||t.attachValidation())},parse:function(e){var e=l(e),t=e.parents().addBack().filter("form").add(e.find("form")).has("[data-val=true]");e.find("[data-val=true]").each(function(){o.unobtrusive.parseElement(this,!0)}),t.each(function(){var e=p(this);e&&e.attachValidation()})}},(e=o.unobtrusive.adapters).add=function(e,t,n){return n||(n=t,t=[]),this.push({name:e,params:t,adapt:n}),this},e.addBool=function(t,n){return this.add(t,function(e){c(e,n||t,!0)})},e.addMinMax=function(e,a,i,r,t,n){return this.add(e,[t||"min",n||"max"],function(e){var t=e.params.min,n=e.params.max;t&&n?c(e,r,[t,n]):t?c(e,a,t):n&&c(e,i,n)})},e.addSingleVal=function(t,n,a){return this.add(t,[n||"val"],function(e){c(e,a||t,e.params[n])})},o.addMethod("__dummy__",function(e,t,n){return!0}),o.addMethod("regex",function(e,t,n){return!!this.optional(t)||(t=new RegExp(n).exec(e))&&0===t.index&&t[0].length===e.length}),o.addMethod("nonalphamin",function(e,t,n){var a;return a=n?(a=e.match(/\W/g))&&a.length>=n:a}),o.methods.extension?(e.addSingleVal("accept","mimtype"),e.addSingleVal("extension","extension")):e.addSingleVal("extension","extension","accept"),e.addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),e.add("equalto",["other"],function(e){var t=n(e.element.name),t=u(e.params.other,t);c(e,"equalTo",l(e.form).find(":input").filter("[name='"+d(t)+"']")[0])}),e.add("required",function(e){"INPUT"===e.element.tagName.toUpperCase()&&"CHECKBOX"===e.element.type.toUpperCase()||c(e,"required",!0)}),e.add("remote",["url","type","additionalfields"],function(a){var i={url:a.params.url,type:a.params.type||"GET",data:{}},r=n(a.element.name);l.each((a.params.additionalfields||a.element.name).replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g),function(e,t){var n=u(t,r);i.data[n]=function(){var e=l(a.form).find(":input").filter("[name='"+d(n)+"']");return e.is(":checkbox")?e.filter(":checked").val()||e.filter(":hidden").val()||"":e.is(":radio")?e.filter(":checked").val()||"":e.val()}}),c(a,"remote",i)}),e.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&c(e,"minlength",e.params.min),e.params.nonalphamin&&c(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&c(e,"regex",e.params.regex)}),e.add("fileextensions",["extensions"],function(e){c(e,"extension",e.params.extensions)}),l(function(){o.unobtrusive.parse(document)}),o.unobtrusive}),!function(u){function i(e,t,n){var a=[];return(e.reduction||e).filter(u.validity.settings.elementSupport).each(function(){t(this)?a.push(this):r(this,o(n,{field:s(this)}))}),e.reduction=u(a),e}function n(){u.validity.isValidating()&&(u.validity.report.errors++,u.validity.report.valid=!1)}function r(e,t){n(),u.validity.out.raise(u(e),t)}function h(e,t){n(),u.validity.out.raiseAggregate(e,t)}function a(e){var t=0;return e.each(function(){var e=parseFloat(this.value);t+=isNaN(e)?0:e}),t}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(RegExp("#\\{"+n+"\\}","g"),t[n]));return l(e)}function s(e){var t=(e=u(e)).prop("id"),n=u.validity.settings.defaultFieldName;if(e.prop("title").length)n=e.prop("title");else if(/^([A-Z0-9][a-z]*)+$/.test(t))n=t.replace(/([A-Z0-9])[a-z]*/g," $&");else if(/^[a-z0-9]+(_[a-z0-9]+)*$/.test(t)){for(e=t.split("_"),t=0;t<e.length;++t)e[t]=l(e[t]);n=e.join(" ")}return u.trim(n)}function l(e){return e.substring?e.substring(0,1).toUpperCase()+e.substring(1,e.length):e}var t;u.validity={settings:u.extend({outputMode:"tooltip",scrollTo:!1,modalErrorsClickable:!0,defaultFieldName:"This field",elementSupport:":text, :password, textarea, select, :radio, :checkbox, input[type='hidden'], input[type='tel'], input[type='email']",argToString:function(e){return e.getDate?[e.getMonth()+1,e.getDate(),e.getFullYear()].join("/"):e+""},debugPrivates:!1},{}),patterns:{integer:/^\d+$/,date:/^((0?\d)|(1[012]))[\/-]([012]?\d|30|31)[\/-]\d{1,4}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,usd:/^\$?((\d{1,3}(,\d{3})*)|\d+)(\.(\d{2})?)?$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+-]?(\d+(\.\d*)?|\.\d+)([Ee]-?\d+)?$/,zip:/^\d{5}(-\d{4})?$/,phone:/^[2-9]\d{2}-\d{3}-\d{4}$/,guid:/^(\{?([0-9a-fA-F]){8}-(([0-9a-fA-F]){4}-){3}([0-9a-fA-F]){12}\}?)$/,time12:/^((0?\d)|(1[012])):[0-5]\d?\s?[aApP]\.?[mM]\.?$/,time24:/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/,nonHtml:/^[^<>]*$/},messages:{require:"#{field} is required.",match:"#{field} is in an invalid format.",integer:"#{field} must be a positive, whole number.",date:"#{field} must be formatted as a date. (mm/dd/yyyy)",email:"#{field} must be formatted as an email.",usd:"#{field} must be formatted as a US Dollar amount.",url:"#{field} must be formatted as a URL.",number:"#{field} must be formatted as a number.",zip:"#{field} must be formatted as a zipcode ##### or #####-####.",phone:"#{field} must be formatted as a phone number ###-###-####.",guid:"#{field} must be formatted as a guid like {3F2504E0-4F89-11D3-9A0C-0305E82C3301}.",time24:"#{field} must be formatted as a 24 hour time: 23:00.",time12:"#{field} must be formatted as a 12 hour time: 12:00 AM/PM",lessThan:"#{field} must be less than #{max}.",lessThanOrEqualTo:"#{field} must be less than or equal to #{max}.",greaterThan:"#{field} must be greater than #{min}.",greaterThanOrEqualTo:"#{field} must be greater than or equal to #{min}.",range:"#{field} must be between #{min} and #{max}.",tooLong:"#{field} cannot be longer than #{max} characters.",tooShort:"#{field} cannot be shorter than #{min} characters.",nonHtml:"#{field} cannot contain HTML characters.",alphabet:"#{field} contains disallowed characters.",minCharClass:"#{field} cannot have more than #{min} #{charClass} characters.",maxCharClass:"#{field} cannot have less than #{min} #{charClass} characters.",equal:"Values don't match.",distinct:"A value was repeated.",sum:"Values don't add to #{sum}.",sumMax:"The sum of the values must be less than #{max}.",sumMin:"The sum of the values must be greater than #{min}.",radioChecked:"The selected value is not valid.",generic:"Invalid."},out:{start:function(){this.defer("start")},end:function(e){this.defer("end",e)},raise:function(e,t){this.defer("raise",e,t)},raiseAggregate:function(e,t){this.defer("raiseAggregate",e,t)},defer:function(e){var t=u.validity;(t=t.outputs[t.settings.outputMode])[e].apply(t,Array.prototype.slice.call(arguments,1))}},charClasses:{alphabetical:/\w/g,numeric:/\d/g,alphanumeric:/[A-Za-z0-9]/g,symbol:/[^A-Za-z0-9]/g},outputs:{},__private:void 0,setup:function(e){this.settings=u.extend(this.settings,e),this.__private=this.settings.debugPrivates?t:void 0},report:null,isValidating:function(){return!!this.report},start:function(){this.out.start(),this.report={errors:0,valid:!0}},end:function(){var e=this.report||{errors:0,valid:!0};return this.report=null,this.out.end(e),e},clear:function(){this.start(),this.end()}},u.fn.extend({validity:function(n){return this.each(function(){var e,t=this;"form"==this.tagName.toLowerCase()&&(e=null,"string"==typeof n?e=function(){u(n).require()}:u.isFunction(n)&&(e=n),n)&&u(this).bind("submit",function(){return u.validity.start(),e.apply(t),u.validity.end().valid})})},require:function(e){return i(this,function(e){return u(e).val()&&null!=u(e).val()&&u(e).val().length},e||u.validity.messages.require)},match:function(t,e){return e||(e=u.validity.messages.match,"string"==typeof t&&u.validity.messages[t]&&(e=u.validity.messages[t])),"string"==typeof t&&(t=u.validity.patterns[t]),i(this,u.isFunction(t)?function(e){return!e.value.length||t(e.value)}:function(e){return t.global&&(t.lastIndex=0),!e.value.length||t.test(e.value)},e)},range:function(t,n,e){return i(this,t.getTime&&n.getTime?function(e){return(e=new Date(e.value))>=new Date(t)&&e<=new Date(n)}:t.substring&&n.substring&&Big?function(e){return(e=new Big(e.value)).greaterThanOrEqualTo(new Big(t))&&e.lessThanOrEqualTo(new Big(n))}:function(e){return e=parseFloat(e.value),t<=e&&e<=n},e||o(u.validity.messages.range,{min:u.validity.settings.argToString(t),max:u.validity.settings.argToString(n)}))},greaterThan:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)>t}:t.substring&&Big?function(e){return new Big(e.value).greaterThan(new Big(t))}:function(e){return parseFloat(e.value)>t},e||o(u.validity.messages.greaterThan,{min:u.validity.settings.argToString(t)}))},greaterThanOrEqualTo:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)>=t}:t.substring&&Big?function(e){return new Big(e.value).greaterThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)>=t},e||o(u.validity.messages.greaterThanOrEqualTo,{min:u.validity.settings.argToString(t)}))},lessThan:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)<t}:t.substring&&Big?function(e){return new Big(e.value).lessThan(new Big(t))}:function(e){return parseFloat(e.value)<t},e||o(u.validity.messages.lessThan,{max:u.validity.settings.argToString(t)}))},lessThanOrEqualTo:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)<=t}:t.substring&&Big?function(e){return new Big(e.value).lessThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)<=t},e||o(u.validity.messages.lessThanOrEqualTo,{max:u.validity.settings.argToString(t)}))},maxLength:function(t,e){return i(this,function(e){return e.value.length<=t},e||o(u.validity.messages.tooLong,{max:t}))},minLength:function(t,e){return i(this,function(e){return e.value.length>=t},e||o(u.validity.messages.tooShort,{min:t}))},alphabet:function(n,e){var a=[];return i(this,function(e){for(var t=0;t<e.value.length;++t)if(-1==n.indexOf(e.value.charAt(t)))return a.push(e.value.charAt(t)),0;return 1},e||o(u.validity.messages.alphabet,{chars:a.join(", ")}))},minCharClass:function(t,n,e){return"string"==typeof t&&(t=t.toLowerCase(),u.validity.charClasses[t])&&(t=u.validity.charClasses[t]),i(this,function(e){return(e.value.match(t)||[]).length>=n},e||o(u.validity.messages.minCharClass,{min:n,charClass:t}))},maxCharClass:function(t,n,e){return"string"==typeof t&&(t=t.toLowerCase(),u.validity.charClasses[t])&&(t=u.validity.charClasses[t]),i(this,function(e){return(e.value.match(t)||[]).length<=n},e||o(u.validity.messages.maxCharClass,{max:n,charClass:t}))},nonHtml:function(e){return i(this,function(e){return u.validity.patterns.nonHtml.test(e.value)},e||u.validity.messages.nonHtml)},equal:function(e,t){var n=(this.reduction||this).filter(u.validity.settings.elementSupport),a=function(e){return e},i=u.validity.messages.equal;if(n.length){u.isFunction(e)?(a=e,"string"==typeof t&&(i=t)):"string"==typeof e&&(i=e);var r,o=u.map(n,function(e){return a(e.value)}),s=o[0],l=!0;for(r in o)o[r]!=s&&(l=!1);l||(h(n,i),this.reduction=u([]))}return this},distinct:function(e,t){var n=(this.reduction||this).filter(u.validity.settings.elementSupport),a=function(e){return e},i=u.validity.messages.distinct,r=[],o=[],s=!0;if(n.length){u.isFunction(e)?(a=e,"string"==typeof t&&(i=t)):"string"==typeof e&&(i=e);for(var l=u.map(n,function(e){return a(e.value)}),c=0;c<l.length;++c)if(l[c].length){for(var d=0;d<r.length;++d)r[d]==l[c]&&(s=!1,o.push(l[c]));r.push(l[c])}if(!s){for(r=0,s=(o=u.unique(o)).length;r<s;++r)h(n.filter("[value='"+o[r]+"']"),i);this.reduction=u([])}}return this},sum:function(e,t){var n=(this.reduction||this).filter(u.validity.settings.elementSupport);return n.length&&e!=a(n)&&(h(n,t||o(u.validity.messages.sum,{sum:e})),this.reduction=u([])),this},sumMax:function(e,t){var n=(this.reduction||this).filter(u.validity.settings.elementSupport);return n.length&&e<a(n)&&(h(n,t||o(u.validity.messages.sumMax,{max:e})),this.reduction=u([])),this},sumMin:function(e,t){var n=(this.reduction||this).filter(u.validity.settings.elementSupport);return n.length&&e>a(n)&&(h(n,t||o(u.validity.messages.sumMin,{min:e})),this.reduction=u([])),this},radioChecked:function(e,t){var n=(this.reduction||this).filter(u.validity.settings.elementSupport);n.is(":radio")&&n.find(":checked").val()!=e&&h(n,t||u.validity.messages.radioChecked)},radioNotChecked:function(e,t){var n=(this.reduction||this).filter(u.validity.settings.elementSupport);n.is(":radio")&&n.filter(":checked").val()==e&&h(n,t||u.validity.messages.radioChecked)},checkboxChecked:function(e){return i(this,function(e){return!u(e).is(":checkbox")||u(e).is(":checked")},e||u.validity.messages.nonHtml)},assert:function(e,t){var n=this.reduction||this;if(n.length){if(u.isFunction(e))return i(this,e,t||u.validity.messages.generic);e||(h(n,t||u.validity.messages.generic),this.reduction=u([]))}return this},fail:function(e){return this.assert(!1,e)}}),t={validate:i,addToReport:n,raiseError:r,raiseAggregateError:h,numericSum:a,format:o,infer:s,capitalize:l}}(jQuery),!function(i){i.validity.outputs.tooltip={tooltipClass:"validity-tooltip",start:function(){i("."+i.validity.outputs.tooltip.tooltipClass).remove()},end:function(e){!e.valid&&i.validity.settings.scrollTo&&i(document).scrollTop(i("."+i.validity.outputs.tooltip.tooltipClass).offset().top)},raise:function(e,t){var n=e.offset(),a=(n.left+=e.width()+18,n.top+=8,i('<div class="validity-tooltip">'+t+'<div class="validity-tooltip-outer"><div class="validity-tooltip-inner"></div></div></div>').click(function(){e.focus(),i(this).fadeOut()}).css(n).hide().appendTo("body").fadeIn());i.validity.settings.fadeOutTooltipsOnFocus&&e.on("focus",function(){a.fadeOut()})},raiseAggregate:function(e,t){e.length&&this.raise(e.filter(":last"),t)}}}(jQuery),!function(a){function i(e){return e.attr("id").length?e.attr("id"):e.attr("name")}a.validity.outputs.label={cssClass:"error",start:function(){a("."+a.validity.outputs.label.cssClass).remove()},end:function(e){!e.valid&&a.validity.settings.scrollTo&&(location.hash=a("."+a.validity.outputs.label.cssClass+":eq(0)").attr("for"))},raise:function(e,t){var n="."+a.validity.outputs.label.cssClass+"[for='"+i(e)+"']";a(n).length?a(n).text(t):a("<label/>").attr("for",i(e)).addClass(a.validity.outputs.label.cssClass).text(t).click(function(){e.length&&e[0].select()}).insertAfter(e)},raiseAggregate:function(e,t){e.length&&this.raise(a(e.get(e.length-1)),t)}}}(jQuery),!function(a){a.validity.outputs.modal={start:function(){a(".validity-modal-msg").remove()},end:function(e){!e.valid&&a.validity.settings.scrollTo&&(location.hash=a(".validity-modal-msg:eq(0)").attr("id"))},raise:function(e,t){var n;e.length&&(n=e.offset(),e.get(0),n={left:parseInt(n.left+e.width()+4,10)+"px",top:parseInt(n.top-10,10)+"px"},a("<div/>").addClass("validity-modal-msg").css(n).text(t).click(a.validity.settings.modalErrorsClickable?function(){a(this).remove()}:null).appendTo("body"))},raiseAggregate:function(e,t){e.length&&this.raise(a(e.get(e.length-1)),t)}}}(jQuery),!function(t){var n=[];t.validity.outputs.summary={start:function(){t(".validity-erroneous").removeClass("validity-erroneous"),n=[]},end:function(){if(t(".validity-summary-container").stop().hide().find("ul").html(""),n.length){for(var e=0;e<n.length;++e)t("<li/>").text(n[e]).appendTo(".validity-summary-container ul");t(".validity-summary-container").show(),t.validity.settings.scrollTo&&(location.hash=t(".validity-erroneous:eq(0)").attr("id"))}},raise:function(e,t){n.push(t),e.addClass("validity-erroneous")},raiseAggregate:function(e,t){this.raise(e,t)},container:function(){document.write('<div class="validity-summary-container">The form didn\'t submit for the following reason(s):<ul></ul></div>')}}}(jQuery),!function(T){T.extend({tablesorter:new function(){function w(){var e=arguments[0],t=1<arguments.length?Array.prototype.slice.call(arguments):e;"undefined"!=typeof console&&void 0!==console.log?console[/error/i.test(e)?"error":/warn/i.test(e)?"warn":"log"](t):alert(t)}function S(e,t){w(e+" ("+((new Date).getTime()-t.getTime())+"ms)")}function g(e){for(var t in e)return;return 1}function k(e,t,n){var a,i,r;return t?(r="",r="basic"===(i=(a=e.config).textExtraction||"")?T(t).attr(a.textAttribute)||t.textContent||t.innerText||T(t).text()||"":"function"==typeof i?i(t,e,n):"function"==typeof(a=x.getColumnData(e,i,n))?a(t,e,n):t.textContent||t.innerText||T(t).text()||"",T.trim(r)):""}function f(e){var t,n,a,i,r,o,s,l=e.config,c=l.$tbodies=l.$table.children("tbody:not(."+l.cssInfoBlock+")"),d=0,u="",h=c.length;if(0===h)return l.debug&&w("Warning: *Empty table!* Not building a parser cache");for(l.debug&&(s=new Date,w("Detecting parsers for each column")),t=[],n=[];d<h;){if((a=c[d].rows)[d])for(i=l.columns,r=0;r<i;r++){if(p=l.$headers.filter('[data-column="'+r+'"]:last'),f=x.getColumnData(e,l.headers,r),o=x.getParserById(x.getData(p,f,"extractor")),g=x.getParserById(x.getData(p,f,"sorter")),m="false"===x.getData(p,f,"parser"),l.empties[r]=(x.getData(p,f,"empty")||l.emptyTo||(l.emptyToBottom?"bottom":"top")).toLowerCase(),l.strings[r]=(x.getData(p,f,"string")||l.stringTo||"max").toLowerCase(),o=o||!1,!(g=m?x.getParserById("no-parser"):g))e:{for(var p=e,f=a,m=-1,g=r,v=void 0,C=x.parsers.length,y=!1,b="",v=!0;""===b&&v;)f[++m]?(b=k(p,y=f[m].cells[g],g),p.config.debug&&w("Checking if value was empty on row "+m+", column: "+g+': "'+b+'"')):v=!1;for(;0<=--C;)if((v=x.parsers[C])&&"text"!==v.id&&v.is&&v.is(b,p,y)){g=v;break e}g=x.getParserById("text")}l.debug&&(u+="column:"+r+"; extractor:"+o.id+"; parser:"+g.id+"; string:"+l.strings[r]+"; empty: "+l.empties[r]+"\n"),n[r]=g,t[r]=o}d+=n.length?h:1}l.debug&&(w(u||"No parsers detected"),S("Completed detecting parsers",s)),l.parsers=n,l.extractors=t}function m(e){var t,n,a,i,r,o,s,l,c,d,u,h=e.config,p=h.$table.children("tbody"),f=h.extractors,m=h.parsers;if(h.cache={},h.totalRows=0,!m)return h.debug&&w("Warning: *Empty table!* Not building a cache");for(h.debug&&(l=new Date),h.showProcessing&&x.isProcessing(e,!0),r=0;r<p.length;r++)if(u=[],t=h.cache[r]={normalized:[]},!p.eq(r).hasClass(h.cssInfoBlock)){for(c=p[r]&&p[r].rows.length||0,a=0;a<c;++a)if(d={child:[]},s=[],(o=T(p[r].rows[a])).hasClass(h.cssChildRow)&&0!==a)n=t.normalized.length-1,t.normalized[n][h.columns].$row=t.normalized[n][h.columns].$row.add(o),o.prev().hasClass(h.cssChildRow)||o.prev().addClass(x.css.cssHasChild),d.child[n]=T.trim(o[0].textContent||o[0].innerText||o.text()||"");else{for(d.$row=o,d.order=a,i=0;i<h.columns;++i)void 0===m[i]?h.debug&&w("No parser found for cell:",o[0].cells[i],"does it have a header?"):(n=k(e,o[0].cells[i],i),n=void 0===f[i].id?n:f[i].format(n,e,o[0].cells[i],i),n="no-parser"===m[i].id?"":m[i].format(n,e,o[0].cells[i],i),s.push(h.ignoreCase&&"string"==typeof n?n.toLowerCase():n),"numeric"===(m[i].type||"").toLowerCase()&&(u[i]=Math.max(Math.abs(n)||0,u[i]||0)));s[h.columns]=d,t.normalized.push(s)}t.colMax=u,h.totalRows+=t.normalized.length}h.showProcessing&&x.isProcessing(e),h.debug&&S("Building cache for "+c+" rows",l)}function v(e,t){var n,a,i,r,o,s,l=e.config,c=l.widgetOptions,d=e.tBodies,u=[],h=l.cache;if(g(h))return l.appender?l.appender(e,u):e.isUpdating&&l.$table.trigger("updateComplete",e);for(l.debug&&(s=new Date),o=0;o<d.length;o++)if((n=T(d[o])).length&&!n.hasClass(l.cssInfoBlock)){for(i=x.processTbody(e,n,!0),a=(n=h[o].normalized).length,r=0;r<a;r++)u.push(n[r][l.columns].$row),l.appender&&(!l.pager||l.pager.removeRows&&c.pager_removeRows||l.pager.ajax)||i.append(n[r][l.columns].$row);x.processTbody(e,i,!1)}l.appender&&l.appender(e,u),l.debug&&S("Rebuilt table",s),t||l.appender||x.applyWidget(e),e.isUpdating&&l.$table.trigger("updateComplete",e)}function l(e){return/^d/i.test(e)||1===e}function c(t){var n,a,i,r,o,e,s=t.config;s.headerList=[],s.headerContent=[],s.debug&&(e=new Date),s.columns=x.computeColumnIndex(s.$table.children("thead, tfoot").children("tr")),i=s.cssIcon?'<i class="'+(s.cssIcon===x.css.icon?x.css.icon:s.cssIcon+" "+x.css.icon)+'"></i>':"",s.$headers=T(t).find(s.selectorHeaders).each(function(e){a=T(this),n=x.getColumnData(t,s.headers,e,!0),s.headerContent[e]=T(this).html(),""!==s.headerTemplate&&(r=s.headerTemplate.replace(/\{content\}/g,T(this).html()).replace(/\{icon\}/g,i),s.onRenderTemplate&&(o=s.onRenderTemplate.apply(a,[e,r]))&&"string"==typeof o&&(r=o),T(this).html('<div class="'+x.css.headerIn+'">'+r+"</div>")),s.onRenderHeader&&s.onRenderHeader.apply(a,[e]),this.column=parseInt(T(this).attr("data-column"),10),this.order=l(x.getData(a,n,"sortInitialOrder")||s.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,void 0!==(o=x.getData(a,n,"lockedOrder")||!1)&&!1!==o&&(this.order=this.lockedOrder=l(o)?[1,1,1]:[0,0,0]),a.addClass(x.css.header+" "+s.cssHeader),s.headerList[e]=this,a.parent().addClass(x.css.headerRow+" "+s.cssHeaderRow).attr("role","row"),s.tabIndex&&a.attr("tabindex",0)}).attr({scope:"col",role:"columnheader"}),y(t),s.debug&&(S("Built headers:",e),w(s.$headers))}function C(e,t,n){var a=e.config;a.$table.find(a.selectorRemove).remove(),f(e),m(e),j(a.$table,t,n)}function y(n){var a,i,r=n.config;r.$headers.each(function(e,t){a=T(t),i=x.getColumnData(n,r.headers,e,!0),i="false"===x.getData(t,i,"sorter")||"false"===x.getData(t,i,"parser"),t.sortDisabled=i,a[i?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+i),n.id&&(i?a.removeAttr("aria-controls"):a.attr("aria-controls",n.id))})}function b(e){var t,n,a=e.config,i=a.sortList,r=i.length,o=x.css.sortNone+" "+a.cssNone,s=[x.css.sortAsc+" "+a.cssAsc,x.css.sortDesc+" "+a.cssDesc],l=["ascending","descending"],c=T(e).find("tfoot tr").children().add(a.$extraHeaders).removeClass(s.join(" "));for(a.$headers.removeClass(s.join(" ")).addClass(o).attr("aria-sort","none"),t=0;t<r;t++)if(2!==i[t][1]&&(e=a.$headers.not(".sorter-false").filter('[data-column="'+i[t][0]+'"]'+(1===r?":last":""))).length){for(n=0;n<e.length;n++)e[n].sortDisabled||e.eq(n).removeClass(o).addClass(s[i[t][1]]).attr("aria-sort",l[i[t][1]]);c.length&&c.filter('[data-column="'+i[t][0]+'"]').removeClass(o).addClass(s[i[t][1]])}a.$headers.not(".sorter-false").each(function(){var e=T(this),t=this.order[(this.count+1)%(a.sortReset?3:2)],t=e.text()+": "+x.language[e.hasClass(x.css.sortAsc)?"sortAsc":e.hasClass(x.css.sortDesc)?"sortDesc":"sortNone"]+x.language[0===t?"nextAsc":1===t?"nextDesc":"nextNone"];e.attr("aria-label",t)})}function M(i){var r,e,o,t,s,l,c,d,u=0,h=i.config,p=h.textSorter||"",f=h.sortList,m=f.length,n=i.tBodies.length;if(!h.serverSideSorting&&!g(h.cache)){for(h.debug&&(t=new Date),e=0;e<n;e++)s=h.cache[e].colMax,h.cache[e].normalized.sort(function(e,t){for(r=0;r<m&&(o=f[r][0],l=f[r][1],u=0===l,!h.sortStable||e[o]!==t[o]||1!==m);r++)if(c=(c=/n/i.test((n=h.parsers,a=o,n&&n[a]&&n[a].type||"")))&&h.strings[o]?(c="boolean"==typeof h.string[h.strings[o]]?(u?1:-1)*(h.string[h.strings[o]]?-1:1):h.strings[o]&&h.string[h.strings[o]]||0,h.numberSorter?h.numberSorter(e[o],t[o],u,s[o],i):x["sortNumeric"+(u?"Asc":"Desc")](e[o],t[o],c,s[o],o,i)):(c=u?e:t,d=u?t:e,"function"==typeof p?p(c[o],d[o],u,o,i):"object"==typeof p&&p.hasOwnProperty(o)?p[o](c[o],d[o],u,o,i):x["sortNatural"+(u?"Asc":"Desc")](e[o],t[o],o,i,h)))return c;var n,a;return e[h.columns].order-t[h.columns].order});h.debug&&S("Sorting on "+f.toString()+" and dir "+l+" time",t)}}function i(e,t){var n=e[0];n.isUpdating&&e.trigger("updateComplete",n),T.isFunction(t)&&t(e[0])}function j(e,t,n){var a=e[0].config.sortList;!1!==t&&!e[0].isProcessing&&a.length?e.trigger("sorton",[a,function(){i(e,n)},!0]):(i(e,n),x.applyWidget(e[0],!1))}function d(u){var h=u.config,p=h.$table;p.unbind("sortReset update updateRows updateCell updateAll addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(h.namespace+" ")).bind("sortReset"+h.namespace,function(e,t){e.stopPropagation(),h.sortList=[],b(u),M(u),v(u),T.isFunction(t)&&t(u)}).bind("updateAll"+h.namespace,function(e,t,n){e.stopPropagation(),u.isUpdating=!0,x.refreshWidgets(u,!0,!0),x.restoreHeaders(u),c(u),x.bindEvents(u,h.$headers,!0),d(u),C(u,t,n)}).bind("update"+h.namespace+" updateRows"+h.namespace,function(e,t,n){e.stopPropagation(),u.isUpdating=!0,y(u),C(u,t,n)}).bind("updateCell"+h.namespace,function(e,t,n,a){var i,r,o;e.stopPropagation(),u.isUpdating=!0,p.find(h.selectorRemove).remove(),r=p.find("tbody"),o=T(t),e=r.index(T.fn.closest?o.closest("tbody"):o.parents("tbody").filter(":first")),i=T.fn.closest?o.closest("tr"):o.parents("tr").filter(":first"),t=o[0],r.length&&0<=e&&(r=r.eq(e).find("tr").index(i),o=o.index(),h.cache[e].normalized[r][h.columns].$row=i,i=void 0===h.extractors[o].id?k(u,t,o):h.extractors[o].format(k(u,t,o),u,t,o),t="no-parser"===h.parsers[o].id?"":h.parsers[o].format(i,u,t,o),h.cache[e].normalized[r][o]=h.ignoreCase&&"string"==typeof t?t.toLowerCase():t,"numeric"===(h.parsers[o].type||"").toLowerCase()&&(h.cache[e].colMax[o]=Math.max(Math.abs(t)||0,h.cache[e].colMax[o]||0)),j(p,n,a))}).bind("addRows"+h.namespace,function(e,t,n,a){if(e.stopPropagation(),u.isUpdating=!0,g(h.cache))y(u),C(u,n,a);else{var i,r,o,s,l,c=(t=T(t).attr("role","row")).filter("tr").length,d=p.find("tbody").index(t.parents("tbody").filter(":first"));for(h.parsers&&h.parsers.length||f(u),e=0;e<c;e++){for(r=t[e].cells.length,l=[],s={child:[],$row:t.eq(e),order:h.cache[d].normalized.length},i=0;i<r;i++)o=void 0===h.extractors[i].id?k(u,t[e].cells[i],i):h.extractors[i].format(k(u,t[e].cells[i],i),u,t[e].cells[i],i),o="no-parser"===h.parsers[i].id?"":h.parsers[i].format(o,u,t[e].cells[i],i),l[i]=h.ignoreCase&&"string"==typeof o?o.toLowerCase():o,"numeric"===(h.parsers[i].type||"").toLowerCase()&&(h.cache[d].colMax[i]=Math.max(Math.abs(l[i])||0,h.cache[d].colMax[i]||0));l.push(s),h.cache[d].normalized.push(l)}j(p,n,a)}}).bind("updateComplete"+h.namespace,function(){u.isUpdating=!1}).bind("sorton"+h.namespace,function(e,t,n,a){var i,r,o,s,l,c,d=u.config;e.stopPropagation(),p.trigger("sortStart",this),c=(e=u).config,e=t||c.sortList,c.sortList=[],T.each(e,function(e,t){if(s=parseInt(t[0],10),o=c.$headers.filter('[data-column="'+s+'"]:last')[0]){switch(r=(r=(""+t[1]).match(/^(1|d|s|o|n)/))?r[0]:""){case"1":case"d":r=1;break;case"s":r=l||0;break;case"o":i=o.order[(l||0)%(c.sortReset?3:2)],r=0===i?1:1===i?0:2;break;case"n":o.count+=1,r=o.order[o.count%(c.sortReset?3:2)];break;default:r=0}l=0===e?r:l,i=[s,parseInt(r,10)||0],c.sortList.push(i),r=T.inArray(i[1],o.order),o.count=0<=r?r:i[1]%(c.sortReset?3:2)}}),b(u),d.delayInit&&g(d.cache)&&m(u),p.trigger("sortBegin",this),M(u),v(u,a),p.trigger("sortEnd",this),x.applyWidget(u),T.isFunction(n)&&n(u)}).bind("appendCache"+h.namespace,function(e,t,n){e.stopPropagation(),v(u,n),T.isFunction(t)&&t(u)}).bind("updateCache"+h.namespace,function(e,t){h.parsers&&h.parsers.length||f(u),m(u),T.isFunction(t)&&t(u)}).bind("applyWidgetId"+h.namespace,function(e,t){e.stopPropagation(),x.getWidgetById(t).format(u,h,h.widgetOptions)}).bind("applyWidgets"+h.namespace,function(e,t){e.stopPropagation(),x.applyWidget(u,t)}).bind("refreshWidgets"+h.namespace,function(e,t,n){e.stopPropagation(),x.refreshWidgets(u,t,n)}).bind("destroy"+h.namespace,function(e,t,n){e.stopPropagation(),x.destroy(u,t,n)}).bind("resetToLoadState"+h.namespace,function(){x.refreshWidgets(u,!0,!0),h=T.extend(!0,x.defaults,h.originalSettings),u.hasInitialized=!1,x.setup(u,h)})}var x=this;x.version="2.17.8",x.parsers=[],x.widgets=[],x.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},x.css={table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"},x.language={sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"},x.log=w,x.benchmark=S,x.construct=function(t){return this.each(function(){var e=T.extend(!0,{},x.defaults,t);e.originalSettings=t,!this.hasInitialized&&x.buildTable&&"TABLE"!==this.tagName?x.buildTable(this,e):x.setup(this,e)})},x.setup=function(t,n){if(!t||!t.tHead||0===t.tBodies.length||!0===t.hasInitialized)return n.debug?w("ERROR: stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var e,a,i,r="",o=T(t),s=T.metadata;t.hasInitialized=!1,t.isProcessing=!0,t.config=n,T.data(t,"tablesorter",n),n.debug&&T.data(t,"startoveralltimer",new Date),n.supportsDataObject=((e=T.fn.jquery.split("."))[0]=parseInt(e[0],10),1<e[0]||1===e[0]&&4<=parseInt(e[1],10)),n.string={max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,null:0,top:!0,bottom:!1},n.emptyTo=n.emptyTo.toLowerCase(),n.stringTo=n.stringTo.toLowerCase(),/tablesorter\-/.test(o.attr("class"))||(r=""!==n.theme?" tablesorter-"+n.theme:""),n.table=t,n.$table=o.addClass(x.css.table+" "+n.tableClass+r).attr("role","grid"),n.$headers=o.find(n.selectorHeaders),n.namespace=n.namespace?"."+n.namespace.replace(/\W/g,""):".tablesorter"+Math.random().toString(16).slice(2),n.$table.children().children("tr").attr("role","row"),n.$tbodies=o.children("tbody:not(."+n.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"}),n.$table.find("caption").length&&n.$table.attr("aria-labelledby","theCaption"),n.widgetInit={},n.textExtraction=n.$table.attr("data-text-extraction")||n.textExtraction||"basic",c(t),(r=(e=t).config).widthFixed&&0===r.$table.find("colgroup").length&&(a=T("<colgroup>"),i=T(e).width(),T(e.tBodies).not("."+r.cssInfoBlock).find("tr:first").children(":visible").each(function(){a.append(T("<col>").css("width",parseInt(T(this).width()/i*1e3,10)/10+"%"))}),r.$table.prepend(a)),f(t),n.totalRows=0,n.delayInit||m(t),x.bindEvents(t,n.$headers,!0),d(t),n.supportsDataObject&&void 0!==o.data().sortlist?n.sortList=o.data().sortlist:s&&o.metadata()&&o.metadata().sortlist&&(n.sortList=o.metadata().sortlist),x.applyWidget(t,!0),0<n.sortList.length?o.trigger("sorton",[n.sortList,{},!n.initWidgets,!0]):(b(t),n.initWidgets&&x.applyWidget(t,!1)),n.showProcessing&&o.unbind("sortBegin"+n.namespace+" sortEnd"+n.namespace).bind("sortBegin"+n.namespace+" sortEnd"+n.namespace,function(e){clearTimeout(n.processTimer),x.isProcessing(t),"sortBegin"===e.type&&(n.processTimer=setTimeout(function(){x.isProcessing(t,!0)},500))}),t.hasInitialized=!0,t.isProcessing=!1,n.debug&&x.benchmark("Overall initialization time",T.data(t,"startoveralltimer")),o.trigger("tablesorter-initialized",t),"function"==typeof n.initialized&&n.initialized(t)},x.getColumnData=function(e,t,n,a){if(null!=t){var i,r=(e=T(e)[0]).config;if(t[n])return a?t[n]:t[r.$headers.index(r.$headers.filter('[data-column="'+n+'"]:last'))];for(i in t)if("string"==typeof i&&(e=(a?r.$headers.eq(n):r.$headers.filter('[data-column="'+n+'"]:last')).filter(i),e.length))return t[i]}},x.computeColumnIndex=function(e){for(var t,n,a,i,r,o,s,l,c,d=[],u=0,h=0;h<e.length;h++)for(i=e[h].cells,t=0;t<i.length;t++){for(n=i[t],a=T(n),r=n.parentNode.rowIndex,a.index(),o=n.rowSpan||1,s=n.colSpan||1,void 0===d[r]&&(d[r]=[]),n=0;n<d[r].length+1;n++)if(void 0===d[r][n]){l=n;break}for(u=Math.max(l,u),a.attr({"data-column":l}),n=r;n<r+o;n++)for(void 0===d[n]&&(d[n]=[]),c=d[n],a=l;a<l+s;a++)c[a]="x"}return u+1},x.isProcessing=function(e,t,n){var a=(e=T(e))[0].config,i=n||e.find("."+x.css.header);t?(void 0!==n&&0<a.sortList.length&&(i=i.filter(function(){return!this.sortDisabled&&0<=x.isValueInArray(parseFloat(T(this).attr("data-column")),a.sortList)})),e.add(i).addClass(x.css.processing+" "+a.cssProcessing)):e.add(i).removeClass(x.css.processing+" "+a.cssProcessing)},x.processTbody=function(e,t,n){if(e=T(e)[0],n)return e.isProcessing=!0,t.before('<span class="tablesorter-savemyplace"/>'),T.fn.detach?t.detach():t.remove();n=T(e).find("span.tablesorter-savemyplace"),t.insertAfter(n),n.remove(),e.isProcessing=!1},x.clearTableBody=function(e){T(e)[0].config.$tbodies.children().detach()},x.bindEvents=function(a,i,e){var r,o=(a=T(a)[0]).config;!0!==e&&(o.$extraHeaders=o.$extraHeaders?o.$extraHeaders.add(i):i),i.find(o.selectorSort).add(i.filter(o.selectorSort)).unbind(["mousedown","mouseup","sort","keyup",""].join(o.namespace+" ")).bind(["mousedown","mouseup","sort","keyup",""].join(o.namespace+" "),function(e,t){var n=e.type;if(!(1!==(e.which||e.button)&&!/sort|keyup/.test(n)||"keyup"===n&&13!==e.which||"mouseup"===n&&!0!==t&&250<(new Date).getTime()-r)){if("mousedown"===n)return r=(new Date).getTime(),/(input|select|button|textarea)/i.test(e.target.tagName)?"":!o.cancelSelection;o.delayInit&&g(o.cache)&&m(a),n=T.fn.closest?T(this).closest("th, td")[0]:/TH|TD/.test(this.tagName)?this:T(this).parents("th, td")[0],(n=o.$headers[i.index(n)]).sortDisabled||function e(t,n,a){if(t.isUpdating)return setTimeout(function(){e(t,n,a)},50);var i,r,o,s,l=t.config,c=!a[l.sortMultiSortKey],d=l.$table;if(d.trigger("sortStart",t),n.count=a[l.sortResetKey]?2:(n.count+1)%(l.sortReset?3:2),l.sortRestart&&(r=n,l.$headers.each(function(){this===r||!c&&T(this).is("."+x.css.sortDesc+",."+x.css.sortAsc)||(this.count=-1)})),r=n.column,c){if(l.sortList=[],null!==l.sortForce)for(i=l.sortForce,o=0;o<i.length;o++)i[o][0]!==r&&l.sortList.push(i[o]);if((i=n.order[n.count])<2&&(l.sortList.push([r,i]),1<n.colSpan))for(o=1;o<n.colSpan;o++)l.sortList.push([r+o,i])}else{if(l.sortAppend&&1<l.sortList.length)for(o=0;o<l.sortAppend.length;o++)0<=(s=x.isValueInArray(l.sortAppend[o][0],l.sortList))&&l.sortList.splice(s,1);if(0<=x.isValueInArray(r,l.sortList))for(o=0;o<l.sortList.length;o++)s=l.sortList[o],i=l.$headers.filter('[data-column="'+s[0]+'"]:last')[0],s[0]===r&&(s[1]=i.order[n.count],2===s[1])&&(l.sortList.splice(o,1),i.count=-1);else if((i=n.order[n.count])<2&&(l.sortList.push([r,i]),1<n.colSpan))for(o=1;o<n.colSpan;o++)l.sortList.push([r+o,i])}if(null!==l.sortAppend)for(i=l.sortAppend,o=0;o<i.length;o++)i[o][0]!==r&&l.sortList.push(i[o]);d.trigger("sortBegin",t),setTimeout(function(){b(t),M(t),v(t),d.trigger("sortEnd",t)},1)}(a,n,e)}}),o.cancelSelection&&i.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})},x.restoreHeaders=function(e){var t=T(e)[0].config;t.$table.find(t.selectorHeaders).each(function(e){T(this).find("."+x.css.headerIn).length&&T(this).html(t.headerContent[e])})},x.destroy=function(e,t,n){var a,i,r,o,s;(e=T(e)[0]).hasInitialized&&(x.refreshWidgets(e,!0,!0),a=T(e),i=e.config,o=(r=a.find("thead:first")).find("tr."+x.css.headerRow).removeClass(x.css.headerRow+" "+i.cssHeaderRow),s=a.find("tfoot:first > tr").children("th, td"),!1===t&&0<=T.inArray("uitheme",i.widgets)&&(a.trigger("applyWidgetId",["uitheme"]),a.trigger("applyWidgetId",["zebra"])),r.find("tr").not(o).remove(),a.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd resetToLoadState ".split(" ").join(i.namespace+" ")),i.$headers.add(s).removeClass([x.css.header,i.cssHeader,i.cssAsc,i.cssDesc,x.css.sortAsc,x.css.sortDesc,x.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true"),o.find(i.selectorSort).unbind(["mousedown","mouseup","keypress",""].join(i.namespace+" ")),x.restoreHeaders(e),a.toggleClass(x.css.table+" "+i.tableClass+" tablesorter-"+i.theme,!1===t),e.hasInitialized=!1,delete e.config.cache,"function"==typeof n)&&n(e)},x.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i},x.sortNatural=function(e,t){if(e!==t){var n,a,i,r,o,s=x.regex;if(s.hex.test(t)){if((n=parseInt(e.match(s.hex),16))<(a=parseInt(t.match(s.hex),16)))return-1;if(a<n)return 1}for(n=e.replace(s.chunk,"\\0$1\\0").replace(s.chunks,"").split("\\0"),s=t.replace(s.chunk,"\\0$1\\0").replace(s.chunks,"").split("\\0"),o=Math.max(n.length,s.length),r=0;r<o;r++){if(a=isNaN(n[r])?n[r]||0:parseFloat(n[r])||0,i=isNaN(s[r])?s[r]||0:parseFloat(s[r])||0,isNaN(a)!==isNaN(i))return isNaN(a)?1:-1;if(typeof a!=typeof i&&(a+="",i+=""),a<i)return-1;if(i<a)return 1}}return 0},x.sortNaturalAsc=function(e,t,n,a,i){return e===t?0:(n=i.string[i.empties[n]||i.emptyTo],""===e&&0!==n?"boolean"==typeof n?n?-1:1:-n||-1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:n||1:x.sortNatural(e,t))},x.sortNaturalDesc=function(e,t,n,a,i){return e===t?0:(n=i.string[i.empties[n]||i.emptyTo],""===e&&0!==n?"boolean"==typeof n?n?-1:1:n||1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:-n||-1:x.sortNatural(t,e))},x.sortText=function(e,t){return t<e?1:e<t?-1:0},x.getTextValue=function(e,t,n){if(n){var a=e?e.length:0,i=n+t;for(n=0;n<a;n++)i+=e.charCodeAt(n);return t*i}return 0},x.sortNumericAsc=function(e,t,n,a,i,r){return e===t?0:(i=(r=r.config).string[r.empties[i]||r.emptyTo],""===e&&0!==i?"boolean"==typeof i?i?-1:1:-i||-1:""===t&&0!==i?"boolean"==typeof i?i?1:-1:i||1:(e=isNaN(e)?x.getTextValue(e,n,a):e)-(t=isNaN(t)?x.getTextValue(t,n,a):t))},x.sortNumericDesc=function(e,t,n,a,i,r){return e===t?0:(i=(r=r.config).string[r.empties[i]||r.emptyTo],""===e&&0!==i?"boolean"==typeof i?i?-1:1:i||1:""===t&&0!==i?"boolean"==typeof i?i?1:-1:-i||-1:(isNaN(e)&&(e=x.getTextValue(e,n,a)),(t=isNaN(t)?x.getTextValue(t,n,a):t)-e))},x.sortNumeric=function(e,t){return e-t},x.characterEquivalents={a:"áàâãäąå",A:"ÁÀÂÃÄĄÅ",c:"çćč",C:"ÇĆČ",e:"éèêëěę",E:"ÉÈÊËĚĘ",i:"íìİîïı",I:"ÍÌİÎÏ",o:"óòôõö",O:"ÓÒÔÕÖ",ss:"ß",SS:"ẞ",u:"úùûüů",U:"ÚÙÛÜŮ"},x.replaceAccents=function(e){var t,n="[",a=x.characterEquivalents;if(!x.characterRegex){for(t in x.characterRegexArray={},a)"string"==typeof t&&(n+=a[t],x.characterRegexArray[t]=new RegExp("["+a[t]+"]","g"));x.characterRegex=new RegExp(n+"]")}if(x.characterRegex.test(e))for(t in a)"string"==typeof t&&(e=e.replace(x.characterRegexArray[t],t));return e},x.isValueInArray=function(e,t){for(var n=t.length,a=0;a<n;a++)if(t[a][0]===e)return a;return-1},x.addParser=function(e){for(var t=x.parsers.length,n=!0,a=0;a<t;a++)x.parsers[a].id.toLowerCase()===e.id.toLowerCase()&&(n=!1);n&&x.parsers.push(e)},x.getParserById=function(e){if("false"!=e)for(var t=x.parsers.length,n=0;n<t;n++)if(x.parsers[n].id.toLowerCase()===e.toString().toLowerCase())return x.parsers[n];return!1},x.addWidget=function(e){x.widgets.push(e)},x.hasWidget=function(e,t){return(e=T(e)).length&&e[0].config&&e[0].config.widgetInit[t]||!1},x.getWidgetById=function(e){for(var t,n=x.widgets.length,a=0;a<n;a++)if((t=x.widgets[a])&&t.hasOwnProperty("id")&&t.id.toLowerCase()===e.toLowerCase())return t},x.applyWidget=function(n,a){var e,t,i,r=(n=T(n)[0]).config,o=r.widgetOptions,s=[];!1!==a&&n.hasInitialized&&(n.isApplyingWidgets||n.isUpdating)||(r.debug&&(e=new Date),r.widgets.length&&(n.isApplyingWidgets=!0,r.widgets=T.grep(r.widgets,function(e,t){return T.inArray(e,r.widgets)===t}),T.each(r.widgets||[],function(e,t){(i=x.getWidgetById(t))&&i.id&&(i.priority||(i.priority=10),s[e]=i)}),s.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),T.each(s,function(e,t){t&&(!a&&r.widgetInit[t.id]||(r.widgetInit[t.id]=!0,t.hasOwnProperty("options")&&(o=n.config.widgetOptions=T.extend(!0,{},t.options,o)),t.hasOwnProperty("init")&&t.init(n,t,r,o)),!a)&&t.hasOwnProperty("format")&&t.format(n,r,o,!1)})),setTimeout(function(){n.isApplyingWidgets=!1},0),r.debug&&(t=r.widgets.length,S("Completed "+(!0===a?"initializing ":"applying ")+t+" widget"+(1!==t?"s":""),e)))},x.refreshWidgets=function(e,t,n){for(var a=(e=T(e)[0]).config,i=a.widgets,r=x.widgets,o=r.length,s=0;s<o;s++)r[s]&&r[s].id&&(t||T.inArray(r[s].id,i)<0)&&(a.debug&&w('Refeshing widgets: Removing "'+r[s].id+'"'),r[s].hasOwnProperty("remove"))&&a.widgetInit[r[s].id]&&(r[s].remove(e,a,a.widgetOptions),a.widgetInit[r[s].id]=!1);!0!==n&&x.applyWidget(e,t)},x.getData=function(e,t,n){var a,i,r="";return(e=T(e)).length?(a=!!T.metadata&&e.metadata(),i=" "+(e.attr("class")||""),void 0!==e.data(n)||void 0!==e.data(n.toLowerCase())?r+=e.data(n)||e.data(n.toLowerCase()):a&&void 0!==a[n]?r+=a[n]:t&&void 0!==t[n]?r+=t[n]:" "!==i&&i.match(" "+n+"-")&&(r=i.match(new RegExp("\\s"+n+"-([\\w-]+)"))[1]||""),T.trim(r)):""},x.formatFloat=function(e,t){return"string"!=typeof e||""===e?e:(e=(t&&t.config?!1!==t.config.usNumberFormat:void 0===t||t)?e.replace(/,/g,""):e.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(e)&&(e=e.replace(/^\s*\(([.\d]+)\)/,"-$1")),t=parseFloat(e),isNaN(t)?T.trim(e):t)},x.isDigit=function(e){return!isNaN(e)||/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,""))}}});var c=T.tablesorter;T.fn.extend({tablesorter:c.construct}),c.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"}),c.addParser({id:"text",is:function(){return!0},format:function(e,t){t=t.config;return e&&(e=T.trim(t.ignoreCase?e.toLocaleLowerCase():e),e=t.sortLocaleCompare?c.replaceAccents(e):e),e},type:"text"}),c.addParser({id:"digit",is:function(e){return c.isDigit(e)},format:function(e,t){var n=c.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),t);return e&&"number"==typeof n?n:e&&T.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e)},type:"numeric"}),c.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[+\-,. ]/g,""))},format:function(e,t){var n=c.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),t);return e&&"number"==typeof n?n:e&&T.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e)},type:"numeric"}),c.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,t){for(var n=e?e.split("."):"",a="",i=n.length,r=0;r<i;r++)a+=("00"+n[r]).slice(-3);return e&&c.formatFloat(a,t)},type:"numeric"}),c.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(e){return e&&T.trim(e.replace(/(https?|ftp|file):\/\//,""))},parsed:!0,type:"text"}),c.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,t){return e&&c.formatFloat(""!==e?new Date(e.replace(/-/g,"/")).getTime()||e:"",t)},type:"numeric"}),c.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,t){return e&&c.formatFloat(e.replace(/%/g,""),t)},type:"numeric"}),c.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,t){return e&&c.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||e,t)},type:"numeric"}),c.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,t,n,a){var i;return e&&(a=(i=(n=t.config).$headers.filter("[data-column="+a+"]:last")).length&&i[0].dateFormat||c.getData(i,c.getColumnData(t,n.headers,a),"dateFormat")||n.dateFormat,e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===a?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===a?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===a&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))),e&&c.formatFloat(new Date(e).getTime()||e,t)},type:"numeric"}),c.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,t){return e&&c.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||e,t)},type:"numeric"}),c.addParser({id:"metadata",is:function(){return!1},format:function(e,t,n){return e=t.config.parserMetadataName||"sortValue",T(n).metadata()[e]},type:"numeric"}),c.addWidget({id:"zebra",priority:90,format:function(e,t,n){var a,i,r,o,s=new RegExp(t.cssChildRow,"i"),l=t.$tbodies;for(t.debug&&(o=new Date),e=0;e<l.length;e++)i=0,l.eq(e).children("tr:visible").not(t.selectorRemove).each(function(){a=T(this),s.test(this.className)||i++,r=0==i%2,a.removeClass(n.zebra[r?1:0]).addClass(n.zebra[r?0:1])});t.debug&&c.benchmark("Applying Zebra widget",o)},remove:function(e,t,n){t=t.$tbodies;var a,i=(n.zebra||["even","odd"]).join(" ");for(n=0;n<t.length;n++)(a=T.tablesorter.processTbody(e,t.eq(n),!0)).children().removeClass(i),T.tablesorter.processTbody(e,a,!1)}})}(jQuery),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(w){function a(e,t){var n,a,i,r=e.nodeName.toLowerCase();return"area"===r?(a=(n=e.parentNode).name,!(!e.href||!a||"map"!==n.nodeName.toLowerCase()||!(i=w("img[usemap='#"+a+"']")[0]))&&o(i)):(/^(input|select|textarea|button|object)$/.test(r)?!e.disabled:"a"===r&&e.href||t)&&o(e)}function o(e){return w.expr.filters.visible(e)&&!w(e).parents().addBack().filter(function(){return"hidden"===w.css(this,"visibility")}).length}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},w.extend(this._defaults,this.regional[""]),this.regional.en=w.extend(!0,{},this.regional[""]),this.regional["en-US"]=w.extend(!0,{},this.regional.en),this.dpDiv=n(w("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){w(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&w(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&w(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",r)}function r(){w.datepicker._isDisabledDatepicker((d.inline?d.dpDiv.parent():d.input)[0])||(w(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),w(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&w(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&w(this).addClass("ui-datepicker-next-hover"))}function l(e,t){for(var n in w.extend(e,t),t)null==t[n]&&(e[n]=t[n])}var t,i,s,c,d;w.ui=w.ui||{},w.extend(w.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),w.fn.extend({scrollParent:function(e){var t=this.css("position"),n="absolute"===t,a=e?/(auto|scroll|hidden)/:/(auto|scroll)/,e=this.parents().filter(function(){var e=w(this);return(!n||"static"!==e.css("position"))&&a.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&e.length?e:w(this[0].ownerDocument||document)},uniqueId:(c=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&w(this).removeAttr("id")})}}),w.extend(w.expr[":"],{data:w.expr.createPseudo?w.expr.createPseudo(function(t){return function(e){return!!w.data(e,t)}}):function(e,t,n){return!!w.data(e,n[3])},focusable:function(e){return a(e,!isNaN(w.attr(e,"tabindex")))},tabbable:function(e){var t=w.attr(e,"tabindex"),n=isNaN(t);return(n||0<=t)&&a(e,!n)}}),w("<a>").outerWidth(1).jquery||w.each(["Width","Height"],function(e,n){function a(e,t,n,a){return w.each(i,function(){t-=parseFloat(w.css(e,"padding"+this))||0,n&&(t-=parseFloat(w.css(e,"border"+this+"Width"))||0),a&&(t-=parseFloat(w.css(e,"margin"+this))||0)}),t}var i="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),o={innerWidth:w.fn.innerWidth,innerHeight:w.fn.innerHeight,outerWidth:w.fn.outerWidth,outerHeight:w.fn.outerHeight};w.fn["inner"+n]=function(e){return void 0===e?o["inner"+n].call(this):this.each(function(){w(this).css(r,a(this,e)+"px")})},w.fn["outer"+n]=function(e,t){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){w(this).css(r,a(this,e,!0,t)+"px")})}}),w.fn.addBack||(w.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),w("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(w.fn.removeData=(s=w.fn.removeData,function(e){return arguments.length?s.call(this,w.camelCase(e)):s.call(this)})),w.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),w.fn.extend({focus:(i=w.fn.focus,function(t,n){return"number"==typeof t?this.each(function(){var e=this;setTimeout(function(){w(e).focus(),n&&n.call(e)},t)}):i.apply(this,arguments)}),disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(t+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,n=w(this[0]);n.length&&n[0]!==document;){if(("absolute"===(t=n.css("position"))||"relative"===t||"fixed"===t)&&(t=parseInt(n.css("zIndex"),10),!isNaN(t))&&0!==t)return t;n=n.parent()}return 0}}),w.ui.plugin={add:function(e,t,n){var a,i=w.ui[e].prototype;for(a in n)i.plugins[a]=i.plugins[a]||[],i.plugins[a].push([t,n[a]])},call:function(e,t,n,a){var i,r=e.plugins[t];if(r&&(a||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;r.length>i;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},w.extend(w.ui,{datepicker:{version:"1.11.4"}}),w.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return l(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var n,a=e.nodeName.toLowerCase(),i="div"===a||"span"===a;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(n=this._newInst(w(e),i)).settings=w.extend({},t||{}),"input"===a?this._connectDatepicker(e,n):i&&this._inlineDatepicker(e,n)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?n(w("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var n=w(e);t.append=w([]),t.trigger=w([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(t),w.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n,a=this._get(t,"appendText"),i=this._get(t,"isRTL");t.append&&t.append.remove(),a&&(t.append=w("<span class='"+this._appendClass+"'>"+a+"</span>"),e[i?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(a=this._get(t,"showOn"))&&"both"!==a||e.focus(this._showDatepicker),"button"!==a&&"both"!==a||(a=this._get(t,"buttonText"),n=this._get(t,"buttonImage"),t.trigger=w(this._get(t,"buttonImageOnly")?w("<img/>").addClass(this._triggerClass).attr({src:n,alt:a,title:a}):w("<button type='button'></button>").addClass(this._triggerClass).html(n?w("<img/>").attr({src:n,alt:a,title:a}):a)),e[i?"before":"after"](t.trigger),t.trigger.click(function(){return w.datepicker._datepickerShowing&&w.datepicker._lastInput===e[0]?w.datepicker._hideDatepicker():(w.datepicker._datepickerShowing&&w.datepicker._lastInput!==e[0]&&w.datepicker._hideDatepicker(),w.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){var t,n,a,i,r,o;this._get(e,"autoSize")&&!e.inline&&(r=new Date(2009,11,20),(o=this._get(e,"dateFormat")).match(/[DM]/)&&(r.setMonth((t=function(e){for(i=a=n=0;e.length>i;i++)e[i].length>n&&(n=e[i].length,a=i);return a})(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length))},_inlineDatepicker:function(e,t){var n=w(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv),w.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,a,i){var r,o=this._dialogInst;return o||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=w("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),w("body").append(this._dialogInput),(o=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},w.data(this._dialogInput[0],"datepicker",o)),l(o.settings,a||{}),t=t&&t.constructor===Date?this._formatDate(o,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null,this._pos||(r=document.documentElement.clientWidth,a=document.documentElement.clientHeight,t=document.documentElement.scrollLeft||document.body.scrollLeft,i=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[r/2-100+t,a/2-150+i]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),w.blockUI&&w.blockUI(this.dpDiv),w.data(this._dialogInput[0],"datepicker",o),this},_destroyDatepicker:function(e){var t,n=w(e),a=w.data(e,"datepicker");n.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),w.removeData(e,"datepicker"),"input"===t?(a.append.remove(),a.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||n.removeClass(this.markerClassName).empty(),d===a)&&(d=null)},_enableDatepicker:function(t){var e,n=w(t),a=w.data(t,"datepicker");n.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((a=n.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=w.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,n=w(t),a=w.data(t,"datepicker");n.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((a=n.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=w.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(e)for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return w.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var a,i,r,o,s=this._getInst(e);return 2===arguments.length&&"string"==typeof t?"defaults"===t?w.extend({},w.datepicker._defaults):s?"all"===t?w.extend({},s.settings):this._get(s,t):null:(a=t||{},"string"==typeof t&&((a={})[t]=n),void(s&&(this._curInst===s&&this._hideDatepicker(),i=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(s,"min"),o=this._getMinMaxDate(s,"max"),l(s.settings,a),null!==r&&void 0!==a.dateFormat&&void 0===a.minDate&&(s.settings.minDate=this._formatDate(s,r)),null!==o&&void 0!==a.dateFormat&&void 0===a.maxDate&&(s.settings.maxDate=this._formatDate(s,o)),"disabled"in a&&(a.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(w(e),s),this._autoSize(s),this._setDate(s,i),this._updateAlternate(s),this._updateDatepicker(s))))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){e=this._getInst(e);e&&this._updateDatepicker(e)},_setDateDatepicker:function(e,t){e=this._getInst(e);e&&(this._setDate(e,t),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(e,t){e=this._getInst(e);return e&&!e.inline&&this._setDateFromField(e,t),e?this._getDate(e):null},_doKeyDown:function(e){var t,n,a=w.datepicker._getInst(e.target),i=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,w.datepicker._datepickerShowing)switch(e.keyCode){case 9:w.datepicker._hideDatepicker(),i=!1;break;case 13:return(n=w("td."+w.datepicker._dayOverClass+":not(."+w.datepicker._currentClass+")",a.dpDiv))[0]&&w.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,n[0]),(n=w.datepicker._get(a,"onSelect"))?(t=w.datepicker._formatDate(a),n.apply(a.input?a.input[0]:null,[t,a])):w.datepicker._hideDatepicker(),!1;case 27:w.datepicker._hideDatepicker();break;case 33:w.datepicker._adjustDate(e.target,e.ctrlKey?-w.datepicker._get(a,"stepBigMonths"):-w.datepicker._get(a,"stepMonths"),"M");break;case 34:w.datepicker._adjustDate(e.target,e.ctrlKey?+w.datepicker._get(a,"stepBigMonths"):+w.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&w.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&w.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&w.datepicker._adjustDate(e.target,r?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&w.datepicker._adjustDate(e.target,e.ctrlKey?-w.datepicker._get(a,"stepBigMonths"):-w.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&w.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&w.datepicker._adjustDate(e.target,r?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&w.datepicker._adjustDate(e.target,e.ctrlKey?+w.datepicker._get(a,"stepBigMonths"):+w.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&w.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36===e.keyCode&&e.ctrlKey?w.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,n=w.datepicker._getInst(e.target);return w.datepicker._get(n,"constrainInput")?(n=w.datepicker._possibleChars(w.datepicker._get(n,"dateFormat")),t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||t<" "||!n||-1<n.indexOf(t)):void 0},_doKeyUp:function(e){e=w.datepicker._getInst(e.target);if(e.input.val()!==e.lastVal)try{w.datepicker.parseDate(w.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,w.datepicker._getFormatConfig(e))&&(w.datepicker._setDateFromField(e),w.datepicker._updateAlternate(e),w.datepicker._updateDatepicker(e))}catch(e){}return!0},_showDatepicker:function(e){var t,n,a,i;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=w("input",e.parentNode)[0]),w.datepicker._isDisabledDatepicker(e)||w.datepicker._lastInput===e||(i=w.datepicker._getInst(e),w.datepicker._curInst&&w.datepicker._curInst!==i&&(w.datepicker._curInst.dpDiv.stop(!0,!0),i)&&w.datepicker._datepickerShowing&&w.datepicker._hideDatepicker(w.datepicker._curInst.input[0]),!1!==(n=(n=w.datepicker._get(i,"beforeShow"))?n.apply(e,[e,i]):{})&&(l(i.settings,n),i.lastVal=null,w.datepicker._lastInput=e,w.datepicker._setDateFromField(i),w.datepicker._inDialog&&(e.value=""),w.datepicker._pos||(w.datepicker._pos=w.datepicker._findPos(e),w.datepicker._pos[1]+=e.offsetHeight),t=!1,w(e).parents().each(function(){return!(t|="fixed"===w(this).css("position"))}),n={left:w.datepicker._pos[0],top:w.datepicker._pos[1]},w.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),w.datepicker._updateDatepicker(i),n=w.datepicker._checkOffset(i,n,t),i.dpDiv.css({position:w.datepicker._inDialog&&w.blockUI?"static":t?"fixed":"absolute",display:"none",left:n.left+"px",top:n.top+"px"}),i.inline||(n=w.datepicker._get(i,"showAnim"),a=w.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(e){for(var t;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(t=parseInt(e.css("zIndex"),10),!isNaN(t))&&0!==t)return t;e=e.parent()}return 0}(w(e))+1),w.datepicker._datepickerShowing=!0,w.effects&&w.effects.effect[n]?i.dpDiv.show(n,w.datepicker._get(i,"showOptions"),a):i.dpDiv[n||"show"](n?a:null),w.datepicker._shouldFocusInput(i)&&i.input.focus(),w.datepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,(d=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,n=this._getNumberOfMonths(e),a=n[1],i=e.dpDiv.find("."+this._dayOverClass+" a");0<i.length&&r.apply(i.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<a&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===w.datepicker._curInst&&w.datepicker._datepickerShowing&&w.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,n){var a=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(n?0:w(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:w(document).scrollTop());return t.left-=this._get(e,"isRTL")?a-r:0,t.left-=n&&t.left===e.input.offset().left?w(document).scrollLeft():0,t.top-=n&&t.top===e.input.offset().top+o?w(document).scrollTop():0,t.left-=Math.min(t.left,t.left+a>s&&a<s?Math.abs(t.left+a-s):0),t.top-=Math.min(t.top,t.top+i>l&&i<l?Math.abs(i+o):0),t},_findPos:function(e){for(var t=this._getInst(e),n=this._get(t,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||w.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return[(t=w(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,n,a=this._curInst;!a||e&&a!==w.data(e,"datepicker")||this._datepickerShowing&&(e=this._get(a,"showAnim"),n=this._get(a,"duration"),t=function(){w.datepicker._tidyDialog(a)},w.effects&&(w.effects.effect[e]||w.effects[e])?a.dpDiv.hide(e,w.datepicker._get(a,"showOptions"),n,t):a.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?n:null,t),e||t(),this._datepickerShowing=!1,(n=this._get(a,"onClose"))&&n.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),w.blockUI)&&(w.unblockUI(),w("body").append(this.dpDiv)),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){var t;w.datepicker._curInst&&(e=w(e.target),t=w.datepicker._getInst(e[0]),!(e[0].id===w.datepicker._mainDivId||0!==e.parents("#"+w.datepicker._mainDivId).length||e.hasClass(w.datepicker.markerClassName)||e.closest("."+w.datepicker._triggerClass).length||!w.datepicker._datepickerShowing||w.datepicker._inDialog&&w.blockUI)||e.hasClass(w.datepicker.markerClassName)&&w.datepicker._curInst!==t)&&w.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var e=w(e),a=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(a,t+("M"===n?this._get(a,"showCurrentAtPos"):0),n),this._updateDatepicker(a))},_gotoToday:function(e){var t,e=w(e),n=this._getInst(e[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(t=new Date,n.selectedDay=t.getDate(),n.drawMonth=n.selectedMonth=t.getMonth(),n.drawYear=n.selectedYear=t.getFullYear()),this._notifyChange(n),this._adjustDate(e)},_selectMonthYear:function(e,t,n){var e=w(e),a=this._getInst(e[0]);a["selected"+("M"===n?"Month":"Year")]=a["draw"+("M"===n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(e)},_selectDay:function(e,t,n,a){var i=w(e);w(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0])||((i=this._getInst(i[0])).selectedDay=i.currentDay=w("a",a).html(),i.selectedMonth=i.currentMonth=t,i.selectedYear=i.currentYear=n,this._selectDate(e,this._formatDate(i,i.currentDay,i.currentMonth,i.currentYear)))},_clearDate:function(e){e=w(e);this._selectDate(e,"")},_selectDate:function(e,t){var n,e=w(e),e=this._getInst(e[0]);t=null!=t?t:this._formatDate(e),e.input&&e.input.val(t),this._updateAlternate(e),(n=this._get(e,"onSelect"))?n.apply(e.input?e.input[0]:null,[t,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t,n,a,i=this._get(e,"altField");i&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),a=this.formatDate(t,n,this._getFormatConfig(e)),w(i).each(function(){w(this).val(a)}))},noWeekends:function(e){e=e.getDay();return[0<e&&e<6,""]},iso8601Week:function(e){var t,e=new Date(e.getTime());return e.setDate(e.getDate()+4-(e.getDay()||7)),t=e.getTime(),e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(t,i,e){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?""+i:i+""))return null;function n(e){var t=y(e),t="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,e=RegExp("^\\d{"+("y"===e?t:1)+","+t+"}");if(t=i.substring(l).match(e))return l+=t[0].length,parseInt(t[0],10);throw"Missing number at position "+l}function a(e,t,n){var a=-1,e=w.map(y(e)?n:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(w.each(e,function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(a=t[0],l+=n.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+l}function r(){if(i.charAt(l)!==t.charAt(b))throw"Unexpected literal at position "+l;l++}for(var o,s,l=0,c=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,u=(e?e.dayNames:null)||this._defaults.dayNames,h=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,f=-1,m=-1,g=-1,v=-1,C=!1,y=function(e){e=t.length>b+1&&t.charAt(b+1)===e;return e&&b++,e},b=0;t.length>b;b++)if(C)"'"!==t.charAt(b)||y("'")?r():C=!1;else switch(t.charAt(b)){case"d":g=n("d");break;case"D":a("D",d,u);break;case"o":v=n("o");break;case"m":m=n("m");break;case"M":m=a("M",h,p);break;case"y":f=n("y");break;case"@":f=(s=new Date(n("@"))).getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"!":f=(s=new Date((n("!")-this._ticksTo1970)/1e4)).getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"'":y("'")?r():C=!0;break;default:r()}if(i.length>l&&(e=i.substr(l),!/^\s+/.test(e)))throw"Extra/unparsed characters found in date: "+e;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=c?0:-100)),-1<v)for(m=1,g=v;!(g<=(o=this._getDaysInMonth(f,m-1)));)m++,g-=o;if((s=this._daylightSavingAdjust(new Date(f,m-1,g))).getFullYear()!==f||s.getMonth()+1!==m||s.getDate()!==g)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,n){if(!e)return"";function a(e,t,n){var a=""+t;if(d(e))for(;n>a.length;)a="0"+a;return a}function i(e,t,n,a){return(d(e)?a:n)[t]}var r,o=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,l=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,c=(n?n.monthNames:null)||this._defaults.monthNames,d=function(e){e=t.length>r+1&&t.charAt(r+1)===e;return e&&r++,e},u="",h=!1;if(e)for(r=0;t.length>r;r++)if(h)"'"!==t.charAt(r)||d("'")?u+=t.charAt(r):h=!1;else switch(t.charAt(r)){case"d":u+=a("d",e.getDate(),2);break;case"D":u+=i("D",e.getDay(),o,s);break;case"o":u+=a("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=a("m",e.getMonth()+1,2);break;case"M":u+=i("M",e.getMonth(),l,c);break;case"y":u+=d("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":d("'")?u+="'":h=!0;break;default:u+=t.charAt(r)}return u},_possibleChars:function(t){function e(e){return(e=t.length>i+1&&t.charAt(i+1)===e)&&i++,e}for(var n="",a=!1,i=0;t.length>i;i++)if(a)"'"!==t.charAt(i)||e("'")?n+=t.charAt(i):a=!1;else switch(t.charAt(i)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":e("'")?n+="'":a=!0;break;default:n+=t.charAt(i)}return n},_get:function(e,t){return(void 0!==e.settings[t]?e.settings:this._defaults)[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),a=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),r=i,o=this._getFormatConfig(e);try{r=this.parseDate(n,a,o)||i}catch(e){a=t?"":a}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=a?r.getDate():0,e.currentMonth=a?r.getMonth():0,e.currentYear=a?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(s,e,t){var n,a=null==e||""===e?t:"string"==typeof e?function(e){try{return w.datepicker.parseDate(w.datepicker._get(s,"dateFormat"),e,w.datepicker._getFormatConfig(s))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?w.datepicker._getDate(s):null)||new Date,n=t.getFullYear(),a=t.getMonth(),i=t.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,o=r.exec(e);o;){switch(o[2]||"d"){case"d":case"D":i+=parseInt(o[1],10);break;case"w":case"W":i+=7*parseInt(o[1],10);break;case"m":case"M":a+=parseInt(o[1],10),i=Math.min(i,w.datepicker._getDaysInMonth(n,a));break;case"y":case"Y":n+=parseInt(o[1],10),i=Math.min(i,w.datepicker._getDaysInMonth(n,a))}o=r.exec(e)}return new Date(n,a,i)}(e):"number"==typeof e?isNaN(e)?t:(a=e,(n=new Date).setDate(n.getDate()+a),n):new Date(e.getTime());return(a=a&&"Invalid Date"==""+a?t:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var a=!t,i=e.selectedMonth,r=e.selectedYear,t=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),i===e.selectedMonth&&r===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){w.datepicker._adjustDate(n,-t,"M")},next:function(){w.datepicker._adjustDate(n,+t,"M")},hide:function(){w.datepicker._hideDatepicker()},today:function(){w.datepicker._gotoToday(n)},selectDay:function(){return w.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return w.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return w.datepicker._selectMonthYear(n,this,"Y"),!1}};w(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,a,i,r,E,L,U,N,o,s,O,l,c,d,u,h,p,f,m,g,v,B,C,y,b,w,q,H,S,k,M,j=new Date,V=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),x=this._get(e,"isRTL"),j=this._get(e,"showButtonPanel"),T=this._get(e,"hideIfNoPrevNext"),A=this._get(e,"navigationAsDateFormat"),D=this._getNumberOfMonths(e),I=this._get(e,"showCurrentAtPos"),_=this._get(e,"stepMonths"),W=1!==D[0]||1!==D[1],J=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),R=this._getMinMaxDate(e,"min"),P=this._getMinMaxDate(e,"max"),F=e.drawMonth-I,$=e.drawYear;if(F<0&&(F+=12,$--),P)for(t=this._daylightSavingAdjust(new Date(P.getFullYear(),P.getMonth()-D[0]*D[1]+1,P.getDate())),t=R&&t<R?R:t;this._daylightSavingAdjust(new Date($,F,1))>t;)--F<0&&(F=11,$--);for(e.drawMonth=F,e.drawYear=$,I=this._get(e,"prevText"),I=A?this.formatDate(I,this._daylightSavingAdjust(new Date($,F-_,1)),this._getFormatConfig(e)):I,n=this._canAdjustMonth(e,-1,$,F)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+I+"'><span class='ui-icon ui-icon-circle-triangle-"+(x?"e":"w")+"'>"+I+"</span></a>":T?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+I+"'><span class='ui-icon ui-icon-circle-triangle-"+(x?"e":"w")+"'>"+I+"</span></a>",I=this._get(e,"nextText"),I=A?this.formatDate(I,this._daylightSavingAdjust(new Date($,F+_,1)),this._getFormatConfig(e)):I,a=this._canAdjustMonth(e,1,$,F)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+I+"'><span class='ui-icon ui-icon-circle-triangle-"+(x?"w":"e")+"'>"+I+"</span></a>":T?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+I+"'><span class='ui-icon ui-icon-circle-triangle-"+(x?"w":"e")+"'>"+I+"</span></a>",_=this._get(e,"currentText"),T=this._get(e,"gotoCurrent")&&e.currentDay?J:V,_=A?this.formatDate(_,T,this._getFormatConfig(e)):_,I=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",A=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(x?I:"")+(this._isInRange(e,T)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+_+"</button>":"")+(x?"":I)+"</div>":"",i=parseInt(this._get(e,"firstDay"),10),i=isNaN(i)?0:i,r=this._get(e,"showWeek"),E=this._get(e,"dayNames"),L=this._get(e,"dayNamesMin"),U=this._get(e,"monthNames"),N=this._get(e,"monthNamesShort"),o=this._get(e,"beforeShowDay"),s=this._get(e,"showOtherMonths"),O=this._get(e,"selectOtherMonths"),l=this._getDefaultDate(e),c="",u=0;D[0]>u;u++){for(h="",this.maxRows=4,p=0;D[1]>p;p++){if(f=this._daylightSavingAdjust(new Date($,F,e.selectedDay)),m=" ui-corner-all",g="",W){if(g+="<div class='ui-datepicker-group",1<D[1])switch(p){case 0:g+=" ui-datepicker-group-first",m=" ui-corner-"+(x?"right":"left");break;case D[1]-1:g+=" ui-datepicker-group-last",m=" ui-corner-"+(x?"left":"right");break;default:g+=" ui-datepicker-group-middle",m=""}g+="'>"}for(g+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+m+"'>"+(/all|left/.test(m)&&0===u?x?a:n:"")+(/all|right/.test(m)&&0===u?x?n:a:"")+this._generateMonthYearHeader(e,F,$,R,P,0<u||0<p,U,N)+"</div><table class='ui-datepicker-calendar'><thead><tr>",v=r?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",d=0;d<7;d++)v+="<th scope='col'"+(5<=(d+i+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+E[B=(d+i)%7]+"'>"+L[B]+"</span></th>";for(g+=v+"</tr></thead><tbody>",y=this._getDaysInMonth($,F),$===e.selectedYear&&F===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,y)),C=(this._getFirstDayOfMonth($,F)-i+7)%7,y=Math.ceil((C+y)/7),b=W&&this.maxRows>y?this.maxRows:y,this.maxRows=b,w=this._daylightSavingAdjust(new Date($,F,1-C)),q=0;q<b;q++){for(g+="<tr>",H=r?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(w)+"</td>":"",d=0;d<7;d++)S=o?o.apply(e.input?e.input[0]:null,[w]):[!0,""],M=(k=w.getMonth()!==F)&&!O||!S[0]||R&&w<R||P&&P<w,H+="<td class='"+(5<=(d+i+6)%7?" ui-datepicker-week-end":"")+(k?" ui-datepicker-other-month":"")+(w.getTime()===f.getTime()&&F===e.selectedMonth&&e._keyEvent||l.getTime()===w.getTime()&&l.getTime()===f.getTime()?" "+this._dayOverClass:"")+(M?" "+this._unselectableClass+" ui-state-disabled":"")+(k&&!s?"":" "+S[1]+(w.getTime()===J.getTime()?" "+this._currentClass:"")+(w.getTime()===V.getTime()?" ui-datepicker-today":""))+"'"+(k&&!s||!S[2]?"":" title='"+S[2].replace(/'/g,"&#39;")+"'")+(M?"":" data-handler='selectDay' data-event='click' data-month='"+w.getMonth()+"' data-year='"+w.getFullYear()+"'")+">"+(k&&!s?"&#xa0;":M?"<span class='ui-state-default'>"+w.getDate()+"</span>":"<a class='ui-state-default"+(w.getTime()===V.getTime()?" ui-state-highlight":"")+(w.getTime()===J.getTime()?" ui-state-active":"")+(k?" ui-priority-secondary":"")+"' href='#'>"+w.getDate()+"</a>")+"</td>",w.setDate(w.getDate()+1),w=this._daylightSavingAdjust(w);g+=H+"</tr>"}11<++F&&(F=0,$++),h+=g+="</tbody></table>"+(W?"</div>"+(0<D[0]&&p===D[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}c+=h}return c+=A,e._keyEvent=!1,c},_generateMonthYearHeader:function(e,t,n,a,i,r,o,s){var l,c,d,u,h,p,f,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),C="<div class='ui-datepicker-title'>",y="";if(r||!m)y+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=a&&a.getFullYear()===n,c=i&&i.getFullYear()===n,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=a.getMonth())&&(!c||i.getMonth()>=d)&&(y+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+s[d]+"</option>");y+="</select>"}if(v||(C+=y+(!r&&m&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!g)C+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(o=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),p=(h=function(e){e=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(e)?u:e})(o[0]),f=Math.max(p,h(o[1]||"")),p=a?Math.max(p,a.getFullYear()):p,f=i?Math.min(f,i.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=f;p++)e.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",C+=e.yearshtml,e.yearshtml=null}return C+=this._get(e,"yearSuffix"),v&&(C+=(!r&&m&&g?"":"&#xa0;")+y),C+"</div>"},_adjustInstDate:function(e,t,n){var a=e.drawYear+("Y"===n?t:0),i=e.drawMonth+("M"===n?t:0),t=Math.min(e.selectedDay,this._getDaysInMonth(a,i))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,i,t)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),e=this._getMinMaxDate(e,"max"),n=n&&t<n?n:t;return e&&e<n?e:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){e=this._get(e,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,a){var i=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(n,a+(t<0?t:i[0]*i[1]),1));return t<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var n,a=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=null,o=null,e=this._get(e,"yearRange");return e&&(e=e.split(":"),n=(new Date).getFullYear(),r=parseInt(e[0],10),o=parseInt(e[1],10),e[0].match(/[+\-].*/)&&(r+=n),e[1].match(/[+\-].*/))&&(o+=n),(!a||t.getTime()>=a.getTime())&&(!i||t.getTime()<=i.getTime())&&(!r||t.getFullYear()>=r)&&(!o||o>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:"string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),w.fn.datepicker=function(e){if(!this.length)return this;w.datepicker.initialized||(w(document).mousedown(w.datepicker._checkExternalClick),w.datepicker.initialized=!0),0===w("#"+w.datepicker._mainDivId).length&&w("body").append(w.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?w.datepicker["_"+e+"Datepicker"].apply(w.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?w.datepicker["_"+e+"Datepicker"].apply(w.datepicker,[this].concat(t)):w.datepicker._attachDatepicker(this,e)})},w.datepicker=new e,w.datepicker.initialized=!1,w.datepicker.uuid=(new Date).getTime(),w.datepicker.version="1.11.4",w.datepicker}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(ye){ye.fn.jScrollPane=function(n){function a(b,e){function ne(e){var t,n,a,i,r,o,s,l,c,d,u,h,p,f,m,g,v=!1,C=!1;if(D=e,void 0===I)i=b.scrollTop(),r=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),_=b.innerWidth()+te,R=b.innerHeight(),b.width(_),I=ye('<div class="jspPane" />').css("padding",ge).append(b.children()),P=ye('<div class="jspContainer" />').css({width:_+"px",height:R+"px"}).append(I).appendTo(b);else{if(b.css("width",""),v=D.stickToBottom&&20<(o=$-R)&&o-T()<10,C=D.stickToRight&&20<(o=F-_)&&o-x()<10,(a=b.innerWidth()+te!=_||b.outerHeight()!=R)&&(_=b.innerWidth()+te,R=b.innerHeight(),P.css({width:_+"px",height:R+"px"})),!a&&ve==F&&I.outerHeight()==$)return b.width(_);ve=F,I.css("width",""),b.width(_),P.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}(I.css("overflow","auto"),F=e.contentWidth||I[0].scrollWidth,$=I[0].scrollHeight,I.css("overflow",""),E=1<(he=$/R),(L=1<(ue=F/_))||E)?(b.addClass("jspScrollable"),(a=D.maintainPosition&&(O||H))&&(t=x(),n=T()),E&&(P.append(ye('<div class="jspVerticalBar" />').append(ye('<div class="jspCap jspCapTop" />'),ye('<div class="jspTrack" />').append(ye('<div class="jspDrag" />').append(ye('<div class="jspDragTop" />'),ye('<div class="jspDragBottom" />'))),ye('<div class="jspCap jspCapBottom" />'))),pe=P.find(">.jspVerticalBar"),V=pe.find(">.jspTrack"),U=V.find(">.jspDrag"),D.showArrows&&(z=ye('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",w(0,-1)).bind("click.jsp",A),Q=ye('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",w(0,1)).bind("click.jsp",A),D.arrowScrollOnHover&&(z.bind("mouseover.jsp",w(0,-1,z)),Q.bind("mouseover.jsp",w(0,1,Q))),re(V,D.verticalArrowPositions,z,Q)),W=R,P.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){W-=ye(this).outerHeight()}),U.hover(function(){U.addClass("jspHover")},function(){U.removeClass("jspHover")}).bind("mousedown.jsp",function(e){ye("html").bind("dragstart.jsp selectstart.jsp",A),U.addClass("jspActive");var t=e.pageY-U.position().top;return ye("html").bind("mousemove.jsp",function(e){S(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",se),!1}),ae()),L&&(P.append(ye('<div class="jspHorizontalBar" />').append(ye('<div class="jspCap jspCapLeft" />'),ye('<div class="jspTrack" />').append(ye('<div class="jspDrag" />').append(ye('<div class="jspDragLeft" />'),ye('<div class="jspDragRight" />'))),ye('<div class="jspCap jspCapRight" />'))),fe=P.find(">.jspHorizontalBar"),Y=fe.find(">.jspTrack"),B=Y.find(">.jspDrag"),D.showArrows&&(X=ye('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",w(-1,0)).bind("click.jsp",A),me=ye('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",w(1,0)).bind("click.jsp",A),D.arrowScrollOnHover&&(X.bind("mouseover.jsp",w(-1,0,X)),me.bind("mouseover.jsp",w(1,0,me))),re(Y,D.horizontalArrowPositions,X,me)),B.hover(function(){B.addClass("jspHover")},function(){B.removeClass("jspHover")}).bind("mousedown.jsp",function(e){ye("html").bind("dragstart.jsp selectstart.jsp",A),B.addClass("jspActive");var t=e.pageX-B.position().left;return ye("html").bind("mousemove.jsp",function(e){k(e.pageX-t,!1)}).bind("mouseup.jsp mouseleave.jsp",se),!1}),G=P.innerWidth(),ie()),L&&E&&(e=Y.outerHeight(),s=V.outerWidth(),W-=e,ye(fe).find(">.jspCap:visible,>.jspArrow").each(function(){G+=ye(this).outerWidth()}),G-=s,R-=s,_-=e,Y.parent().append(ye('<div class="jspCorner" />').css("width",e+"px")),ae(),ie()),L&&I.width(P.outerWidth()-te+"px"),$=I.outerHeight(),he=$/R,L&&((K=Math.ceil(1/ue*G))>D.horizontalDragMaxWidth?K=D.horizontalDragMaxWidth:K<D.horizontalDragMinWidth&&(K=D.horizontalDragMinWidth),B.width(K+"px"),q=G-K,ce(H)),E&&((J=Math.ceil(1/he*W))>D.verticalDragMaxHeight?J=D.verticalDragMaxHeight:J<D.verticalDragMinHeight&&(J=D.verticalDragMinHeight),U.height(J+"px"),N=W-J,le(O)),a&&(j(C?F-_:t,!1),M(v?$-R:n,!1)),I.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){de(e.target,!1)}),P.unbind(Ce).bind(Ce,function(e,t,n,a){var i=H=H||0,r=O=O||0,e=e.deltaFactor||D.mouseWheelSpeed;return ee.scrollBy(n*e,-a*e,!1),i==H&&r==O}),g=!1,P.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){e=e.originalEvent.touches[0];u=x(),h=T(),p=e.pageX,f=e.pageY,g=!(m=!1)}).bind("touchmove.jsp",function(e){var t,n;if(g)return e=e.originalEvent.touches[0],t=H,n=O,ee.scrollTo(u+p-e.pageX,h+f-e.pageY),m=m||5<Math.abs(p-e.pageX)||5<Math.abs(f-e.pageY),t==H&&n==O}).bind("touchend.jsp",function(){g=!1}).bind("click.jsp-touchclick",function(){return m?m=!1:void 0}),D.enableKeyboardNavigation&&(d=[],L&&d.push(fe[0]),E&&d.push(pe[0]),I.bind("focus.jsp",function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||d.length&&ye(e.target).closest(d).length){var t=H,n=O;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:l=e.keyCode,y();break;case 35:M($-R),l=null;break;case 36:M(0),l=null}return!(c=e.keyCode==l&&t!=H||n!=O)}}).bind("keypress.jsp",function(e){return e.keyCode==l&&y(),e.target===this||d.length&&ye(e.target).closest(d).length?!c:void 0}),D.hideFocus?(b.css("outline","none"),"hideFocus"in P[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in P[0]&&b.attr("hideFocus",!1))),D.clickOnTrack&&(oe(),E&&V.bind("mousedown.jsp",function(a){var i,r,e,o,s,l,c;if(void 0===a.originalTarget||a.originalTarget==a.currentTarget)return e=(r=ye(this)).offset(),o=a.pageY-e.top-O,s=!0,c=function(){i&&clearTimeout(i),i=null,ye(document).unbind("mouseup.jsp",c)},(l=function(){var e=r.offset(),e=a.pageY-e.top-J/2,t=R*D.scrollPagePercent,n=N*t/($-R);if(o<0)e<O-n?ee.scrollByY(-t):S(e);else{if(!(0<o))return void c();O+n<e?ee.scrollByY(t):S(e)}i=setTimeout(l,s?D.initialDelay:D.trackClickRepeatFreq),s=!1})(),ye(document).bind("mouseup.jsp",c),!1}),L)&&Y.bind("mousedown.jsp",function(a){var i,r,e,o,s,l,c;if(void 0===a.originalTarget||a.originalTarget==a.currentTarget)return e=(r=ye(this)).offset(),o=a.pageX-e.left-H,s=!0,c=function(){i&&clearTimeout(i),i=null,ye(document).unbind("mouseup.jsp",c)},(l=function(){var e=r.offset(),e=a.pageX-e.left-K/2,t=_*D.scrollPagePercent,n=q*t/(F-_);if(o<0)e<H-n?ee.scrollByX(-t):k(e);else{if(!(0<o))return void c();H+n<e?ee.scrollByX(t):k(e)}i=setTimeout(l,s?D.initialDelay:D.trackClickRepeatFreq),s=!1})(),ye(document).bind("mouseup.jsp",c),!1}),function(){if(location.hash&&1<location.hash.length){var e,t,n=escape(location.hash.substr(1));try{e=ye("#"+n+', a[name="'+n+'"]')}catch(e){return}e.length&&I.find(n)&&(0===P.scrollTop()?t=setInterval(function(){0<P.scrollTop()&&(de(e,!0),ye(document).scrollTop(P.position().top),clearInterval(t))},50):(de(e,!0),ye(document).scrollTop(P.position().top)))}}(),D.hijackInternalLinks&&!ye(document.body).data("jspHijack")&&(ye(document.body).data("jspHijack",!0),ye(document.body).delegate('a[href*="#"]',"click",function(e){var t,n=this.href.substr(0,this.href.indexOf("#")),a=location.href;if(n===(a=-1!==location.href.indexOf("#")?location.href.substr(0,location.href.indexOf("#")):a)){n=escape(this.href.substr(this.href.indexOf("#")+1));try{t=ye("#"+n+', a[name="'+n+'"]')}catch(e){return}t.length&&((a=t.closest(".jspScrollable")).data("jsp").scrollToElement(t,!0),a[0].scrollIntoView&&(n=ye(window).scrollTop(),(t=t.offset().top)<n||t>n+ye(window).height())&&a[0].scrollIntoView(),e.preventDefault())}}))):(b.removeClass("jspScrollable"),I.css({top:0,left:0,width:P.width()-te}),P.unbind(Ce),I.find(":input,a").unbind("focus.jsp"),b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),I.unbind(".jsp"),oe());function y(){var e=H,t=O;switch(l){case 40:ee.scrollByY(D.keyboardSpeed,!1);break;case 38:ee.scrollByY(-D.keyboardSpeed,!1);break;case 34:case 32:ee.scrollByY(R*D.scrollPagePercent,!1);break;case 33:ee.scrollByY(-R*D.scrollPagePercent,!1);break;case 39:ee.scrollByX(D.keyboardSpeed,!1);break;case 37:ee.scrollByX(-D.keyboardSpeed,!1)}c=e!=H||t!=O}D.autoReinitialise&&!Z?Z=setInterval(function(){ne(D)},D.autoReinitialiseDelay):!D.autoReinitialise&&Z&&clearInterval(Z),i&&b.scrollTop(0)&&M(i,!1),r&&b.scrollLeft(0)&&j(r,!1),b.trigger("jsp-initialised",[L||E])}function ae(){V.height(W+"px"),O=0,t=D.verticalGutter+V.outerWidth(),I.width(_-t-te);try{0===pe.position().left&&I.css("margin-left",t+"px")}catch(e){}}function ie(){P.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){G-=ye(this).outerWidth()}),Y.width(G+"px"),H=0}function re(e,t,n,a){var i="before",r="after";(t="os"==t?/Mac/.test(navigator.platform)?"after":"split":t)==i?r=t:t==r&&(i=t,t=n,n=a,a=t),e[i](n)[r](a)}function w(l,c,d){return function(){return t=l,n=c,i=d,a=ye(a=this).addClass("jspActive"),s=!0,e(),r=i?"mouseout.jsp":"mouseup.jsp",(i=i||ye("html")).bind(r,function(){a.removeClass("jspActive"),o&&clearTimeout(o),o=null,i.unbind(r)}),this.blur(),!1;function e(){0!==t&&ee.scrollByX(t*D.arrowButtonSpeed),0!==n&&ee.scrollByY(n*D.arrowButtonSpeed),o=setTimeout(e,s?D.initialDelay:D.arrowRepeatFreq),s=!1}var t,n,a,i,r,o,s}}function oe(){Y&&Y.unbind("mousedown.jsp"),V&&V.unbind("mousedown.jsp")}function se(){ye("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),U&&U.removeClass("jspActive"),B&&B.removeClass("jspActive")}function S(e,t){var n,a,i,r;E&&(e<0?e=0:N<e&&(e=N),n=new ye.Event("jsp-will-scroll-y"),b.trigger(n,[e]),n.isDefaultPrevented()||(a=0===(n=e||0),i=n==N,r=-(e/N)*($-R),(t=void 0===t?D.animateScroll:t)?ee.animate(U,"top",e,le,function(){b.trigger("jsp-user-scroll-y",[-r,a,i])}):(U.css("top",e),le(e),b.trigger("jsp-user-scroll-y",[-r,a,i]))))}function le(e){void 0===e&&(e=U.position().top),P.scrollTop(0);var t,n,a=0===(O=e||0),i=O==N,e=-(e/N)*($-R);r==a&&s==i||(r=a,s=i,b.trigger("jsp-arrow-change",[r,s,o,l])),t=a,n=i,D.showArrows&&(z[t?"addClass":"removeClass"]("jspDisabled"),Q[n?"addClass":"removeClass"]("jspDisabled")),I.css("top",e),b.trigger("jsp-scroll-y",[-e,a,i]).trigger("scroll")}function k(e,t){var n,a,i,r;L&&(e<0?e=0:q<e&&(e=q),n=new ye.Event("jsp-will-scroll-x"),b.trigger(n,[e]),n.isDefaultPrevented()||(a=0===(n=e||0),i=n==q,r=-(e/q)*(F-_),(t=void 0===t?D.animateScroll:t)?ee.animate(B,"left",e,ce,function(){b.trigger("jsp-user-scroll-x",[-r,a,i])}):(B.css("left",e),ce(e),b.trigger("jsp-user-scroll-x",[-r,a,i]))))}function ce(e){void 0===e&&(e=B.position().left),P.scrollTop(0);var t,n,a=0===(H=e||0),i=H==q,e=-(e/q)*(F-_);o==a&&l==i||(o=a,l=i,b.trigger("jsp-arrow-change",[r,s,o,l])),t=a,n=i,D.showArrows&&(X[t?"addClass":"removeClass"]("jspDisabled"),me[n?"addClass":"removeClass"]("jspDisabled")),I.css("left",e),b.trigger("jsp-scroll-x",[-e,a,i]).trigger("scroll")}function M(e,t){S(e/($-R)*N,t)}function j(e,t){k(e/(F-_)*q,t)}function de(e,t,n){var a,i,r,o,s,l,c=0,d=0;try{a=ye(e)}catch(e){return}for(e=a.outerHeight(),i=a.outerWidth(),P.scrollTop(0),P.scrollLeft(0);!a.is(".jspPane");)if(c+=a.position().top,d+=a.position().left,a=a.offsetParent(),/^body|html$/i.test(a[0].nodeName))return;o=(r=T())+R,c<r||t?s=c-D.horizontalGutter:o<c+e&&(s=c-R+e+D.horizontalGutter),isNaN(s)||M(s,n),o=(r=x())+_,d<r||t?l=d-D.horizontalGutter:o<d+i&&(l=d-_+i+D.horizontalGutter),isNaN(l)||j(l,n)}function x(){return-I.position().left}function T(){return-I.position().top}function A(){return!1}var D,I,_,R,P,F,$,ue,he,E,L,U,N,O,B,q,H,pe,V,t,W,J,z,Q,fe,Y,G,K,X,me,Z,ge,ve,ee=this,r=!0,o=!0,s=!1,l=!1,n=b.clone(!1,!1).empty(),Ce=ye.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",te="border-box"===b.css("box-sizing")?ge=0:(ge=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0));ye.extend(ee,{reinitialise:function(e){ne(e=ye.extend({},D,e))},scrollToElement:function(e,t,n){de(e,t,n)},scrollTo:function(e,t,n){j(e,n),M(t,n)},scrollToX:function(e,t){j(e,t)},scrollToY:function(e,t){M(e,t)},scrollToPercentX:function(e,t){j(e*(F-_),t)},scrollToPercentY:function(e,t){M(e*($-R),t)},scrollBy:function(e,t,n){ee.scrollByX(e,n),ee.scrollByY(t,n)},scrollByX:function(e,t){k((x()+Math[e<0?"floor":"ceil"](e))/(F-_)*q,t)},scrollByY:function(e,t){S((T()+Math[e<0?"floor":"ceil"](e))/($-R)*N,t)},positionDragX:function(e,t){k(e,t)},positionDragY:function(e,t){S(e,t)},animate:function(e,t,n,a,i){var r={};r[t]=n,e.animate(r,{duration:D.animateDuration,easing:D.animateEase,queue:!1,step:a,complete:i})},getContentPositionX:x,getContentPositionY:T,getContentWidth:function(){return F},getContentHeight:function(){return $},getPercentScrolledX:function(){return x()/(F-_)},getPercentScrolledY:function(){return T()/($-R)},getIsScrollableH:function(){return L},getIsScrollableV:function(){return E},getContentPane:function(){return I},scrollToBottom:function(e){S(N,e)},hijackInternalLinks:ye.noop,destroy:function(){var e,t;e=T(),t=x(),b.removeClass("jspScrollable").unbind(".jsp"),I.unbind(".jsp"),b.replaceWith(n.append(I.children())),n.scrollTop(e),n.scrollLeft(t),Z&&clearInterval(Z)}}),ne(e)}return n=ye.extend({},ye.fn.jScrollPane.defaults,n),ye.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var e=ye(this),t=e.data("jsp");t?t.reinitialise(n):(ye("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new a(e,n),e.data("jsp",t))})},ye.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(c){var d,u,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(c.event.fixHooks)for(var n=e.length;n;)c.event.fixHooks[e[--n]]=c.event.mouseHooks;var p=c.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],a,!1);else this.onmousewheel=a;c.data(this,"mousewheel-line-height",p.getLineHeight(this)),c.data(this,"mousewheel-page-height",p.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],a,!1);else this.onmousewheel=null;c.removeData(this,"mousewheel-line-height"),c.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var e=c(e),t=e["offsetParent"in c.fn?"offsetParent":"parent"]();return t.length||(t=c("body")),parseInt(t.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(e){return c(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function a(e){var t,n=e||window.event,a=h.call(arguments,1),i=0,r=0,o=0,s=0,l=0;if((e=c.event.fix(n)).type="mousewheel","detail"in n&&(o=-1*n.detail),"wheelDelta"in n&&(o=n.wheelDelta),"wheelDeltaY"in n&&(o=n.wheelDeltaY),"wheelDeltaX"in n&&(r=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(r=-1*o,o=0),i=0===o?r:o,"deltaY"in n&&(i=o=-1*n.deltaY),"deltaX"in n&&(r=n.deltaX,0===o)&&(i=-1*r),0!==o||0!==r)return 1===n.deltaMode?(i*=t=c.data(this,"mousewheel-line-height"),o*=t,r*=t):2===n.deltaMode&&(i*=t=c.data(this,"mousewheel-page-height"),o*=t,r*=t),t=Math.max(Math.abs(o),Math.abs(r)),(!u||t<u)&&m(n,u=t)&&(u/=40),m(n,t)&&(i/=40,r/=40,o/=40),i=Math[1<=i?"floor":"ceil"](i/u),r=Math[1<=r?"floor":"ceil"](r/u),o=Math[1<=o?"floor":"ceil"](o/u),p.settings.normalizeOffset&&this.getBoundingClientRect&&(n=this.getBoundingClientRect(),s=e.clientX-n.left,l=e.clientY-n.top),e.deltaX=r,e.deltaY=o,e.deltaFactor=u,e.offsetX=s,e.offsetY=l,e.deltaMode=0,a.unshift(e,i,r,o),d&&clearTimeout(d),d=setTimeout(f,200),(c.event.dispatch||c.event.handle).apply(this,a)}function f(){u=null}function m(e,t){return p.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}c.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});var SCM=SCM||{},SCM=(SCM.JqueryMigrateLogger=function(){var n,a,i=5e3,e=20,t=0;return{init:function(){var e,t;a=SCM.Logging.getLogger(),(n=$("[data-jquery-migrate-logging-enabled]"))&&n.length&&jQuery.migrateWarnings?(a.debug("jquery-migrate logging is enabled.  Attempting to initialize Application Insights."),(t=function(){var e;return(n||n.length)&&(e=n.data("jqueryMigrateInstrumentationKey"))?e.trim():""}())&&(t=t,e="appInsightsSDK",window[e]="appInsights",e=window[e],t=window[e]||function(t){function e(t){o[t]=function(){var e=arguments;o.queue.push(function(){o[t].apply(o,e)})}}var o={config:t,initialize:!0},n=document,a=window;setTimeout(function(){var e=n.createElement("script");e.src=t.url||"https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js",n.getElementsByTagName("script")[0].parentNode.appendChild(e)});try{o.cookie=n.cookie}catch(t){}o.queue=[],o.version=2;for(var s=["Event","PageView","Exception","Trace","DependencyData","Metric","PageViewPerformance"];s.length;)e("track"+s.pop());e("startTrackPage"),e("stopTrackPage");var l,i="Track"+s[0];return e("start"+i),e("stop"+i),e("setAuthenticatedUserContext"),e("clearAuthenticatedUserContext"),e("flush"),!0===t.disableExceptionTracking||t.extensionConfig&&t.extensionConfig.ApplicationInsightsAnalytics&&!0===t.extensionConfig.ApplicationInsightsAnalytics.disableExceptionTracking||(e("_"+(s="onerror")),l=a[s],a[s]=function(e,t,n,a,i){var r=l&&l(e,t,n,a,i);return!0!==r&&o["_"+s]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},t.autoExceptionInstrumented=!0),o}({instrumentationKey:t,disableAjaxTracking:!0}),window[e]=t,window.appInsights?setTimeout(r,i):a.warn("Application Insights failed to initialize."))):a.debug("jquery-migrate logging is disabled")}};function r(){jQuery.migrateWarnings&&jQuery.migrateWarnings.length&&(a.debug("Logging "+jQuery.migrateWarnings.length+" jquery-migrate warnings."),jQuery.migrateWarnings.forEach(function(e){a.debug(e),appInsights.trackEvent({name:"jquery-migrate-warning",properties:{host:window.location.hostname,url:window.location.href,warning:e}})}),jQuery.migrateReset()),++t<e&&setTimeout(r,i)}}(),SCM||{}),debounce=(SCM.RelatedObjectLinks=function(i){const t=["chapter","end-note","sec","target","part","supplementary-data","disp-formula","ref-list","corresp","author-notes","fig","table","boxed-text","video","audio","app","fn","other"];return{init:function(){var e=t.map(function(e){return'.js-related-object[object-type="'+e+'"]'}).join(", ");i(e).on("click",n)},initContentWithinModal:function(){var e=t.map(function(e){return'#revealContent .js-related-object[object-type="'+e+'"]'}).join(", ");i(e).on("click",n)}};function n(){var t="/customerror?statuscode=404",e=i(this),n=e.attr("isbn"),a=i(".js-book-id").val(),e=e.attr("legacySectionId");i("div[name='"+e+"']").length?window.location.hash=e:(n=null==n?"":n.trim(),e=null==e?"":e.trim(),""===n?window.top.location.assign(t):i.ajax({url:"/PlatformBook/GoToRelatedObjectLink",cache:!0,dataType:"json",data:{isbn:n.toLowerCase(),legacySectionId:e.toLowerCase(),currentBookId:a}}).done(function(e){e&&e.Success?window.top.location.assign(e.RedirectURL):window.top.location.assign(t)}).fail(function(){window.top.location.assign(t)}))}}(jQuery),jQuery(function(){SCM.RelatedObjectLinks.init()}),function(a,i,r){var o;return function(){var e=this,t=arguments,n=r&&!o;clearTimeout(o),o=setTimeout(function(){o=null,r||a.apply(e,t)},i),n&&a.apply(e,t)}}),throttle=function(e,t){let n;return function(){n||(e.call(this),n=!0,setTimeout(()=>n=!1,t))}};function updateViewportDimensions(){var e=window,t=document,n=t.documentElement,t=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||t.clientWidth,height:e.innerHeight||n.clientHeight||t.clientHeight}}$.fn.is_on_screen=function(){var e=$(window),t={top:e.scrollTop(),left:e.scrollLeft()},e=(t.right=t.left+e.width(),t.bottom=t.top+e.height(),this.offset());return e.right=e.left+this.outerWidth(),e.bottom=e.top+this.outerHeight(),!(t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)};var viewport=updateViewportDimensions(),SCM=SCM||{},SCM=(SCM.JSUtility=function(d){return{equalHeights:function(n,a){function e(){var t,e;d(n).length&&d(window).width()>a?(t=0,(e=d(n)).attr("style",""),e.each(function(){var e=d(this).outerHeight();t<e&&(t=e)}),d(n).css("height",t)):d(n).attr("style","")}e(),d(window).resize(function(){e()})},addStateToggle:function(e,t,n){var a=d(e),i=d(t),r="active-state",o="target-active",s=d("body"),l=t.replace(/.|#/,"")+"-active",e=i.find(".close");function c(){i.removeClass(r),a.removeClass(o),n&&s.removeClass(l)}n=n||!1,a.click(function(e){e.preventDefault(),i.toggleClass(r),a.toggleClass(o),n&&s.toggleClass(l)}),s.click(function(e){d(e.target).closest(a.add(i)).length||c()}),e.click(function(){c()})},toggleVisibility:function(e,t,n){function a(){var e=d(this),t=d("."+e.attr("data-toggle-target"));e.toggleClass(r),t.slideToggle().toggleClass("active")}var i=d(e),r="target-active",o=(t=t||!1,n=n||640,debounce(function(){t?(viewport=updateViewportDimensions()).width>n?(i.off("click.toggle-visibility"),i.removeClass(r),i.each(function(){d("."+d(this).attr("data-toggle-target")).removeAttr("style").removeClass("active")})):(i.off("click.toggle-visibility"),i.on("click.toggle-visibility",a)):i.on("click.toggle-visibility",a)},150,!0));o(),t&&d(window).resize(function(){o()})},getSearchParamByName:function(e){return new URLSearchParams(window.location.search).get(e)},getParamFromHash:function(e){return new URLSearchParams(window.location.hash.substring(1)).get(e)},removeParamFromHash:function(e){var t=SCM.JSUtility.getParamFromHash(e);t&&window.location.replace(window.location.hash.replace(e+"="+encodeURI(t),""))}}}(jQuery),SCM||{}),SCM=(SCM.Logging=function(){var e={debug:function(e){n()&&console.log(e)},warn:function(e){console.warn(e)},error:function(e){console.error(e)}},t=null;return{init:function(){},getLogger:function(){return e},isJsDebugEnabled:n};function n(){var e;return null!==t?t:t=(e=new URLSearchParams(window.location.search).get("JsDebug"))&&"true"===e}}(),SCM||{}),SCM=(SCM.Common={getQueryStringValue:function(e,t){var t=t+"=",n=e.indexOf(t);{if(-1===n)return null;n+=t.length}t=0<=e.indexOf("&",n)?(t=e.indexOf("&",n),e.substring(n,t)):e.substring(n);return t},isDefined:function(e){return void 0!==e&&null!=e}},SCM||{}),SCM=(SCM.UploadImage_Complete=function(e){var t,e=$.extend({targetSelector:"#UploadTarget",jsonResultSelector:"#jsonResult",replacementContainerSelector:"#id"},e),n=$(e.targetSelector).contents().find(e.jsonResultSelector);1===n.length&&(n=$.parseJSON(n.html()),$("[data-valmsg-for]").attr("class","field-validation-valid").html(""),n.Success?e.success&&e.success():0<n.Messages.length?(t="Error \n",n.Messages.forEach(function(e){t+=e+"\n"}),alert(t)):n.Html?$(e.replacementContainerSelector).replaceWith(n.Html.replace(/{{/g,"&quot;")):n.ValidationErrors.forEach(function(e){var t=$("[data-valmsg-for="+e.Key+"]");t.addClass("field-validation-error").removeClass("field-validation-valid"),e.Errors.forEach(function(e){t.html(t.html()+e+"<br />")})}))},SCM.AjaxHelperSuccessCallback=function(e,t,n){e.RedirectUrl&&0<e.RedirectUrl.length?window.location=e.RedirectUrl:e.Html&&0<e.Html.length?t.replaceWith(e.Html):e.Success?n():t.replaceWith(e)},SCM.AjaxHelperErrorCallback=function(e,t,n){e.RedirectUrl&&0<e.RedirectUrl.length?window.location=e.RedirectUrl:e.Html&&0<e.Html.length?t.replaceWith(e.Html):e.Success?n():t.replaceWith(e)},SCM.showModal=function(){var t=[];"undefined"!=typeof tinyMCE&&tinyMCE.editors.forEach(function(e){$("#divDefaultUpdateTarget").find("#"+e.editorContainer).each(function(){t.push(e.id)})}),$.fancybox({autosize:!0,autoScale:!1,title:"",href:"#divDefaultUpdateTarget"}),"undefined"!=typeof tinyMCE&&t.forEach(function(e){$("#"+e).scmTinyMCE()})},SCM.hideModal=function(){$.fancybox.close()},SCM.refreshModal=function(){$.fancybox.update()},!function(){var r=$("body");function o(e,t){return e=0===e.indexOf("*.")?e.replace("*.",t):e}$(document).ajaxError(function(e,t,n){if(r.removeClass("wait"),t.responseText)try{var a,i=$.parseJSON(t.responseText);null==i.Success||i.Success||(a="There was an error processing the request \n",i.Messages.forEach(function(e){a+=e+"\n"}),alert(a))}catch(e){console.error("Ajax error occured, responseText is not json: "+e.message)}}),$.validator.addMethod("isDateGreaterThan",function(e,t,n){return 1!=function(e,t){t=new Date(t),e=new Date(e);return(t.getFullYear()!=e.getFullYear()||t.getMonth()!=e.getMonth()||t.getDate()!=e.getDate())&&e<t}($(t).val(),n)},""),$(document).ajaxStart(function(){r.addClass("wait")}).ajaxStop(function(){r.removeClass("wait")}),r.on("keypress","[data-default-button]",function(e){if(13==e.which)return $("#"+$(this).data("defaultButton")).click(),!1}),$.validator.unobtrusive.adapters.add("dynamicrange",["minvalueproperty","maxvalueproperty"],function(e){e.rules.dynamicrange=e.params,null!=e.message&&($.validator.messages.dynamicrange=e.message)}),$.validator.addMethod("dynamicrange",function(e,t,n){var a=(a=t.name).substr(0,a.lastIndexOf(".")+1),i=parseInt($('input[name="'+o(n.minvalueproperty,a)+'"]').val(),10),n=parseInt($('input[name="'+o(n.maxvalueproperty,a)+'"]').val(),10),a=parseInt(e,10);return!(isNaN(i)||isNaN(n)||isNaN(a)||a<i||n<a)||(e=$(t).attr("data-val-dynamicrange").replace("{0}",i).replace("{1}",n),$.validator.messages.dynamicrange=e,!1)},"")}(),!function(o){o.fn.radiobuttonEnable=function(){return this.each(function(){var a=o(this);a.find("*[data-rb-enable-name]").each(function(){var e,t=o(this),n=a.find('input:radio[name="'+t.data("rbEnableName")+'"]:checked');0<n.length&&(null!=(e=t.data("rbEnableValue"))&&n.val().toString().toLowerCase()!=e.toString().toLowerCase()&&t.prop("disabled",!0),null!=(e=t.data("rbMakeVisibleValue")))&&n.val().toString().toLowerCase()!=e.toString().toLowerCase()&&t.hide()}),a.find("input:radio").on("change",function(){var a=o(this),e='[data-rb-enable-name="'+a.attr("name")+'"]';o(e).each(function(){var e=o(this),t=tinymce.editors[e[0].id],n=e.data("rbEnableValue");null!=n&&(n.toString().toLowerCase()==a.val().toLowerCase()?(e.prop("disabled",!1),t&&t.getBody().setAttribute("contenteditable",!0)):(e.prop("disabled",!0),t&&t.getBody().setAttribute("contenteditable",!1))),null!=(n=e.data("rbMakeVisibleValue"))&&(n.toString().toLowerCase()==a.val().toLowerCase()&&!e.is(":visible")||n.toString().toLowerCase()!=a.val().toLowerCase()&&e.is(":visible"))&&e.fadeToggle()})})})},o.fn.configureSCMForm=function(e){var n=o.extend({cancelButtonSelector:".cancel",submitButtonSelector:".submit",nextQuestionButtonSelector:".nextQuestion",skipButtonSelector:".skip",validatorIgnores:":disabled, input[type='hidden']",nextQuestion:null,cancel:null,skip:null,validateOnSubmit:null,validateOnKeyUp:!1},e);return this.each(function(){var t=o(this),e=(jQuery.validator.unobtrusive.parse("#"+this.id),t.validate(),o.data(t[0],"validator").settings);e.ignore=n.validatorIgnores,!0===n.validateOnKeyUp&&(n.validateOnKeyUp=null),e.onkeyup=n.validateOnKeyUp,e.onsubmit=n.validateOnSubmit,t.find(n.submitButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),t.valid()&&t.trigger("submit")}),t.find(n.nextQuestionButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.nextQuestion()}),t.find(n.skipButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.skip()}),t.find(n.cancelButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.cancel?n.cancel():(t.hide(),SCM.hideModal())})})},o.fn.viewMore=function(e){var n=o.extend({hiddenSelector:".read-more",readMoreButtonSelector:"#readMore",readMoreText:"Read More",readLessText:"Read Less"},e);return this.each(function(){var t=o(n.hiddenSelector);t.hide(),o(n.readMoreButtonSelector).on("click",function(e){e.preventDefault(),t.fadeToggle()})})},o.fn.scmTinyMCE=function(){return o(".mceOpen.mce_forecolor").show(),o(".mce_forecolor .mceLast .mceIconOnly").show(),o(".mceOpen.mce_backcolor").show(),o(".mceOpen.mce_backcolor .mceIconOnly").show(),this.each(function(){o(this).tinymce({gecko_spellcheck:!0,theme:"advanced",theme_advanced_buttons1:"bold,italic,underline,|,bullist,numlist,|,sub,sup,|,charmap,|,forecolor,backcolor,|,link",theme_advanced_buttons2:"",theme_advanced_buttons3:"",plugins:"inlinepopups",theme_advanced_statusbar_location:null,oninit:function(e){var e=o("#"+e.editorId+"[data-rb-enable-name]"),t=o('input:radio[name="'+e.data("rbEnableName")+'"]');0<t.length&&t.val().toString().toLowerCase()!=e.data("rbEnableValue").toString().toLowerCase()&&(e.prop("disabled",!0),t=tinymce.editors[e[0].id])&&t.getBody().setAttribute("contenteditable",!1)}})})},o.fn.scmTimer=function(t){return this.each(function(){var e,n,a,i=o(this),r=o.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);r.stop?clearInterval(i.data("scmTimerToken")):(e=function(e){return e=e<10?"0"+e:e},n=(new Date).getTime(),(a=function(){i.text(e(r.h)+":"+e(r.m)+":"+e(r.s)+":"+e(r.hs))})(),i.data("scmTimerToken",setInterval(function(){var e,t;i.is(":visible")&&(t=(e=(new Date).getTime())-n,r.hs+=Math.floor(t/10),n=e,100<=r.hs&&(r.s+=Math.floor(r.hs/100),r.hs=r.hs%100,60<=r.s&&(r.m+=Math.floor(r.s/60),r.s=r.s%60),60<=r.m)&&(r.h+=Math.floor(r.m/60),r.m=r.m%60),a(),!r.intervalCheck||r.intervalCheck(r))||clearInterval(i.data("scmTimerToken"))},r.milliseconds)))})},o.fn.wkTimer=function(t){return this.each(function(){var e,n,a,i=o(this),r=o.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);r.stop?clearInterval(i.data("wkTimerToken")):(e=function(e){return e=e<10?"0"+e:e},n=(new Date).getTime(),(a=function(){i.text(e(r.m)+":"+e(r.s))})(),i.data("wkTimerToken",setInterval(function(){var e,t;i.is(":visible")&&(t=(e=(new Date).getTime())-n,r.hs+=Math.floor(t/10),n=e,100<=r.hs&&(r.s+=Math.floor(r.hs/100),r.hs=r.hs%100,60<=r.s&&(r.m+=Math.floor(r.s/60),r.s=r.s%60),60<=r.m)&&(r.h+=Math.floor(r.m/60),r.m=r.m%60),a(),!r.intervalCheck||r.intervalCheck(r))||clearInterval(i.data("wkTimerToken"))},r.milliseconds)))})}}(jQuery),SCM||{}),SCM=(SCM.__namespace=!0,SCM.eventManager=function(r){function n(e,t){r.pubsub("publish",e,t)}function o(n,a){return e(i,function(e,t){n===t.actionEnum&&a(t)})}function a(n,a){return e(s,function(e,t){n===t.actionEnum&&a(t.data)})}var e=function(e,t){return r.pubsub("subscribe",e,t)},i="actionCompleted",s="actionCompleteactionRequest";return{subscribeWidgetRefresh:function(e,t){var a=r.extend({refreshWhenInvisible:!1,messageContainerSelector:"#divMessage"},t),i="",i=o(e,function(t){var n;(!a.refreshIf||a.refreshIf(t))&&(n=r(a.containerSelector),a.refreshWhenInvisible||n.is(":visible"))&&r.ajax({type:"POST",url:a.url,data:a.data,dataType:"html",success:function(e){r.pubsub("unsubscribe",i),n.replaceWith(e).show(),a.refreshSuccess&&a.refreshSuccess(t)}})})},subscribe:e,publish:n,publishActionCompleted:function(e,t){e=r.extend({actionEnum:e},t);n(i,e)},subscribeActionCompleted:o,publishActionRequest:function(e,t){return n(s,{actionEnum:e,data:t})},subscribeActionRequest:a,subscribeActionRequestDisplayResult:function(e,t){return a(e,function(e){e=r.extend({type:"POST"},e);r.ajax({type:e.type,url:e.url,data:e.data,dataType:"html",success:function(e){r(t).html(e).show()},error:function(e){alert(e)}}),SCM.hideModal()})}}}(jQuery),SCM.eventManager.subscriptionMessages={playVideo:"SCM.PlayVideo"},SCM||{}),SCM=(!function(e,t){var a={},i=a.hasOwnProperty;e.subscribe=function(e,t){i.call(a,e)||(a[e]=[]);var n=a[e].push(t)-1;return{remove:function(){delete a[e][n]}}},e.publish=function(e,n){i.call(a,e)&&t.each(a[e],function(e,t){t(void 0!==n?n:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery),SCM||{}),textCharectorLimit=(SCM.AdvancedSearch={},SCM.AdvancedSearch.configSettings={preSelectSingleBookFacet:"true"},$(".hfSolrMaxAllowSearchChar").val()),UrlStripTrailingCharactersPattern="^.*[/\\\\]$";function AppendSubscriptionParameterToUrl(e){var t=e,n=!1;return t=(n=$("#hfEnableSubscriptionFilter").length?"true"==$("#hfEnableSubscriptionFilter").val().toLowerCase():n)?e+"&subonly=true":t}function StripTrailingCharacters(e,t){for(var n=new RegExp(t);n.test(e);)e=e.substring(0,e.length-1);return e}function isValidDate(e){var t,n,a,e=/^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(e);return null!=e&&(t=e[2],n=e[1]-1,e=e[3],(a=new Date(e,n,t)).getDate()==t)&&a.getMonth()==n&&a.getFullYear()==e}function isYearOnly(e){e=/^(\d{4})$/.exec(e);return e&&-1<e[1]}function updateYearOnlyToFullDate(e,t){var n=e.val(),a=null,i=null,i=t?a="01":(a="12","31");return e.val(a+"/"+i+"/"+n),e.val()}function restoreQbData(){var e;if(sessionStorage)return(e=sessionStorage.getItem("querybuilder_html"))?(e=JSON.parse(e),void $("#queryBuilder").html(e)):null}Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()},null!=textCharectorLimit&&""!=textCharectorLimit||(textCharectorLimit="255");var micrositeJournalDisplayName="",micrositeJournalId="",solrsearchScope=$(".hfSolrJournalID").val(),solrBookSearchScope=$("#hfSolrBookID").val();function GetQueryStringCharacter(e){return e.includes("?")?"&":"?"}function AddQueryStringParams(e){$(".access-filter-input-radio[value=contentowned]").is(":checked")&&(e=e+GetQueryStringCharacter(e)+"access_openaccess=true&access_free=true&access_unlocked=true");var t="";return $("#advancedSearch .advanced-search-content-type:checked").each(function(){this.checked&&(t?0<t.length&&(t+=" OR "+$(this).attr("value")):t=$(this).attr("value"))}),e=t?e+GetQueryStringCharacter(e)+"fl_ContentType="+t:e}void 0===solrsearchScope?solrsearchScope="":null!=solrsearchScope&&(solrsearchScope=solrsearchScope.replace("J","")),void 0===solrBookSearchScope?solrBookSearchScope="":null!=solrBookSearchScope&&(solrBookSearchScope=solrBookSearchScope.replace("B","")),$(document).ready(function(){function t(e){var t,n;null==e||""==e?alert("Please enter a term to search"):e.length>parseInt(textCharectorLimit)?alert("Please enter a term between 1 to "+textCharectorLimit+" characters"):(e='"'+e+'"',n=t="",solrsearchScope&&(n="&fl_JournalID="+micrositeJournalId+"&f_JournalDisplayName="+encodeURIComponent($.trim(micrositeJournalDisplayName))),t="/search-results?q="+encodeURIComponent(e)+"&fd_ArticleTitle="+encodeURIComponent(e),t=AppendSubscriptionParameterToUrl(t+=""!=n?n:"&allJournals=1"),e=StripTrailingCharacters($("#hfSiteURL").val(),UrlStripTrailingCharactersPattern),window.location.href=window.location.protocol+"//"+e+t+"&searchType=advanced")}function n(){var e,t="1",n=null,a=null,i=[],r=[],o=[],s={},l=null,c=null,d=null,u=null,h=!1,p=$("#advancedSearchQueryTerm").val();if((f=$("#queryBuilder").length)||null!=p&&""!=p)if(!f&&p.length>parseInt(textCharectorLimit))alert("Please enter a term between 1 to "+textCharectorLimit+" characters.");else{switch(s.q=p,$("#advancedSearch input.anyAllExact[type=radio]").each(function(){this.checked&&(t=$(this).attr("id"))}),e='"'+p+'"',t){case"1":s.hd="advancedAny",l=p;break;case"2":s.hd="advancedAll",l=p;break;case"3":l=e}s.q=encodeURIComponent($.trim(l));var f=$("#advancedSearch #authorName").val();if(null!=f&&""!=f&&(s.author=f),null!=(n=$("#startDateSemanticSearch").val())&&""!=n&&"mm/dd/yyyy"!=n){if(isYearOnly(n))n=updateYearOnlyToFullDate($("#startDateSemanticSearch"),!0);else if(!isValidDate(n))return void alert("please enter valid start date");if(""===$("#endDateSemanticSearch").val())$("#endDateSemanticSearch").val((new Date).today()),a=$("#endDateSemanticSearch").val();else if(isYearOnly(a=$("#endDateSemanticSearch").val()))a=updateYearOnlyToFullDate($("#endDateSemanticSearch"),!1);else if(!isValidDate(a)||new Date(a)<new Date(n))return void alert("please enter valid end date");s.rg_PublicationDate=n+" TO "+a}$("#advancedSearch input.rbPublication[type=radio]").each(function(){this.checked&&(h="J*"==$(this).attr("value"),$(this).attr("value"))}),$("#advancedSearch .advancedSearchJournal:checked").each(function(){h=!0,d=$(this).attr("currentjournaldisplayname"),c=$(this).attr("text"),o.push($(this).attr("value")),i.push($(this).attr("jid"))}),$("#advancedSearch .advancedSearchBook:checked").each(function(){u=$(this).attr("text"),r.push($(this).attr("bid"))}),f=s,n=function(){var a=[];$("#js_qb_groups .js_qb_group").each(function(){var n={},e=$(this),t=(e.children(".row").children(".js_qb_data").each(function(){var e=$(this),t=e.attr("data-qb-json-element");n[t]=e.val()}),[]);e.find(".js_qb_term").each(function(){var n={};$(this).find(".js_qb_data").each(function(){var e=$(this),t=e.attr("data-qb-json-element");n[t]="exactMatch"===t?e.is(":checked"):e.val()}),n.input&&n.input.length&&t.push(n)}),t.length&&(t[0].condition&&delete t[0].condition,n.terms=t,a.push(n))}),!Object.keys(a).length||a[0].condition&&delete a[0].condition;return a}(),sessionStorage&&(a=$("#queryBuilder").length,m=$("#queryBuilder").html(),a)&&m.length&&sessionStorage.setItem("querybuilder_html",JSON.stringify(m)),Object.keys(n).length&&(f.cqb=JSON.stringify(n));var m,a="/search-results?"+$.param(s),f=(h&&(m=o.join(" OR "),f=i.join(" OR "),a+="&restypeid=3",1==o.length?(n=encodeURIComponent($.trim(c)),a+=journalQuery=c==d?"&fl_JournalID="+f+"&f_JournalDisplayName="+n:"&fl_JournalID="+f+"&f_JournalDisplayName="+encodeURIComponent($.trim(d))+"&fd_LegacyJournalDisplayName="+n):1<o.length?a+="&fl_JournalHistID="+m:0==o.length&&(a+="&allJournals=1")),null!=solrBookSearchScope&&""!=solrBookSearchScope&&!h&&(a+=g(r,u)),a=AddQueryStringParams(a=AppendSubscriptionParameterToUrl(a)),StripTrailingCharacters($("#hfSiteURL").val(),UrlStripTrailingCharactersPattern));window.location.href=window.location.protocol+"//"+f+a+"&searchType=advanced"}else alert("Please enter a term to search")}function a(){var e=null,t=null,n=[],a=[],i=[],r={},o=null,s=null,l=null,c=!1,d=!1;if(null==(u=$("#advancedAuthorSearchQueryTerm").val())||""==u)alert("Please enter a term to search");else if(u.length>parseInt(textCharectorLimit))alert("Please enter a term between 1 to "+textCharectorLimit+" characters.");else{if(r.author=encodeURIComponent($.trim(u)),r.q=encodeURIComponent($.trim(u)),null!=(e=$("#startDateAuthor").val())&&""!=e&&"mm/dd/yyyy"!=e){if(!isValidDate(e=isYearOnly(e)?updateYearOnlyToFullDate($("#startDateAuthor"),!0):e))return void alert("please enter valid start date");if(""===$("#endDateAuthor").val()?($("#endDateAuthor").val((new Date).today()),t=$("#endDateAuthor").val()):isYearOnly(t=$("#endDateAuthor").val())&&(t=updateYearOnlyToFullDate($("#endDateAuthor"),!1)),!isValidDate(t)||new Date(t)<new Date(e))return void alert("please enter valid end date");r.rg_PublicationDate=e+" TO "+t}$(".advancedAuthorSearch input.rbPublication[type=radio]").each(function(){this.checked&&(d="J*"==$(this).attr("value"),c="B*"==$(this).attr("value"))}),$(".advancedAuthorSearch .advancedSearchJournal:checked").each(function(){d=!0,s=$(this).attr("currentjournaldisplayname"),o=$(this).attr("text"),i.push($(this).attr("value")),n.push($(this).attr("jid"))}),$("#advancedSearch #chkAdvancedSearchBook:checked").each(function(){c=!0,l=$(this).attr("text"),a.push($(this).attr("bid"))});var u="/search-results?"+$.param(r),t=(d&&(e=i.join(" OR "),t=n.join(" OR "),u+="&restypeid=3",1==i.length?(r=encodeURIComponent($.trim(o)),u+=journalQuery=o==s?"&fl_JournalID="+t+"&f_JournalDisplayName="+r:"&fl_JournalID="+t+"&f_JournalDisplayName="+encodeURIComponent($.trim(s))+"&fd_LegacyJournalDisplayName="+r):1<i.length?u+="&fl_JournalHistID="+e:0==i.length&&(u+="&allJournals=1")),c&&(u+=g(a,l)),u=AppendSubscriptionParameterToUrl(u),StripTrailingCharacters($("#hfSiteURL").val(),UrlStripTrailingCharactersPattern));window.location.href=window.location.protocol+"//"+t+u+"&searchType=advanced"}}function i(){var e,t=$("#Doi").val().trim();null!=(e=$("#Doi").val().trim())&&""!=e?$.ajax({type:"POST",url:"/Solr/DoiSearch/search",data:{doi:t},success:function(e){0==e&&alert("Invalid DOI. Please enter a valid DOI")},error:function(){alert("There was a problem with your request. Please try again later")}}):alert("Please enter a Doi to search")}function g(e,t){var n="&restypeid=1",a=e.join(" OR ");return"true"==SCM.AdvancedSearch.configSettings.preSelectSingleBookFacet&&1===e.length?n=n+"&f_BookDisplayName="+encodeURIComponent($.trim(t))+"&fl_BookID="+a:0<e.length?n=n+"&fl_BookID="+a:0===e.length&&(n+="&allBooks=1"),n}null==solrBookSearchScope||""==solrBookSearchScope?($("#advancedSearch input.advancedSearchBook[type=checkbox]").each(function(){$(this).prop("checked",!1),$(this).prop("disabled",!0)}),$(".advancedAuthorSearch input.advancedSearchBook[type=checkbox]").each(function(){$(this).prop("checked",!1),$(this).prop("disabled",!0)}),$("input.rbPublication[type=radio]").each(function(){"B*"==$(this).attr("value")?$(this).prop("checked",!1):$(this).prop("checked",!0)})):($("#advancedSearch input.advancedSearchJournal[type=checkbox]").each(function(){$(this).prop("checked",!1),$(this).prop("disabled",!0)}),$(".advancedAuthorSearch input.advancedSearchJournal[type=checkbox]").each(function(){$(this).prop("checked",!1),$(this).prop("disabled",!0)}),$("input.rbPublication[type=radio]").each(function(){"J*"==$(this).attr("value")?$(this).prop("checked",!1):$(this).prop("checked",!0)})),(null!=solrsearchScope&&""!=solrsearchScope||null!=solrBookSearchScope&&""!=solrBookSearchScope)&&($(".advancedAuthorSearch input:checkbox").each(function(){var e=$(this).attr("currentjournaldisplayname"),t=$(this).attr("text"),n=$(this).attr("jid"),a=$(this).attr("bid");if(null!=e&null!=t&&e==t){if(n==solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=t,micrositeJournalId=n,!1}else null==a||""==a||a!=solrBookSearchScope&&"*"!==solrBookSearchScope||(this.checked=!0)}),$("#advancedSearch input:checkbox").each(function(){var e=$(this).attr("currentjournaldisplayname"),t=$(this).attr("text"),n=$(this).attr("jid"),a=$(this).attr("bid");if(null!=e&null!=t&&e==t){if(n==solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=t,micrositeJournalId=n,!1}else null==a||""==a||a!=solrBookSearchScope&&"*"!==solrBookSearchScope||(this.checked=!0)}),$(".citationJournal").each(function(){$("option",this).each(function(){var e=$(this).val().split(",");null!=e&&"C"==e[0]&&e[1]==solrsearchScope&&$(this).prop("selected",!0)})})),$("#btnAdvancedTitleSearch").click(function(){t($("#articleTitle").val())}),$("#articleTitle").keydown(function(e){13==e.keyCode&&t($("#articleTitle").val())}),$("#btnAdvancedCitationSearch").click(function(){var e,t,n,a,i,r,o,s,l,c;e=$("#citationYear").val(),t=$("#citationVolume").val(),n=$("#citationVolume").attr("pattern"),a=$("#citationPage").val(),i=$(".citationJournal").val(),r=$(".citationJournal option:selected").text(),o=!1,s="",$("#citationIssueNo").length&&(s=$("#citationIssueNo").val()),l={},c=null!=i&&""!=i&&"- Select a Journal"!=i?"":"Please select a journal.\n",null!=e&&""!=e&&"Yr"!=e&&(isNaN(e)?c+="Year must be numeric.\n":l.rg_PublicationDate="01/01/"+e+" TO 12/31/"+e),null!=t&&""!=t&&"Vol"!=t&&(new RegExp(n).test(t)?l.fd_Volume=t:c+="Volume must be alphanumeric without spaces"),null!==s&&""!==s&&"Issue"!==s&&(l.fd_IssueNo=s),""!=a&&"1st Pg"!=a&&(l.fd_StartPage=a),0<c.length?alert(c):("C"==(e=i.split(","))[0]?(l.fl_JournalID=e[1],o=!0):l.fl_JournalHistID=e[2],n="/search-results?"+$.param(l),n+=o?"&f_JournalDisplayName="+encodeURIComponent($.trim(r)):"&fd_LegacyJournalDisplayName="+encodeURIComponent($.trim(r)),t=StripTrailingCharacters($("#hfSiteURL").val(),UrlStripTrailingCharactersPattern),window.location.href=window.location.protocol+"//"+t+n+"&searchType=advanced")}),$("#btnAdvancedCitationSearch").keyup(function(e){13==e.keyCode&&(e.preventDefault(),doAdvancedCitationSerach())}),$("#advancedSearchQueryTerm").keydown(function(e){13==e.keyCode&&n()}),$(document).on("click","#btnAdvancedSearch, #btnAdvancedSearchTop, .js-qb-execute-search",function(){n()}),$(document).on("click","#btnAdvancedAuthorSearch, #btnAdvancedAuthorSearchTop",function(){a()}),$("#advancedAuthorSearchQueryTerm").keydown(function(e){13==e.keyCode&&a()}),$("#Doi").on("keydown",function(e){13==e.keyCode&&i()}),$("#btnDoiSearch").on("click",function(){i()});function e(){var e=$("#js_qb_term_template").html();$(this).closest(".js_qb_group").find(".js_qb_terms_list").append(e)}function r(){o($(this).closest(".query-term"))}function o(e){e&&e.length&&(e.find("select").each(function(){this.selectedIndex=0}),e.find('input[type="text"]').val(""),e.find('input[type="checkbox"]').prop("checked",!1))}function s(){var e=$(this),t=!("true"===e.attr("aria-expanded")),n=(e.attr("aria-expanded",t.toString()),e.find(".js-optional-fields-label").text(t?"Hide optional fields":"Show optional fields"),e.attr("aria-controls"));$("#"+n).toggleClass("hide",!t),n=(n=e).find(".js-abstract-toggle-icon"),t=n.data("icon-class"),e=t+"-down",t+="-up",n.toggleClass(e),n.toggleClass(t)}function l(e,t){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(t);return e&&1<e.length?decodeURI(e[1].toString()):""}if($(document).on("click",".js_qb_add_group",function(){var e=$("#js_qb_group_template").html();$("#js_qb_groups").append(e)}),$(document).on("click",".js-advanced-search-reset",function(e){var t;e=e,"true"===(null==(t=$("#hfPreventPageRefreshOnClearSearch").val())?void 0:t.toLowerCase())?o((t=$(e.currentTarget).data("targetId"))?$("#"+t):null):(sessionStorage.removeItem("querybuilder_html"),0<=window.location.href.indexOf("?")?window.location.href=window.location.href.split("?")[0]:window.location.reload())}),$(document).on("click",".js_qb_add_term",e),$(document).on("click",".js_qb_clear_term",r),$(".js-optional-fields-toggle").on("click",s),b=window.location.href.split("?")[1]||""){var c=b=decodeURIComponent(b.replace(/\+/g," "));if(c=l("cqb",c)){for(var d=JSON.parse(c),u=Object.keys(d).length-1,h=0;h<u;h++)$(".js_qb_add_group").click();for(h=0;h<Object.keys(d).length;h++){for(var p=d[h],f=$("#js_qb_groups .js_qb_group").eq(h),m=(p.condition&&f.find('select[data-qb-json-element="condition"]').val(p.condition),p.terms.length-2),v=0;v<m;v++)f.find(".js_qb_add_term").click();for(v=0;v<p.terms.length;v++){var C=p.terms[v],y=f.find(".js_qb_term").eq(v);C.condition&&y.find('select[data-qb-json-element="condition"]').val(C.condition),y.find('select[data-qb-json-element="filter"]').val(C.filter),y.find('input[data-qb-json-element="input"]').val(C.input),C.exactMatch&&y.find('input[data-qb-json-element="exactMatch"]').click()}}}else restoreQbData();var b,c=b;(c=l("rg_PublicationDate",c))&&(c=c.split(/\sTO\s/),$("#startDateSemanticSearch").val(c[0]),$("#endDateSemanticSearch").val(c[1])),(b=l("f_JournalDisplayName",c=b))?(b=b)&&$('.advancedSearchJournal[currentjournaldisplayname="'+b+'"]').click():(b=((b=l("fl_JournalID",b=c))&&$('.advancedSearchJournal[jid="'+b+'"]').click(),c),(b=l("fl_JournalHistID",b))&&b.split(/\sOR\s/).forEach(function(e){$('.advancedSearchJournal[value="'+e+'"]').click()}))}$(document).on("click",".toggle-expanded",function(){$(this).parents(".search-module").toggleClass("collapsed").toggleClass("expanded")})}),$(function(){try{$("#startDateSemanticSearch").on("keydown",function(e){if(13==e.which&&isYearOnly($("#startDateSemanticSearch").val()))return updateYearOnlyToFullDate($("#startDateSemanticSearch"),!0),e.preventDefault(),e.stopImmediatePropagation(),!1}),$("#endDateSemanticSearch").on("keydown",function(e){if(13==e.which&&isYearOnly($("#endDateSemanticSearch").val()))return updateYearOnlyToFullDate($("#endDateSemanticSearch"),!0),e.preventDefault(),e.stopImmediatePropagation(),!1}),$("#startDateAuthor").on("keydown",function(e){if(13==e.which&&isYearOnly($("#startDateAuthor").val()))return updateYearOnlyToFullDate($("#startDateAuthor"),!0),e.preventDefault(),e.stopImmediatePropagation(),!1}),$("#endDateAuthor").on("keydown",function(e){if(13==e.which&&isYearOnly($("#endDateAuthor").val()))return updateYearOnlyToFullDate($("#endDateAuthor"),!0),e.preventDefault(),e.stopImmediatePropagation(),!1})}catch(e){}});var SCM=SCM||{},SCM=(!function(pdf,$){function formatIssuePurchaseLink(e,t){0<=e.toLowerCase().indexOf("resourceid=")&&e.replace(/resourceID=\{0\}|resourceID=\d+/i,"resourceid="+t)}function logErrors(jqXHR,textStatus,errorThrown){var err;window.console&&(err=eval("("+jqXHR.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}function openPDF(e){window.location.href=e}function openNoAccessModalArticle(e,t){e.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url");e="/article.aspx?articleid="+t+"#purchaseSubscriptionBox";pdf.$noAccessModal.find("#articleLinkToPurchase").attr("href",e),SCM.Utilities.Reveal.open(pdf.$noAccessModal)}function openNoAccessModalArticleSeo(e,t,n){e.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url"),"DO_NOT_USE"===n?pdf.$noAccessModal.find("#articleLinkToPurchase").remove():(e=n,pdf.$noAccessModal.find("#articleLinkToPurchase").attr("href",e)),SCM.Utilities.Reveal.open(pdf.$noAccessModal)}pdf.$noAccessModal=$("#noAccessReveal"),pdf.checkArticlePDFAccess=function(t){var n=t.attr("data-article-id"),a=t.attr("data-article-url"),e=t.attr("data-ajax-url"),i=$("#hfSiteURL"),r="",i=(null!==t.attr("data-article-seo-url")&&(r=t.attr("data-article-seo-url")),void 0!==i&&void 0!==i.val()&&""!==i&&(e="//"+i.val()+e),{});i.aId=n,$.ajax({type:"POST",url:e,data:i,traditional:!0,success:function(e){e.Success?openPDF(a):0<r.length?openNoAccessModalArticleSeo(t,n,r):openNoAccessModalArticle(t,n)},error:function(e,t,n){logErrors(e,t,n)}})},pdf.checkIssuePDFAccess=function(a){var e,t;a.length&&(e=a.attr("data-issue-id"),t=a.attr("data-ajax-issue-url"),$.ajax({type:"POST",url:t,data:{issueId:e},traditional:!0,global:!1,success:function(e){e.Success?a.addClass("visible"):a.addClass("hide")},error:function(e,t,n){a.addClass("hide")}}))},pdf.checkIssuePDFAccessModalOnClick=function(e){var t;e.length&&(t=e.data("multimediaId"),e=e.data("pdfHandlerUrl"),SCM.Ajax.post("/pdf/CheckIssuePdfAccessWithMessaging",{multimediaId:t,pdfHandlerUrl:e}).expectJson().then(e=>{if(!e.Success)throw(null==e?void 0:e.ErrorMessage)??"The PDF for this issue cannot be found";if(e.AccessGranted)return e;throw(null==e?void 0:e.AccessDeniedMessage)??"Access Denied"}).then(e=>{window.open(e.PdfHandlerUrl)}).catch(e=>{var t=null!=e&&null!=(t=e.result)&&t.ErrorMessage?e.result.ErrorMessage:e;SCM.Modals.showModal(t)}))},pdf.ipCountryAccessCheck=function(e){e.length&&e.off().on("click",function(t){t.preventDefault();var e=$(this).data("resourceid"),n=$(this).data("resourcetypeid");SCM.Ajax.post("/Pdf/PdfByIpCountry/ipCountryCheck",{resourceId:e,resourceTypeId:n}).expectJson().then(function(e){e.Success?($(t.currentTarget).unbind("click"),t.currentTarget.click()):(pdf.$noAccessModal.find("#noAccessForm").html(e.Messages[0]),SCM.Utilities.Reveal.open(pdf.$noAccessModal))}).catch(function(e){console.error("Failed to check IP Country based access: "+e)})})},pdf.bindUiEvents=function(){$(document).on("click",".al-link.pdfaccess",function(){SCM.Utilities.Reveal.close(pdf.$noAccessModal),pdf.$noAccessModal.find("#articleLinkToPurchase").show(),pdf.$noAccessModal.find(".issue-purchase-modal").hide(),$(this).attr("data-reveal-id")||pdf.checkArticlePDFAccess($(this))}),$(document).on("click",".js-issue-pdfLink-check",function(){pdf.checkIssuePDFAccessModalOnClick($(this))}),pdf.checkIssuePDFAccess($(".js-issue-pdfLink")),pdf.ipCountryAccessCheck($(".js-pdfByIpCountry"))},pdf.init=function(){pdf.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery),SCM||{}),SCM=(SCM.ArticleListResources=SCM.ArticleListResources||{},SCM.ArticleListResources.registerSnippetViewMore=function(){$(document).on("click",".al-article-snippet-view-more",function(){$(this).parent(".al-article-snippet").toggleClass("collapsed expanded")})},SCM.ArticleListResources.getArticleDetails=function(){$(document).ready(function(){var e,t="";$(".al-article-items[data-article-id]").has(".Locked").each(function(){0<t.length&&(t+=","),t+=$(this).attr("data-article-id")});0<t.length&&(e=$(".article-list-resources").first().attr("data-journalIds"),$.post("/Article/ArticleListResourcesDetails",{journalIds:e,accessCheckArticleIds:t},function(e){for(var t in e)$('.al-article-items[data-article-id="'+t+'"]').find(".article-accessType").removeClass("Locked").addClass(e[t])},"json"))})},SCM.ArticleListResources.hideEmptyItems=function(){$(document).ready(function(){$(".resource-links-info .item:empty").addClass("hide")})},SCM.ArticleListResources.registerSnippetViewMore(),SCM.ArticleListResources.getArticleDetails(),SCM.ArticleListResources.hideEmptyItems(),SCM||{}),$body=$("body"),$printableModal=$(".js-printable-metrics-modal"),ctHtmlLabels=function(e){return function(e){e.on("draw",function(e){"label"===e.type&&((e=e.element._node.childNodes[0]).innerHTML=e.innerText)})}},SCM=(SCM.ContentMetric=function(ns){function fullVersion($dest,routeUrl){var $chart=$dest.find(".js-ct-chart"),chartClass=".ct-chart",baseSiteUrl;$dest.closest(".widget-SplitView").length&&($chart.addClass("sv-ct-chart"),chartClass=".sv-ct-chart"),$dest.find(".js-metric-full-wrap").length<1?(baseSiteUrl=$("#hfSiteURL"),void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(routeUrl="//"+baseSiteUrl.val()+routeUrl),$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.prepend(e),updateAltmetricPropsForBooksAndArticles(),updateChart(ctHtmlLabels,chartClass)},error:function(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})):0!==$chart.length&&0!==$chart.html().length||(updateAltmetricPropsForBooksAndArticles(),$(".js-metric-full-wrap").removeClass("hide"),updateChart(ctHtmlLabels,chartClass))}function updateChart(e,t){setTimeout(function(){void 0!==window.ChartistData&&createChart(t,window.ChartistData.data,{lineSmooth:!1,showArea:!0,low:0,plugins:[e]},[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e}},plugins:[e]}]])},200),reloadOrHideBadges()}function reloadOrHideBadges(){($(".contentmet-dimensions").length||$(".artmet-dimensions").length)&&window.__dimensions_embed&&window.__dimensions_embed.addBadges&&($(".__dimensions_badge_embed__").length&&($(".__dimensions_badge_embed__").removeAttr("data-dimensions-badge-installed"),$(".__dimensions_badge_embed__").empty()),window.__dimensions_embed.addBadges());var e=$(".altmetric-embed");$(".js-show-if-unknown").length&&0===e.children().length&&$(".artmet-altmetric").removeClass("hide"),artmetBadgeIsHiddenOrEmpty()&&citationsBadgeIsEmpty()&&$(".artmet-stats-wrap").addClass("hide")}function artmetBadgeIsHiddenOrEmpty(){return $(".artmet-altmetric").hasClass("hide")}function citationsBadgeIsEmpty(){return 0===$(".artmet-citations").length}function limitLabels(){var e=$(".ct-horizontal.ct-label"),t=e.length,n=Math.ceil(t/8),a=1;e.not(":eq(0)").each(function(){a%n!=0&&$(this).hide(),a++})}function createChart(e,t,n,a){var e=new Chartist.Line(e,t,n,a),i=0;e.on("created",function(){i=0,limitLabels()}),e.on("draw",function(e){"line"!==e.type&&"point"!==e.type&&"area"!==e.type||i++,"line"===e.type?e.element.animate({opacity:{begin:25*i+150,dur:250,from:0,to:1}}):"point"===e.type?e.element.animate({x1:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},x2:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},opacity:{begin:25*i,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===e.type&&e.element.animate({opacity:{begin:25*i+250,dur:300,from:0,to:1}})})}function getWidgetInstanceName(e){var t="",e=$(e).attr("class"),n=e.indexOf("widget-instance-");return t=0<=n?e.substr(n).split("-")[2]:t}function triggerModal(e,t,n){var a=$(".content-main .contentmet-dimensions").length?"true":"false",i="/ThirdParty/ContentLevelMetricsDetails",r=getWidgetInstanceName(".widget-ContentLevelMetrics");0<r.length&&(i+="/"+r),fullVersion(e,i+="?resourceId="+t+"&resourceType="+n+"&showDimensionsBadge="+a),e.closest(".artmet-modal").css({display:"block",opacity:1}),$body.addClass("metrics-modal-open"),$printableModal.addClass("metrics-modal-open")}function closeModal(e){e.closest(".artmet-modal").attr("style",""),$body.removeClass("metrics-modal-open"),$printableModal.removeClass("metrics-modal-open")}function eventsToClose(t){$(".content-main .js-contentmet-close-modal").on("click",function(){closeModal(t)}),$(".content-main .js-contentmet-modal").on("click",function(e){$(e.target).closest(".artmet-modal-contents").length||closeModal(t)})}function registerModalClicks(){$("#Sidebar").on("click",".js-contentmet-modal-trigger, .js-contentmet-views, .js-contentmet-citations",function(){var e=$(".content-main .contentmet-modal-trigger"),t=e.attr("data-resource-id"),e=e.attr("data-resource-type");triggerModal($(".content-main .artmet-modal-contents"),t,e)})}function updateAltmetricPropsForBooksAndArticles(e){$(".widget-BookChapterMainView").length||$('div[data-hide-no-mentions="true"]').each(function(e){$(this).attr("data-hide-no-mentions","false")})}function cloneMetricsModalForPrint(e){var t;0==$printableModal.length&&e.length&&(t=$("<div/>",{class:"printable-metrics-modal js-printable-metrics-modal"}),e.clone().appendTo(t),0<$("body.metrics-modal-open").length&&t.addClass("metrics-modal-open"),$body.append(t),$printableModal=$(".js-printable-metrics-modal"))}function init(){$(document).ready(function(){registerModalClicks(),$(window).on("beforeprint",function(){var e=$(".js-metric-modal-contents:has(.js-metric-full-wrap):first");e.length&&cloneMetricsModalForPrint(e)}),eventsToClose($(".content-main .artmet-modal-contents")),$(".__dimensions_badge_embed__").on("dimensions_embed:show",function(){$(".__dimensions_badge_embed__").closest(".artmet-item").removeClass("hide"),$(".__dimensions_badge_embed__").closest(".contentmet-citations").removeClass("hide")}),$(".altmetric-embed").on("altmetric:show",function(){$(".altmetric-embed").closest(".artmet-item").removeClass("hide")})})}return{init:init,triggerModal:triggerModal,closeModal:closeModal,reloadOrHideBadges:reloadOrHideBadges}}(SCM.ContentMetric=SCM.ContentMetric||{}),SCM||{});function getQueryStringSearchParams(t){var n={};for(let e=0;e<t.length;e++){var a=t[e].split("="),i=decodeURIComponent(a[0]),a=1<a.length?decodeURIComponent(a[1]):"";n.hasOwnProperty(i)?n[i]=[].concat(n[i],a):n[i]=a}return n}function getUpdatedDateUrl(e,t,n){if("q"in e){var a=e.q;if(null!==a&&""!==a){e.q=n;var i,r,o=[];for(i in e)e.hasOwnProperty(i)&&(r=e[i],o.push(i+"="+r));t=o.join("&")}else t="q="+n+"&"+t}else t="q="+n+"&"+t;return t}SCM.QueryBuilder={},SCM.QueryBuilder.defaults={runSearch:function(e){window.location.hash="#"+e}},SCM.QueryBuilder.configure=function(){function n(e){var t=e.closest(".querybuilder-instance");(e.hasClass("filter-citation")?(t.find(o).addClass("hide"),t.find(s)):(t.find(s).addClass("hide"),t.find(o))).removeClass("hide")}var t,a=$(".querybuilder-filter"),i=$(".querybuilder-filter-current-wrap"),r=$(".querybuilder-filter-dropdown"),o=$(".querybuilder-input-standard"),s=$(".querybuilder-input-citation"),l=$(".querybuilder-instance"),c=$(".querybuilder-add");function d(n,a){l.each(function(){var e=l.attr("id"),t=$(this).find('li[data-fieldname="Citation"]');e===n&&null!==n||(a?t.show():t.hide())})}(t=jQuery)(".querybuilder-instance").each(function(){t(this).hasClass("hide")||0}),a.each(function(){var e=t(this);e.hasClass("selected")&&(e.closest(i).find(".querybuilder-filter-label-text").text(e.text()),n(e))}),new MutationObserver(()=>{t(".ui-datepicker-prev, .ui-datepicker-next").attr("href","#"),t(".ui-datepicker-prev").attr("aria-label","Previous"),t(".ui-datepicker-next").attr("aria-label","Next")}).observe(document.body,{childList:!0,subtree:!0}),t(document).on("click",".ui-datepicker-prev, .ui-datepicker-next",function(e){e.preventDefault()}),i.off("click"),i.on("click",function(e){$(".sort-order-list").addClass("hide"),e.stopPropagation();e=$(this).find(r);r.not(e).addClass("hide"),e.hasClass("hide")?(e.removeClass("hide"),$(this).attr("aria-expanded","true"),a.first().focus()):(e.addClass("hide"),$(this).attr("aria-expanded","false"))}),a.on("keydown",function(e){var t=a.index(this);"ArrowDown"===e.key?(e.preventDefault(),a.eq((t+1)%a.length).focus()):"ArrowUp"===e.key?(e.preventDefault(),a.eq((t-1+a.length)%a.length).focus()):"Escape"===e.key&&(r.addClass("hide"),i.attr("aria-expanded","false"),i.focus())}),$(document).off("click",".pg_searchresults"),$(document).on("click",".pg_searchresults",function(){r.addClass("hide")}),a.off("click"),a.on("click",function(){var e=$(this),t=e.closest(".querybuilder-filter-dropdown");$thisLabel=e.closest(i).find(".querybuilder-filter-label-text"),t.children(e).removeClass("selected"),e.addClass("selected"),$thisLabel.text(e.text()),n(e),e.hasClass("filter-citation")?d(e.closest(".querybuilder-instance").attr("id)"),!1):d(t=function(){var e=null;return l.each(function(){if(!$(this).hasClass("hide")&&!$(this).find(s).hasClass("hide"))return e=$(this).attr("id"),!1}),e}(),null===t)}),$(".js-querybuilder-input, .citation-input").on("keyup",function(){var e,t,n,a,i;$("#queryBuilderSubmit").addClass("btn-green").removeAttr("style"),((e=e=$(this)).hasClass("citation-input")?(i=e.find(".citation-year").val().replace(/\'/g,"").trim().length,t=e.find(".citation-volume").val().replace(/\'/g,"").trim().length,n=e.find(".citation-issue").val().replace(/\'/g,"").trim().length,a=e.find(".citation-page").val().replace(/\'/g,"").trim().length,0<i||0<t||0<n||0<a||(0!==i||0!==t||0!==n||0!==a)&&void 0):0!==(i=e.val().replace(/\'/g,"").trim().length)&&(0<i||void 0))?c.addClass("valid").prop("disabled",!1):c.removeClass("valid").prop("disabled",!0)}),c.off("click"),c.on("click",function(){var e;$(this).prop("disabled")?alert("A value must be entered before adding another filter."):(e=1,l.each(function(){$(this).hasClass("hide")||e++}),$("#qbInstance"+e).removeClass("hide"),c.removeClass("valid").prop("disabled",!0))}),$(".querybuilder-submit").off("click"),$(".querybuilder-submit").on("click",function(){var e=$("#hfNbnjToc");e.length&&!e.val()&&$(this).removeClass("btn-green").attr("style","opacity: 0.3;")})},$(".js-main").off("click",".querybuilder-submit"),$(".js-main").on("click",".querybuilder-submit",function(){var e="",p=$("#hfCurrentSearchTerm").val(),f=$(".querybuilder-submit").attr("data-current-url"),m=new Object,g=1,v=!1;function C(e,t){var n;return 0<=t.indexOf("q=")?(n=SCM.Common.getQueryStringValue(t,"q"),t.replace(n,n+" AND "+e)):"q="+e+"&"+t}$(".querybuilder-wrap .querybuilder-instance").each(function(e){if(!$(this).hasClass("hide")){var t,n,a=$(this).find(".querybuilder-filter-dropdown li.selected").text(),i=$(this).find(".querybuilder-filter-dropdown li.selected").attr("data-fieldname"),r=!1;if(1===g){if(null==i||""===$.trim(i))return n=(n=$(this).find(".js-querybuilder-input").val().trim()).replace("&",encodeURIComponent("&")),p!==n&&(f=getUpdatedDateUrl(getQueryStringSearchParams(f.split("&")),f,n)),m.q=n,g++,v=!0;null!==(n=SCM.Common.getQueryStringValue(f,"q"))&&""!==n&&(t=f.indexOf(n="q="+n),n+="&"===f[t+n.length]?"&":"",f=f.replace(n,"")),r=!0}var o="";switch(a){case"":var s="q"+g;""!==(o=(o=$(this).find(".js-querybuilder-input").val().trim()).replace("&",encodeURIComponent("&")))&&(f=C(o,f),m[s]=o,v=!0);break;case"All":""!==(o=(o=$(this).find(".js-querybuilder-input").val().trim()).replace("&",encodeURIComponent("&")))&&(f=C(o,f),1===g&&r||1!==g)&&(m["All"+g]=o,v=!0);break;case"Citation":var s=new Object,l="Citation"+g,c=$(this).find("#instance_CitationYear").val().trim(),d=$(this).find("#instance_CitationVolume").val().trim(),u=$(this).find("#instance_CitationIssueNo").val().trim(),h=$(this).find("#instance_CitationPage").val().trim();""===c&&""===d&&""===u&&""===h||(m[l]=s,v=!0,null!==c&&""!==c&&(s.Year=c),null!==d&&""!==d&&(s.Volume=d),null!==u&&""!==u&&(s.IssueNo=u),null!==h&&""!==h&&(s.StartPage=h));break;default:l=i+g;""!==(o=(o=$(this).find(".js-querybuilder-input").val().trim()).replace("&",encodeURIComponent("&")))&&(m[l]=o,v=!0)}}g++});var t,n=SCM.Common.getQueryStringValue(f,"page");"page=1"===f&&(f="&page=1"),e=f=null!==n&&""!==n?f.replace("page="+n+"&","page=1&"):f,v&&(n=-1!==(n=JSON.stringify(m)).indexOf("&")?encodeURIComponent(n):n,e=(t=SCM.Common.getQueryStringValue(f,"qb"))?e.replace(t,n):e+("&"===e[e.length-1]?"qb=":"&qb=")+n),SCM.QueryBuilder.defaults.runSearch(e)}),$(".js-querybuilder-input").keyup(function(e){var t=e.which,e=(13===t&&e.preventDefault(),$.trim($(this).val()));if(13===t&&""!==e)return $(".querybuilder-submit").click(),!1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.indexOf(e,t=t||0)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString(),n=(("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length,n.lastIndexOf(e,t));return-1!==n&&n===t});var SCM=SCM||{},SCM=(!function(r,c,n){var o,d,s,l;function u(){var t,e;c(".tab-item").parent("li").show(),c(".tabs-content").length&&(t="",c(".tabs-content > .content").each(function(){var e=c(this);e.hasClass("active")&&(t=e.attr("id"))}),c("#ViewsDrop li").show(),c("#ViewsDrop").find('[data-tab="#'+t+'"]').closest("li").hide()),(e=c(".item-with-dropdown")).show(),e.each(function(){var t=!1,n=c(this),e=n.hasClass("item-pdf")||n.hasClass("item-epub")||n.hasClass("item-mobi");n.find("ul li, .js-single-pdf-link").each(function(){var e="none"===n.css("display");!n.is(":visible")&&e||(t=!0)}),t||e||n.hide()})}function h(e,t,n){var a,i,r,o,s,l=e;l=p(l,t,n),d.find('.js-content-filter[data-content-filter="article-content"]').hide(),l.$figuresTablesSections.length||d.find('.js-content-filter[data-content-filter="figures-tables"]').remove(),l.$videoSections.length||d.find('.js-content-filter[data-content-filter="video"]').remove(),l.$audioSections.length||d.find('.js-content-filter[data-content-filter="audio"]').remove(),l.$supplementaryData.length||d.find('.js-content-filter[data-content-filter="supplementary-data"]').remove(),l.$peerReviewSections.length||d.find('.js-content-filter[data-content-filter="peer-review"]').remove(),a=e,i=t,r=n,o=c("#ContentTab").find("div.downloadImagesppt"),s=c(".article-metadata-standalone-panel"),d.children(".article-content-filter").on("click",function(){var e=p(a,i,r),t=c(this),t=(t.hide(),t.siblings().show(),t.attr("data-content-filter")),n=null;"figures-tables"===t?n=e.$figuresTablesSections:"video"===t?n=e.$videoSections:"audio"===t?n=e.$audioSections:"supplementary-data"===t?n=e.$supplementaryData:"peer-review"===t&&(n=e.$peerReviewSections),n&&n.length?(e.$contentTopSections.hide(),e.$contentSections.hide(),e.$supplementaryData.hide(),e.$peerReviewSections.hide(),(t=n)&&t.each&&t.each(function(e,t){t=c(t);if(t&&1===t.length&&t.show){t.show();for(var n=t.parent();n&&n.length&&!n.is("#ContentTab");)n.show(),n=n.parent()}}),e.$commentsSection.hide(),e.$pdfPreviewSections.hide(),t=o,n.filter(".fig-section:not(:has(a[restricted]))").length?t.show():t.hide()):(e.$contentTopSections.show(),e.$contentSections.show(),1<s.length?s.show():s.hide(),e.$supplementaryData.show(),e.$peerReviewSections.show(),e.$pdfPreviewSections.show(),e.$commentsSection.show(),o.hide()),SCM.SiteJS.restrictedImages()})}function p(e,t,n){a=c('.widget-items[data-widgetname="'+(i=e)+'"]').find(".js-content-section");var a,i=(i=c('.widget-items[data-widgetname="'+i+'"]').find(".fig-section.vid").closest("div.article-section-wrapper"))&&i.length?a.add(i):a;return{$contentTopSections:c('.widget-items[data-widgetname="'+e+'"]').children(),$contentSections:i,$figuresTablesSections:i.has(".table-wrap, .fig-section"),$videoSections:i.has(".video-section"),$audioSections:i.has(".audio-section"),$commentsSection:c("#ContentTab").find("div.comments"),$pdfPreviewSections:c("#ContentTab").find(".widget-FirstPagePreview"),$supplementaryData:c(".widget-"+t+", .supplementary-material"),$peerReviewSections:c(".widget-"+n+", .js-peer-review")}}r.closeDropDownIfChildItemClicked=function(){c("#Toolbar .f-dropdown > li").on("click",function(){c(this).closest(".toolbar-item").trigger("click")})},r.removeTabLinkIfTabIsEmpty=function(e){c(e).find(".tab-trigger").each(function(){var e=c(this),t=e.attr("data-tab");"#ContentTab"!==t&&c(t).find("*").length<20&&0===(void 0!==(t=c(t).html())?c.trim(t.replace(/(<([^>]+)>)/gi,"")):1).length&&e.parent("li").remove()})},r.hideTabIfDropdownIsEmpty=function(){for(var e=[$pdfDrop,s,l],t=0;t<e.length;t++){var n=e[t];n.children("li").length<1&&n.parent().hide()}d.children("li").length<2&&d.parent().hide()},r.toggleTabContent=function(){c(".tab-trigger").on("click",function(e){e.preventDefault();var e=c(this).attr("data-tab"),t=c(e);t.siblings().removeClass("active"),t.addClass("active"),"#FigureTab"===e&&n.trigger("scroll"),u()})},r.styleToolbarStates=function(){o.on("click",".toolbar-item",function(){var e=c(this);e.addClass("clicked"),e.siblings().removeClass("clicked")}),n.on("click",function(){c(".toolbar-item").each(function(){var e=c(this);e.find("ul").hasClass("open")||e.removeClass("clicked")})})},r.mobileToolbarAccordian=function(){c(".js-toolbar-trigger").on("click",function(e){var t=c(this).next(".js-toolbar"),n=c(this).find(".js-toolbar-trigger-arrow-icon"),a="icon-general_arrow-down",i="icon-general_arrow-up";t.toggleClass("open"),e.stopPropagation(),t.hasClass("open")?n.removeClass(a).addClass(i):(n.removeClass(i).addClass(a),c(".toolbar-search").removeClass("expanded"),c(".f-dropdown").removeClass("open")),c(document.body).on("click",function(){t.removeClass("open"),n.hasClass(i)&&n.removeClass(i).addClass(a)})})},r.toolbarDropdowns=function(){c(".js-toolbar-dropdown").on("click",function(e){var t=c(this).next(".f-dropdown"),n=c(this).find(".js-toolbar-arrow-icon"),a="icon-general_arrow-down",i="icon-general_arrow-up";e.stopPropagation(),c(".f-dropdown").not(t).removeClass("open"),c(".js-toolbar-arrow-icon").not(n).removeClass(i).addClass(a),c(".toolbar-search").removeClass("expanded"),t.hasClass("open")?(c(this).attr("aria-expanded",!1),t.removeClass("open"),n.removeClass(i).addClass(a)):(c(this).attr("aria-expanded",!0),t.addClass("open"),n.removeClass(a).addClass(i)),c(document.body).on("click",function(){t.removeClass("open"),n.hasClass(i)&&n.removeClass(i).addClass(a)})})},r.shouldHideToolbar=function(){return c(window).scrollTop()<c(".js-main").offset().top-65},r.stickyToolbar=function(){c(".page-column--left").length&&c(".toolbar-wrap").length&&c(window).on("scroll",function(){SCM.Toolbar.shouldHideToolbar()?(c(".toolbar-wrap").removeClass("toolbar-stuck"),c(".site-theme-header").find(".navbar-search-container").removeClass("hide")):(c(".toolbar-wrap").addClass("toolbar-stuck"),c(".site-theme-header").find(".navbar-search-container").addClass("hide"))})},r.init=function(){var e,t,n,a,i;o=c("#Toolbar"),$badgeBar=c(".badge-bar"),(o.length||$badgeBar.length)&&(d=c("#ViewsDrop"),s=c("#ShareDrop"),l=c("#ToolsDrop"),$pdfDrop=c("#PdfDrop"),u(),r.mobileToolbarAccordian(),r.removeTabLinkIfTabIsEmpty(d),r.styleToolbarStates(),r.toggleTabContent(),c("#ContentTab .widget-ArticleFulltext").length?h("ArticleFulltext","ArticleDataSupplements","PeerReview"):c("#ContentTab .widget-BookSectionsText").length?h("BookSectionsText","DataSupplements","PeerReview"):c("#ContentTab .widget-BookToc").length?h("BookToc","DataSupplements","PeerReview"):d.closest(".js-item-views").addClass("hide"),r.hideTabIfDropdownIsEmpty(),r.toolbarDropdowns(),e=c(".js-toolbar-item-cme-quiz"),t=c(".widget-RieventCmeQuiz"),n=c(".js-item-cme-quiz.cme-close"),a=c(".js-item-cme-quiz span"),i=c(".js-userComments"),e.length)&&(t.length?(n.hasClass("hide")||n.addClass("hide"),t.hasClass("hide")||t.addClass("hide"),c(".js-item-cme-quiz").on("click",function(){a.toggleClass("hide"),t.toggleClass("hide"),i.toggleClass("hide"),c("#ContentTab").toggleClass("hide")})):e.addClass("hide"))}}(SCM.Toolbar=SCM.Toolbar||{},jQuery,$(document)),SCM||{}),SCM=(SCM.ClientStatsMaster=function(o){var n=parseInt(o("#hdnMultimediaId").val()),a=o("#hdnMediaGroupMultimediaTypeId").val(),i=o("#hdnGuestAccessKey").val(),s=o("#hdnStandaloneMultimediaPageViewMinosLogToken");function l(e,t,n,a,i,r){this.SourceType=e,this.ActionType=t,this.ActionDescription=n,this.ActionUrl=a,this.SearchData=i,this.IsTurnaway=r}function r(e,t){this.ActionFilterKey=e,this.ActionFilterValue=t}function c(e,t,n){this.SessionID=e,this.ClientID=t,this.SiteID=n}function d(e,t,n,a){this.UserSessionItem=new c("",0,o("#hdnSiteID").val()),this.ActionFilterType=new r(e,t),this.ActionDescription=n,this.ActionURL=a}function u(e,t,n,a,i,r){e=new l(e,t,n,a,i,r).toJson();o.ajax({type:"POST",url:"/Services/UserActionService.svc/TrackUserAction",data:e,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.error("jqXhr.responseText: "+e.responseText),console.error("status: "+t))})}function h(e,t,n,a){var i,r;o.ajax({type:"POST",url:"/UserActionStats/LogStatsForStandaloneMultimediaPlay",data:{MultimediaId:e,MediaGroupMultimediaTypeId:t,GuestAccessKey:n}}).fail(function(e,t){window.console&&(console.error("jqXhr.responseText: "+e.responseText),console.error("status: "+t))}),e=e,t=t,n=n,a=a,s.length&&(i=s.val(),r="",a&&a.length&&(r=a.closest(".js-multimedia-section").attr("data-resource-multimedia-id")),a={MultimediaId:e,MediaGroupMultimediaTypeId:t,GuestAccessKey:n,MinosEventLogToken:i,ResourceMultimediaId:r},SCM.Ajax.post("/UserActionStats/LogMinosStatsForStandaloneMultimediaPlay",a).expectJson().catch(console.error))}return l.prototype.toJson=function(){return JSON.stringify(this)},d.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var e=o("#Toolbar"),t={"#FigureTab":"FiguresClicked","#TableTab":"TablesClicked","#ContentTab":"ArticleClicked","#SupplementTab":"SupplementClicked","#MultimediaTab":"MultimediaClicked"};e.on("click",".tab-trigger",function(){var e=o(this).attr("data-tab");e in t&&u(22,"View",t[e],window.location.href,"",!1)})},trackShares:function(){var e=o("#ShareDrop"),t={addthis_button_email:"EmailClicked",addthis_button_share:"TwitterClicked",addthis_button_facebook:"FacebookClicked"};e.on("click","a",function(){var e=o(this).attr("class");e in t&&u(22,"Share",t[e],window.location.href,"",!1)})},trackSingleAction:function(e,t,n){e.on("click",function(){u(22,t,n,window.location.href,"",!1)})},trackClickAction:function(e){e.on("click",function(){o(this).data("clicked")||(h(n,a,i,o(this)),o(this).data("clicked",!0))})},trackPlayAction:function(e){e.on("play",function(){o(this).data("played")||(h(n,a,i,o(this)),o(this).data("played",!0))})},trackJwPlayerClickAction:function(){o(".jwplayer-wrapper").on("click",".jwplayer",function(){o(this).data("played")||(h(n,a,i,o(this)),o(this).data("played",!0))})},trackBrightCovePlayerClickAction:function(){o(".brightcove-wrapper-audio, .brightcove-wrapper").on("click",".brightcove-player",function(){o(this).data("played")||(h(n,a,i,o(this)),o(this).data("played",!0))})},trackSoundcloudPlayAction:function(){var e=document.getElementsByClassName("soundcloud-embed");Array.prototype.forEach.call(e,function(e){var t=SC.Widget(e);t.bind(SC.Widget.Events.READY,function(){t.bind(SC.Widget.Events.PLAY,function(){o(this).data("played")||(h(n,a,i,o(e)),o(this).data("played",!0))})})})},logPlayActionStats:function(e){h(n,a,i,e)},trackGdprCookieAcceptance:function(e,t,n){var a,i;a=e,i=window.location.href,a=new d(e,t,n,i).toJson(),o.ajax({type:"POST",url:"/ClientTrackingHandler.ashx",data:a,contentType:"application/json; charset=utf-8",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.error("jqXhr.responseText: "+e.responseText),console.error("status: "+t))}),SCM.Ajax.post("/UserActionStats/LogMinosStatsForGDPRCookieAcceptAction").expectJson().catch(console.error)}}}(jQuery),$(window).on("load",function(){SCM.ClientStatsMaster.trackContentTabEvents(),SCM.ClientStatsMaster.trackShares(),SCM.ClientStatsMaster.trackSingleAction($('a[data-reveal-id="getCitation"]'),"Tools","GetCitationClicked"),SCM.ClientStatsMaster.trackSingleAction($("div.toolboxGetAlertsWidget"),"Tools","AlertsClicked"),SCM.ClientStatsMaster.trackSingleAction($("div#getAlertsConfirmation"),"Tools","AlertAdded"),SCM.ClientStatsMaster.trackSingleAction($("#PermissionsLink"),"Tools","GetPermissionsClicked"),SCM.ClientStatsMaster.trackSingleAction($("a.tablelink").filter(":parent"),"ViewLargeImage","ViewLargeImageClicked"),SCM.ClientStatsMaster.trackPlayAction($("div.podcast-player > audio")),SCM.ClientStatsMaster.trackSoundcloudPlayAction(),SCM.ClientStatsMaster.trackClickAction($(".glencoe-video")),SCM.ClientStatsMaster.trackJwPlayerClickAction(),SCM.ClientStatsMaster.trackBrightCovePlayerClickAction()}),SCM||{}),SCM=(SCM.JumpLinks=function(o){var a,n,i=500;return{init:function(){(function(){var n,e,t;(a=o(".jumplink-list, .jumplink-list-flyout, .list-issue-jumplinks")).length&&(l(),c(),o(document).on("click","a.js-sec-jumplink",function(){var e;location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&(e=r(e=0<(e=o(this).data("scrollto")).indexOf(" ")?e.split(" ")[0]:e),s(o("[data-legacyid="+e+"]")))}),o(".pg_Article").length&&o(".jumplink-list-flyout").length&&(o(".js-jumplink-flyout-trigger").on("click",function(e){e.stopPropagation(),o(".jumplink-list-flyout-container").toggleClass("active")}),o(document.body).on("click",function(){o(".jumplink-list-flyout-container").removeClass("active")})),[{titleElementSelector:".authorNotes-section-title",wrapperClass:"author-notes-jumplink",targetId:"authorNotesSectionTitle"},{titleElementSelector:".footNotes-section-title",wrapperClass:"foot-notes-jumplink",targetId:"footNotesSectionTitle"},{titleElementSelector:".coiStatement-section-title",wrapperClass:"coi-statement-jumplink",targetId:"coiStatementSectionTitle"},{titleElementSelector:".supplementary-data-section-title",wrapperClass:"datasupplements-section-jumplink",targetId:"supplementary-data"},{titleElementSelector:".js-comments-title",wrapperClass:"usercomments-section-jumplink",targetId:"userComments",linkHtmlSelector:".js-comments-jumplink"},{titleElementSelector:".js-peer-review-title",wrapperClass:"peerreview-section-jumplink",targetId:"peer-review"}].forEach(function(e){var t=o(e.titleElementSelector).first().text().trim(),n=o(e.linkHtmlSelector).first().length?o(e.linkHtmlSelector).first().html():void 0;t&&(t={title:t,targetId:e.targetId,wrapperClass:e.wrapperClass,linkHtml:n},e=t.linkHtml||`<a class="jumplink scrollTo" href="#${t.targetId}">${t.title}</a>`,t=`<li class="section-jump-link head-1 ${t.wrapperClass}"><div class="section-jump-link__link-wrap">${e}</div></li>`,a.append(t))}),(n=a.find("li").has(".jumplink")).length&&(e=o("#ContentColumn [scrollto-destination]")).length&&(e=e.map(function(e,t){return n.has(`[href="#${t.getAttribute("scrollto-destination")}"]`).first().get()}),a.children().detach(),a.empty().append(e)),a.find("li").length||(e=a.parents(".widget-ArticleJumpLinks")).length&&!e.find(".js-jumplink").length&&e.hide(),(t=o(".tab-split-view-comments-pane")).length)&&o(".js-comments-jumplink .js-jumplink").on("click",function(e){e.preventDefault(),t.hasClass("active")||t.click()})})(),function(){var e,t;(n=o(".js-list-book-jumplinks")).length&&(e=n.find(".js-custom-section-jump-link"),t=n.find(".js-section-jump-link"),e.length||t.length)&&(e.each(function(){var e=o(this).data("targetid");o(e).length||o(this).hide()}),t.length||e.not(".hide").length||(t=n.parents(".js-section-jump-link-wrapper")).length&&t.hide(),l(),c())}(),o(".pg_gboscontent").length&&(o(".page-column--left").length&&o(window).on("scroll",function(){o(window).width()<900&&(o(this).scrollTop()<o(".page-column--center").offset().top-65?o(".page-column--left").removeClass("stuck"):o(".page-column--left").addClass("stuck"))}),o(".js-jumplinks-trigger").on("click",function(){o(".jumplink-list").toggleClass("open")})),o(".js-end-note-link").on("click",function(e){var t,n=o(this).attr("data-fn-id"),a=o("#BookId").val(),i=0<o(".widget-ArticleFulltext").length,r=o(".js-content-splitview").length?o(".js-content-splitview"):o(".js-content-standard");n&&n.length&&(i?1<(t=o('.content-inner-wrap:visible .js-xref-fn[reveal-id="'+n+'"]:visible')).length&&(t=(t=t.filter(function(e){return 0===o(t[e]).closest(".table-modal.table-full-width-wrap").length})).first()):t=r.find('.js-xref-fn[reveal-id="'+n+'"]:first'),(t=0===t.length&&a.length?r.find('.js-related-object[legacysectionid="'+n+'"]:first'):t).length)&&s(t)}),o(".book-chapter-body").not(".js-content-splitview .book-chapter-body").on("click",'a[href^="#"]:not([href="#"])',function(e){e.preventDefault();let t=o(this).attr("href").substring(1);e=document.getElementById(t);e&&(s(o(e)),setTimeout(function(){history.pushState(null,null,"#"+t)},500))})}};function r(e){return e=e&&e.replace(/[.]/g,"\\.")}function s(e){var t,n;e.length&&(o(".pg_articlesplitview").length?(t=e,(n=o(".js-content-splitview")).length?n.animate({scrollTop:t.offset().top+n.scrollTop()-n.offsetParent().offset().top},i):o("html,body").animate({scrollTop:t.offset().top},i)):(n=e,o(".toolbar-wrap").length?o(".toolbar-stuck").length?o("html,body").animate({scrollTop:n.offset().top-65},i):o("html,body").animate({scrollTop:n.offset().top-130},i):o("html,body").animate({scrollTop:n.offset().top-32},i)))}function l(){o("body").on("click",'a[href*="#"]:not([href="#"])',function(e){var t;location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname?(e.preventDefault(),t=r(t=o(this).data("scrollto")),(t=o("[data-legacyid="+t+"]")).length?s(t):(t=r(t=this.hash),s(o(t)))):o(this).hasClass("SupplementaryDataLink")&&(e.preventDefault(),window.location=o(this).attr("href"))})}function c(){o(".pg_ChapterStandard").length&&o(window).on("scroll",function(){var n=o(this).scrollTop();o(".book-chapter-body").length&&(o(".jumplink-heading").each(function(){var e=o(this).offset().top,t=o(this).data("magellan-destination"),t=o('.section-jump-link a[href="#'+t+'"]');e-100<n&&o(t).length&&(o(".section-jump-link.active").removeClass("active"),o(t).closest(".section-jump-link").addClass("active"))}),e("data-magellan-destination"))}),(o(".pg_Article").length||o(".pg_Issue").length||o(".pg_ConferenceVolume").length||o(".pg_proceeding").length)&&o(window).on("scroll",debounce(t,100)),o(".pg_GbosContent").length&&o(window).on("scroll",function(){var n=o(this).scrollTop();o(".widget-GbosFulltext").length&&o("h2").each(function(){var e=o(this).offset().top,t=o(this).data("magellan-destination"),t=o('.section-jump-link a[href="#'+t+'"]');e-65<n&&o(t).length&&(o(".section-jump-link.active").removeClass("active"),o(t).closest(".section-jump-link").addClass("active"))})})}function e(t){o("h3").each(function(){var e=o(this).attr(t),e=o('.section-jump-link a[href="#'+e+'"]');o(e).closest(".section-jump-link").addClass("level-2")})}function t(){var n=o(this).scrollTop();o(".articleClientType").each(function(){var e=o(this).offset().top,t=o(this).attr("id"),t=o('.section-jump-link__link-wrap a[href="#'+t+'"]');e-80<n&&(o(t).length&&o(".list-issue-jumplinks li").removeClass("active"),o(t).closest(".section-jump-link").addClass("active"))}),o(".article-body").length&&(o("h2, .jumplink-heading").each(function(){var e=o(this).offset().top,t=o(this).attr("id"),t=o('.section-jump-link__link-wrap a[href="#'+t+'"]');e-80<n&&(o(t).length&&o(".jumplink-list li, .jumplink-list-flyout li").removeClass("active"),o(t).closest(".section-jump-link").addClass("active"),o(".active-section").length)&&o(".active-section").text(o(".section-jump-link.active a").text())}),e("id"))}}(jQuery),SCM||{}),SCM=(SCM.StickyElements=SCM.StickyElements||{},SCM.StickyElements=function(e){var t,n,a,i,r,o,s,l="",c=window.scrollY||window.pageYOffset,d=!1;return{init:function(){t=e("body"),i=e(".page-column--left"),r=e(".toolbar-wrap"),o=e(".page-column--left, .toolbar-wrap, .sr-filters, .article-browse-mobile-nav"),s=e("section.master-header").height(),t.hasClass("pg_article")&&(l="article",n=e(".article-browse-mobile-nav"));t.hasClass("pg_issue")&&(l="issue",a=e(".issue-browse-mobile-nav"));t.hasClass("pg_solr/searchresults")&&(l="search",$srFilters=e(".sr-filters"));window.addEventListener("scroll",u,!1),h()}};function u(){c=window.scrollY||window.pageYOffset,d||(requestAnimationFrame(h),d=!0)}function h(){d=!1,1023<SCM.SiteJS.getViewportWidth()&&"article"===l&&s-25<=c&&r.addClass("fixed"),s-25<=c?("article"===l&&(i.addClass("fixed"),n.addClass("fixed")),"search"===l&&SCM.SiteJS.getViewportWidth()<=1023&&$srFilters.addClass("fixed")):"article"!==l&&"search"!==l||o.removeClass("fixed"),s+175<=c&&"issue"===l?i.addClass("fixed"):"issue"===l&&i.removeClass("fixed"),s+190<=c&&"issue"===l?a.addClass("fixed"):"issue"===l&&a.removeClass("fixed")}}(jQuery),SCM||{}),SCM=(!function(e,r){e.setAccessIcons=function(i){i=i||SCM.AccessIcons;var e=r("[data-resource-id-access]");e.length&&i&&e.each(function(e,t){var n=r(this),a=n.data("resourceIdAccess"),a=SCM.SiteJS.getAccessIcon(a,i);a&&((n=n.find(".js-access-icon-placeholder")).removeClass(function(e,t){return(t.match(/icon-availability_.+/g)||[]).join(" ")}),n.removeClass(a.icon).addClass(a.icon),n.attr("title",a.title),n.html("<span class='screenreader-text'>"+a.title+"</span>"))})},e.getAccessIcon=function(n,e){var a;return(e=e||SCM.AccessIcons).map(function(e,t){if(e.id===n)return a=e,!1}),a}}(SCM.SiteJS=SCM.SiteJS||{},jQuery),SCM||{}),SCM=(!function(e,t){e.registerAnswerLinkClick=function(){t(".js-answer-link").on("click",function(){var e=t(this);e.next(".js-answer-wrap").toggleClass("hide"),e.find(".js-answer-show").toggleClass("hide"),e.find(".js-answer-hide").toggleClass("hide")})}}(SCM.ChapterAnswerSet=SCM.ChapterAnswerSet||{},jQuery),SCM||{}),SCM=(!function(t){(SCM.PubHistory=SCM.PubHistory||{}).registerToggle=function(){t(document.body).on("click",".js-history-dropdown-trigger",function(e){e.preventDefault(),e.stopPropagation(),t(this).closest(".js-history-dropdown-wrap").find(".js-history-entries-wrap").toggleClass("expanded")}),t(document.body).on("click",function(e){0===t(e.target).closest(".js-history-dropdown-wrap").length&&t(".js-history-entries-wrap:visible").toggleClass("expanded")})}}(jQuery),SCM||{}),SCM=(!function(i,d){var r=d("body"),n="True"==d("#hdnAllowSigninRedirectToSamePageOnError").val(),o=null;i.skipToMainContent=function(){d(".skipnav").on("click",function(){d("#skipNav").focus()})},i.globalNavDropdown=function(){d(".js-dropdown-trigger").on("click",function(e){d("body").addClass("on-canvas");var t=d(this).next(".js-dropdown");e.stopPropagation(),d("div, nav").not(t).removeClass("expanded"),t.toggleClass("expanded"),d(document.body).on("click",function(e){d(e.target).closest(".js-dropdown.expanded").length&&!d(e.target).hasClass("js-menu-close")||(d(".js-dropdown").removeClass("expanded"),d("body").removeClass("on-canvas"))})})},i.checkForJS=function(){d("html").removeClass("no-js")},i.detectIfIE=function(){t=window.navigator.userAgent;var e,t=0<(e=t.indexOf("MSIE"))?parseInt(t.substring(e+5,t.indexOf(".",e))):navigator.userAgent.match(/trident/gi)?11:0;0<t&&t<13&&d("html").addClass("IE IE-"+t)},i.detectIfFirefox=function(){null==window.mozInnerScreenX||d("html").addClass("firefox")},i.closeModals=function(){function t(){var e=d(".reveal-modal.open");e.is("[content-id]")||(e.removeAttr("aria-labelledby").attr("aria-hidden","true").removeClass("open"),d("body").removeClass("on-canvas"),o&&(o.focus(),o=null))}d(document).on("click",".close-reveal-modal",function(){t()}),d("body").on("click",function(e){d(e.target).is(".mobile-mask")&&t()}),d(document).on("keydown",function(e){"Escape"!==e.key&&27!==e.keyCode||0<d("#revealModal").closest(".reveal-modal.open").length&&t()})},i.alignModalsVerically=function(){d(".reveal-modal").css("top","25vh")},i.setAllLinksTarget=function(){d('a:not([target="_blank"])').each(function(){var e;(e=this.href)&&(e.startsWith("http")||e.startsWith("/"))&&!e.startsWith("#")&&function(e){if(e.startsWith("/"))return;return!new RegExp("/"+window.location.host+"/").test(e)}(this.href)&&(this.target="_blank")})},i.initSelfServeNavigation=function(){var e=d('.widget-SelfServeContentNavigationMenu a[href="'+window.location.pathname+'"]');e.addClass("ss-currentPage"),e.parents("ul.selfserve-nav-menu-child-list").addClass("open"),e.parents("ul.selfserve-nav-menu-child-list").siblings("button.selfserve-subnav-toggle").removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")},i.toggleSelfServeNavigation=function(){d(".selfserve-subnav-toggle, .selfserve-parent-toggle").on("click",function(e){var t=d(this),n=d(this).siblings(".selfserve-sublist");e.preventDefault(),t.hasClass("icon-general-arrow-filled-right")?t.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):t.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"),n.hasClass("open")?n.removeClass("open"):n.addClass("open")})},i.getViewportWidth=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},i.showFunderInfo=function(){d(".js-linked-funder-name").on("click",function(e){var t=d(this).siblings(".fl-funder-info-wrap");e.stopPropagation(),d(".fl-funder-info-wrap").not(t).removeClass("open"),d(t).toggleClass("open"),d("body").addClass("leftRailModalOpen")})},i.hideFunderInfo=function(){d(document.body).on("click",function(e){d(e.target).parents(".al-funder-info-wrap").length||(d(".al-funder-info-wrap").removeClass("open"),d("body").removeClass("leftRailModalOpen"))})},i.showArticleMetadata=function(){d(".js-expand-collapse-metadata").each(function(){var e=d(this).parent();0===e.next(".js-metadata-wrap").children().length&&e.addClass("hide")}),d(".js-expand-collapse-metadata").on("click",function(){d(this).parent().toggleClass("active");var e=d(this).find(".js-metadata-toggle-icon");e.toggleClass("icon-general-add"),e.toggleClass("icon-general_minus")})},i.scrollToAwardInfo=function(){d(document).on("click","a.js-xref-award",function(){var e,t=d(".js-author-expand-collapse-metadata-wrap"),t=(t.length&&!t.hasClass("active")&&d(".js-expand-collapse-metadata").click(),d(this).data("scrollto")),t=d("div.award-group[data-award-id="+t+"]");d(".pg_Article").length?d("html,body").delay(100).animate({scrollTop:t.offset().top-65},250):(e=d(".js-content-splitview")).delay(100).animate({scrollTop:e.scrollTop()+t.position().top},250)})},i.addAuthorFootnote=function(){d(".al-author-name").each(function(){var e=d(this).find(".info-card-note .xref-fn");e.length&&"*"===e.text()&&(d("<sup/>").append(e.html()).insertAfter(d(this).find(".linked-name")),e.remove()),d(this).find(".info-author-correspondence").length&&d(this).find(".js-linked-name").append(`<i class="icon-corresponding_author" title="Corresponding Author" aria-label="Corresponding Author">
                <span class="screenreader-text">Corresponding Author</span>
                </i>`)})},i.showHideDropDown=function(){d(".selectDropdown").on("click",function(e){d(".dropdown").hide().removeClass("open"),e.stopPropagation(),d(this).siblings(".dropdown").slideToggle("300","linear").toggleClass("open")}),d(document).click(function(){d(".dropdown").hide().removeClass("open")})},i.showMoreRelatedContent=function(e,t){d(e).click(function(){var e=d(this);e.closest(".related-section-box, .widget-RelatedBookContent").find(t).toggleClass("show-item"),e.toggleClass("show-less").find("i").toggleClass("icon-show").toggleClass("icon-hide"),e.hasClass("show-less")?e.find("span").text("See Less"):e.find("span").text("See More")})},i.showSpinner=function(){d(".pagination button, .querybuilder-submit").on("click",function(){d(".preloader-wrap").removeClass("hide").addClass("active")})},i.isLoggedIn=function(){return 0<App.LoginUserInfo.isIndividualLoggedIn},i.toggleSearchCover=function(){d(".sf-facet").length&&d(".sf-facet").click(function(){d(document).ajaxStart(function(){d(".info-inner-cover").removeClass("uncovered"),d(".info-inner-cover").addClass("covered")}),d(document).ajaxComplete(function(){d(".info-inner-cover").removeClass("covered"),d(".info-inner-cover").addClass("uncovered")})})},i.toggleResponsiveLeftColumn=function(){d(document.body).removeClass("noscroll"),d(".js-main").on("click",".toggle-left-col__search, .toggle-left-col__article",function(e){e.preventDefault(),d(document.body).addClass("noscroll"),d(".page-column--left").show(),d(document).ajaxComplete(function(){d(document.body).removeClass("noscroll")})}),d(".toggle-left-col__close").on("click",function(e){e.preventDefault(),d(document.body).removeClass("noscroll"),d(".page-column--left").removeAttr("style")})},i.initDatePicker=function(){d(".pg_advancedsearch").length&&(d("#startDateAuthor").length||d("#startDateSemanticSearch").length)&&d("#startDateAuthor, #endDateAuthor, #startDateSemanticSearch, #endDateSemanticSearch").datepicker()},i.showFullAuthorList=function(){var t=d(".meta-authors--etal"),n=d(".meta-authors--remaining");t.on("click",function(e){e.preventDefault(),t.removeClass("is-active"),t.attr("aria-hidden",!0),n.addClass("is-active"),n.attr("aria-hidden",!1)})},i.showImages=function(e){e.find(".contentFigures").each(function(){var e=d(this);0<=e.attr("src").toLowerCase().indexOf("grey.gif")&&e.attr("src",e.attr("data-original"))})},i.openRevealModal=function(e){d(".reveal-modal").removeClass("open");var t=d("#revealModal"),e=(t.find("#revealContent").empty().prepend(e.clone()),t.closest(".reveal-modal").addClass("open").removeAttr("aria-labelledby").attr("aria-hidden","false"),t.find(".title-label").first()),e=e.length?e.attr("id"):null;e&&t.attr("aria-labelledby",e),SCM.Focus.trap(t),t.length&&SCM.SiteJS.removeDuplicateFootnotes(t),SCM.SiteJS.showImages(t),SCM.SiteJS.restrictedImages()},i.processFigGroup=function(e,t){d(".reveal-modal").removeClass("open");e=d('[reveal-group-id~="'+e+'"]');e.length&&t.length&&(t.children().length||e.length&&e.each(function(){t.append(d(this).clone().removeClass("hide"))}),d("body").addClass("on-canvas"),t.addClass("open"),SCM.SiteJS.showImages(t),SCM.SiteJS.restrictedImages())},i.processNonFigGroup=function(e,t,n){var a=d('#main [content-id~="'+e+'" i]');1<a.length&&n&&(a=a.first()),e.length&&!a.length&&(n=e.split(" ")).length&&(a=0<(n=i.getAllReferencesInRange(n)).html().length?n:""),d(a).hasClass("video-modal")||d(a).hasClass("audio-modal")?SCM.Utilities.Reveal.open(a):(n=d('.reveal-modal[content-id="'+e+'"]')).length?SCM.Utilities.Reveal.open(n):a.length?SCM.SiteJS.openRevealModal(a):SCM.Utilities.Reveal.open(t)},i.removeDuplicateFootnotes=function(e){var t={},e=e.children("#revealContent").children(".fn");d(e).each(function(){var e=d(this).text();t[e]?d(this).remove():t[e]=!0})},i.revealFigsTablesInModal=function(){var a=d("#NeedSubscription");r.on("click",".xref-fn, .link-reveal, .table-graphic, .caption-title",function(){var e=d(this),t=(o=e,d(this).hasClass("js-reveal-distinct")),n=e.hasClass("xref-bibr");0<d(".pg_articlesplitview").length&&n||(n=e.attr("reveal-id")?e.attr("reveal-id"):e.attr("data-reveal-id")?e.attr("data-reveal-id"):e.attr("data-id"),(e=d('#main div[reveal-group-container-id="'+n+'" i]')).length?SCM.SiteJS.processFigGroup(n,e):SCM.SiteJS.processNonFigGroup(n,a,t),SCM&&SCM.RelatedObjectLinks&&SCM.RelatedObjectLinks.initContentWithinModal&&SCM.RelatedObjectLinks.initContentWithinModal())})},i.getAllReferencesInRange=function(e){var t,n=d("<div/>");return e.forEach(function(e){t=d('#main [content-id~="'+e+'" i]').first(),n.append(t.children().clone())}),n},i.showUnAuthenticatedSpans=function(){d(document).ready(function(){var e=d('div[data-widgetname="ArticleFulltext"] span#UserHasAccess').attr("data-userHasAccess");e&&e.length&&"false"===e.toLowerCase()&&d('div[data-widgetname="ArticleFulltext"] a[data-reveal-id]').each(function(){d(this).replaceWith(function(){return"<span>"+this.innerHTML+"</span>"})})})};var s=!(i.jumpToPeerReview=function(){var e=SCM.JSUtility.getSearchParamByName("peerReviewId");e&&(e=d(document.getElementById(e))).length&&d(".pg_Article").length&&d("html,body").delay(100).animate({scrollTop:e.offset().top-65},250)});function e(){var e,t=d(".js-fpp-wrap");return t.length&&t.data("fppReferredEnabled")&&!!(t=t.data("fppReferredDomain"))&&(e=d("<a>",{href:document.referrer}).prop("hostname"))&&0<e.indexOf(t)}i.loadSignInForm=function(e){var t=d(".mobile-account-dropdown ul li ul"),n=d(".dropdown-panel-signin"),a=d("#sign-in-page"),i=SCM.SiteJS.addPeerReviewDataToUrl(SCM.SiteJS.getDefaultReturnUrl());s||(e=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+e+encodeURIComponent(i),SCM.Ajax.get(e).expectHtml().then(function(e){n.html(e),t.html(e),a.html(e),SCM.AddReturnUrlToSocietyLinks(),s=!0,0<d(".dropdown-menu").length&&d(".dropdown-menu").data("displayinloginform")&&d(".dropdown-menu").clone().prependTo(".myAccountNav.login-myaccount-wrap")}).then(function(){var e=d(".inst-admin-link-wrap");e.length&&!0===e.data("moveToInstDropdown")&&e.appendTo(".inst-admin-link-placeholder")}).catch(function(e){console.error("Failed to load sign-in form: "+e)}))},i.initSigninForm=function(){d(".dropdown-toggle.signin").on("click",function(){var e=d(this).data("login-location");i.loadSignInForm(e)}),d(document.body).on("click",".signin-form .signin-button",function(e){var t=d(this).closest(".signin-form"),n=t.find(".preloader-wrap");e.preventDefault(),e.stopPropagation(),SCM.SiteJS.Login(t,n)}),d(document).on("keypress",".signin-form input.username, .signin-form input.password",function(e){var t=d(this).closest(".signin-form"),n=t.find(".preloader-wrap");13===(e.keyCode||e.which)&&(e.preventDefault(),SCM.SiteJS.Login(t,n))}),d(document).on("click",".signout-button",function(e){e.preventDefault();var t="/LogoutHandler.ashx",e=e.target.attributes["logout-type"];e&&(t+="?logoutType="+e.value),window.top.location.assign(t)}),d(document).on("click","a.institutional-login-link",function(e){e.preventDefault();var e=d(this).attr("href"),t=e.toLowerCase();0<t.indexOf("returnurl=")||0<=window.top.location.href.toLowerCase().indexOf(t)||(t=null==(t=SCM.JSUtility.getSearchParamByName("returnUrl"))?window.top.location.href:t)&&0<t.length&&(e=d.param.querystring(e,"returnUrl="+encodeURIComponent(t))),window.top.location.assign(e)}),d(document).on("click","a.shibboleth-signin",function(){var e=window.top.location,e=e.origin+"/SHIBBOLETH?dest="+encodeURIComponent(e.pathname+e.search),e=d(this).data("target").replace("{0}",encodeURIComponent(e));window.top.location=e})},i.initLoginFormDropdown=function(){d(".signin-form").on("click",'a[data-target="register"]',function(e){e.preventDefault();e=SCM.JSUtility.getSearchParamByName("returnUrl");null==e&&(e=location.pathname+location.search),window.top.location.assign("/my-account/register?returnUrl="+encodeURIComponent(e))})},i.Login=function(n,e){var t=SCM.Captcha.GetCaptchaResponse(n),a=n.find("input#enableReCaptcha").val()??"true";const i=n.find("input.username"),r=n.find("input.password");var o,s,l=i.val(),c=r.val();0===l.length||0===c.length?(n.find(".error").show(),i.attr("aria-invalid","true"),r.attr("aria-invalid","true")):(e.removeClass("hide"),d(".error, .no-permission").hide(),i.removeAttr("aria-invalid"),r.removeAttr("aria-invalid"),s=n.closest(".widget-LoginForm"),o="",s.length&&(o=s[0].className),s=SCM.Captcha.GetCaptchaInfo().ReCaptchaWidgetControlId,SCM.Ajax.post("/LoginHandler.ashx",{user:l,pass:c,enableReCaptcha:a,recaptchaResponse:t,captchaInstanceName:s}).expectJson().then(function(e){var t;e.LoginSuccess?(SCM.GoogleTagManagerDataLayerEvents&&(t=SCM.SiteJS.getDefaultReturnUrl(),SCM.GoogleTagManagerDataLayerEvents.logSuccessfulAction(t,o,"signin")),SCM.SiteJS.loginReturnBack()):((e.UnverifiedUser?((t=n.find(".error")).html(e.ErrorMessage),t):n.find(".error")).show(),i.attr("aria-invalid","true"),r.attr("aria-invalid","true"),SCM.Captcha.ResetCaptcha(n))}).catch(function(e){console.error("Login failure: "+e),n.find(".error").show(),i.attr("aria-invalid","true"),r.attr("aria-invalid","true")}).finally(function(){e.addClass("hide")}))},i.loginReturnBack=function(){var e=SCM.SiteJS.getDefaultReturnUrl(),t=(/^\/((\w+\/)?sign-in|my-account\/forgot-password|my-account\/reset-password|my-account\/register|institutional-login)/i.test(e)&&(e="/"),d("body"));"/"!==(e=n||!t.hasClass("pg_error")&&!t.hasClass("pg_error404")?e:"/")&&(e=null!==(t=e.match(/\/\/([^/]+\.)?([^./]+\.[^./]+)/i))&&t[2].toLowerCase()!==window.top.location.hostname.match(/(.*\.)?([^.]+\.[^.]+)/i)[2].toLowerCase()?"/":SCM.SiteJS.addPeerReviewDataToUrl(e)),window.top.location.assign(e)},i.addPeerReviewDataToUrl=function(e){var t,n=SCM.Common.getQueryStringValue(window.location.href,"peerReviewId");return n?((t=new URL(e)).searchParams.set("peerReviewId",n),t.toString()):e},i.getDefaultReturnUrl=function(){var e=SCM.JSUtility.getSearchParamByName("returnUrl");return e=null!=(e=null!=(e=null!=(e=e&&decodeURIComponent(e))&&0!==e.length?e:SCM.JSUtility.getSearchParamByName("redirectUrl"))&&0!==e.length?e:SCM.SiteJS.getCanonicalUrl())&&0!==e.length?e:window.top.location.pathname+window.top.location.search},i.getCanonicalUrl=function(){var e=d('link[rel="canonical"]').attr("href");return null==e||0===e.length?"":e},i.initSearchResultsSort=function(){var e,t,n;(d(".widget-SolrSearch").length||d("#NbnjToc").length)&&(e=d(".sort-order-select-option"),t=d(".sort-order-select"),n=d(".preloader-wrap"),t.on("change",function(){var e=d(this).val();SCM.SearchResults.doSolrSearch({queryString:e,source:"searchresults"})}),e.on("click",function(){d(this).find("option[value]").length&&n.removeClass("hide")}))},i.initSearchResultsPagination=function(){d(".widget-SolrSearch").length&&d(document.body).on("click",".al-pageNumber,.sr-nav-previous,.sr-nav-next",function(){var e;d(this).hasClass("currentPage")||(d(".preloader-wrap").removeClass("hide"),e=d(this).attr("data-url"),SCM.SearchResults.doSolrSearch({queryString:e}))})},i.restrictedImages=function(){d("a.fig-link[restricted]").each(function(){var e=d(this).parent("div.graphic-wrap"),t=d(e).children(".copy-right-statement");e.attr("restricted",""),e.off("contextmenu").on("contextmenu",function(){return d(t).toggle(),!1}),d(this).click(function(){return d(t).toggle(),!1}),d(t).click(function(){return d(t).toggle(),!1})})},i.moveCompetingInterestsSection=function(){d(".references-title").length?d(".coi-statement-section-wrapper").insertBefore(".references-title"):d(".backreferences-title").length?d(".coi-statement-section-wrapper").insertBefore(".backreferences-title"):d(".acknowledgements-title").length?d(".coi-statement-section-wrapper").insertAfter(".acknowledgements-title"):d(".backacknowledgements-title").length&&d(".coi-statement-section-wrapper").insertAfter(".backacknowledgements-title")},i.adjustRelatedTagsDisplay=function(){d(".article-metadata-panel:not(:last)").remove();var t=d(".article-metadata-panel").last();t.length||(t=d(".article-metadata-standalone-panel")),[d(".kwd-group"),d(".related-topic-tags"),d(".article-metadata-taxonomies, .content-metadata-taxonomies"),d(".article-metadata-tocSections"),d(".wi-open-science-badge")].filter(function(e){return e.length}).forEach(function(e){t.append(e)}),t.text().trim().length?t.show():t.hide()},i.showPdfOnlyLink=function(){d(".PdfOnlyLink").length&&d(".toolbar-item.item-pdf").length&&d(".toolbar-item.item-pdf").children().clone().appendTo(".PdfOnlyLink")},i.ariaToggleTable=function(t){var n=d(t+"-button"),a=n.children(".collapse-icon");n.on("click",function(e){e.preventDefault(),"true"===n.attr("aria-expanded")?n.attr("aria-expanded","false"):n.attr("aria-expanded","true"),a.hasClass("icon-general-arrow-filled-down")?a.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"):a.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"),d(t).toggleClass("hide"),"false"===d(t).attr("aria-hidden")?d(t).attr("aria-hidden","true"):d(t).attr("aria-hidden","false")})},i.initAriaControls=function(){d("[id^=collapsible-table-]").each(function(e){SCM.SiteJS.ariaToggleTable("#collapsible-table-"+e)})},i.initializeArticlePdfLinks=function(){var e=d("#ArticleList h5.item-title");function o(e){e.off("click")}null!==e&&e.each(function(){var t,n,a,i,e=d(this),r=e.parent().find(".article-pdfLink");null!==r&&(function(e){e=e.data("resourceIdAccess");if(SCM.AccessIcons&&e)return(e=SCM.SiteJS.getAccessIcon(e,SCM.AccessIcons))&&"icon-availability_cart"!==e.icon;return}(e)||SCM.SiteJS.isLoggedIn()?(o(e=r),n=App.SiteURL+"HTTPHandlers/ArticlePdfHandler.ashx",a=e.data("journal"),null!==(i=e.data("pdf-id"))&&null!==a&&e.on("click",function(e){e.preventDefault(),window.open(n+"?journal="+a+"&multimediaId="+i,"_blank")})):(o(e=r),t=SCM.SiteJS.getDefaultReturnUrl(),e.on("click",function(e){e.preventDefault(),window.location="/sign-in?returnUrl="+encodeURIComponent(t)})))})},i.triggerFppOnRedirect=function(){e()&&d(".firstPagePreviewImage").click()},i.modalManager=function(){var e,t={".js-open-saveSearch-modal":".solrSearchSaveModel",".js-add-edit-trigger":"#journalAddEditDiv",'.js-open-alert-modal[data-user-logged-in="True"]':".userAlertSignUpModal",'[data-reveal-id="addArticleUpdateAlert"]':"#AddAlert",'[data-reveal-id="emailUsernameModal"]':"#emailUserName",".firstPagePreviewImage":"#divFirstPagePreview",'[data-reveal-id="getCitations"]':"#getCitations"};for(e in t)!function(t,n){d(document.body).on("click",t,function(){var e=d(t).data("userloggedin");".js-open-saveSearch-modal"===t&&e||".js-open-saveSearch-modal"===t&&"false"===e.toLowerCase()||(d(n).closest(".reveal-modal").addClass("open"),d(document.body).addClass("on-canvas"))})}(e,t[e])},i.ckbSelectAll=function(){d(document.body).on("click",".js-ckbCheckAll",function(){var e=d(this),n=e.prop("checked");e.parents(".js-chkbParent").siblings().find('input[type="checkbox"]').each(function(e,t){t=d(t);t.prop("checked")!==n&&t.prop("checked",n).trigger("change")})})},i.checkForEmptyArticleLeftNav=function(){var e,t,n;d(".pg_Article").length&&(e=d(".pg_Article .info-widget-wrap > div"),t=d(".pg_Article .info-widget-wrap").closest(".info-inner-wrap"),n=d(".article-browse-top.article-browse-mobile-nav"),0<e.length)&&(t.removeClass("empty"),n.removeClass("empty"))},i.mobileNav=function(){var t=d(".myaccount-tabs-inner-wrap"),n=d(".mobile-nav-icon");d(document).on("click",".myaccount-mobile-nav",function(e){e.stopPropagation(),t.toggle(),n.hasClass("icon-general-arrow-filled-down")?n.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-up"):n.removeClass("icon-general-arrow-filled-up").addClass("icon-general-arrow-filled-down")}),d(document).click(function(){t.hide().removeAttr("style")})},i.toggleSupplementalTablesAndFigures=function(){function n(e){var t=e.find(".js-expand-view"),e=e.find(".js-collapse-view");t.hasClass("supplemental-material-collapsed")?(t.removeClass("supplemental-material-collapsed"),e.addClass("supplemental-material-collapsed")):(t.addClass("supplemental-material-collapsed"),e.removeClass("supplemental-material-collapsed"))}function a(e){e.hasClass("supplemental-material-collapsed")?e.removeClass("supplemental-material-collapsed"):e.addClass("supplemental-material-collapsed")}d(".js-supplemental-figure-toggle").on("click",function(e){e.preventDefault();var e=d(e.currentTarget),t=e.attr("data-id");a(d(".js-supplemental-figure-graphic-wrap[data-id='"+t+"']").first()),n(e)}),d(".js-supplemental-table-toggle").on("click",function(e){e.preventDefault();var e=d(e.currentTarget),t=e.attr("data-id");a(d('.js-supplemental-table-graphic-wrap[data-id="'+t+'"]')),n(e)})},i.myAccountCheckoutMessage=function(){var e,t,n;d(".widget-MyAccount").length&&d(".js-my-account-checkout-message").length&&(e=d(".js-my-account-checkout-message").html().trim(),n=(t=d("#revealModal")).find("#revealContent"),t.length)&&n.length&&e&&(n.empty().prepend(e),n.find(".js-my-account-checkout-message").removeClass("hide"),r.addClass("on-canvas"),t.addClass("open"))},i.inlineGraphicWrap=function(){var e=d(".js-graphic-position-anchor").parents(".js-content-section");0<e.length&&(e.addClass("inline-graphic-image-wrap"),e.next(".js-content-section").addClass("inline-graphic-text-wrap").after(d("<div class='text-break'></div>")))},i.init=function(){function a(e){return e&&"[XSLTSectionID]"!==e}var e;i.checkForJS(),i.detectIfIE(),i.detectIfFirefox(),i.skipToMainContent(),i.globalNavDropdown(),SCM.Logging.init(),SCM.JqueryMigrateLogger.init(),i.initAriaControls(),i.initSearchResultsSort(),i.initSearchResultsPagination(),SCM.Utilities.LazyLoad.init(),SCM.AuthorLinks.init(),i.showFunderInfo(),i.hideFunderInfo(),i.showArticleMetadata(),i.scrollToAwardInfo(),SCM.PubHistory.registerToggle(),i.showFullAuthorList(),i.addAuthorFootnote(),i.showHideDropDown(),i.showMoreRelatedContent(".grw-viewmorelink",".grw-hide-me"),i.showMoreRelatedContent(".mrw-viewmorelink",".mrw-hide-me"),i.showSpinner(),i.toggleResponsiveLeftColumn(),i.restrictedImages(),i.moveCompetingInterestsSection(),i.initSigninForm(),i.initSelfServeNavigation(),i.toggleSelfServeNavigation(),i.setAllLinksTarget(),i.showPdfOnlyLink(),SCM.gdprCookieBanner.init(),i.alignModalsVerically(),d(".issue-featured-image a, .featured-img-wrapper a, .js-issue-graphical-abstract a").on("click",function(e){var t,n,a;e&&e.preventDefault&&(e.preventDefault(),t=(e=d(e.currentTarget)).parent().html().trim(),a=(n=d("#revealModal")).find("#revealContent"),e=e.attr("href").trim(),n.length)&&a.length&&e&&t&&(a.empty().prepend(t),a.find("img").attr("src",e),a.find(".js-graphical-abstract-caption").removeClass("js-modal-only"),r.addClass("on-canvas"),n.addClass("open"))}),(e=d("body.pg_article, body.pg_articlesplitview")).length&&(e.on("mouseover",".table-wrap a.jumplink-placeholder",function(e){e=d(e.currentTarget);a(e.data("sectionid"))&&e.removeClass("jumplink-placeholder")}),e.on("click",".table-wrap a",function(e){var t=d(e.currentTarget),n=t.data("sectionid");a(n)&&(e.preventDefault(),e="/view-large/"+n,t.parent(".fig-graphic").length&&(e="/view-large/figure/"+n+"/"+t.attr("id")),window.open(e,"_blank"))})),SCM.Toolbar.stickyToolbar(),i.ckbSelectAll(),i.mobileNav(),i.toggleSupplementalTablesAndFigures(),i.inlineGraphicWrap(),i.jumpToPeerReview(),i.myAccountCheckoutMessage(),i.scrollToTarget(),SCM.BookPartTitleFacet.init(),SCM.BookPartTitleFacet.showAllItems(),SCM.CollectionFacet.init(),SCM.CollectionFacet.showAllItems(),SCM.SearchAccessibility.init(),SCM.FocusRestore.init()},i.windowLoadInit=function(){i.initDatePicker(),i.revealFigsTablesInModal(),i.showUnAuthenticatedSpans(),i.toggleSearchCover(),i.modalManager(),i.triggerFppOnRedirect(),i.closeModals(),i.checkForEmptyArticleLeftNav()},i.initArticleTopInfoAccessOptions=function(){var e=window.location.pathname.substring(0,window.location.pathname.indexOf("/",2))+"/sign-in?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search);d(".article-top-info-user-restricted-options").find(".article-top-info-sign-in").attr("href",e)},i.scrollToTarget=function(){var e,t,n,a=window.location.hash;""!=a&&null!=a&&(a=a.replace(/([;?%&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"),a=d(a),e=d(".js-content-splitview"),a.length)&&e.length&&(t=a.offset().top+e.scrollTop()-e.offsetParent().offset().top-60,n=d(".pg_articlesplitview"),t>d(".splitview__wrapper").offset().top-10?(n.addClass("stuck js-stuck"),n.removeClass("sticky-splitview-nav js-sticky-splitview-nav")):(n.removeClass("stuck js-stuck"),n.addClass("sticky-splitview-nav js-sticky-splitview-nav")),e.scrollTop(a.offset().top+e.scrollTop()-e.offsetParent().offset().top-60))}}(SCM.SiteJS=SCM.SiteJS||{},jQuery,SCM.ArticleAccessIcons),!function(a){function e(){SCM.SiteJS.getViewportWidth()<=1023?n.addClass("mobile"):n.removeClass("mobile")}var t,n=a(".page-column--left");a(window).on("resize",function(){clearTimeout(t),t=setTimeout(function(){e()},10)}),a(window).on("load",function(){SCM.SiteJS.windowLoadInit(),SCM.SiteJS.adjustRelatedTagsDisplay(),a("body").hasClass("pg_articlesplitview")&&(SCM.SplitScreen&&SCM.SplitScreen.ScrollToWindowHash(),SCM.SplitScreen.JumpToPeerReviewTab()),(a(".widget-Alerts").length||a(".js-contextual-alert-signup").length)&&(Theme.Alerts&&Theme.Alerts.triggerAlertModalOnRedirect&&Theme.Alerts.triggerAlertModalOnRedirect(),Theme.Alerts)&&Theme.Alerts.triggerContextualAlertModalOnRedirect&&Theme.Alerts.triggerContextualAlertModalOnRedirect(),SCM.SplitScreen.isSplitScreen()||Theme.HashHandler.scrollToSubSection()}),a(function(){e(),SCM.SiteJS.init(),SCM.Toolbar.init(),SCM.PDFAccess.init(),SCM.SiteJS.setAccessIcons(),SCM.FormWidget.init(),SCM.JumpLinks.init(),SCM.AddReturnUrlToSocietyLinks(),0<a(".widget-ArticleFulltext").length&&SCM.ArticleFulltext.init(),SCM.ArticleLinks.init(),SCM.SeeAlso.init(),a("body").hasClass("pg_articlesplitview")&&SCM.SplitScreen.init(),a("body").hasClass("pg_brightcove")&&SCM.Utilities.Brightcove.init(),a(".js-cadmore-embed-placeholder").length&&Theme.Utilities.Cadmore&&Theme.Utilities.Cadmore.init&&Theme.Utilities.Cadmore.init(),a(".widget-ShibbolethSignin").length&&Theme.ShibbolethSignin&&Theme.ShibbolethSignin.init&&Theme.ShibbolethSignin.init(),Theme.InstitutionSsoAuth&&Theme.InstitutionSsoAuth.init&&Theme.InstitutionSsoAuth.init(),SCM.SubjectBrowse.init(),SCM.JwPlayer&&SCM.JwPlayer.init&&SCM.JwPlayer.init(),SCM.CompactAddToCartButton&&SCM.CompactAddToCartButton.init&&SCM.CompactAddToCartButton.init(),SCM.NimbleAddToCart&&SCM.NimbleAddToCart.init&&SCM.NimbleAddToCart.init(),SCM.Utilities&&SCM.Utilities.Reveal&&SCM.Utilities.Reveal.init(),SCM.ToolboxGetCitations&&SCM.ToolboxGetCitations.init&&SCM.ToolboxGetCitations.init(),Theme.Store&&Theme.Store.init&&Theme.Store.init(),SCM.StripePayment&&SCM.StripePayment.init&&SCM.StripePayment.init(),SCM.Dropdowns&&SCM.Dropdowns.init&&SCM.Dropdowns.init(),SCM.Modals&&SCM.Modals.init&&SCM.Modals.init(),SCM.PersonalizedContent&&SCM.PersonalizedContent.init&&SCM.PersonalizedContent.init(),SCM.TermsAndConditions&&SCM.TermsAndConditions.init&&SCM.TermsAndConditions.init(),SCM.ArticleMainView.init(),Theme.ArticleAbstract&&Theme.ArticleAbstract.init&&Theme.ArticleAbstract.init(),Theme.BookAbstract&&Theme.BookAbstract.init&&Theme.BookAbstract.init(),Theme.ChapterAbstract&&Theme.ChapterAbstract.init&&Theme.ChapterAbstract.init(),Theme.ConferenceVolumeSelector&&Theme.ConferenceVolumeSelector.init&&Theme.ConferenceVolumeSelector.init(),Theme.ContactUsForm&&Theme.ContactUsForm.init&&Theme.ContactUsForm.init(),Theme.CookiePro&&Theme.CookiePro.loadCookiesIfNotEnabled&&Theme.CookiePro.loadCookiesIfNotEnabled(),Theme.FreshChat&&Theme.FreshChat.init&&Theme.FreshChat.init(),Theme.ToolboxEbook&&Theme.ToolboxEbook.downloadEbookChapterPage&&Theme.ToolboxEbook.downloadEbookChapterPage(),Theme.NewAndPopular&&Theme.NewAndPopular.init&&Theme.NewAndPopular.init(),Theme.PeerReview&&Theme.PeerReview.init&&Theme.PeerReview.init(),Theme.StickyHeaderAd&&Theme.StickyHeaderAd.init&&Theme.StickyHeaderAd.init(),Theme.StickyFooterAd&&Theme.StickyFooterAd.init&&Theme.StickyFooterAd.init(),Theme.StickySidebarAd&&Theme.StickySidebarAd.init&&Theme.StickySidebarAd.init(),Theme.InterstitialAd&&Theme.InterstitialAd.init&&Theme.InterstitialAd.init(),Theme.RegisterUserModals&&Theme.RegisterUserModals.init&&Theme.RegisterUserModals.init(),Theme.RegisterUserWorkflow&&Theme.RegisterUserWorkflow.init&&Theme.RegisterUserWorkflow.init(),Theme.PdfCoverPage&&Theme.PdfCoverPage.init&&Theme.PdfCoverPage.init(),Theme.OneTrustDarkOverlay&&Theme.OneTrustDarkOverlay.init&&Theme.OneTrustDarkOverlay.init(),SCM.GoogleTagManagerDataLayerEvents&&SCM.GoogleTagManagerDataLayerEvents.init&&SCM.GoogleTagManagerDataLayerEvents.init(),Theme.Utilities.YouTube&&Theme.Utilities.YouTube.init&&Theme.Utilities.YouTube.init(),Theme.Utilities.VimeoVideo&&Theme.Utilities.VimeoVideo.init&&Theme.Utilities.VimeoVideo.init(),SCM.Pendo&&SCM.Pendo.logPageEvent&&SCM.Pendo.logPageEvent(),Theme.BookSectionEditors&&Theme.BookSectionEditors.init&&Theme.BookSectionEditors.init(),SCM.WPSKevelAds&&SCM.WPSKevelAds.init&&SCM.WPSKevelAds.init(),SCM.TapNative&&SCM.TapNative.init&&SCM.TapNative.init(),a(".widget-InstitutionSignIn").length&&Theme.InstitutionSignIn&&Theme.InstitutionSignIn.init&&Theme.InstitutionSignIn.init(),a(".widget-ConferencesBrowseByYear").length&&Theme.ConferencesBrowseByYear&&Theme.ConferencesBrowseByYear.init&&Theme.ConferencesBrowseByYear.init(),(a(".widget-MyAccount").length||a(".widget-RegisterUserWorkflow").length)&&(Theme.MyProfile&&Theme.MyProfile.init&&Theme.MyProfile.init(),Theme.OrcidId)&&Theme.OrcidId.init&&Theme.OrcidId.init(),a(".widget-MyInterests").length&&Theme.MyInterests&&Theme.MyInterests.init&&Theme.MyInterests.init(),a(".widget-RegisterUser").length&&Theme.RegisterUser&&Theme.RegisterUser.init&&Theme.RegisterUser.init(),a(".current-issue-search").length&&Theme.SearchWithinIssue&&Theme.SearchWithinIssue.init&&Theme.SearchWithinIssue.init(),a(".solrSearchSaveWidget").length&&Theme.SolrSavedSearches&&Theme.SolrSavedSearches.init&&Theme.SolrSavedSearches.init(),a(".js-userComments").length&&Theme.UserComments&&Theme.UserComments.init&&Theme.UserComments.init(),a(".widget-EpubPdfViewerToolbar").length&&Theme.DocumentViewerToolbar&&Theme.DocumentViewerToolbar.init&&Theme.DocumentViewerToolbar.init(),(a(".widget-GuestCheckout").length||a(".widget-RestoreGuestAccess"))&&Theme.GuestCheckout&&Theme.GuestCheckout.init&&Theme.GuestCheckout.init(),a(".widget-CheckoutOptions").length&&Theme.StoreCheckoutOptions&&Theme.StoreCheckoutOptions.init&&Theme.StoreCheckoutOptions.init(),(a("body").hasClass("pg_Issue")||a("body").hasClass("pg_IssueCovers"))&&(Theme.Issue&&Theme.Issue.init&&Theme.Issue.init(),Theme.MeetingAbstractIssue)&&Theme.MeetingAbstractIssue.init&&Theme.MeetingAbstractIssue.init(),(a("body").hasClass("pg_book")||a("body").hasClass("pg_chapterstandard")||a("body").hasClass("pg_articlesplitview"))&&Theme.CurrentBookSearch&&Theme.CurrentBookSearch.init&&Theme.CurrentBookSearch.init(),a("body").hasClass("pg_book")&&Theme.BookToc.init(),a(".widget-MultiQuerySelectableContentList").length&&Theme.MultiQuerySelectableContentList&&Theme.MultiQuerySelectableContentList.init&&Theme.MultiQuerySelectableContentList.init(),a(".widget-DeepDyve").length&&SCM.DeepDyve&&SCM.DeepDyve.init(),a(".widget-AccountActionEmail").length&&SCM.MyAccount.initSendAccountActivationEmail(),(a(".widget-Alerts").length||a(".js-contextual-alert-signup").length)&&Theme.Alerts&&Theme.Alerts.init&&Theme.Alerts.init(),a(".widget-ArticleAiLayAbstract").length&&SCM.SharedWidgets.ArticleAiLayAbstract&&SCM.SharedWidgets.ArticleAiLayAbstract.init(),a(".widget-TrendMD").length&&SCM.SharedWidgets.TrendMD.init(),a(".scite-badge").length&&SCM.SharedWidgets.Scite.init()}),a(document).ajaxStart(function(){a("body").css("cursor","wait")}).ajaxComplete(function(e,t,n){SCM.SiteJS.initSearchResultsSort(),SCM.SolrSearch.ajaxComplete(),SCM.SiteJS.setAccessIcons(),SCM.SiteJS.setAllLinksTarget(),a("body").css("cursor","default"),Theme.MathJax&&Theme.MathJax.ajaxInit&&Theme.MathJax.ajaxInit(),SCM.Utilities.LazyLoad.init(),SCM.SiteJS.alignModalsVerically()})}(jQuery),SCM||{}),SCM=(!function(e,C){e.initMyAccount=function(){var e,t=C(".myaccount-tabs-inner-wrap"),n=(C(".mobile-nav-icon"),C(window).on("scroll",function(){clearTimeout(e),e=setTimeout(function(){t.removeAttr("style")},50)}),C(window).on("resize",function(){clearTimeout(e),e=setTimeout(function(){t.removeAttr("style")},50)}),location.pathname),a=n.indexOf("/","/my-account/".length);0<a&&(n=n.substring(0,a));C(".myaccount-tabs-inner-wrap").find("li").has('a[href="'+n+'"]').addClass("is-active"),C(document).on("click","#myaccount-tabs-content #updatePersonalDetailsBtn",function(){var t=C("#myaccount-tabs-content"),e=(t.find(".success-message").html("").hide(),t.find(".error-message").html("").hide(),t.find("#Title").val()),n=t.find("#FirstName").val(),a=t.find("#LastName").val(),i=t.find("#Phone").val(),r=t.find("#CountryList").val(),o=/[<>]/;o.test(e)||o.test(n)||o.test(a)||o.test(i)?(o=t.find("#err-message-angle-brackets").html(),t.find(".error-message").html(o).show(),C("html, body").animate({scrollTop:t.offset().top},10)):C.post("/MyAccount/UpdateAccount",{title:e,firstName:n,lastName:a,phone:i,country:r},function(e){e.Success?(C("#header-account-info-user-fullname").html(n+" "+a),t.find(".success-message").html(e.Html).show()):(t.find(".error-message").html(e.Html).show(),C("html, body").animate({scrollTop:t.offset().top},10))})});var c=C("#change-password").find(".error-message").html();C(document).on("click","#changePasswordBtn",function(){var t=C("#change-password"),n=t.find(".success-message"),a=(n.hide(),t.find(".error-message")),e=(a.html(c).hide(),{}),i=t.find("#currentPassword").val(),r=!1,o=(""===i&&(e.currentPassword=C("label[for=currentPassword]").text().replace("*",""),r=!0),t.find("#newPassword").val()),s=(""===o&&(e.newPassword=C("label[for=newPassword]").text().replace("*",""),r=!0),t.find("#confirmNewPassword").val());if(""===s&&(e.confirmNewPassword=C("label[for=confirmNewPassword]").text().replace("*",""),r=!0),r){for(var l in e)a.append("<p> * "+e[l]+"</p>").show();C("html, body").animate({scrollTop:t.offset().top},10)}else a.html(""),C.post("/MyAccount/ChangePassword",{currentPassword:i,newPassword:o,confirmNewPassword:s},function(e){"1"==e[0]?(n.show(),C.post("/LOGIN",{user:e[1],pass:o,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"}).done(function(e){"1"!==e&&(location.href="/sign-in")})):(a.html(e[1]).show(),C("html, body").animate({scrollTop:t.offset().top},10))})}),C(document).on("click","#changeEmailBtn",function(){var a=C("#change-email-address"),i=a.find(".success-message"),r=a.find(".error-message"),e=a.find("#newEmailAddress").val(),t=a.find("#confirmNewEmailAddress").val(),n=a.find("#currentPassword").val(),o={},s=!1;if(r.html(""),""===e&&(o.newEmailAddress=C("label[for=newEmailAddress]").text().replace("*",""),s=!0),""===t&&(o.confirmNewEmailAddress=C("label[for=confirmNewEmailAddress]").text().replace("*",""),s=!0),""===n&&(o.password=C("label[for=currentPassword]").text().replace("*",""),s=!0),s){for(var l in r.append("Please complete the following required fields:"),o)r.append("<p> * "+o[l]+"</p>");r.show(),C("html, body").animate({scrollTop:a.offset().top},10)}else C.post("/UserDashboard/RequestEmailAddressChange",{newEmailAddress:e,confirmNewEmailAddress:t,password:n},function(e){if(null!=e)if(e.Success)a.children(".change-email-address-form").hide(),i.show();else{for(var t=0,n=e.Messages.length;t<n;t++)r.append("<p> * "+e.Messages[t]+"</p>");r.show(),C("html, body").animate({scrollTop:a.offset().top},10)}})})},e.initTestPassword=function(){var t=C(".register-form-wrap, .editable-userprofile-info"),n=/[A-Z]/,a=/[0-9]/,i="",r=t.find(".icon-case"),o=t.find(".password-confirm-icon"),s=t.find(".password-input-icon"),l=t.find(".icon-length"),c=t.find(".icon-number"),d=t.find(".password-check-wrap"),u=!1;t.on("keyup","#Password",function(){var e=C(this).val();i=e,u?d.hide():d.show(),10<=e.length?SCM.MyAccount.showValidPasswordCriteria(l):SCM.MyAccount.showInvalidPasswordCriteria(l),n.test(e)?SCM.MyAccount.showValidPasswordCriteria(r):SCM.MyAccount.showInvalidPasswordCriteria(r),a.test(e)?SCM.MyAccount.showValidPasswordCriteria(c):SCM.MyAccount.showInvalidPasswordCriteria(c),l.hasClass("green")&&r.hasClass("green")&&c.hasClass("green")?(u=!0,d.fadeOut(1500),s.hide(),e===t.find("#ConfirmPassword").val()&&(o.hide(),t.find("#registerBtn").addClass("btn-green"),t.find(".register-button-overlay").hide())):(u=!1,d.show(),s.show()),""!==e&&null!==e||(d.hide(),s.hide())}),t.on("keyup","#ConfirmPassword",function(){var e=C(this).val();i===e?(o.hide(),u&&(t.find("#registerBtn").addClass("btn-green"),t.find(".register-button-overlay").hide())):""===e||null===e?o.hide():o.show()}),C(document).on("click",function(){d.hide()})},e.initTestPasswordWithExtendedRequirements=function(){var a=C(".register-form-wrap, .editable-userprofile-info"),i=/[A-Z]/,r=/[a-z]/,o=/[0-9]/,s=/[^a-zA-Z0-9]/,l="",c=a.find(".icon-case"),d=a.find(".icon-lower-case"),u=a.find(".password-confirm-icon"),h=a.find(".password-input-icon"),p=a.find(".icon-length"),f=a.find(".icon-number"),m=a.find(".icon-special-character"),g=a.find(".password-check-wrap"),v=!1;a.on("keyup","#Password",function(){var e=C(this).val(),t=0,n=(l=e,v?g.hide():g.show(),12<=e.length?SCM.MyAccount.showValidPasswordCriteria(p):SCM.MyAccount.showInvalidPasswordCriteria(p),i.test(e)),n=(t+=n?1:0,n?SCM.MyAccount.showValidPasswordCriteria(c):SCM.MyAccount.showInvalidPasswordCriteria(c),r.test(e)),n=(t+=n?1:0,n?SCM.MyAccount.showValidPasswordCriteria(d):SCM.MyAccount.showInvalidPasswordCriteria(d),o.test(e)),n=(t+=n?1:0,n?SCM.MyAccount.showValidPasswordCriteria(f):SCM.MyAccount.showInvalidPasswordCriteria(f),s.test(e));t+=n?1:0,n?SCM.MyAccount.showValidPasswordCriteria(m):SCM.MyAccount.showInvalidPasswordCriteria(m),12<=e.length&&3<=t?(v=!0,g.fadeOut(1500),h.hide(),e===a.find("#ConfirmPassword").val()&&(u.hide(),a.find("#registerBtn").addClass("btn-green"),a.find(".register-button-overlay").hide())):(v=!1,g.show(),h.show()),""!==e&&null!==e||(g.hide(),h.hide())}),a.on("keyup","#ConfirmPassword",function(){var e=C(this).val();l===e?(u.hide(),v&&(a.find("#registerBtn").addClass("btn-green"),a.find(".register-button-overlay").hide())):""===e||null===e?u.hide():u.show()}),C(document).on("click",function(){g.hide()})},e.showValidPasswordCriteria=function(e){e.removeClass("icon-general-close red").addClass("icon-general-check green").show(),e.siblings(".password-check-label").addClass("fade").show()},e.hideValidPasswordCriteria=function(e){e.hide(),e.siblings(".password-check-label").hide()},e.showInvalidPasswordCriteria=function(e){e.removeClass("icon-general-check green").addClass("icon-general-close red").show(),e.siblings(".password-check-label").removeClass("fade").show()},e.initForgotPassword=function(){var c=C("#forgot-password").find(".error-message").html();C("#forgotPasswordBtn").on("click",function(){var n=C("#forgot-password"),a=n.find(".success-message"),i=n.find(".error-message");let e=!1;var t=n.find(".js-error-message-contact-email"),r=n.find(".js-error-message-captcha"),o=(a.html("").hide(),i.html(c).hide(),t.addClass("hide"),r.addClass("hide"),C("#contactEmail").removeAttr("aria-invalid"),n.find("#contactEmail").val()),s=n.find("#hfCaptchaEnabledForForgotPassword").val(),l={email:o};"1"===s&&(l.captchaChallenge="not empty",l.captchaResponse=SCM.Captcha.GetCaptchaResponse(n),l.captchaInstanceName=SCM.Captcha.GetCaptchaInfo().ReCaptchaWidgetControlId),0===l.email.length&&(e=!0,t.removeClass("hide"),C("#contactEmail").attr("aria-invalid","true")),"1"===s&&0===l.captchaResponse.length&&(e=!0,r.removeClass("hide")),e||C.post("/UserDashboard/ForgotPassword",l,function(e){var t;null==e||""==e?(t=n.find(".success-message-template").html().replace("{0}",o),C(".js-hide-after-submit").hide(),a.html(t).show()):(i.html(e).show(),C("html, body").animate({scrollTop:n.offset().top},10)),"1"===s&&SCM.Captcha.ResetCaptcha(n)},"html")})},e.initSendAccountActivationEmail=function(){C("#sendAccountVerificationEmailBtn").on("click",function(){var n=C("#send-email-verification"),a=n.find(".success-message"),i=n.find(".js-error-message"),e=i.data("defaultmessage"),t=C(this).data("actionTypeId"),r=n.find("#contactEmail").val();0===r.length?(e=e+"<p> * "+C("label[for=contactEmail]").text().replace("*","")+"</p>",i.html(e),C("html, body").animate({scrollTop:n.offset().top},10)):SCM.Ajax.post("/AccountActionVerification/SendAccountActionEmail",{email:r,actionTypeId:t}).expectJson().then(function(e){var t;e.Success?(t=n.find(".success-message-template").html().replace("{0}",r),C(".js-hide-after-submit").addClass("hide"),a.html(t).removeClass("hide"),i.addClass("hide")):(i.html(e.Messages[0]).removeClass("hide"),C("html, body").animate({scrollTop:n.offset().top},10))}).catch(console.error)})},e.initResetPassword=function(){C("#changePasswordBtn").on("click",function(){var n=C("#change-password"),a=n.find(".success-message"),i=n.find(".error-message"),e=n.find(".default"),t=SCM.JSUtility.getSearchParamByName("t"),r=n.find("#newPassword").val(),o=n.find("#confirmNewPassword").val();e.removeClass("default"),C.post("/UserDashboard/ResetPassword",{token:t,newPassword:r,confirmNewPassword:o},function(e){var t;null==e||""==e?((t=SCM.JSUtility.getSearchParamByName("returnUrl"))&&window.location.assign(t),a.show(),i.hide(),C(".js-hide-after-submit").hide()):(a.hide(),i.html(e).show(),C("html, body").animate({scrollTop:n.offset().top},10))},"html")})},e.countSubjectChoices=function(){C("#communication-preferences-subject-choices").find(".topics-selected-wrap").each(function(){var e=C(this).closest("li").find("input[type=checkbox]"),t=e.filter(":checked");C(this).find(".totalCount").html(e.length),C(this).find(".checkedTotal").html(t.length),C(this).show()})},e.changeUserTypeSubjects=function(t){var e=C("#communication-preferences"),n=(C("#userTypeSubjectHeader").hide(),e.find("#userTypes").val());"3"===n&&C("#userTypeSubjectHeader").show(),e.find("ul#userTypeSubjects > li").each(function(){var e=C(this).find("input[type=checkbox]");C(this).attr("data-classification-id")===n?(C(this).show(),t&&e.prop("checked",e.data("checked"))):(C(this).hide(),t&&e.prop("checked",!1))})}}(SCM.MyAccount=SCM.MyAccount||{},jQuery),$(document).ready(function(){$(document).on("click",".myaccount-tabs-inner-wrap div",function(){$(".tabbed-content-overlay").show()}),$("#myaccount-tabs-content").on("DOMSubtreeModified",function(){$(".tabbed-content-overlay").hide()}),$("#institutionalLogoURL").keyup(function(){$(".logoPreview").attr("src",$(this).val()),$(".logoPreview").error(function(){$(this).attr("src","/Images/grey.gif")})})}),SCM||{}),App=(SCM.SearchResults={},SCM.SearchResults.defaults={controller:"Solr",action:"SolrSearch",instanceName:"SearchResults",baseSiteUrl:"",updateTargetSelector:".content-main_content",onHashChange:function(e){}},!function(e,l){function c(t,n){t.on("keydown",function(e){if(13===e.which&&isYearOnly(t.val()))return updateYearOnlyToFullDate(t,n),e.preventDefault(),e.stopImmediatePropagation(),!1}).datepicker()}function t(){l("#fromDate, #ToDate").on("focus",function(){var s=l(this);l(document).off("keydown.datepickerNav"),l(document).on("keydown.datepickerNav",function(e){var t=l(".ui-datepicker");if(t.is(":visible")){$focusedDate=function(e){var t=e.find("a.ui-state-hover");t.length||(t=e.find("a.ui-state-default").first());return t}(t),e.preventDefault();var n,a=$focusedDate,i=s,r=t.find("a.ui-state-default"),o=r.index(a);switch(e.which){case 37:!function(e){e<0&&(l(".ui-datepicker-prev").trigger("click"),setTimeout(function(){var e,t=l(".ui-datepicker").find("a.ui-state-default");t.length&&(e=t.last(),t.removeClass("ui-state-hover"),e.addClass("ui-state-hover").focus())},50))}(n=o-1);break;case 39:!function(e,t){t>=e.length&&(l(".ui-datepicker-next").trigger("click"),setTimeout(function(){var e,t=l(".ui-datepicker").find("a.ui-state-default");t.length&&(e=t.first(),t.removeClass("ui-state-hover"),e.addClass("ui-state-hover").focus())},50))}(r,n=o+1);break;case 38:return void function(e){var t=e.closest("tr").prev().find("td:eq("+e.closest("td").index()+") a.ui-state-default");t.length&&(e.removeClass("ui-state-hover"),t.addClass("ui-state-hover").focus())}(a);case 40:return void function(e){var t=e.closest("tr").next().find("td:eq("+e.closest("td").index()+") a.ui-state-default");t.length&&(e.removeClass("ui-state-hover"),t.addClass("ui-state-hover").focus())}(a);case 13:return void(a.trigger("click"),d(i));case 27:return void d(i);default:return}0<=n&&n<r.length&&(a.removeClass("ui-state-hover"),r.eq(n).addClass("ui-state-hover").focus())}})})}function d(e){e.datepicker("hide"),e.datepicker("destroy"),e.focus(),e.datepicker()}function a(e,t){e=e.data("showmoretogglelimit");return e=!e||e<1?t:e}function i(e,t,n){e.find(".sf-facet").length>t&&(e.find(".sf-facet:gt("+(t-1)+")").hide(),e.find(".facetShowMoreTax").length||e.parents(".sf-facet").length||e.append('<li><a href="javascript:;" data-showmoretogglelimit="'+t+'"class="'+n+'">Show more</a></li>'))}function r(e,t,n){e.closest(n).find(".sf-facet:gt("+(t-1)+"):visible").length?(e.closest(n).find(".sf-facet:gt("+(t-1)+"):visible").animate({height:"toggle"},400),e.text("Show more")):(e.closest(n).find(".sf-facet").not(":visible").animate({height:"toggle"},400),e.text("Show less")),event.preventDefault()}function u(){0<=window.location.search.indexOf("&cqb=")&&(l("#btnReturnAdvancedSearch").removeClass("hide"),l(".querybuilder-wrap").addClass("hide"));var e=l("#queryBuilderSubmit").data("currentUrl");l("#btnReturnAdvancedSearch").click(function(){window.location.href=location.protocol+"//"+l("#hfSiteURL").val()+"/advanced-search?"+e})}function n(e){e.hasClass("icon-general-arrow-filled-right")?e.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):e.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right")}function h(){l(".taxonomy-parent-arrow").on("click",function(){var e=l(this);e.parents(".taxonomy-label-wrap").siblings(".taxonomy-child-list").slideToggle(),n(e)}),l(".js-taxonomy-umbrella-toggle").on("click",function(){var e=l(this);l(".taxonomy-tree-wrap").slideToggle(),n($icon=e.find(".taxonomy-umbrella-arrow"))})}e.AddShowMoreLinks=function(){var t,e,n=l("#js-hf-facet-toggle-limit").val();t=n=n||12,l(".collapsible-facet .sf-facet-list").each(function(){var e=a(l(this),t);i(l(this),e,"facetShowMore")}),l(".facetShowMore").off("click"),l(".facetShowMore").on("click",function(){var e=a(l(this),t);r(l(this),e,".sf-facet-list")}),e=n,l(".taxonomy-tree-wrap").each(function(){i(l(this),e,"facetShowMoreTax")}),l(".facetShowMoreTax").off("click"),l(".facetShowMoreTax").on("click",function(){r(l(this),e,".taxonomy-tree-wrap")}),l(document).on("click",".js-sri-journal-description-container a",function(e){e.preventDefault(),l(this).closest(".js-sri-journal-description-container").find(".js-sri-journal-description").toggleClass("hide")})},SCM.SearchResults.AddShowMoreLinks(),u(),h();var p,f={},e=window.location.search.substring(1);function o(e){var t,n,a;return null!=(e=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e))&&(t=e[2],n=e[1]-1,2==(e=e[3]).length&&(e="20"+e),(a=new Date(e,n,t)).getDate()==t)&&a.getMonth()==n&&a.getFullYear()==e}function s(e){return(e=/^(\d{4})$/.exec(e))&&-1<e[1]}function m(e,t){var n=e.val(),a=null,i=null,i=t?a="01":(a="12","31");return e.val(a+"/"+i+"/"+n),e.val()}function g(e){var t=(e=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e))[1],n=e[2],e=e[3],a=n,i=t,r=e;return 2==e.length&&(r="20"+e),1==n.length&&(a="0"+n),(i=1==t.length?"0"+t:i)+"/"+a+"/"+r}function v(e){return"string"==typeof e?"true"==e.toLowerCase():!!e}function C(){var e,t={UserEmail:l("#UserEmail").val(),ResourceTitle:l("#ResourceTitle").val(),AlertType:l("#AlertType").val(),CurrentUserEmail:l("#CurrentUserEmail").val(),IsUserAlreadySubscribed:v(l("#IsUserAlreadySubscribed").val()),SuccessfulUpdate:l("#SuccessfulUpdate").val(),ResourceId:l("#ResourceId").val(),ResourceType:l("#ResourceType").val(),SearchTerm:l("#SearchTerm").val(),SearchUrl:l("#SearchUrl").val(),CurrentAlertContextSiteId:l("#CurrentAlertContextSiteId").val(),ShowSaveSearchToUnauthenticatedUser:v(l("#ShowSaveSearchToUnauthenticatedUser").val()),UserIsLoggedIn:v(l("#UserIsLoggedIn").val())};null!=t.IsUserAlreadySubscribed&&t.IsUserAlreadySubscribed?(e=l("#Config_SearchAlertMyAccoutUrl").val(),window.location.href=e):t.ShowSaveSearchToUnauthenticatedUser&&!t.UserIsLoggedIn?(ShowSignInForSearchAlertSignUp(),w=!0):l.post("/Toolbox/ToolboxGetAlertsUpdateMessage",t,function(e){w=!0,alert("Alert Saved Sucessfully. Visit My Account page to manage your email alerts"),l("#divSearchAlerts").html(e),l("#divSearchAlerts a").on("click",function(e){e.preventDefault(),C()})})}window.onpopstate=function(e){e.state&&e.state.queryString&&SCM.SearchResults.doSolrSearch(e.state)};var y=l(SCM.SearchResults.defaults.updateTargetSelector),e=(S()||(f[e]={results:y.html()}),window.history.replaceState({queryString:e},null,null),l("#fromDate")),b=l("#ToDate"),w=(l("#fromDate").datepicker(),l("#ToDate").datepicker(),t(),!0);function S(){return window.location.pathname.includes("/map-results")}function k(e,t){var e=e.match(/(\d{2})\/(\d{2})\/(\d{4})/);if(e)return(e=new Date(parseInt(e[3],10),parseInt(e[1],10)-1,parseInt(e[2],10),t?0:23,t?0:59,t?0:59)).getFullYear()+`-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}T${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:`+e.getSeconds().toString().padStart(2,"0");throw new Error("Invalid date format")}Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()},y.on("click",".chkSelect",function(e){SCM.SearchResults.doSolrSearch({queryString:l(this).data("redirectUrl"),source:"searchresults"})}),y.on("click","a.close",function(e){var t=l(this).attr("data-url");null!=t&&"#"!=t&&(e.preventDefault(),SCM.SearchResults.doSolrSearch({queryString:t,source:"searchresults"})),c(l("#fromDate"),!0),c(l("#ToDate"),!1)}),y.on("click",".rbShowFacet",function(e){e.preventDefault(),"False"==l(this).attr("previous-status")&&(e=l(this).attr("data-url"),SCM.SearchResults.doSolrSearch({queryString:e,source:"searchresults"}))}),y.on("click","#solrSearchBtn",function(){var e=l("#txtSearch").val();null==e||""==e?alert("Please enter a term to perform search"):(e=encodeURIComponent(e),SCM.SearchResults.doSolrSearch({queryString:"q="+e}))}),y.on("click","#btnRangeSearch",function(){var e=l("#fromDate").val(),t=(s(e)&&(e=m(l("#fromDate"),!0)),l(".date-range-input-radio[value=single]").is(":checked")?e:l("#ToDate").val());""!==t&&s(t)&&(t=m(l("#ToDate"),!1)),o(e)&&o(t)?(e=g(e),t=g(t),new Date(t)<new Date(e)?alert("End Date must be greater than Start Date"):(e=l(this).attr("data-url").replace("queryText",e+" TO "+t),SCM.SearchResults.doSolrSearch({queryString:e,source:"searchresults"}))):alert("Please enter valid dates")}),y.on("click","#divSearchAlerts a",function(e){e.preventDefault(),w&&(w=!1,C())}),c(e,!0),c(b,!1),SCM.SearchResults=l.extend(SCM.SearchResults,(p=jQuery,{doSolrSearch:function(n){function a(e){e.getBoundingClientRect().top<0&&p("html, body").animate({scrollTop:e.offsetTop},1e3)}function i(e){null===window.history.state?window.history.replaceState(e,null,window.location.pathname+"?"+e.queryString):window.history.state.queryString!=e.queryString&&window.history.pushState(e,null,window.location.pathname+"?"+e.queryString)}p("#hfNbnjToc").val()&&(SCM.SearchResults.defaults.updateTargetSelector="#ContentTab",SCM.SearchResults.defaults.isNbnj=!0,SCM.SearchResults.defaults.controller="Page",SCM.SearchResults.defaults.action="NbnjBookSearch",SCM.SearchResults.defaults.instanceName="Nbnj_BookToc");var e,t,r,o=p.extend(SCM.SearchResults.defaults,n),s=p(o.updateTargetSelector);f[n.queryString]&&!o.isNbnj?(s.html(f[n.queryString].results).show(),SCM.SolrSearch.ajaxComplete(),a(s[0]),h(),i(n),u(),n.hasOwnProperty("source")&&S()&&"heatmap"!==n.source&&SCM.SearchMap.searchUpdated(),App.SiteJS.mobileContentNav(),p("body").removeClass("on-canvas")):((e=SCM.JSUtility.getSearchParamByName("page"))&&1!==parseInt(e)&&(n.queryString=n.queryString.replace("page="+e,"page=1")),e="/"+o.controller+"/"+o.action+"/"+o.instanceName,void 0!==o.baseSiteUrl&&""!==o.baseSiteUrl&&(e="//"+o.baseSiteUrl+e),(t=n.queryString.match(/(\d{2})\/(\d{2})\/(\d{4})/g))&&2===t.length&&(r=k(t[0],!0),t=k(t[1],!1),n.queryString=n.queryString.replace(/(\d{2}\/\d{2}\/\d{4}) TO (\d{2}\/\d{2}\/\d{4})/,r+" TO "+t)),e+="?"+n.queryString,o.isNbnj&&(r=p("#hfCurrentBookId").val(),e.includes("nbnjToc=true")||e.includes("bookId="+r)||(e+="&bookId="+r)),"155"!==p("#hdnSiteID").val()||S()?p.ajax({url:e,success:function(e){var t;s.html(e),a(s[0]),f[n.queryString]={results:e,updateTargetSelector:o.updateTargetSelector},c(p("#fromDate"),!0),c(p("#ToDate"),!1),App.SiteJS.mobileContentNav(),p("body").removeClass("on-canvas"),"undefined"!=typeof clientViewOption&&""!==clientViewOption&&(t=p(".sri-expandedView"),"Expanded"===clientViewOption?t.show():t.hide()),h(),i(n),u(),n.hasOwnProperty("source")&&S()&&"heatmap"!==n.source&&SCM.SearchMap.searchUpdated(),SCM.JournalCitationFilter&&SCM.JournalCitationFilter.init(),SCM.SearchResults.AddShowMoreLinks(),o.isNbnj&&(t=p(e).find(".querybuilder-wrap"),p(".querybuilder-wrap").html(t.html()))},error:function(e){console.error(e)}}):window.location.href="?"+n.queryString)}}))}(SCM.SearchResults=SCM.SearchResults||{},jQuery),App||{}),SCM=(!function(m,g){var e=window.location.protocol+"//"+g("#hfSiteURL").val(),t=g(".hfSolrAutoSuggestMinimumCharactersLength").val(),v="Learning";function r(e,t){return function(){t.apply(e,arguments)}}function n(e,t,n,a,i){this.searchInputControlId=document.querySelector("[data-autosuggest-id='"+e+"']"),this.searchInputHintControlId=document.querySelector("[data-autosuggest-id='"+t+"']"),this.autoCompleteResultsControlId=document.querySelector("[data-autosuggest-id='"+n+"']"),this.isMicrosite=a,null!==i?(this.siteFilterDropDownSelectID=document.querySelector("[data-autosuggest-id='"+i+"']"),this.siteFilterDropDownSelectID&&this.siteFilterDropDownSelectID.addEventListener("change",r(this,this.filterSuggestions),!1)):this.siteFilterDropDownSelectID=!1,null!==this.searchInputControlId&&(this.searchInputControlId.addEventListener("keydown",r(this,this.interceptKeys),!1),this.searchInputControlId.addEventListener("input",debounce(r(this,this.evaluateTerms),250),!1),g(this.searchInputControlId).on("blur",r(this,this.hideResultsList)),g(this.searchInputControlId).on("focus",r(this,this.showResultsList)))}(n.prototype={solrUrl:"/solr/SolrAutoSuggest",baseURL:e,inputTerms:!1,termsArray:!1,baseTerms:!1,terms:!1,results:[],selectedResult:-1,contentID:!1,lastAjaxRequest:!1,lookupCache:{},enableEnhancedAutoSuggest:!1}).filterSuggestions=function(){this.selectedResult=-1,this.inputTerms.length>=t&&this.getSuggestions()},n.prototype.evaluateTerms=function(){this.resetSelection(),this.inputTerms=this.searchInputControlId.value.toLowerCase(),0===this.inputTerms.length?(this.lastAjaxRequest=void 0,this.resetAutoComplete()):(this.inputTerms.length>=t&&(this.lastAjaxRequest&&4!==this.lastAjaxRequest.readyState&&this.lastAjaxRequest.abort&&(this.lastAjaxRequest.abort(),this.lastAjaxRequest=void 0),this.getSuggestions()),(this.terms.length<=1||this.searchInputControlId.value!==this.inputTerms)&&this.clearHint())},n.prototype.getJournalURL=function(e,t,n){return"f_JournalDisplayName="+encodeURIComponent(e.trim())+t+(n?"&"+n:"")},n.prototype.getLearningURL=function(e,t){return t?t+e:"hd=learning"+e+"&f_HasCME=true"},n.prototype.getSearchParams=function(){var e="",t=this.getSiteId();return t&&(e=(e.length?"&":"")+"fl_SiteID="+t),this.siteFilterDropDownSelectID?e:"allJournals=1&SearchSourceType=24"},n.prototype.getSiteId=function(){var e=0;return e=this.siteFilterDropDownSelectID?parseInt(g(this.siteFilterDropDownSelectID).children("option:selected").data("siteid")):e},n.prototype.lookupFromCache=function(e){var r=this;return r.lookupCache[e]||(function(e){for(var t=Object.getOwnPropertyNames(r.lookupCache),n=0;n<t.length;n++){var a=t[n],i=r.lookupCache[a];if(!(0!==e.indexOf(a)||i&&i.length))return 1}return}(e)?(r.lookupCache[e]=[],[]):null)},n.prototype.getSuggestions=function(){var t=this,e=t.lookupFromCache(t.inputTerms);e?e.length?this.formatSuggestions(e):t.resetAutoComplete():(e=t.getSiteId(),this.lastAjaxRequest=g.ajax({url:t.solrUrl,data:e?{searchTerm:t.inputTerms,siteID:e}:{searchTerm:t.inputTerms},success:function(e){e=t.parseSuggestionData(e);e&&e.length?(t.lookupCache[t.inputTerms]=e,t.formatSuggestions(e)):(t.lookupCache[t.inputTerms]=[],t.resetAutoComplete())},error:function(){t.lastAjaxRequest=void 0},cache:!0}))},n.prototype.parseSuggestionData=function(e){if(!e)return[];for(var t,n=[],a=0;a<m.autoSuggestFields.length;a++){var i=m.autoSuggestFields[a],r=e[i];if(r&&r.length)for(var o=0;o<r.length;o++){var s=r[o];0!==a&&n.some(function(e){return e.Key===s.Key})||n.push({Key:i,Value:s})}}return n=1<n.length&&(n.sort(function(e,t){return e.Key===t.Key?0:e.Key<t.Key?-1:1}),t=g(".hfAutoCompleteMaxResults").val())?n.slice(0,t*m.autoSuggestFields.length):n},n.prototype.addAutoSuggestions=function(e){for(var t=g(".cs-placeholder").text(),n="",a=g(this.siteFilterDropDownSelectID).find("option:selected").val(),r="",o="",s=!0,l=!0,c=!0,d=0;d<e.length;d+=1){var u,h,p,f=e[d];"true"===this.enableEnhancedAutoSuggest&&(1<m.autoSuggestFields.length&&0<=f.Key.indexOf("Auth")&&(o="&f_"+f.Key+"="+f.Value.Key,r="&q="+f.Value.Key,s)&&(u={value:"<b>Authors<b>",url:"",position:"sr"+this.autoCompleteResultsControlId.id+(d+1)},this.results.push(u),s=!1),1<m.autoSuggestFields.length&&0<=f.Key.indexOf("Key")&&(o="",l)&&(u={value:"<b>Keywords</b>",url:"",position:"sr"+this.autoCompleteResultsControlId.id+(d+1)},this.results.push(u),l=!1),1<m.autoSuggestFields.length)&&0<=f.Key.indexOf("Tags")&&(o="&exPrm_fq="+f.Key+":%22"+f.Value.Key+"%22",r="&q="+f.Value.Key,c)&&(u={value:"<b>Topics</b>",url:"",position:"sr"+this.autoCompleteResultsControlId.id+(d+1)},this.results.push(u),c=!1),p=a?{value:f.Value.Key,url:a.replace("{searchQuery}",f.Value.Key).replace(r,"")+o,position:"sr"+this.autoCompleteResultsControlId.id+(d+1)}:(p=this.baseURL,n=void 0!==t&&t===v?"/learning/searchresults?q=":"/search-results?q=",h=this.getSearchParams(),{value:e[i].Key,url:p+n+encodeURIComponent(f.Key)+(h.length?"&"+h:""),position:"sr"+this.autoCompleteResultsControlId.id+(d+1)}),this.results.push(p)}},n.prototype.updateSuggestions=function(e){this.enableEnhancedAutoSuggest=g(".hfEnableEnhancedAutoSuggest").val().toLowerCase(),this.inputTerms&&-1!==e[0].Value.Key.indexOf(this.inputTerms)?(this.addAutoSuggestions(e),this.setHint(e[0].Key),this.appendResults()):this.inputTerms||this.getSuggestions()},n.prototype.formatSuggestions=function(e){this.results=[],this.siteFilterDropDownSelectID&&($selectedOption=g("#"+this.siteFilterDropDownSelectID.id+" option:selected").text()),e.length?this.updateSuggestions(e):this.resetAutoComplete()},n.prototype.setHint=function(e){this.searchInputControlId.value===this.inputTerms&&(this.searchInputHintControlId.value=e)},n.prototype.clearHint=function(){this.searchInputHintControlId.value=""},n.prototype.appendResults=function(){var e="";"term-list"!==this.autoCompleteResultsControlId.className&&(this.autoCompleteResultsControlId.className="term-list");for(var t=0;t<this.results.length;t++){var n=this.results[t];e+="true"===this.enableEnhancedAutoSuggest&&0===n.url.length?'<li class="suggestion-heading">'+this.results[t].value+"</li>":'<li class="suggestion-result"><a href="'+n.url+'" id="'+n.position+'">'+this.results[t].value+"</a></li>"}this.autoCompleteResultsControlId.innerHTML=e},n.prototype.hideResultsList=function(){var e=this;setTimeout(function(){e.autoCompleteResultsControlId.className="term-list term-list--hidden hidden hide"},200)},n.prototype.showResultsList=function(){this.autoCompleteResultsControlId.className="term-list"},n.prototype.resetResultsList=function(){this.autoCompleteResultsControlId.innerHTML="",this.hideResultsList()},n.prototype.resetSelection=function(){var e=-1!==this.selectedResult&&this.results[this.selectedResult].position;e&&g("#"+e).removeClass("active"),this.selectedResult=-1},n.prototype.resetAutoComplete=function(){this.results=[],this.resetResultsList(),this.clearHint()},n.prototype.completeTerms=function(){var e=this.searchInputControlId.selectionStart,t=this.searchInputControlId.selectionEnd;return!(e!==t||t!==this.inputTerms.length||!this.results||!this.results.length||(this.searchInputControlId.value=this.results[this.selectedResult].value,this.evaluateTerms(),0))},n.prototype.navigateResults=function(e){var t,n=this.selectedResult+e;oldResultId=-1!==this.selectedResult&&this.results[this.selectedResult].position,n<this.results.length&&-1<n?(t=this.results[n].position,oldResultId&&g("#"+oldResultId).removeClass("active"),g("#"+t).addClass("active"),this.selectedResult+=e):!oldResultId&&this.results.length?(t=this.results[this.results.length-1].position,g("#"+t).addClass("active"),this.selectedResult=this.results.length-1):this.resetSelection()},n.prototype.keyFunctions=function(e,t){"ArrowRight"===t&&this.completeTerms()&&e.preventDefault(),"ArrowUp"===t&&(e.preventDefault(),this.navigateResults(-1)),"ArrowDown"===t&&(e.preventDefault(),this.navigateResults(1)),"Enter"===t&&this.activateCurrentResult(e),"Escape"===t&&this.hideResultsList()},n.prototype.activateCurrentResult=function(e){if(!(this.selectedResult<=-1)){e.preventDefault();e=g(this.autoCompleteResultsControlId).find(".active");if(e.length){if(this.searchInputControlId&&this.searchInputControlId.value){this.searchInputControlId.value=e.text(),this.searchInputHintControlId.value=e.text(),this.hideResultsList();var t=g(this.searchInputControlId).closest("form").find(".microsite-search-icon");if(1===t.length)return void t.trigger("click")}t=e.attr("href");window.location=t}}},n.prototype.interceptKeys=function(e){this.searchInputControlId.value.toLowerCase().length<=255&&this.keyFunctions(e,e.key)},m.init=function(e){m.autoSuggestFields=e,g(".search-term-autosuggest").each(function(){var e=g(this);new n(e.data("autosuggest-id"),e.data("autosuggest-hint"),e.data("autosuggest-results"),!1,e.data("searchfilter"))})}}(App.SearchAutoComplete=App.SearchAutoComplete||{},(SCM.JSUtility,jQuery)),SCM||{}),SCM=(!function(e,f){var t=f("body"),n=f(".hfParentSiteName"),i="",a=f("#js-topics-facet").val()||"f_SemanticFilterTopics",r=f("#hfSiteURL");function m(e){""!==n.val()?o(e):""===f.trim(e)||null===e||"Search"===e?alert("Please enter a term to search: "):e?o(e):alert("SCM.SolrSearch.testSearchInput() fail")}function g(e,t){"Enter"===e.key&&(e.preventDefault(),m(t))}function o(e,t){var n=t,e=(n||(t="q"),i=encodeURIComponent(e),f(".hfQuickSearchUrl").val()),a="";e&&!n?!function(e){if(e.startsWith("/"))return;return!new RegExp("/"+window.location.host+"/").test(e)}(a=e.replace("{searchQuery}",i))?window.location=a:window.open(a,"_blank"):(a="search-results?page=1&"+t+"="+i+"&SearchSourceType=1",(n=f("#hfSiteURL")).length&&(a="//"+n.val()+"/"+a),window.location.href=a)}function s(){f(".date-range-input-radio").on("click",function(){"single"===f(this).attr("value")?(f(".date-input-to").hide(),f(".date-label-from span").text("Search on this date")):(f(".date-input-to").show(),f(".date-label-from span").text("From"))})}function l(t){var e=f(".txtSolrSearchName").val().trim(),n=f("#ddlSearchAlertFrequency"),a=f("#hdnSearchSaveRedirectUrl"),i=window.location.href,r=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Solr/SaveSolrSearchInfo",i={searchName:e,url:i,scheduleId:n.val(),redirectUrl:a.val()};e?SCM.Ajax.post(r,i).expectActionResultModel().ensureSuccess().then(function(e){e.RedirectUrl&&e.RedirectUrl.length?window.location=e.RedirectUrl:(alert(e.Html),f(t).closest(".reveal-modal").removeClass("open"),f("body").removeClass("on-canvas"))}).catch(console.error):alert("Please enter a name")}function c(){var e=f(".lnkSaveSolrSearch"),n=f(".solrSearchSaveModel"),t=f(".btnSolrSearchSave"),a=f(".txtSolrSearchName");e.off("click").on("click",function(){var e,t=f(this).attr("data-userloggedin");void 0!==t&&"false"===t.toLowerCase()?(t=f("#hdnSearchSaveRedirectUrl"),e=window.location.href,window.location=t.val()+"?returnUrl="+encodeURIComponent(e+"#triggerSaveSearch=1")):(n.addClass("open"),f("body").addClass("on-canvas"))}),t.off("click").on("click",function(){l(n)}),a.off("keypress").on("keypress",function(e){"Enter"===e.key&&l(n)})}function d(){f("div.sri-figure[restricted]").each(function(){f(this).off("contextmenu").on("contextmenu",function(){return!1})})}function u(){var e=f(".master-header").find(".microsite-search-icon"),t=f(".master-header").find(".microsite-search-term"),n=f(".master-header").find(".mobile-microsite-search-icon"),a=f(".master-header").find(".mobile-microsite-search-term"),i=f(".toolbar-search").find(".microsite-search-icon"),r=f(".toolbar-search").find(".microsite-search-term"),o=f("#UmbrellaSearchIcon"),s=f("#UmbrellaHomeSearchIcon"),l=f("#UmbrellaSearchTerm"),c=f("#UmbrellaHomeSearchTerm"),d=f(".kwd-part"),u=f(".navbar-search-filter-mobile"),h=f(".navbar-search-filter-site"),p=function(e,t){var n=f(".hfQuickSearchUrl"),a=sessionStorage.getItem("quickSearchUrlVal");a&&(e.length&&e.find('option[value="'+a+'"]').length&&(n.val(a),e.find('option[value="'+a+'"]').prop("selected",!0)),t.length)&&t.find('option[value="'+a+'"]').length&&(n.val(a),t.find('option[value="'+a+'"]').prop("selected",!0));return n}(h,u);o.on("click",function(){m(l.val())}),s.on("click",function(){m(c.val())}),e.on("click",function(){m(t.val())}),n.on("click",function(){m(a.val())}),i.on("click",function(){m(r.val())}),f(".searchLi .icon-search").on("click",function(){m(t.val())}),d.on("click",function(){m(f(this).attr("data-keyword"))}),l.on("keypress",function(e){g(e,l.val())}),c.on("keypress",function(e){g(e,c.val())}),t.on("keypress",function(e){g(e,t.val())}),a.on("keypress",function(e){g(e,a.val())}),r.on("keypress",function(e){g(e,r.val())}),u.on("change",function(){sessionStorage.setItem("quickSearchUrlVal",f(this).val()),p.val(f(this).val()),v(f(this).prop("selectedIndex"))}),h.on("change",function(){sessionStorage.setItem("quickSearchUrlVal",f(this).val()),p.val(f(this).val()),v(f(this).prop("selectedIndex"))}),f(".master-main").on("click",".showAbstractLink",function(){f(this).closest(".sri-abstract-link").toggleClass("expanded"),f(this).closest(".sri-abstract-link").find(".abstract-response-placeholder").toggleClass("hide")})}function v(e){f(".navbar-search-filter-mobile, .navbar-search-filter-site").closest().prop("selectedIndex",e)}function h(e){var t;f(window).outerWidth()<1024&&(t=(e=f(e.currentTarget)).children(".sf-group-header-icon"),e.siblings("fieldset").children(".sf-facets, .sf-facet-list").slideToggle(),e.siblings(".taxonomy-node").slideToggle(),t.toggleClass("icon-general_arrow-down icon-general_arrow-right"))}var p=-1060,C=-860,y=C;function b(){var e,t=f("#divSearch").find("#InfoColumn").find(".info-inner-wrap-js"),n=f(f(".end-of-page-js")[0]);t.length&&n.length&&(e=f(this).scrollTop(),n=n.offset().top,y=e<n+y?(t.addClass("can-stick"),C):(t.removeClass("can-stick"),p))}e.init=function(){var e;void 0!==r&&""!==r.val()&&(SCM.SearchResults.defaults.baseSiteUrl=r.val()),u(),c(),s(),d(),t.on("click",".sriTopiclink",function(e){o((i=f(this).text()).replace(",",""),a),e.preventDefault()}),t.on("click",".js-sriTopic-link",function(e){o(i=f(this).parent(".js-sriTopic-link-container").find(".js-sriTopic-link-categoryid").val(),a),e.preventDefault()}),f("body").on("click",".js-facet-ext-link",function(){var e,t=window.location.href;0<=t.indexOf("q=")&&(t=SCM.Common.getQueryStringValue(t,"q"),(e=f(this).data("url")).length)&&(t.length&&"*"!==t||(t=""),window.open(e.replace("{searchQuery}",t),"_blank"))}),f(".js-main").on("click",".collapsible-facet .sf-group-header",h),f("body").on("click",".taxonomy-label",function(){var e,t,n,a,i=f("#TaxonomyCurrentDataUrl").val();i=decodeURIComponent(i),""!==f(this).attr("data-parentid")&&(e=f(".taxonomy-node").attr("data-id"),t=f(this).parent(".taxonomy-label-wrap").attr("data-id"),-1!==(n=i.indexOf("tax"))?null!==(n=-1<(a=(n=i.substring(n)).indexOf("&"))?n.substring(0,a):n)&&""!==n&&(-1<n.indexOf("="+e)?i=i.replace(n,"tax="+t):-1===f.inArray(t,decodeURIComponent(n.slice(4)).split(","))&&(i=i.replace(n,n+","+t))):i+="&tax="+t,SCM.SearchResults.doSolrSearch({queryString:i,source:"searchresults"}))}),f("body").on("click","#btnViewResultsInMapResults",function(){var e=location.search.substring(1);""!==SCM.SearchResults.defaults.baseSiteUrl&&(location.href="//"+r.val()+"/map-results?"+e)}),f("body").on("click","#btnViewResultsInSearch",function(){var e=location.search.substring(1);""!==SCM.SearchResults.defaults.baseSiteUrl&&(location.href="//"+r.val()+"/search-results?"+e)}),SCM.QueryBuilder.configure(),0<f(SCM.SearchResults.defaults.updateTargetSelector).length?SCM.QueryBuilder.defaults.runSearch=function(e){SCM.SearchResults.doSolrSearch({queryString:e,source:"searchresults"})}:(f(".querybuilder-submit").attr("value","Search"),f(".querybuilder-title").text("Modify your search"),SCM.QueryBuilder.defaults.runSearch=function(e){var t=f("#hfSiteURL").val();-1===e.indexOf("q=")&&(e="q="+e),window.location=window.location.protocol+"//"+t+"/search-results?"+e}),e=f("#divSearch").find("#InfoColumn").find(".info-inner-wrap-js"),null!=window.mozInnerScreenX&&e.length&&f(window).on("scroll",debounce(b,100))},e.ajaxComplete=function(){c(),s(),d(),SCM.QueryBuilder.configure(),0<window.location.pathname.indexOf("map-results")&&(f("#btnViewResultsInSearch").removeClass("hide"),f("#btnViewResultsInMapResults").addClass("hide")),SCM.SiteJS.initSearchResultsSort(),SCM.PDFAccess.init(),SCM.PageTitleHelper.SetDynamicPageTitle("#js-search-terms-page-title"),SCM.BookPartTitleFacet.showAllItems(),SCM.BookPartTitleFacet.toggleBookPartTitleParent(),SCM.CollectionFacet.showAllItems(),SCM.CollectionFacet.toggleCollectionParent()},SCM.SolrSearch.init()}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery),SCM||{}),SCM=(SCM.PageTitleHelper={},SCM.PageTitleHelper.SetDynamicPageTitle=function(e){e=$(e).val();e&&(document.title=e)},SCM||{});function GetReturnUrl(){var e,t=window.location.href;return 0<t.indexOf("?")&&(e=window.location.search.split("&"),t=t.substring(0,t.indexOf("?")),e.length&&(e=e.filter(function(e){return"login"!==e.split("=")[0].replace("?","")})).length&&(t+=e.join("&")),t+=window.location.hash),t}SCM.Utilities=SCM.Utilities||{},SCM.AddReturnUrlToSocietyLinks=function(){var t=GetReturnUrl(),t=encodeURIComponent(t),e=$("#hfPlaceholderReturnUrlValue"),n=e.length?e.val():null;$(".society-links-logo, .society-links-url").each(function(){var e;n&&n.length&&(e=$(this)).attr("href",e.attr("href").replace(n,t))})},SCM=SCM||{},SCM.AuthorLinks=function(n){return{init:function(){e(n(".js-linked-name")),n(document.body).on("click",function(e){n(e.target).parents(".al-author-info-wrap").length||(n(".al-author-info-wrap").removeClass("open"),n("body").removeClass("leftRailModalOpen"))})},showAuthorInfo:e};function e(e){e.on("click",function(e){var t=n(this).siblings(".al-author-info-wrap");e.stopPropagation(),n(".al-author-info-wrap").not(t).removeClass("open"),n(t).toggleClass("open"),n("body").addClass("leftRailModalOpen")})}}(jQuery);var SCM=SCM||{},SCM=(!function(e,l){e.getDocWidth=function(){return self.innerWidth||(document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:void 0)},e.rightPanelHeight=function(){-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&setTimeout(function(){var e;l(".panels").length&&(e=l(window).height()-l(".panels").offset().top,l(".panels").css("height",e),l(".dynamic-widget-inner-wrap").addClass("panel-scroll"))},5e3)},e.hasTabContent=function(e){var n=!0,e=e.find(".widget-dynamic-inner-wrap,.widget-dynamic-panel-content-holder");return e&&e.length&&(n=!1,e.each(function(e,t){t=l(t).html();if(t&&t.length&&!/^\s*$/.test(t))return!(n=!0)})),n},e.checkInView=function(e,t){var n=l(".article"),a=n.height(),i=(n.scrollTop(),l(e).offset().top+n.offset().top+a/2),e=i+l(e).height(),a=0<=e&&i<=a,e=(e<0&&0<i||0<i&&i<=n.height())&&t;return a||e},e.ScrollToWindowHash=function(){var e,t=window.location.hash;l(".pg_ArticleSplitView, .pg_articlesplitview").length&&(e=(t=l(".tab-split-view-figures-and-tables-pane").find("span"+t)).parents(".dynamic-widget-inner-wrap"),l(e).length)&&e.delay(100).animate({scrollTop:t.position().top-10},250)},e.JumpToPeerReviewTab=function(){var e,t,n=SCM.JSUtility.getSearchParamByName("peerReviewId");n&&l(".pg_ArticleSplitView, .pg_articlesplitview").length&&(e=l(".tab-split-view-peer-review-pane"),t=(n=l(document.getElementById(n))).parents(".dynamic-widget-inner-wrap"),l(t).length)&&n.length&&(e.click(),t.delay(100).animate({scrollTop:n.position().top-10},250))},e.jumpToTarget=function(e){var e=l(".panels").find('div[data-id="'+e+'"],div[content-id~="'+e+'"i]'),t=l(e).closest(".dynamic-widget-inner-wrap").attr("data-display-order"),n=l(e).closest(".aside").find(".tabs").find('.tab[data-tab="'+t+'"]');if(t)return l(n).click(),l(e).length&&(n=l('.dynamic-widget-inner-wrap[data-display-order="'+t+'"]')).delay(100).animate({scrollTop:n.scrollTop()+e.position().top-10},250),!1},e.jumpToTargetBySectionId=function(e){var t,n=l(e).closest(".dynamic-widget-inner-wrap").attr("data-display-order"),a=l(e).closest(".aside").find(".tabs").find('.tab[data-tab="'+n+'"]');return n?(l(a).click(),l(e).length&&(t=l('.dynamic-widget-inner-wrap[data-display-order="'+n+'"]')).scrollTop(t.scrollTop()+e.position().top-10)):((t=l(".article.js-content-splitview")).click(),t.scrollTop(e.position().top)),!1},e.jumpToSubSection=function(){var e=Theme.HashHandler.getHashReference("sectionID-");try{var t=l(e);t.length&&SCM.SplitScreen.jumpToTargetBySectionId(t)}catch(e){console.error(e)}},e.removeTabsWithNoContent=function(){var e=l("body.pg_articlesplitview .panels > .dynamic-widget-inner-wrap"),r=0<l("#articlefulltext_figshare").length;e.each(function(){var e,t,n=l(this).find(".widget-dynamic-inner-wrap,.widget-dynamic-panel-content-holder"),a=n.html(),i=l(this).attr("data-display-order");void 0!==i&&(e=(i=l(`body.pg_articlesplitview .tab[data-tab="${i}"]`)).is('[class*="supplement"]'),!a||0===a.length||/^\s*$/.test(a)?r&&e||(l(this).remove(),i.remove()):(t=SCM.SplitScreen.hasTabContent(n))||r&&e||(l(this).remove(),i.remove()),!t)&&r&&e&&(l(this).hide(),i.hasClass("js-hascontent")||i.hide())})},e.isSplitScreen=function(){return l(".js-splitview-aside").length},e.init=function(){l("body.pg_ArticleSplitView, body.pg_articlesplitview, body.pg_Chapter, body.pg_chapter").removeClass("pg_ArticleSplitView").addClass("pg_article pg_articlesplitview"),e.rightPanelHeight();var s=e.getDocWidth()<1024,t=l("body.pg_articlesplitview .tab"),n=l("body.pg_articlesplitview .panels > .dynamic-widget-inner-wrap"),a=l("body.pg_articlesplitview .panels"),i=l("body.pg_articlesplitview .article"),r=(l(".tabs").prepend('<a class="tab tab-FullTextCss"><i class="tab__icon icon-full-text icon-splitview_read"><span class="tab__icon-text">Full Text</span></i><div class="tab__text">Full Text</div></a>'),l(".tab-FullTextCss"));l(".ref-list [data-content-id]").each(function(){var e=l(this).data("contentId");l(this).attr("data-id",e)}),l("body.pg_articlesplitview .widget-instance-SitePageFooter, body.pg_articlesplitview .site-theme-footer").appendTo(".article"),t.each(function(e){l(this).attr({"data-tab":e})});n.each(function(e){l(this).find("div[content-id]").each(function(){l(this).attr("content-id"),e})}),l(".figure-table-wrapper .table-wrap-title").each(function(){l(this).attr("data-id",this.id)}),t.on("click",function(){s&&i.hide(),a.show(),t.add(r).removeClass("active").attr("aria-selected","false"),l(this).addClass("active").attr("aria-selected","true"),n.hide().attr("aria-hidden","true");var e=l(this).attr("data-tab");return n.eq(e).show().attr("aria-hidden","false"),!1}),l(".pg_articlesplitview").length&&(l(document).on("click","body.pg_articlesplitview a.xref-bibr[data-modal-source-id], body.pg_Chapter a.xref-bibr[reveal-id]",function(){var e=l(".ReferencesCss, .split-view-references-pane").parents(".dynamic-widget-inner-wrap"),t=l(".tab-ReferencesCss, .tab-split-view-references-pane"),n=l(this).data("modalSourceId").toLowerCase(),a=l(".aside .ref-list").find('div[data-id="'+n+'"],div[content-id~="'+n+'"]'),i=(a.length||((i=n.split(" ")).length&&(n=i[0]),a=l(".aside .ref-list").find('div[data-id="'+n+'"],div[content-id~="'+n+'"]')),e.attr("data-display-order")),n=(t.hasClass("active")||t.click(),l('.dynamic-widget-inner-wrap[data-display-order="'+i+'"]'));a.length&&(n.addClass("scroll"),n.delay(100).animate({scrollTop:n.scrollTop()+a.position().top-10},250))}),l("body.pg_articlesplitview a[reveal-id]:not(.xref-corresp):not(.split-view-modal)").on("click",function(){var e=l(this).attr("reveal-id").split(" ")[0];return SCM.SplitScreen.jumpToTarget(e)}),l("body.pg_articlesplitview .xref-fn a:not(split-view-modal)").on("click",function(){var e=l(".tab-ReferencesCss, .tab-split-view-references-pane");e.length&&!e.hasClass("active")&&e.click()}),l("#revealModal.reveal-modal").addClass("fn-modal"),l(".article").scroll(function(){var i=l(".article").scrollTop(),r=l(".article .book-chapter-body");l("h3").each(function(){var e=r.length?l(this).data("magellan-destination"):l(this).attr("id"),e=l(`.section-jump-link a[href="#${e}"]`);l(e).closest(".section-jump-link").addClass("level-2")}),l(".jumplink-heading").each(function(){var e,t,n=l(this).offset().top,a=l(".master-header").height();r.length?(e=l(this).data("magellan-destination"),t=l(`.section-jump-link a[href="#${e}"]`),n-200<a&&n-200<i&&l(t).length&&(l(".section-jump-link.active").removeClass("active"),l(t).closest(".section-jump-link").addClass("active"))):(e=l(this).attr("id"),t=l(`.section-jump-link__link-wrap a[href="#${e}"]`),n-200<a&&n-200<i&&l(t).length&&(l(".jumplink-list li").removeClass("active"),l(t).closest(".section-jump-link").addClass("active")))})}),l(".widget-SplitView").on("click",'a.scrollTo[href*="#"]:not([href="#"])',function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){let e=l("html"),t=l(".article"),n=l(this.hash),a=60;var i=l("body").hasClass("js-sticky-splitview-nav");function r(){e.delay(100).animate({scrollTop:l(".splitview__wrapper").offset().top},250)}function o(){t.delay(100).animate({scrollTop:t.scrollTop()+n.position().top-a},250)}if((n=n.length?n:l(`[name="${this.hash.slice(1)}"]`)).length)return s&&l(".tab-FullTextCss").click(),i&&r(),o(),!1}})),r.on("click",function(){t.removeClass("active"),l(this).addClass("active"),a.hide(),i.show()}),l(window).on("resize",function(){!1===(s=e.getDocWidth()<1024)?(i.show(),0===l(".tab.active").not(".tab-FullTextCss").length&&l(".tab:visible").first().trigger("click")):0<l(".tab.active").not(".tab-FullTextCss").length&&l(".tab.active").trigger("click")}),l(function(){SCM.SplitScreen.removeTabsWithNoContent(),!0===s?(a.hide(),l(r).addClass("active")):l(".tab:visible").first().trigger("click"),l(".linked-name").on("click",function(){l(this).parent(".al-author-name").position().left+300>l(".article").width()&&l(this).next(".al-author-info-wrap").addClass("al-author-info-wrap--right")}),l(".pg_Chapter").find(".tabs, .panels").css("display","inline-flex"),l('.pg_Chapter .tab[data-tab="1"]').addClass("active"),l('.pg_Chapter .panels .dynamic-widget-inner-wrap[data-display-order="1"]').show(),SCM.SplitScreen.jumpToSubSection()})}}(SCM.SplitScreen=SCM.SplitScreen||{},jQuery),!function(e){e.init=function(){}}(SCM.ArticleFulltext=SCM.ArticleFulltext||{},jQuery),SCM||{});function getQueryStringValue(e,t){var t=t+"=",n=e.indexOf(t);return-1===n?null:0<=e.indexOf("&",n+=t.length)?(t=e.indexOf("&",n),e.substring(n,t)):e.substring(n)}function isDefined(e){return void 0!==e&&null!=e&&""!==e}function jsonToQueryString(t){return Object.keys(t).filter(function(e){return isDefined(e)}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}SCM.JournalCitationFilter=function(d){var u="f_JournalDisplayName",h=d("#journalCitationDateParam").length?d("#journalCitationDateParam").val():"rg_IssuePublicationDate",p="f_Volume",f="f_IssueNo",m="f_StartPage",e=null,t=null,n=null,a=null,i=null,g=null,v=null,C=null,y=null,b=null,w=null,S=null,k=null,M=null,r=null,o=null,j=null,x=null,T=null,A=null,D=null,I=null,_=null,R=null,P=null,F=null;function s(){var e=document.getElementById("hfJournalCitationFilterLoaded");return!(!e||!e.value)}function l(e,t){return t=t||"",(document.getElementById(e)||{}).value||t}function c(){o.classList.remove("collapsed"),-1!==r.className.indexOf("icon-general-arrow-filled-right")&&(r.classList.remove("icon-general-arrow-filled-right"),r.classList.add("icon-general-arrow-filled-down"))}return{init:function(){s()&&(e=getQueryStringValue(location.search,u),t=getQueryStringValue(location.search,h),n=getQueryStringValue(location.search,p),a=getQueryStringValue(location.search,f),i=getQueryStringValue(location.search,m),g=document.getElementById("SelectedJournal"),v=document.getElementById("Citation_IssuePublicationDate"),C=document.getElementById("Citation_Volume"),y=document.getElementById("Citation_IssueNo"),b=document.getElementById("Citation_StartPage"),w=isDefined(v)?v.getAttribute("pattern"):null,S=isDefined(C)?C.getAttribute("pattern"):null,k=isDefined(y)?y.getAttribute("pattern"):null,M=isDefined(b)?b.getAttribute("pattern"):null,r=document.getElementsByClassName("js-journal-citation-filter-toggle")[0],o=document.getElementsByClassName("journal-citation-filter-input-wrap")[0],j=l("Config_PlaceholderTextJournal"),x=l("Config_PlaceholderTextYear"),T=l("Config_PlaceholderTextVolume"),A=l("Config_PlaceholderTextIssueNo"),D=l("Config_PlaceholderTextStartPage"),I=l("Config_ValidationMessageJournal"),_=l("Config_ValidationMessageYear"),R=l("Config_ValidationMessageVolume"),P=l("Config_ValidationMessageIssueNo"),F=l("Config_ValidationMessageStartPage"),!0===function(){if(isDefined(e)&&isDefined(g)||isDefined(t)&&isDefined(v)||isDefined(n)&&isDefined(C)||isDefined(a)&&isDefined(y)||isDefined(i)&&isDefined(b))return v.value=function(e){var t;return isDefined(e)?(t=decodeURIComponent(e).split("TO").map(function(e){return e.replace("+","")}),e=0<t.length?t[0]:e,new Date(e).getUTCFullYear()):""}(t),C.value=n,y.value=a,b.value=i,!0;return!1}())&&c()},applyFilter:function(e,t){c=isDefined(g)&&0<g.options.length&&isDefined(g.options[g.selectedIndex])?g.options[g.selectedIndex].textContent:"",n=isDefined(v)?v.value:"",i=isDefined(C)?C.value:"",o=isDefined(y)?y.value:"",s=isDefined(b)?b.value:"",l={},a="",c===j&&""!==c?a=I+"\n":""!==c&&(l[u]=d.trim(c)),n!==x&&""!==n&&(c=new RegExp(w),isNaN(n)||!c.test(n)?a+=_+"\n":l[h]="01/01/"+n+" TO 12/31/"+n),i!==T&&""!==i&&(new RegExp(S).test(i)?l[p]=i:a+=R+"\n"),o!==A&&""!==o&&(new RegExp(k).test(o)?l[f]=o:a+=P+"\n"),s!==D&&""!==s&&(new RegExp(M).test(s)?l[m]=s:a+=F+"\n");var n,a,i,r,o,s,l,c=0<a.length?(alert(a),!1):l;return c&&(n=jsonToQueryString(c),i=(i=e).split("&"),r=[u,h,p,f,m,"page"],(i=i.filter(function(e){e=e.split("=")[0];return r.indexOf(e)<0})).push("page=1"),o="",s=n,(a=i.join("&").trim())&&(s+="&"+a),(o=t?t.split("&").filter(function(e){e=e.split("=")[0];return"dateFilterType"===e||"noDateTypes"===e}).join("&").trim():o)&&(s+="&"+o),l={queryString:s},void 0!==(c=d("#hfSiteURL"))&&""!==c.val()&&(SCM.SearchResults.defaults.baseSiteUrl=c.val()),SCM.SearchResults.doSolrSearch(l)),!1},toggleWidget:function(){-1!==o.className.indexOf("collapsed")?c():(o.classList.add("collapsed"),-1!==r.className.indexOf("icon-general-arrow-filled-down")&&(r.classList.remove("icon-general-arrow-filled-down"),r.classList.add("icon-general-arrow-filled-right")))},journalCitationFilterLoaded:s}}(jQuery),$(document).ready(function(){function t(){var e=$(".js-journal-citation-filter-update").data("searchUri"),t=window.location.search;t.length&&(t=t.substring(1)),SCM.JournalCitationFilter.applyFilter(e,t)}function n(){$(document).ajaxStart(function(){$(".info-inner-cover").removeClass("uncovered"),$(".info-inner-cover").addClass("covered")}),$(document).ajaxComplete(function(){$(".info-inner-cover").removeClass("covered"),$(".info-inner-cover").addClass("uncovered")})}SCM.JournalCitationFilter.journalCitationFilterLoaded()&&(SCM.JournalCitationFilter.init(),$(document).on("click",".js-journal-citation-filter-update",function(){$(this).addClass("fade"),n(),t()}),$(document).on("keyup",".js-advanced-citation-filter-field",function(e){13===e.keyCode&&(e.preventDefault(),$(".js-journal-citation-filter-update").addClass("fade"),n(),t())}),$(document).on("click",".js-journal-citation-filter-toggle",function(){SCM.JournalCitationFilter.toggleWidget()}),$(document).on("keyup change",".js-advanced-citation-filter-field",function(){$(".js-journal-citation-filter-update").removeClass("fade")}))});var SCM=SCM||{},SCM=(!function(r,n){var a="";r.getGdprCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var i=n[a].trim();if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},r.createGdprCookie=function(e,t,n){var a=r.getCookieName(),n=n?((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),"; expires="+i.toGMTString()):"",i=a+"="+encodeURIComponent(t)+n+"; samesite=lax; secure; path=/",t=r.getCookieDomain(),n=null;t&&(document.cookie=i+";domain="+t,n=r.getGdprCookie(a)),t&&n||(document.cookie=i)},r.getCookieName=function(){var e,t;return a||(t="GDPR_",(e=n("#hdnClientIdGdpr").val())&&(t=t+e+"_"),(e=r.getCookieDomain())&&(t+=e),t)},r.getCookieDomain=function(){return n("#hdnDomainGdpr").val()},r.hideGdprBanner=function(){var e,t=n(".js-gdpr-banner");!navigator.cookieEnabled||(e=r.getCookieName(),r.getGdprCookie(e))?(t.hide(),n("body").removeClass("gdpr-visible"),n(".js-gdpr-banner").addClass("hidden")):n(".js-gdpr-banner").removeClass("hidden")},r.gdprAcceptLinkClick=function(){n(".js-gdpr-cookie-acceptLink, .js-gdpr-cookie-close").on("click",function(){r.createGdprCookie("GDPR_",!0,365),r.hideGdprBanner(),SCM.ClientStatsMaster&&SCM.ClientStatsMaster.trackGdprCookieAcceptance&&SCM.ClientStatsMaster.trackGdprCookieAcceptance("1050","0","Cookie Acceptance"),SCM.EventEmitter.publish("viewport-changed")})},r.init=function(e){e&&(a=e),n("body").addClass("gdpr-visible"),r.gdprAcceptLinkClick(),r.hideGdprBanner()}}(SCM.gdprCookieBanner=SCM.gdprCookieBanner||{},jQuery),SCM||{}),SCM=(!function(n,a){var t;a("#sendEmailModal").length&&(t=a("#sendEmailModal")[0].outerHTML),n.htmlEscape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},n.htmlUnescape=function(e){return String(e).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")},n.readModelValues=function(){return{ExplanatoryTextWithTitle:a("#ExplanatoryTextWithTitle").val(),SenderName:a("#SenderName").val(),SenderEmail:a("#SenderEmail").val(),CopySender:a("#CopySender").is(":checked"),RecipientEmail1:a("#RecipientEmail1").val(),RecipientEmail2:a("#RecipientEmail2").val(),RecipientEmail3:a("#RecipientEmail3").val(),RecipientEmail4:a("#RecipientEmail4").val(),RecipientEmail5:a("#RecipientEmail5").val(),Subject:a("#Subject").val(),OptionalMessage:a("#OptionalMessage").val(),SuccessfulSend:a("#SuccessfulSend").val(),SendersAccountId:a("#SendersAccountId").val(),ClientShortName:a("#ClientShortName").val(),ResourceTitle:a("#ResourceTitle").val(),BookId:a("#BookId").val(),ThankYouName:a("#ThankYouName").val(),ResourceId:a("#ResourceId").val(),ResourceType:a("#ResourceType").val(),FailedRecipients:a("#FailedRecipients").val(),LinkExpirationTime:a("#LinkExpirationTime").val(),HasAccess:a("#HasAccess").val()}},n.sendEmailClickEvents=function(){a("#revealSendEmail").click(function(e){e.preventDefault();e=a("#SuccessfulSend"),e.length&&"True"===e.val()&&0<t.length&&(a("#sendEmailModal").replaceWith(t),a("#tseform").removeData("validator"),a("#tseformS").removeData("unobtrusiveValidation"),a.validator.unobtrusive.parse(a("#tseform"))),e=a("#sendEmailModal");e.length&&(a("body").addClass("on-canvas"),e.addClass("open"),e.css({top:"12vh",maxHeight:"calc(100vh - 20%)",overflowY:"auto"}))}),a(document).on("click",".tse-submit",function(e){e.preventDefault();var e=!0,t=a("#tseform");(e=0<t.length?t.valid():e)&&(a("#SenderName").val(n.htmlEscape(a("#SenderName").val())),a("#OptionalMessage").val(n.htmlEscape(a("#OptionalMessage").val())),t=n.readModelValues(),a("#sendEmailModal").addClass("on-canvas"),a.post("/Toolbox/ToolboxSendEmailModal/ToolboxSendEmailModel",t,function(e){a("#sendEmailModal").replaceWith(e)}).always(function(){a("#sendEmailModal").addClass("open"),a("#sendEmailModal").removeClass("on-canvas")}))})}}(SCM.ToolboxSendEmail=SCM.ToolboxSendEmail||{},jQuery,$(document)),jQuery(document).ready(function(e){SCM.ToolboxSendEmail.sendEmailClickEvents()}),SCM||{}),SCM=(SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=SCM.Utilities.LocalStorage||{},SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=function(){var o="SharedWidgets.UserAffinities";return{AddToLocalStorage:function(e,t){e=$(e);{var n,a,i,r;0!==e.length&&(r=e.attr("data-days-to-retain"),n=e.attr("data-resource-id"),e=e.attr("data-resource-type"),a=s(),i=function(e,t){var n=new Date,a=new Date((new Date).setDate(n.getDate()-t));return e.filter(function(e){return new Date(e.Date)>=a})}(i=(a=a||{Items:[]}).Items,r),r={resourceId:n,resourceTypeId:e},SCM.Ajax.get("/Personalization/GetCategoriesForResource",r).expectJson().then(function(e){0<e.Categories.length&&i.push(e),a.Items=i,SCM.Utilities.LocalStorage.setItem(o,a)}))}},GetFromLocalStorage:s,GetUserAffinityRecResults:function(t,e,n){var a,i,r=s();r&&r.Items.length&&(i=$(".SCM-SharedWidgets-LocalStorage-UserAffinityTracking"),a=i.data("resource-id"),i=i.data("resource-type"),r=r.Items,SCM.Ajax.post("/Personalization/UserAffinityRecSearchResults/"+e,{userAffinityJson:JSON.stringify(r),currentResourceId:a,currentResourceType:i,siteId:n}).expectHtml().then(function(e){$("#"+t).html(e)}))}};function s(){return SCM.Utilities.LocalStorage.getItem(o)}}(),SCM||{}),SCM=(SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=function(){"use strict";var a=window.localStorage;return{getItem:function(e,t){t=(t=t||a).getItem("SCM."+e);return JSON.parse(t)},setItem:function(e,t,n){(n=n||a).setItem("SCM."+e,JSON.stringify(t))},removeItem:function(e,t){(t=t||a).removeItem("SCM."+e)}}}(),SCM=SCM||{},SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LazyLoad=function(){var i="lazyLoadInit";return{init:function(e){try{var t="img."+(e=e||"lazy")+":not(."+i+")",n=[].slice.call(document.querySelectorAll(t));n.length&&("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype?function(e,n){var t=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(r(e=e.target),e.classList.remove(n),t.unobserve(e))})},{rootMargin:"200px 0px 200px 0px"});e.forEach(function(e){t.observe(e),e.classList.add(i)})}:function(e,n){function a(){!1===t&&(t=!0,setTimeout(function(){e.forEach(function(t){t.getBoundingClientRect().top<=window.innerHeight&&0<=t.getBoundingClientRect().bottom&&"none"!==getComputedStyle(t).display&&(r(t),t.classList.remove(n),0===(e=e.filter(function(e){return e!==t})).length)&&(document.removeEventListener("scroll",a),window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a))}),t=!1},200))}var t=!1;document.addEventListener("scroll",a),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),e.forEach(function(e){e.classList.add(i)})})(n,e)}catch(e){console.error("Exception during SCM.Utilities.LazyLoad.init()",e)}}};function r(e){e.src=e.dataset.src||e.dataset.original,e.dataset.srcset&&(e.srcset=e.dataset.srcset)}}(),SCM=SCM||{},SCM.Utilities=SCM.Utilities||{},SCM.Utilities.Reveal=function(n){var t="data-reveal-id",a="reveal-modal",i="close-reveal-modal",r="open",o="on-canvas",s=n(document.body);return{init:function(e){!function(e){e&&"object"==typeof e&&(e.targetIdAttr&&(t=e.targetIdAttr),e.modalClass&&(a=e.modalClass),e.closeTriggerClass&&(i=e.closeTriggerClass),e.modalOpenClass&&(r=e.modalOpenClass),e.bodyOpenClass)&&(o=e.bodyOpenClass)}(e);e="*["+t+"]",s.on("click",e,function(e){e=e.currentTarget;e=n(e).attr(t),(e=n("#"+e)).length&&l(e)}),e="."+i;s.on("click",e,function(e){e=e.currentTarget;(e=n(e).closest("."+a)).length&&c(e)})},open:l,close:c,toggle:function(e){("string"==typeof e||e instanceof Element)&&(e=n(e));e.each(function(e,t){t=n(t);(t.hasClass(r)?c:l)(t)})}};function l(e,t){(e="string"==typeof e||e instanceof Element?n(e):e).addClass(r),t&&o&&s.addClass(o)}function c(e){(e="string"==typeof e||e instanceof Element?n(e):e).removeClass(r),o&&s.removeClass(o)}}(jQuery),SCM||{}),SCM=(SCM.Focus=function(a){var i='a[href], button, textarea, select, input:not([type="hidden"])';return{trap:function(e){var e=a(e).first(),t=(function(e){var t=a(document.activeElement).first();e.data("lastFocusedElement",t)}(e),function(e){return e.find(i)}(e));(function(e,a){e.on("keydown.SCM.Focus",function(e){var t,n;!e||"Tab"!==e.key&&"Tab"!==e.code||(e.shiftKey?(t=e,n=(n=a).filter(":visible").filter(":not([disabled])"),document.activeElement===n.first()[0]&&(n.last().trigger("focus"),t)&&t.preventDefault&&t.preventDefault()):(n=e,t=(t=a).filter(":visible").filter(":not([disabled])"),document.activeElement===t.last()[0]&&(t.first().trigger("focus"),n)&&n.preventDefault&&n.preventDefault()))})})(e,t),t.filter(":visible").first().trigger("focus")},release:function(e){var e=a(e).first();e.length&&(e.off("keydown.SCM.Focus"),e=function e(t){t=a(t).first();if(!t.length)return t;if(t.is("body"))return t;if(t.is(i)&&t.is(":visible"))return t;var n=t.siblings(i).filter(":visible");if(n.length)return n.first();return e(t.parent())}((e=e).data("lastFocusedElement")))&&e.length&&e.first().trigger("focus")}}}(jQuery),SCM||{}),SCM=(SCM.Modals=function(a){var t,i,r,n,o="globalModalContent",s="data-modal-source-id",l="data-modal-source-url",c="data-content-id",d="content-id",u="swap-content-for-modal",h=null,p=null,f={open:"scm.modals.open",close:"scm.modals.close"};return{Events:f,init:function(){n=a(document.body),t=a("#globalModalContainer"),i=a("#"+o),r=a(".js-globalModalPlaceholder"),n.on("click","*["+s+"], *["+l+"]",e),n.on("click keydown",".js-close-modal",function(e){"click"!==e.type&&("keydown"!==e.type||"Enter"!==e.key&&"Space"!==e.key)||(e.preventDefault(),C())}),n.on("click",".js-modal-overlay",C),n.on("keyup",function(e){e&&e.code&&"escape"===e.code.toLowerCase()&&t.hasClass("open")&&C()})},showModal:m,closeModal:C};function e(e){var t,n=a(e.currentTarget);t=n,a(".pg_ArticleSplitView, .pg_articlesplitview").length&&t.hasClass("xref-bibr")||(e&&e.preventDefault&&e.preventDefault(),(t=(t=n.data(y(s)))&&t.trim().toLowerCase())?(e=t)&&"string"==typeof e&&(e=e.split(" ").map(function(e){return"*["+c+'="'+e+'"], *['+d+'="'+e+'"]'}).join(", "))&&m(function(e){return a(e).filter(function(e,t){return!a(t).closest("#"+o).length})}(e)):(t=(t=n.data(y(l)))&&t.trim(),(e=t)&&SCM.Ajax.get(e).expectHtml().then(function(e){m(e)}).catch(function(e){console.error("Failed to display AJAX modal content.  ",e)})))}function m(e){var t,n;(e=e&&e.trim?e.trim():e)?"string"==typeof e?(i.html(e),v()):(n=e)&&n.jquery?"true"===(n=h=e).attr(u)?(t=n,r.parent().attr("id")!==o&&g(r,i.children()),g(r,t),v()):m(function(e){return e.get().map(function(e){return e.outerHTML}).join("\n")}(n)):console.error("Request to show modal with unsupported content type: "+typeof e):console.error("Request to show modal with no content")}function g(e,t){var e=e[0],t=t[0],n=e.parentNode,a=t.parentNode,i=e.nextSibling===t?e:e.nextSibling;a.insertBefore(e,t),n.insertBefore(t,i)}function v(){i.find(".modal-only-content").removeClass("modal-only-content"),n.addClass("modal-open"),t.addClass("open"),t.attr("aria-hidden","false");var e=i.find(".js-modal-label");e.length&&e.attr("id")&&t.attr("aria-labelledby",e.attr("id")),p=document.activeElement;e=t.find('a[href], button, textarea, input:not([type="hidden"]), select').filter(":visible:not(:disabled)").first();(e.length?e:t.attr("tabindex","0")).focus(),b(f.open),SCM.Focus.trap(t)}function C(){0!==i.children("["+u+"]").length?g(r,i.children()):i.empty(),n.removeClass("modal-open"),t.removeClass("open"),t.attr("aria-hidden","true"),t.removeAttr("aria-labelledby"),b(f.close),h=null,SCM.Focus.release(t),p&&(p.focus(),p=null)}function y(e){return e.replace(/^data-/,"").replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function b(e){h&&h.length?h.trigger(e):t&&t.length&&t.trigger(e)}}(jQuery),SCM||{}),SCM=(SCM.Dropdowns=function(a){var i,n,r,o,e,t,s="active",l="expanded",c="open";return{init:function(){i=a(".js-theme-dropdown-trigger"),n=a(".js-theme-dropdown"),r=a("[data-theme-dropdown-trigger]"),o=a("[data-theme-dropdown]"),e=".js-theme-dropdown-trigger",t="[data-theme-dropdown-trigger]",$dataToolboxDropdownTrigger=a(".js-toolbar-dropdown"),$dataToolboxDropdown=a(".js-articledropdown"),a(document.body).on("click",e,function(e){var t=a(e.currentTarget),n=t.next(".js-theme-dropdown");e.stopPropagation(),u(t,n),t.toggleClass(s),n.toggleClass(l),"true"==t.attr("aria-expanded")?t.attr("aria-expanded","false"):t.attr("aria-expanded","true")}),a(document.body).on("click",t,function(e){var t=a(e.currentTarget),n=t.data("themeDropdownTrigger"),n=a('[data-theme-dropdown="'+n+'"');e.stopPropagation(),u(t,n),t.toggleClass(s),n.toggleClass(l),"true"===t.attr("aria-expanded")?t.attr("aria-expanded","false"):t.attr("aria-expanded","true")}),a(document.body).on("focusout","[data-theme-dropdown].expanded, [data-theme-dropdown].open",function(e){var t=a(e.relatedTarget).parents("[data-theme-dropdown].expanded, [data-theme-dropdown].open").length,n=null==e.relatedTarget;e.stopPropagation(),t||n||(r.removeClass(s),r.attr("aria-expanded","false"),a(e.currentTarget).removeClass(l),$dataToolboxDropdownTrigger.attr("aria-expanded","false"),$dataToolboxDropdown.removeClass(c))}),a(document.body).on("focusout",".js-theme-dropdown.expanded, .js-articledropdown.open",function(e){var t=a(e.relatedTarget),n=a(e.currentTarget);e.stopPropagation(),setTimeout(function(){t.parents(".js-theme-dropdown.expanded, .js-articledropdown.open").length||(i.removeClass(s),i.attr("aria-expanded","false"),n.removeClass(l),$dataToolboxDropdownTrigger.attr("aria-expanded","false"),$dataToolboxDropdown.removeClass(c))},100)}),a(document.body).on("click",function(e){d(e)}),a(document).on("keydown",function(e){"Escape"!==e.key&&27!==e.keyCode||d(e)})}};function d(e){a(e.target).closest(".js-dropdown.expanded, .js-theme-dropdown.expanded, js-articledropdown.open, [data-theme-dropdown].expanded").length||(i.removeClass(s),i.attr("aria-expanded","false"),n.removeClass(l),r.removeClass(s),r.attr("aria-expanded","false"),o.removeClass(l),$dataToolboxDropdownTrigger.attr("aria-expanded","false"),$dataToolboxDropdown.removeClass(c))}function u(e,t){e.closest("[data-theme-dropdown].expanded, .js-theme-dropdown.expanded").length||(i.not(e).removeClass(s).attr("aria-expanded","false"),n.not(t).removeClass(l),r.not(e).removeClass(s).attr("aria-expanded","false"),o.not(t).removeClass(l))}}(jQuery),SCM||{}),App=(SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=SCM.SharedWidgets.UserPersonalization||{},SCM.SharedWidgets.AsyncWidgetLoader=function(){return{LoadWidget:loadWidget};function loadWidget(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),"object"==typeof SCM.EventEmitter&&SCM.EventEmitter.publish(elementClass+"_LOADED")},error:function(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})})}function buildParameters(e){var t,e=JSON.parse(e),n=e.parameters,e=e.dynamicParameters;return void 0!==e&&void 0!==e.localParams&&"[REPLACE_WITH_LOCAL]"===e.localParams&&(t=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage(),e.localParams=t,n.Items=JSON.stringify(t)),n}}(),jQuery(document).ready(function(e){SCM.SharedWidgets.AsyncWidgetLoader.LoadWidget(".SCM-SharedWidgets-AsyncWidgetLoader","data-url","data-params","POST")}),App||{}),SCM=(!function(e,s){var l={};let t=!1;e.Init=function(){var e;s(".js-open-update-alerts-modal").off("click"),s(".js-delete-alert").off("click"),s(".js-update-alerts").off("click"),s(".js-alert-select").off("change"),s(".js-new-alert-select").off("change"),s(".js-open-update-alerts-modal").on("click",App.MyAlerts.OpenModal),s(".js-delete-alert").on("click",App.MyAlerts.DeleteAlert),s(".js-update-alerts").on("click",App.MyAlerts.UpdateAlerts),s(".js-new-alert-select").on("change",App.MyAlerts.UpdateScheduleIdAttribute),s(".js-alert-select").on("change",App.MyAlerts.UpdateAlertSchedule),SCM.GoogleTagManagerDataLayerEvents&&s('input[name="alertCheckBox"]').on("click",App.MyAlerts.SaveAlertCheckboxState),t||((e=s(".js-userAlertSignUpModal")).length&&App.MyAlerts.OpenModal.call(e),t=!0)},e.OpenModal=function(){var e=s("#"+s(this).data("reveal-id"));e&&(s(e).addClass("open"),s(".reveal-modal").css("top","25vh"),s("body").addClass("on-canvas"))},e.CloseModal=function(){s(this).closest(".reveal-modal").removeClass("open"),s("body").removeClass("on-canvas")},e.BuildAlertItem=function(e){var t={};return t.SiteId=e.data("siteid"),t.AlertType=e.data("alerttypeid"),t.ResourceId=e.data("resourceid"),t.ResourceTypeId=e.data("resourcetypeid"),t.IsSubscribed=!!e.prop("checked"),t.ScheduleId=e.data("scheduleid"),t.AlertGroupNumber=e.data("groupnumber"),t.SearchTerm=e.data("searchterm"),t},e.UpdateScheduleIdAttribute=function(){var e=s(this);e.prev('input[type="checkbox"]').attr("data-scheduleid",e.val())},e.UpdateAlertSchedule=function(){var e={};e.SiteId=s(this).data("siteid"),e.AlertType=s(this).data("alerttypeid"),e.ResourceId=s(this).data("resourceid"),e.ResourceTypeId=s(this).data("resourcetypeid"),e.IsSubscribed=!0,e.ScheduleId=s(this).val(),App.MyAlerts.PostUpdate([e],s(this))},e.DeleteAlert=function(){var e=App.MyAlerts.BuildAlertItem(s(this));App.MyAlerts.PostUpdate([e],s(this))},e.UpdateAlerts=function(){var e=s(this),t=e.closest("#"+s(this).data("modalid")).find('input[type="checkbox"]'),n=[];t.each(function(){var e=App.MyAlerts.BuildAlertItem(s(this));n.push(e)}),App.MyAlerts.PostUpdate(n,e)},e.PostUpdate=function(e,t){var a;(function n(e){return r(e).then(function(e){var t=a.splice(0,i);return t.length?n(t):e})})((a=e).splice(0,i)).then(function(e){var n;t.closest(".js-alert-details").find(".close-reveal-modal").click(),t.closest(".js-alert-details").html(e),App.MyAlerts.Init(),SCM.GoogleTagManagerDataLayerEvents&&(n=!1,s(l).length&&s.each(s(l),function(e,t){s.each(t,function(e,t){if(!n&&t)return!(n=!0)})}),n&&SCM.GoogleTagManagerDataLayerEvents.logJournalAlertSubscribe("my-account"),l={})}).catch(function(e){alert("Unable to update your alerts, please contact customer service"),console.error(e)})},e.SaveAlertCheckboxState=function(){var e,t,n,a,i,r,o=s(this);o.length&&(e=o[0].checked,t=(o=o)[0].dataset.groupnumber?"_gn_"+o[0].dataset.groupnumber:"",n=o[0].dataset.siteid?"_si_"+o[0].dataset.siteid:"",a=o[0].dataset.alerttypeid?"_at_"+o[0].dataset.alerttypeid:"",i=o[0].dataset.resourceid?"_ri_"+o[0].dataset.resourceid:"",r=o[0].dataset.resourcetypeid?"_rti_"+o[0].dataset.resourcetypeid:"",o=o[0].dataset.groupnumber?"_sci_"+o[0].dataset.groupnumber:"",l["checkboxDictionaryKey"+t+n+a+i+r+o]=e)};var i=100;function r(e){return s.ajax({type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Content/MyAlerts",cache:!1,data:JSON.stringify(e),contentType:"application/json"}).promise().then(function(e){return e||Promise.reject("Invalid response")})}jQuery(function(){App.MyAlerts.Init()})}(App.MyAlerts=App.MyAlerts||{},jQuery),SCM||{}),App=App||{},SCM=(!function(a,i,r){var o="instOpenUrlKey_";a.replaceOpenUrlPlaceHolders=function(e,t){null!==t&&""!==t&&e.each(function(){var e=i(this).attr("data-targetId"),e=t.replace("{openUrlTargetId}",e);i(this).html(e),i(this).parent().show()})},a.getAndReplaceOpenUrlPlaceHolders=function(n){i.ajax({type:"POST",url:"/ThirdParty/InstitutionOpenUrlTemplate",dataType:"json",success:function(e){var t;null!==e&&"undefined"!==e&&(t="",1==e.DisplayOpenUrlLink&&(t=null!==e.LinkImageSource&&""!==e.LinkImageSource?' <a target="_blank" href="'+e.TargetUrl+'"><img src="'+e.LinkImageSource+'" alt="Find at '+e.InstitutionName+'" /></a > ':' <a target="_blank" href="'+e.TargetUrl+'"> '+e.LinkImageText+" </a> "),a.replaceOpenUrlPlaceHolders(n,t),null!==r)&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo&&void 0!==window.App.LoginUserInfo.currentSessionId&&r.setItem(o+window.App.LoginUserInfo.currentSessionId,t,window.sessionStorage)},error:function(e){}})},a.checkAndReplaceOpenUrlPlaceHolders=function(){var e,t;void 0!==window.App.LoginUserInfo&&0<window.App.LoginUserInfo.isInstLoggedIn&&null!=(e=i('span[class="inst-open-url-holders"]'))&&0<e.length&&(null!==r&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo.currentSessionId&&null!==(t=r.getItem(o+window.App.LoginUserInfo.currentSessionId,window.sessionStorage))?a.replaceOpenUrlPlaceHolders(e,t):a.getAndReplaceOpenUrlPlaceHolders(e))},a.init=function(){a.checkAndReplaceOpenUrlPlaceHolders(),i(window).on("SCM-SharedWidgets-AsyncWidgetLoader_LOADED",a.checkAndReplaceOpenUrlPlaceHolders)},a.init()}(SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery,SCM.Utilities.LocalStorage),SCM||{}),SCM=(SCM.RedeemCode=function(t){var n,a,i,r;return{init:o};function o(){return!!(a=t("#js-redeem-code-button")).length&&(n=t("#js-redeem-code-input"),i=t("#js-redeem-code-modal"),r=t("#js-redeem-code-messages"),a.off("click"),a.on("click",e),!0)}function e(){var e=t.trim(n.val());e&&(a.off("click"),t("body").addClass("on-canvas"),t.ajax({type:"POST",url:"/UserDashboard/RedeemCode",cache:!1,data:JSON.stringify({productCode:e}),contentType:"application/json"}).done(function(e){e?(r.html(e.Messages[0]),i.length&&t(i).addClass("open")):alert("Unable to process your request, please contact customer service"),o()}).fail(function(){alert("Unable to process your request, please contact customer service")}))}}(jQuery),jQuery(function(){SCM.RedeemCode.init()}),SCM||{}),SCM=(SCM.IssueCovers=function(t){var n,a,i,r,e=".js-cover-image-click";return{init:function(){if(t(e).length)return n=t(".js-cover-view-large"),a=t(".js-cover-view-large-img"),i=t(".js-cover-view-large-caption-wrap"),r=t(".js-cover-view-large-caption-text"),t(".widget-IssueCoverBrowse").on("click",e,o),!0;return!1}};function o(){var e=t(this);a.attr("src",""),a.attr("src",e.attr("data-src")),e.attr("data-caption").length?(i.removeClass("hide"),r.html(e.attr("data-caption"))):i.addClass("hide"),t("body").addClass("on-canvas"),n.addClass("open")}}(jQuery),jQuery(function(){SCM.IssueCovers.init()}),SCM||{}),SCM=(SCM.FormWidget=function(o){return{init:function(){o(".js-form-textarea").on("keyup",e),o(".js-widget-dynamic-form").on("submit",t)}};function e(){var e,t,n=o(this).data("maxLength");o(this).parent().find(".js-remaining-characters").text((e=o(this),n=n,t=o(e).val().length,n<t?(o(e).val(o(e).val().substring(0,n)),0):(n-t).toString()))}function t(e){e.preventDefault();var n,r,e=o(".js-widget-dynamic-form-container"),t=o(".js-widget-dynamic-form"),a=e.find("#g-recaptcha-response").val(),i=new FormData(this),a=(i.append("CaptchaResponse",a),o("#FormInstanceName").val());n=t,r=e,SCM.Ajax.post("/Common/DynamicFormSubmit/"+a,i).expectActionResultModel().then(function(e){var t=n,a=r,i=t.find(".js-error-message");if(e.Success){t=t.find(".message-success");let n=o("<div/>");o.each(e.Messages,function(e,t){n.append(t)}),a.addClass("hide"),i.addClass("hide"),t.html(n.html()).show(),SCM.GoogleTagManagerDataLayerEvents&&SCM.GoogleTagManagerDataLayerEvents.logSuccessfulContactUs()}else if(null!=(a=e.Messages)&&a.length){let n=o("<ul></ul>");o.each(e.Messages,function(e,t){n.append("<li>"+t+"</li>")}),i.html(n).removeClass("hide")}}).catch(console.error)}}(jQuery),SCM||{}),SCM=(SCM.Pagination=function(a){return{init:function(){a(".js-pagination-click").length&&a("body").on("click",".js-pagination-click",function(){var e=a(this),t=e.data("click-handler").split(".");window[t[0]][t[1]][t[2]](e)})},performAjaxPagination:function(e,t){{var n;t.data("elem-to-replace")?(n=a(t.data("elem-to-replace")))?a.ajax(e).done(function(e){n.html(e)}).fail(function(e,t,n){window.console&&(console.error("error: "+e.responseText),console.error("status: "+t))}):alert("Unable to find an element to respond to ajax response."):alert("The elem-to-replace data attribute was not populated.  You must populate this in the Widget's view to pass back the call to performAjaxPagination")}},updateBrowseHistory:function(e,t){var n={pagination:t};history.pushState&&(null!==history.state&&history.state.pagination||history.replaceState({pagination:document.URL},null,document.URL),history.pushState(n,null,t))},enableBrowserHistoryNavigation:function(){window.addEventListener("popstate",function(e){e.state&&history.state.pagination&&(window.location=e.state.pagination)})},trimEndUntilRegexMatches:function(e,t){for(;!e.match(t);)if(0===(e=e.substr(0,e.length-1)).length)return alert("SCM.Pagination.trimEndUntilRegexMatches: The entire string was trimmed, this likely indicates a problem with your regex pattern.  Note:  This method expects a regular expression literal (see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)"),"";return e},scrollToTop:function(){a(window).scrollTop(0)}}}(jQuery),jQuery(function(){SCM.Pagination.init()}),SCM||{}),SCM=(SCM.ArticlesByType=function(t){var n,a,i;return{init:function(){{var e;t(".widget-ArticlesByTypeList").length&&(e=t(".js-ArticlesByTypeList"),n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),"[a-zA-Z]$"),a=e.data("journal-id"),i=e.data("article-type-id"),SCM.Pagination.enableBrowserHistoryNavigation())}},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n);var t={type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Article/ArticlesByTypeList/"+e.data("parent-instance"),cache:!1,data:{journalId:a,page:e.data("clicked-page"),articleClientType:i}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery),jQuery(function(){SCM.ArticlesByType.init()}),SCM||{}),SCM=(SCM.CitedByPagination=function(e){var n,a;return{init:function(){e(".widget-CrossRefCitedBy").length&&(n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),/[a-zA-Z]\/\d+$/),a=n.match(/[a-zA-Z]\/(\d+)$/)[1],SCM.Pagination.enableBrowserHistoryNavigation())},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n+"/"+e.data("clicked-page"));var t={type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/ThirdParty/CrossRefCitedBy/"+e.data("parent-instance"),cache:!1,data:{selectedPage:e.data("clicked-page"),articleId:a}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery),jQuery(function(){SCM.CitedByPagination.init()}),SCM||{}),SCM=(SCM.MyInstitutionalTokens=function(e){var n;return{init:function(){e(".widget-MyInstitutionalTokens").length&&(n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),"[a-zA-Z]$"),SCM.Pagination.enableBrowserHistoryNavigation())},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n);var t={type:"POST",url:"/UserDashboard/MyInstitutionalTokens/"+e.data("parent-instance"),cache:!1,data:{selectedPage:e.data("clicked-page")}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery),jQuery(function(){SCM.MyInstitutionalTokens.init()}),SCM||{}),Theme=(SCM.CompactAddToCartButton=function(n){var i;return{init:function(){var e;(n(".js-addToCartButton").length||n(".js-bulk-cart-add").length)&&(i=SCM.CompactAddToCartButton.DataService,(e=n("#main")).on("click",".js-addToCartButton",function(){var t,e=n(this);t=e.data("resourceId"),e=e.data("resourceTypeId"),i.addResourceToCart(t,e).then(function(e){o(e),l(t),c()}).catch(function(e){console.error("Failed to add resource to cart.",e)})}),e.on("click","#js-add-to-cart-success-modal .js-close-modal",function(){n("#js-add-to-cart-success-modal").removeClass("open")}),e.on("change",".js-checkBoxClass",t),e.on("click",".js-bulk-cart-add",h),e.on("click",".js-bulk-cart-add-issue",f),e.ajaxComplete(m),a(),r())}};function a(){n(".js-addToCartButton").each(function(){var e=n(this);"True"!==e.data("userRestricted")&&s(e.data("resourceId"))?e.data("userRestricted","False"):e.data("userRestricted","True"),"False"===e.data("userRestricted")&&e.hide()})}function r(){i.getResourceIdsAlreadyInCart().then(function(t){n(".js-addToCartButton").each(function(){var e=n(this);t.includes(e.data("resourceId"))&&(e.data("inUserCart","true"),e.addClass("disabled"))})}).catch(function(e){console.error("Failed to get resourceIds in cart.",e)})}function o(e){n(".items-in-cart").length&&e.length&&!isNaN(parseInt(e))&&n(".items-in-cart").text(e)}function s(e){var t;return e&&(SCM.AccessAttributes?(t=e,!SCM.AccessAttributes.filter(function(e){return e.id===t}).map(function(e){return e.availableforpurchase}).shift()):"True"!==n("input.js-checkBoxClass[data-resource-id="+e+"]").data("availableForPurchase"))}function l(e){n(".js-addToCartButton[data-resource-id="+e+"]").attr("data-in-user-cart","true"),n(".js-addToCartButton[data-resource-id="+e+"]").addClass("disabled")}function c(){n("#js-add-to-cart-success-modal").addClass("open")}function t(e){var e=n(e.currentTarget).closest("section"),t=d(e);e.find(".js-bulk-cart-add, .js-bulk-citation-manager-add").prop("disabled",!t).attr("aria-disabled",!t);t=d(n(".section-container"));n(".js-bulk-cart-add-issue, .js-bulk-citation-manager-add-issue").prop("disabled",!t).attr("aria-disabled",!t)}function d(e){return u(e).length}function u(e){return e.find(".js-checkBoxClass:checked").map(function(e,t){return{id:n(t).data("resourceId"),typeId:n(t).data("resourceTypeId")}}).get()}function h(e){p(u(n(e.currentTarget).closest("section")))}function p(a){Array.isArray(a)&&a.length&&i.getResourceIdsAlreadyInCart().then(function(t){var n,e=a.filter(function(e){return!s(e.id)&&!t.includes(e.id)});e.length?(n=e,SCM.CompactAddToCartButton.DataService.addResourcesToCart(n).then(function(e){o(e),n.forEach(function(e){l(e.id)}),c()}).catch(function(e){console.error("Failed to add all resources to cart.",e)})):alert("No selected resources are available for purchase.")}).catch(function(e){console.error("Failed to get resourceIds in cart.",e)})}function f(){p(u(n(".section-container")))}function m(e,t,n){n.url&&n.url.toLowerCase().includes("searchresults")&&(a(),r())}}(jQuery),SCM.CompactAddToCartButton.DataService=function(n){return{addResourceToCart:function(e,t){return n.ajax({type:"POST",url:"/Store/AddProductToCartAjax/addtocartbutton",data:{resourceId:e,resourceTypeId:t},cache:!1}).promise().then(function(e){return e.Success?!Array.isArray(e.Messages)||e.Messages.length<1||!e.Messages[0].length?Promise.reject("Action did not return expected response"):e.Messages[0]:Promise.reject("Action returned non-success status")})},addResourcesToCart:function(e){e={resources:e.map(function(e){return{Id:e.id,Type:e.typeId}})};return n.ajax({type:"POST",url:"/Store/AddProductsToCartAjax/addtocartbutton",data:e,cache:!1}).promise().then(function(e){return e.Success?!Array.isArray(e.Messages)||e.Messages.length<1||!e.Messages[0].length?Promise.reject("Action did not return expected response"):e.Messages[0]:Promise.reject("Action returned non-success status")})},getResourceIdsAlreadyInCart:function(){return n.ajax({type:"POST",url:"/Store/GetArticleResourcesInCartAjax/addtocartbutton",cache:!1}).promise().then(function(e){return e.Success?Array.isArray(e.Messages)&&e.Messages.length?e.Messages[0].split(",").map(function(e){return parseInt(e)}).filter(function(e){return!isNaN(e)}):Promise.reject("Action did not return expected response"):Promise.reject("Action return non-success status")})}}}(jQuery),Theme=Theme||{},Theme.Store=function(M){var o,s,l,c="/store/currency/{currencyCode}";const d={allowedCharacters:new RegExp(M(".js-address-allowed-characters").val()||".*"),zipCodeCharacters:new RegExp(M(".js-address-zip-code-characters").val()||".*")};return{init:function(){var e,t,n,a,i,r;l=M(".register-content-wrap"),o=M(".js-cart-view"),s=M(".js-order-summary"),(o.length||s.length||l.length)&&(o.find(".js-currency-selector").on("change",function(e){e=M(e.currentTarget).val();M(".js-item-quantity").length?f(c.replace("{currencyCode}",e)):e&&(window.location.href=c.replace("{currencyCode}",e))}),s.find(".js-vat-country-select").on("change",function(e){e=M(e.currentTarget).val();Theme.Store.DataService.updateVatCountry(e).then(function(e){var t=s.find(".js-vat-number-wrap");e&&e.ShowVatNumber?t.removeClass("hidden"):t.addClass("hidden")}).catch(function(e){console.error("Failed to update VAT country: "+e),s.find(".js-vat-message").html("Failed to update VAT Country").removeClass("success").addClass("error")})}),s.find(".js-apply-vat-number").on("click",function(){var e,t,n=s.find(".js-vat-number").val().trim();n&&(e=s.find(".js-vat-message"),t=M(".js-tax-estimate"),Theme.Store.DataService.updateVatNumber(n).then(function(){e.html("VAT Number validated").removeClass("error").addClass("success"),t.length&&t.html("0.00")}).catch(function(e){console.error("Failed to update VAT number: "+e),s.find(".js-vat-message").html("Failed to validate VAT Number").removeClass("success").addClass("error")}))}),M(".js-cart-proceed").on("click",p),M("#checkSaveMessage").on("click",j),M("#checkSaveMessages").on("click",m),M(".js-cart-saveaddress").on("click",g),M(".js-limit").on("input",function(){var e,t;e=this,t=document.getElementById(e.id+"Message"),e.value.length>=e.maxLength?t.classList.remove("hide"):t.classList.add("hide")}),M(".js-validate-address-characters").val()&&M(".js-validate-characters").on("input",function(){var e,t,n;n=M(e=this).data("validation-pattern"),(n=d[n])&&(t=M("#"+M(e).attr("id")+"CharacterValidationMessage"),n.test(M(e).val())?t.addClass("hide"):t.removeClass("hide"))}),l.on("change","#BillingCountryList",function(){var e,t,n,a;u(),e=M(".register-content-wrap"),t=e.find("#BillingCountryList").val(),n=e.find("#BillingStateList"),a=M("label[for='BillingStateList']"),n.empty().prop("disabled",!0),void 0!==t&&t.length&&(e={countryId:t},SCM.Ajax.post("/Store/GetCountryStates/GetStates",e).expectJson().then(function(e){n.append(M('<option value="">--Please Select--</option>')),M.each(e,function(e,t){n.append(M(`<option value="${t.StateId}">${t.StateName}</option>`))}),0===e.length?(a.hide(),n.hide()):(a.show(),n.show()),n.prop("disabled",!1)}).catch(console.error))}),l.on("change","#ShippingCountryList",function(){h(),v()}),M(".cartview-item").each(function(){var n=M(this);M(n).find("#add_one").on("click",function(){var e=M(n).find(".input-number"),t=M(e).val();t<M(e).data("maxvalue")&&C(n,++t)}),M(n).find("#minus_one").on("click",function(){var e=M(n).find(".input-number"),t=M(e).val();M(e).data("minvalue")<t&&C(n,--t)})}),M(".js-item-quantity").on("change",function(){var e=M(this).val(),t=M(this).closest(".cartview-item"),n=M(this).data("minvalue"),a=M(this).data("maxvalue");e<n?(M(this).val(n),C(t,n)):a<e?(M(this).val(a),C(t,a)):C(t,e)}),M(".js-apply-promo-code").on("click",function(e){var e=`/store/${M(e.currentTarget).hasClass("js-remove-code")?"RemoveDiscountCode":"AddDiscountCode"}/Ajax`,t=M(".js-promo-code").val();t.length&&SCM.Ajax.post(e,{discountCode:t}).expectJson().then(function(e){void 0!==e.Messages&&e.Messages.length?M(".promo-wrap").find(".js-error-message").html(e.Messages[0]).show():M(".js-quantityEditable").length?f(window.location):window.location.reload()}).catch(function(e){console.error("Failed to update discount code: "+e)})}),e=M("#ShippingStateList"),t=M("#ShippingStateList option"),n=M("#BillingStateList"),a=M("#BillingStateList option"),i=M("label[for='ShippingStateList']"),r=M("label[for='BillingStateList']"),e.length&&!t.length?(i.hide(),e.hide()):e.length&&(i.show(),e.show()),n.length&&!a.length?(r.hide(),n.hide()):n.length&&(r.show(),n.show()),M("#BillingCountryList").length&&u(),M("#ShippingCountryList").length)&&h()}};function u(){var e=M(".register-content-wrap").find("#BillingCountryList").find(":selected").data("countrycode");"US"==e?(M(".js-billingzipcoderequired").removeClass("hide"),M(".js-billingstaterequired").removeClass("hide")):"GB"==e?M(".js-billingzipcoderequired").removeClass("hide"):(M(".js-billingzipcoderequired").addClass("hide"),M(".js-billingstaterequired").addClass("hide"))}function h(){var e=M(".register-content-wrap").find("#ShippingCountryList").find(":selected").data("countrycode");"US"==e?(M(".js-shippingzipcoderequired").removeClass("hide"),M(".js-shippingstaterequired").removeClass("hide")):"GB"==e?M(".js-shippingzipcoderequired").removeClass("hide"):(M(".js-shippingzipcoderequired").addClass("hide"),M(".js-shippingstaterequired").addClass("hide"))}function p(){var e=M(".js-cart-proceed"),e=(e.hasClass("js-quantityEditable"),e.data("destination"));!M("#checkProceedMessage").is(":visible")||M("#checkProceedMessage").is(":checked")?f(e):M(".errorMessage").removeClass("hide")}function f(e){var t,n,a,i={};M(".input-number").each(function(){var e,t=M(this).val();t!=M(this).data("initvalue")&&(e=M(this).data("itemid"),i[e]=t)}),Object.keys(i).length?SCM.Ajax.post("/store/UpdateQuantityInCart/Ajax",{cartItemQuantityLookup:i}).expectActionResultModel().ensureSuccess().then(function(){window.location=e}).catch(function(e){console.error("Failed to upate quanitity in cart: "+e)}):(SCM.GoogleTagManagerDataLayerEvents&&(t=M(".js-cart-view"),n=M(".cartview-item"),t.length)&&n.length&&(a={Currency:t.data("currency"),TotalPrice:t.data("totalPrice"),Tax:t.data("tax"),Items:[]},M(n).each(function(){var e={ProductName:this.dataset.productName,ProductDescription:this.dataset.productDescription,Price:this.dataset.price,ProductId:this.dataset.productid,Terms:this.dataset.terms};a.Items.push(e)}),SCM.GoogleTagManagerDataLayerEvents.logECommerceProceedEvent(e,a)),window.location=e)}function j(){M("#checkSaveMessages").is(":checked")&&M(".shippingAddress").hide(),M(".js-cart-saveaddress").removeClass("disabled"),M("#checkSaveMessages").prop("checked",!1)}function m(){v(),M("#checkSaveMessage").prop("checked",!1),M(".shippingAddress").show(),M(".js-cart-saveaddress").removeClass("disabled")}function g(){var t=M(".register-content-wrap");let e=!1;M("#checkSaveMessage").is(":checked")&&(j(),e=!0),t.find(".error-message").html().hide,t.find(".error-message").addClass("hide");var n=t.find("#BillingAddress").val(),a=t.find("#BillingAddress2").val(),i=t.find("#BillingAddress3").val(),r=t.find("#BillingCity").val(),o=t.find("#BillingStateList").val()||"",s=t.find("#BillingCountryList").val(),l=t.find("#BillingZipCode").val(),c=t.find("#BillingCountryList").find(":selected").attr("data-countrycode"),d=e?n:t.find("#ShippingAddress").val(),u=e?a:t.find("#ShippingAddress2").val(),h=e?i:t.find("#ShippingAddress3").val(),p=e?r:t.find("#ShippingCity").val(),f=e?o:t.find("#ShippingStateList").val()||"",m=e?s:t.find("#ShippingCountryList").val(),g=e?l:t.find("#Shippingzip").val(),v=e?c:t.find("#ShippingCountryList").find(":selected").attr("data-countrycode"),C=t.find("#PhoneNumber").val()||"",y=t.find("#FirstName").val(),b=t.find("#LastName").val(),w=t.find("#Email").val(),S=t.find("#Affiliation").val(),k=t.find("#MarketingOptIn").is(":checked");SCM.Ajax.post("/Store/CartAddOrUpdateUserProfileAddressModel/updateAddress",{ShippingAddress:d,ShippingAddress2:u,ShippingAddress3:h,ShippingCity:p,ShippingStateId:f,ShippingCountryId:m,ShippingZipCode:g,ShippingCountryCode:v,BillingAddress:n,BillingAddress2:a,BillingAddress3:i,BillingCity:r,BillingStateId:o,BillingCountryId:s,BillingZipCode:l,BillingCountryCode:c,PhoneNumber:C,FirstName:y,LastName:b,Email:w,Affiliation:S,ReceivesMarketingAlerts:k}).expectActionResultModel().ensureSuccess().then(function(){t.find(".js-cart-proceed").toggleClass("hide"),M(".js-cart-saveaddress").removeClass("proceed-btn").addClass("btn-inv")}).catch(function(e){var n,e=e.actionResultModel;void 0!==e.Messages&&e.Messages.length&&(n=M("<ul></ul>"),M.each(e.Messages,function(e,t){n.append(`<li>${t}</li>`)}),(e=t.find(".error-message")).html(n).show(),e.removeClass("hide"),e=t.find(".js-cart-proceed"))&&!e.hasClass("hide")&&e.addClass("hide")})}function v(e){var t,n=M(".register-content-wrap"),a=n.find("#ShippingCountryList").val(),i=n.find("#ShippingStateList"),r=M("label[for='ShippingStateList']");i.empty().prop("disable",!0),void 0!==e&&0<e?t={countryId:e}:void 0!==a&&a.length&&(t={countryId:a}),SCM.Ajax.post("/Store/GetCountryStates/GetStates",t).expectJson().then(function(e){i.append(M('<option value="">--Please Select--</option>')),M.each(e,function(e,t){i.append(M(`<option value="${t.StateId}">${t.StateName}</option>`))}),0===e.length?(r.hide(),i.hide()):(r.show(),i.show()),i.prop("disabled",!1)}).catch(console.error)}function C(e,t){M(e).find(".input-number").val(t);var n,a,i=M(e).find(".cartview-item-value-price-per").text(),r=M(e).find(".cartview-item-discount-amount-per").attr("data-originalDiscount"),o=M(e).find(".cartview-item-shipping-amount-per").text(),i=t*i;M(e).find(".cartview-item-price-total").text(i.toFixed(2)),0<r&&(i=t*r,M(e).find(".cartview-item-discount-amount-per").text(i.toFixed(2)),(r=M(".cartview-discount")).length)&&(n=0,M(".cartview-item-discount-amount-per").each(function(){var e=M(this).text();n+=parseFloat(e)}),M(r).find(".cartview-item-price-total").text("-"+n.toFixed(2))),0<o&&(i=o*t,M(e).find(".cartview-item-shipping-amount-total").text(i.toFixed(2))),r=M(".js-subtotal-amount"),a=0,M(".cartview-item").each(function(){var e=M(this).find(".cartview-item-price-total").text();a=parseFloat(a)+parseFloat(e)}),r.text(a.toFixed(2));{var s=M(".js-shipping-amount");const l=function(){var t=0;return M(".cartview-item").each(function(){var e=M(this).find(".cartview-item-shipping-amount-total").text();t=parseFloat(t)+parseFloat(e)}),t}(),c=M(".subtotal-maxshippinglimit");Theme.Store.DataService.getMaxShippingAmount().then(function(e){l>e?(s.text(e),c.removeClass("hide").addClass("show")):(s.text(l.toFixed(2)),c.removeClass("show").addClass("hide"))}).catch(function(e){s.text(newTotal.toFixed(2)),c.removeClass("show").addClass("hide")})}}}(jQuery),Theme.Store.DataService=function(t){return{updateVatCountry:function(e){return t.post("/store/UpdateCartVatCountry/Ajax",{countryCode:e}).promise().then(n)},updateVatNumber:function(e){return t.post("/store/UpdateVatNumber/Ajax",{vatNumber:e}).promise().then(function(e){return!(!(e=e)||!e.Success)||(e=e&&e.Messages&&e.Messages.length&&e.Messages[0].length?e.Messages[0]:"An unknown error occurred",Promise.reject(e))})},getMaxShippingAmount:function(){return t.post("/store/GetShippingAmount/Ajax").promise().then(n)}};function n(e){return e&&e.Success?e.Data:(e=e&&e.Messages&&e.Messages.length&&e.Messages[0].length?e.Messages[0]:"An unknown error occurred",Promise.reject(e))}}(jQuery),Theme||{}),SCM=(Theme.MultiQuerySelectableContentList=function(t){var n,a;return{init:function(){{var e;t(".widget-MultiQuerySelectableContentList").length&&(e=t(".js-special-collection-query"),n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),"[a-zA-Z]$"),a=e.data("query"),SCM.Pagination.enableBrowserHistoryNavigation())}},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n);var t={type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Solr/PaginatedMultiQuerySelectableContentList/"+e.data("parent-instance"),cache:!1,data:{multiQuery:a,pageNumber:e.data("clicked-page")}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery),SCM||{}),SCM=(SCM.Ajax=function(f){var e={get:function(e,t){return new a(e,"GET",t)},post:function(e,t){return new a(e,"POST",t)},ajax:function(e,t,n){return new a(e,t,n)},_objectToFormData:n,_formatPostData:C};var m={Text:"text",Html:"html",Json:"json",Xml:"xml",ActionResultModel:{Full:"actionResultModelFull",FullEnsureSuccess:"actionResultModelFullEnsureSuccess",Success:"actionResultModelSuccess",Html:"actionResultModelHtml",RedirectUrl:"actionResultModelRedirectUrl",ReturnId:"actionResultModelReturnId",Data:"actionResultModelData"},BlobResult:"blob"},i={Default:"Default",Json:"application/json; charset=utf-8",UrlEncoded:"application/x-www-form-urlencoded"};function a(e,t,n,a){this._url=e,this._method=t||"GET",this._data=n,this._dataType=a||m.Text,this._internalPromise=null,this._requestContentType=i.Default,this._abortableRequestHandle=null}function t(e){this._ajaxResult=e,this._expectedComponent=m.ActionResultModel.Full,this._internalPromise=null}function g(e,t,n){e=new Error(e);return e.name="AjaxError",e.userFriendlyMessage=t,e.actionResultModel=n,Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,g),e}function r(e,t,n,a,i){var r,o,s,l,c,d,u,h,p;if("function"==typeof window.fetch)return r=e,o=t,u=n,s=a,l=i,c=new AbortController,"GET"===o&&u&&(r=function(e,t){"object"==typeof t&&(t=function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")}(t));t&&t.length&&["?","&"].includes(t[0])&&(t=t.substring(1));return e.includes("?")?e+"&"+t:e+"?"+t}(r,u),u=void 0),(o={method:o,body:C(u,l),signal:c.signal}).headers=function(e,t){var n={};!function(e){var t=window.location.origin,e=new URL(e,t).origin;return t===e}(e)||(n["X-Requested-With"]="XMLHttpRequest",n["X-Requested-With-Lies"]="Not actually XMLHttpRequest, but Fetch API via SCM.Ajax; X-Requested-With is set for server-side backwards compatibility");v(t)&&(n["Content-Type"]=t);return n}(r,l),{promise:fetch(r,o).then(function(t){var e,n;if(t.ok)return s===m.Json?t.json():s===m.BlobResult?(e=t.headers.get("Content-Disposition"),n=e?e.split("filename=")[1].replace(/"/g,""):"unknownFileName",t.blob().then(e=>({blob:e,fileName:n,message:t.statusText}))):t.text();throw new g("Bad response from server: "+t.status+": "+t.statusText,"Bad response from server")}).catch(function(e){throw new g("Request failed: "+e,"Request failed")}),abortableRequestHandle:c};if("function"==typeof f&&f()&&f().jquery)return u=i,p={url:e,method:t,type:t,data:n,dataType:d=a},function(e){return e instanceof FormData&&Array.from(e).filter(function(e){return 1<e.length&&e[1]instanceof File}).length}(n)&&(p.contentType=!1,p.processData=!1),v(u)&&(p.contentType=u),{promise:new Promise(function(t,a){h=f.ajax(p).done(function(e){t(e)}).fail(function(e,t,n){a(new g("parsererror"===t?"Failed to parse response as "+d:n,"Request failed"))})}),abortableRequestHandle:h};throw new Error("No supported AJAX implementations found.")}function n(e){var t;if(e)return e instanceof FormData||"object"!=typeof e?e:(function n(a,i,r){a=a||new FormData;if(Array.isArray(i))for(var e=0;e<i.length;e++){var t=r+"["+e+"]";n(a,i[e],t)}else s(i)?a.append(r,i.toISOString()):!o(i)||l(i)||c(i)?null!=i&&a.append(r,i):Object.keys(i).forEach(function(e){var t=r?r+"["+e+"]":e;n(a,i[e],t)})}(t=new FormData,e),t)}function o(e){return e===Object(e)}function s(e){return e instanceof Date}function l(e){return e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.slice}function c(e){return l(e)&&"string"==typeof e.name&&("object"==typeof e.lastModifiedDate||"number"==typeof e.lastModified)}function v(e){return e&&e===i.Json}function C(e,t){switch(t){case i.UrlEncoded:return new URLSearchParams(e);case i.Json:return JSON.stringify(e);default:return n(e)}}function d(e,t){var e=e.then(function(e){if(e&&void 0!==e.Success)return e;throw new g("Response does not appear to be an ActionResultModel","Unexpected response from server")});return t===m.ActionResultModel.Full||(e=e.then(function(e){var t,n;if(e.Success)return e;throw t="Unspecified error",(n=e)&&n.Messages&&n.Messages.length?t=e.Messages[0]:(n=e)&&n.ValidationErrors&&n.ValidationErrors.length&&n.ValidationErrors[0].Errors&&n.ValidationErrors[0].Errors.length?t=e.ValidationErrors[0].Errors[0]:e.Html&&(t=e.Html),new g(t,"Request was not successful",e)}),t===m.ActionResultModel.FullEnsureSuccess)?e:t===m.ActionResultModel.Success?e.then(function(){return!0}):t===m.ActionResultModel.Html?e.then(function(e){if("string"!=typeof e.Html)throw new g("No HTML was provided in the response","Unexpected response from server",e);return e.Html}):t===m.ActionResultModel.RedirectUrl?e.then(function(e){if("string"!=typeof e.RedirectUrl)throw new g("No RedirectUrl was provided in the response","Unexpected response from server",e);return e.RedirectUrl}):t===m.ActionResultModel.ReturnId?e.then(function(e){if("string"!=typeof e.ReturnId)throw new g("No ReturnId was provided in the response","Unexpected response from server",e);return e.ReturnId}):t===m.ActionResultModel.Data?e.then(function(e){if(void 0===e.Data||null===e.Data||"object"!=typeof e.Data)throw new g("No Data object was provided in the response","Unexpected response from server",e);return e.Data}):e}return a.prototype.then=function(e,t){var n;return this._internalPromise||(n=r(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=n.promise,this._abortableRequestHandle=n.abortableRequestHandle),this._internalPromise=this._internalPromise.then(e,t),this},a.prototype.catch=function(e){var t;return this._internalPromise||(t=r(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=t.promise,this._abortableRequestHandle=t.abortableRequestHandle),this._internalPromise=this._internalPromise.catch(e),this},a.prototype.finally=function(e){var t;return this._internalPromise||(t=r(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=t.promise,this._abortableRequestHandle=t.abortableRequestHandle),this._internalPromise=this._internalPromise.finally(e),this},a.prototype.sendAsJson=function(){return this._requestContentType=i.Json,this},a.prototype.sendAsUrlEncoded=function(){return this._requestContentType=i.UrlEncoded,this},a.prototype.abort=function(){var e;return(e=this._abortableRequestHandle)&&e.abort&&e.abort(),this},a.prototype.expectJson=function(){return this._dataType=m.Json,this.then(function(e){return e})},a.prototype.expectHtml=function(){return this._dataType=m.Html,this.then(function(e){return e})},a.prototype.expectText=function(){return this._dataType=m.Text,this.then(function(e){return e})},a.prototype.expectXml=function(){return this._dataType=m.Xml,this.then(function(e){return e})},a.prototype.expect=function(t,n){return"function"==typeof t&&(n=t,t=null),this.then(function(e){if(n(e))return e;throw new g(t||"Unexpected result from server")})},a.prototype.expectBlob=function(){return this._dataType=m.BlobResult,this.then(function(e){return e})},a.prototype.expectActionResultModel=function(){return this._dataType=m.Json,new t(this)},t.prototype.then=function(e,t){return this._internalPromise=(this._internalPromise||d(this._ajaxResult,this._expectedComponent)).then(e,t),this},t.prototype.catch=function(e){return this.intrnalPromise=(this._internalPromise||d(this._ajaxResult,this._expectedComponent)).catch(e),this},t.prototype.finally=function(e){return this._internalPromise=(this._internalPromise||d(this._ajaxResult,this._expectedComponent)).finally(e),this},t.prototype.ensureSuccess=function(){return this._expectedComponent=m.ActionResultModel.FullEnsureSuccess,this},t.prototype.expectSuccess=function(){return this._expectedComponent=m.ActionResultModel.Success,this},t.prototype.expectHtml=function(){return this._expectedComponent=m.ActionResultModel.Html,this},t.prototype.expectRedirectUrl=function(){return this._expectedComponent=m.ActionResultModel.RedirectUrl,this},t.prototype.expectReturnId=function(){return this._expectedComponent=m.ActionResultModel.ReturnId,this},t.prototype.expectData=function(){return this._expectedComponent=m.ActionResultModel.Data,this},t.prototype.abort=function(){return this._ajaxResult&&this._ajaxResult.abort(),this},g.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(g,Error):g.__proto__=Error,e}(window.jQuery||{}),"object"==typeof module&&module.exports&&(module.exports=SCM.Ajax),SCM||{}),SCM=(SCM.Retry=function(){var e={policy:function(){return new t},wait:function(e){return(new t).handleResult(function(){return!0}).waitAndRetry(1,e).execute(function(){}).catch(function(){})}};var a=function(e){return 50};function t(){this._exceptionPredicates=[],this._resultPredicates=[],this._retryCount=0,this._onRetry=null,this._waitTimeCalculator=a}function p(e){e=new Error(e);return e.name="RetryError",Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,p),e}return t.prototype.handleException=function(e){if(void 0===e)this._exceptionPredicates.push(function(){return!0});else{if("function"!=typeof e)throw new p("exceptionPredicate must be a function");this._exceptionPredicates.push(e)}return this},t.prototype.handleResult=function(e){if("function"!=typeof e)throw new p("resultPredicate must be a function");return this._resultPredicates.push(e),this},t.prototype.untilResultIs=function(t){return this._resultPredicates.push(function(e){return e!=t}),this},t.prototype.retry=function(e,t){return"function"==typeof(e=void 0===e?1:e)&&(t=e,e=1),this._retryCount=e,"function"==typeof t&&(this._onRetry=t),this},t.prototype.waitAndRetry=function(e,t,n){if("number"!=typeof e)throw new p("retryCount must be specified as an integer");return this._retryCount=e,void 0!==t&&(this._waitTimeCalculator=function(t,e){if("number"==typeof t)return function(e){return t};if(Array.isArray(t)&&t.length===e){if(t.length!==e)throw new p("Wait time array length must match retryCount");return function(e){return t[e-1]}}return"function"!=typeof t?a:t}(t,e)),"function"==typeof n&&(this._onRetry=n),this},t.prototype.execute=function(s){var l=this._resultPredicates,c=this._exceptionPredicates,d=this._onRetry,u=this._waitTimeCalculator,h=this._retryCount;return new Promise(function(e,n){var a=0;function i(){try{var e=s();(t=e)&&"function"==typeof t.then&&"function"==typeof t.catch?e.then(function(e){r(e)}).catch(function(e){o(e)}):r(e)}catch(e){o(e)}var t}function r(t){l.some(function(e){return e(t)})?a<h?(a++,"function"==typeof d&&d(t,a),setTimeout(i,u(a))):n(new p("retryCount exceeded")):e(t)}function o(t){a<h&&c.some(function(e){return e(t)})?(a++,"function"==typeof d&&d(t,a),setTimeout(i,u(a))):n(t)}i()})},p.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(p,Error):p.__proto__=Error,e}(),SCM.wait=SCM.wait||SCM.Retry.wait,"object"==typeof module&&module.exports&&(module.exports=SCM.Retry),SCM||{}),Theme=(SCM.SubjectBrowse=function(t){return{init:function(){t("body").hasClass("pg_Index")&&t("#main").on("click",".js-expand-children-subjects",function(){var e=t(this).closest(".parent-subject");e.hasClass("collapsed")?e.removeClass("collapsed"):e.addClass("collapsed")})}}}(jQuery),SCM=SCM||{},SCM.SharedWidgets=SCM.SharedWidgets||{},!function(e){e.init=function(){SCM.SharedWidgets.UserPersonalization.AddToLocalStorage(".SCM-SharedWidgets-LocalStorage-UserAffinityTracking","data-values")}}(SCM.PersonalizedContent=SCM.PersonalizedContent||{},jQuery),Theme||{}),Theme=(SCM.Utilities=SCM.Utilities||{},Theme.ArticleAbstract=function(s){return{init:function(){s(".master-main").on("click",".js-show-abstract",e)}};function e(e){var t=s(e.currentTarget),e=t.data("articleid"),n="True"===t.data("is-lay-abstract"),a=(r=e,s(n?".js-layabstract#abstract-"+r:"#abstract-"+r)),i=s(`#abstract-${e}-links`),r="True"===t.data("tried-to-fetch-abstract"),o=function(e,t){var n="",a=function(){var e=s("#hfSiteURL");return e.length?e.val():null}();a&&(n+="//"+a);t?n+="/PlatformArticle/ArticleLayAbstractAjax":"extract"===e.data("abstract-type")?n+="/PlatformArticle/ArticleAbstractOrExtractAjax":n+="/PlatformArticle/ArticleAbstractAjax";return n}(t,n),n={articleId:e,layAbstract:n};a.closest(".js-abstract-parent").toggleClass("abstractExpanded"),r||SCM.Ajax.get(o,n).expectActionResultModel().then(function(e){a.html(e.Html),a.append(i.html()),s(".js-tabs").parents(".js-abstract-response-placeholder").addClass("removePad"),s(document).on("click",".js-abstract-tab-link",function(e){var e=s(e.target),t=e.closest(".js-abstract-response-placeholder"),e=e.closest(".js-abstract-tab-link-wrap"),n=t.find(".js-tabs-content .js-abstract-tab-content-wrap"),a=e.index();e=e,t.find(".js-abstract-tab-link-wrap").removeClass("is-active"),e.addClass("is-active"),t=a,(e=n).removeClass("is-active"),e.eq(t).addClass("is-active")}),SCM.Utilities.Brightcove&&SCM.Utilities.Brightcove.init&&SCM.Utilities.Brightcove.init(),Theme.Utilities&&Theme.Utilities.Cadmore&&Theme.Utilities.Cadmore.loadCadmoreVideos&&Theme.Utilities.Cadmore.loadCadmoreVideos(a,e.Data),SCM.SiteJS.abstractMathJax()}).catch(console.error).finally(function(){t.data("tried-to-fetch-abstract","True")}),a.toggleClass("hide"),a.hasClass("hide")?a.attr("aria-hidden","true"):a.attr("aria-hidden","false"),r=t.find(".js-abstract-toggle-icon"),o=r.data("icon-class"),n=o+"-down",o+="-up",r.toggleClass(n),r.toggleClass(o),a.hasClass("hide")||window.digitalData&&SCM.AdobeAnalytics.sendAdobeAnalyticsProductData(e),t.attr("aria-expanded","false"===t.attr("aria-expanded")?"true":"false")}}(jQuery),Theme||{}),Theme=(Theme.ChapterAbstract=function(p){return{init:function(){p(".master-main").on("click",".js-showChapterAbstractLink",function(e){let t=p(e.currentTarget);var e=t.closest("div[data-chapter-abstract-to-be-fetched-wrapper]"),n=e.attr("data-chapterid-for-abstract"),a=e.attr("data-bookid-for-abstract");let i=e.children("div[data-tried-to-fetch-abstract]").first();var r="true"===i.attr("data-tried-to-fetch-abstract");let o=p("#abstract-"+n);var s=p("#hfSiteURL");let l=p(`#abstract-${n}-links`),c={chapterId:n,bookId:a},d="extract"==t.parent().attr("data-link-chapter-abstract-type")?"/PlatformBook/ChapterAbstractOrExtractAjax":"/PlatformBook/ChapterAbstractAjax";n=e.find(".abstract-toggle-icon"),a=n.attr("data-icon-class"),e=a+"-down",a+="-up";function u(e){o.html(e.Html),o.append(l.html())}function h(){i.attr("data-tried-to-fetch-abstract","true")}s&&s.val()&&(d="//"+s.val()+d),o.closest("li").toggleClass("abstractExpanded"),r||SCM.Ajax.get(d,c).expectActionResultModel().ensureSuccess().then(u).then(h).catch(console.error),o.toggleClass("hide"),n.toggleClass(e),n.toggleClass(a),t.attr("aria-expanded","false"===t.attr("aria-expanded")?"true":"false")})}}}(jQuery),Theme||{}),Theme=(Theme.Alerts=function(i){var r;return{init:function(){r=i(".userAlertSignUpModal"),i("body").on("click",".userAlert .js-open-alert-modal",function(e){var n,t,a=i(e.currentTarget);e.preventDefault(),SCM.SiteJS.isLoggedIn(a)?o(a)?window.location=s(a):(n=a,e=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AlertsSignUp/AlertsSignUpPopup",t={alertType:n.data("alertType"),resourceId:n.data("alertResourceId"),resourceType:n.data("alertResourceType"),email:n.data("alertUserEmail"),resourceName:n.data("alertResourceName"),siteId:n.data("siteId")},i(".userAlertSignUp").html("<h3>Loading...</h3>"),SCM.Ajax.get(e,t).expectHtml().then(function(e){var t="true"===r.data("bypassConfirmation").toLowerCase();i(e).filter(".addUserAlert").length&&t?l(n,!1):(i(".userAlertSignUp").html(e),Theme.Alerts.lastActiveElement=document.activeElement,r.attr("aria-hidden","false"),SCM.Utilities.Reveal.open(r),SCM.Focus.trap(r),i(".addUserAlert").on("click",function(){var e=!!i(this).data("hasmultipleschedules");l(n,e)}))}).catch(console.error)):(e=SCM.SiteJS.getDefaultReturnUrl(),e=o(a)?s(a):function(e,t){e=e.data("alertType");e&&(t=t+"#triggerAlertType="+e);return t}(a,e),window.location="/sign-in?returnUrl="+encodeURIComponent(e))}),i("body").on("click",".js-contextual-alert-signup",function(){var e,t;SCM.SiteJS.isLoggedIn()?(e=App.CurrentSubdomain,SCM.Ajax.get(`/${e}/my-account/contextual-alerts-modal/MyContextualAlerts`).expectHtml().then(function(e){SCM.Modals.showModal(e),App.MyAlerts.Init()})):(e=SCM.SiteJS.getDefaultReturnUrl(),t=e,e=t+="#triggerContextualAlerts=true",window.location="/sign-in?returnUrl="+encodeURIComponent(e))}),r.on("click keydown",".js-close-modal",function(e){"click"!==e.type&&("keydown"!==e.type||"Enter"!==e.key&&"Space"!==e.key)||(e.preventDefault(),t())}),i(document).on("keyup",function(e){"Escape"===e.key&&r.hasClass("open")&&t()})},triggerAlertModalOnRedirect:function(){var e=SCM.JSUtility.getParamFromHash("triggerAlertType");e&&(i(`.userAlert a[data-user-logged-in="True"][data-alert-type="${e}"]`).trigger("click"),SCM.JSUtility.removeParamFromHash("triggerAlertType"))},triggerContextualAlertModalOnRedirect:function(){var e=SCM.JSUtility.getParamFromHash("triggerContextualAlerts");e&&(i(".js-contextual-alert-signup").trigger("click"),SCM.JSUtility.removeParamFromHash("triggerContextualAlerts"))}};function t(){r.attr("aria-hidden","true"),SCM.Utilities.Reveal.close(r),SCM.Focus.release(r),Theme.Alerts.lastActiveElement&&(Theme.Alerts.lastActiveElement.focus(),Theme.Alerts.lastActiveElement=null)}function o(e){return e.parent().hasClass("alertType-MarketingLink")}function s(e){return e.data("additionalUrl")}function l(e,t){e=function(e,t){var n={};n.alertType=e.data("alertType"),n.resourceId=e.data("alertResourceId"),n.resourceType=e.data("alertResourceType"),n.email=e.data("alertUserEmail"),n.resourceName=e.data("alertResourceName"),n.siteId=e.data("siteId"),e.data("scheduleId")&&(n.scheduleId=e.data("scheduleId"));t&&(n.scheduleId=i(".js-new-useralert-select").val());return n}(e,t);t=function(e,t){let n;n=t.alertType&&27===t.alertType?"AddAlertsSignUpWithoutResource":e||t.scheduleId?"AddAlertsSignUpWithSchedule":"AddAlertsSignUp";return`/Toolbox/${n}/AddAlertsSignUpPopup`}(t,e),t=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+t,SCM.Ajax.get(t,e).expectHtml().then(function(e){i(".userAlertSignUp").html(e),Theme.Alerts.lastActiveElement=document.activeElement,r.attr("aria-hidden","false"),SCM.Utilities.Reveal.open(r),SCM.Focus.trap(r),SCM.GoogleTagManagerDataLayerEvents&&SCM.GoogleTagManagerDataLayerEvents.logJournalAlertSubscribe("sidebar")}).catch(console.error)}}(jQuery),"object"==typeof module&&module.exports&&(module.exports=Theme.Alerts),Theme||{}),Theme=(Theme.BookToc=function(e){var t=e("ul.bookToc li.expandable");return{init:function(){t&&t.length&&e(".js-toc-expand-collapse").addClass("enabled"),e(".toc-expand-collapse .js-show-all").on("click",function(){t.not(".expanded").addClass("expanded")}),e(".toc-expand-collapse .js-hide-all").on("click",function(){t.removeClass("expanded")})}}}(jQuery),"object"==typeof module&&module.exports&&(module.exports=Theme.BookToc),Theme||{}),Theme=(Theme.BookSectionEditors=function(t){return{init:function(){t(".book-info__section-editors").length&&t("#js-section-editors-dropdown").click(function(){t("#js-section-editors-dropdown-content").toggle(600,function(){var e=t("#section-editors-arrow");t("#js-section-editors-dropdown-content").is(":visible")?e.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-up"):e.removeClass("icon-general-arrow-filled-up").addClass("icon-general-arrow-filled-down")})})}}}(jQuery),Theme||{}),Theme=(Theme.ConferenceVolumeSelector=function(t){var e;return{init:function(){e=t(".widget-ConferencesBrowseByYear"),e.on("change",".js-volume-browse-select, .js-volume-browse-conference-select",function(e){a(t(e.target).val())}),e.on("change",".js-volume-browse-year-select",function(e){n(t(e.target).val(),!1)}),e.on("change",".js-volume-browse-decade-select",function(e){n(t(e.target).val(),!0)})}};function n(e,t){var n=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/ConferenceVolume/ConferenceVolumeLatestByYear";SCM.Ajax.get(n,{year:e,isDecade:t}).expectActionResultModel().expectRedirectUrl().then(function(e){a(e)}).catch(console.error)}function a(e){window.location=e}}(jQuery),Theme||{}),Theme=(Theme.ContactUsForm=function(f){return{init:function(){f(".widget-contact-us #btnSubmit").on("click",t),f("#Comment").on("keyup",e),e()}};function e(){var e,t,n=f("#Comment"),a=f(".comment-max-length").data("maxLength");n.length&&f("#charRemaining").text((a=a,e=(n=n).val(),t=e.length,a<t?(n.val(e.substring(0,a)),"0"):(a-t).toString()))}function t(e){var t=f(".widget-contact-us"),n=t.find("#FirstName").val(),a=t.find("#LastName").val(),i=t.find("#EmailAddress").val(),r=t.find("#Subject").val(),o=t.find("#IsLibrarian").prop("checked"),s=t.find("#IsMember").prop("checked"),l=t.find("#Reason").val(),c=t.find("#Journal").val(),d=t.find("#Comment").val(),u=t.find("#CustomerNumber").val(),h=t.find("#AccessMethod").val(),p=t.find("#OperatingSystem").val(),t=t.find("#BugDescription").val(),n={FirstName:n,LastName:a,EmailAddress:i,Subject:r,IsLibrarian:o,Reason:l,Journal:c,Comment:d,CaptchaInfo:SCM.Captcha.GetCaptchaInfo(),IsMember:s,CustomerNumber:u,AccessMethod:h,OperatingSystem:p,BugDescription:t};e.preventDefault(),SCM.Ajax.post("/Common/ContactUsForm",n).expectActionResultModel().ensureSuccess().then(m).catch(g)}function m(e){var t=f(".widget-contact-us"),n=t.find(".message-success"),a=f("<div/>"),t=t.find(".widget-contact-us-form");f.each(e.Messages,function(e,t){a.append(t)}),t.addClass("hide"),n.html(a.html())}function g(e){var n,t,e=e.actionResultModel;void 0!==e.Messages&&e.Messages.length&&(t=f(".widget-contact-us"),n=f("<ul></ul>"),t=t.find(".error-message"),f.each(e.Messages,function(e,t){n.append(`<li>${t}</li>`)}),t.html(n.html()))}}(jQuery),Theme||{}),Theme=(Theme.DocumentViewerEpub=function(o){let s,i=[],r=!1,n=!1;return{init:function(e){e.length&&(s=e,o(".js-document-viewer-nextpage").on("click",y),o(".js-document-viewer-previouspage").on("click",b),o(".js-epub-toc").on("click","a",p),s.on("load",function(){var e=function(){var n=[],e={},t=s.contents(),a=s.height(),i=t.find("html").outerHeight(!0),r=Math.ceil(i/a);for(let t=0;t<r;t++){var o=t*a;let e=o+a;t===r-1&&(e=i),n[t]={start:o,end:e}}return e.pageBoundaries=n,e.totalPages=r,e}(),e=(i=e.pageBoundaries,s.attr("data-page-count",e.totalPages),o(this.contentWindow).on("scroll",debounce(t,250)),s.contents().off("click").on("click",'a:not([target="_blank"])',h),s.attr("data-goto"));e.length&&(c(e),s.attr("data-goto","")),r&&(v(l()),r=!1),a()}))}};function t(){n?n=!1:(g(function(e){e=void 0!==e?e:s.contents().scrollTop();let t=1;const n=s.height(),a=e+n/2;e=i.findIndex(e=>a>=e.start&&a<e.end);-1!==e&&(t=e+1);return t}()),a())}function a(){var e=o(".js-epub-spine").find("a"),t=e.first(),e=e.last(),n=o(".js-document-viewer-nextpage"),a=o(".js-document-viewer-previouspage"),i=m(),r=w();i===e.attr("id")&&r===l()?n.addClass("disabled"):n.removeClass("disabled"),i===t.attr("id")&&1===r?a.addClass("disabled"):a.removeClass("disabled")}function l(){return parseInt(s.attr("data-page-count"))}function c(e){var e=e.replace(/([:.\[\],=@!\$^&*()+\?>`~|\{\}\\])/g,"\\$1"),e=e.startsWith("#")?e:"#"+e,t=s.contents(),e=t.find(e);e.length&&(e=e.offset().top,t.scrollTop(e))}function d(e){return o(".js-epub-spine").find(`a[href*="${e}"]`).attr("id")}function u(e){s.attr("data-goto",e)}function h(e){e.preventDefault();var e=o(this),t=e.attr("href"),n=t.split("#"),a=0<n.length?n[0]:"",n=2<=n.length?n[1]:"",a=a&&""!==a?d(a):void 0,i=function(e){if(void 0===e)return!1;{var t=m();return e===t}}(a);i=i,!(t=t).includes(".xhtml")&&!t.includes(".html")||i?n&&c(n):(t=e,i=n,void 0!==(e=a)&&(g(1),f(e)),e=k(t),u(i),s.attr("src",e))}function p(e){e.preventDefault();var t,n,e=o(this),a=o(".js-epub-toc"),i=e.attr("href"),a=(a.find(".active").removeClass("active"),e.addClass("active"),e.prop("hash"));a.length?(void 0!==(n=d((t=i.split("#"))[0]))&&f(n),1<t.length&&u(a)):void 0!==(n=d(i))&&f(n),g(1),S(e)}function f(e){null!=e&&o(".js-epub-spine").attr("data-active-spine-itemid",e)}function m(){return o(".js-epub-spine").attr("data-active-spine-itemid")}function g(e){s.attr("data-current-page",e)}function v(e){var t=e-1,t=i[t];void 0!==t&&(n=!0,s.contents().scrollTop(t.start)),g(e),a()}function C(e,t){var n=o(".js-epub-spine"),a=n.find(`a[id="${e}"]`);r=t,n.data("active-spine-itemid",e),g(1),S(a)}function y(){var e=w()+1;e<=l()?v(e):(e=m(),f(e=0<(e=o(".js-epub-spine").find(`a[id="${e}"]`).next("a")).length?e.attr("id"):null),C(e,!1))}function b(){var e,t=w()-1;t<1?(e=m(),f(e=0<(e=o(".js-epub-spine").find(`a[id="${e}"]`).prev("a")).length?e.attr("id"):null),C(e,!0)):v(t)}function w(){return parseInt(s.attr("data-current-page"))}function S(e){var t=e.first().prop("hash"),t=(void 0!==t&&u(t),k(e));s.attr("src",t)}function k(e){var e=e.attr("href"),t=(t=o("#viewport"),(a={}).multimediaUrl=t.data("multimediaurl"),a.multimediaType=t.data("multimediatype"),a.parentResourceId=t.data("parentresourceid"),a.parentResourceType=t.data("parentresourcetype"),a);let n=o("#viewport").data("instancename");""!==n&&(n="/"+n);var a=new URLSearchParams({parentResourceId:t.parentResourceId,parentResourceType:t.parentResourceType,multimediaType:t.multimediaType,multimediaUrl:t.multimediaUrl,epubSourceFileName:e});return`/DocumentViewer/EpubPage${n}?`+a.toString()}}(jQuery),Theme||{}),Theme=(Theme.DocumentViewerPdf=function(c){let o=1,s=0,a=null;return{init:function(e){var t,n;e.length||(e=c(".js-document-viewer-previouspage"),n=c(".js-document-viewer-nextpage"),t=c(".document"),e.on("click",i),n.on("click",r),t.on("scroll",debounce(u,250)),e=c("#pdfViewer").data("multimedia-type"),n=c("#pdfViewer").data("multimedia-url"),SCM.Ajax.get("/DocumentViewer/GetMultimediaData",{multimediaType:e,multimediaUrl:n}).expectJson().then(function(e){e=l(a=e.Data);pdfjsLib.getDocument({data:e}).promise.then(function(e){s=e.numPages,c("#pdfViewer").attr("data-pdf-total-pages",s),d(e,o)}).catch(function(e){console.error("Error loading PDF:",e)})}).catch(function(e){console.error("Error loading multimedia data:",e)}))}};function i(){var e=c(".js-document-viewer-previouspage");o=parseInt(c("#pdfViewer").attr("data-pdf-current-page")),o--,c("#pdfViewer").attr("data-pdf-current-page",o),n("#pdfPage"+o),e.toggleClass("disabled",o<=1)}function r(){var e=parseInt(c("#pdfViewer").attr("data-pages-loaded"));if((o=parseInt(c("#pdfViewer").attr("data-pdf-current-page")))<e)o++,c("#pdfViewer").attr("data-pdf-current-page",o),n("#pdfPage"+o);else{e=l(a);const t=parseInt(c("#pdfViewer").data("pages-per-load"));o<s&&(o++,pdfjsLib.getDocument({data:e}).promise.then(function(e){s=e.numPages,c("#pdfViewer").attr("data-pdf-total-pages",s),d(e,o),c("#pdfViewer").attr("data-pages-loaded",o+t-1)}).catch(function(e){console.error("Error loading PDF:",e)}).finally(function(){SCM.Retry.policy().handleResult(function(e){return!e}).waitAndRetry(5,500).execute(function(){return c("#pdfPage"+o).length}).then(function(){n("#pdfPage"+o)}).catch(function(){console.error("Timed out waiting for the page to be ready.")})}))}}function l(e){var t=window.atob(e),n=t.length,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=t.charCodeAt(e);return a.buffer}async function d(t,n){var e=parseInt(c("#pdfViewer").data("pages-per-load")),a=Math.min(n+e-1,s),i=c("#pdfViewer"),e=c(".js-document-viewer-previouspage"),r=c(".js-document-viewer-nextpage");for(let e=n;e<=a;e++)await function(a,i,e){return e.getPage(a).then(function(e){var t=e.getViewport({scale:1.5}),n=document.createElement("canvas"),n=(c(n).attr("id","pdfPage"+a),c(n).attr("data-pagenum",a),n.height=t.height,n.width=t.width,i.append(n),n.getContext("2d"));return e.render({canvasContext:n,viewport:t}).promise})}(e,i,t);c("#pdfViewer").attr("data-pdf-current-page",o),e.toggleClass("disabled",1===o),r.toggleClass("disabled",o===s)}function u(){var e=c(".js-document-viewer-previouspage"),t=c(".js-document-viewer-nextpage"),n=function(){var e=c(".document");let o=e.offset().top,s=Math.abs(o+e.height()/2),t=c('canvas[id^="pdfPage"]'),n=0,l;c.each(t,function(e,t){var n,a,i=c(t),r=i.offset().top,i=i.position().top+i.outerHeight();if(r=r,i=i,n=o,a=s,n<r&&r<a||n<i&&a<i)return l=c(t),!1}),l&&(n=parseInt(l.data("pagenum")));return n}();c("#pdfViewer").attr("data-pdf-current-page",n),e.toggleClass("disabled",1===n),t.toggleClass("disabled",n===s)}function n(e){var t=c(".document"),e=c(e).offset().top-t.offset().top+t.scrollTop();t.scrollTop(e)}}(jQuery),Theme||{}),Theme=(Theme.DocumentViewerToolbar=function(n){return{init:function(){var e=n("#epubViewer");Theme.DocumentViewerPdf.init(e),n(".js-open-epub-left-rail, .js-close-epub-left-rail, .epub-toc_wrap a").on("click",function(){var e=n(".btn-epub-open-wrap"),t=n(".btn-epub-close-wrap");n(".document-viewer-left-rail").toggleClass("expanded"),n(".left-rail").toggleClass("hide"),e.toggleClass("hide"),t.toggleClass("hide")}),n(".js-document-viewer-nextpage, .js-document-viewer-previouspage").on("click",function(){var e=n(".btn-epub-open-wrap"),t=n(".btn-epub-close-wrap");n(".document-viewer-left-rail").removeClass("expanded"),n(".left-rail").addClass("hide"),e.removeClass("hide"),t.addClass("hide")}),Theme.DocumentViewerEpub.init(e)}}}(jQuery),Theme||{}),Theme=(Theme.FreshChat=function(e){return{init:function(){var n=e(".js-fresh-chat-input");n.length&&SCM.Retry.policy().handleResult(function(e){return!e}).waitAndRetry(3,500).execute(function(){return window.fcWidget}).then(function(e){var t;(t=n).length&&(t=t.data("fresh-chat-token"),window.fcWidget.init({token:t,host:"https://wchat.freshchat.com"}))}).catch(function(e){console.error("Timed out waiting for FreshChat to be ready.")})}}}(jQuery),Theme||{}),Theme=(Theme.HashHandler=function(r){return{getHashReference:o,scrollToSubSection:function(){var e=o("sectionID-");try{var t,n,a,i=r(e);i.length&&(t=r(".toolbar-wrap"),n=0,t.length&&(t.addClass("toolbar-stuck"),n=t.outerHeight()),a=i.offset().top,r(window).scrollTop(a-n))}catch(e){console.error(e)}}};function o(e){var t=r(location).attr("hash");return t=(t=t.split("?")[0]).replace(e,"")}}(jQuery),Theme||{}),Theme=(Theme.InstitutionSignIn=function(){var t=jQuery(".js-inst-login-form");return{init:function(){t.find(".js-signin-button").on("click",function(){n()}),t.on("keypress",function(e){"Enter"===e.key&&n()})}};function n(){var e=t.find(".js-error"),e=(e.hasClass("hide")||e.addClass("hide"),e.text(""),SCM.Captcha.GetCaptchaResponse(t)),e={username:t.find("input.js-username").val(),password:t.find("input.js-password").val(),recaptchaResponse:e,captchaInstanceName:SCM.Captcha.GetCaptchaInfo().ReCaptchaWidgetControlId};SCM.Ajax.post("/SignIn/LoginInstitutionalUser",e).then(function(e){0<e.length?(t.find(".js-error").text(e).removeClass("hide"),SCM.Captcha.ResetCaptcha(t)):(e=new URLSearchParams(document.location.search).get("returnUrl"))?window.location.assign(decodeURIComponent(e)):window.location.reload()}).catch(console.error)}}(),Theme||{}),Theme=(Theme.Issue=function(o){return{init:function(){o(".section-jump-link .list-toggle, .section-jump-link .mobile-list-toggle").on("click",function(e){e.preventDefault();var e=o(this),t=e.parents(".section-jump-link__link-wrap").siblings("ul.section-jump-link__sublist"),n="icon-general-arrow-filled-right",a="icon-general-arrow-filled-down",i="icon-general_arrow-right",r="icon-general_arrow-down";e.hasClass("list-toggle")&&(e.hasClass(n)?e.removeClass(n).addClass(a):e.removeClass(a).addClass(n)),e.hasClass("mobile-list-toggle")&&(e.hasClass(i)?e.removeClass(i).addClass(r):e.removeClass(r).addClass(i)),"false"===e.attr("aria-expanded")?e.attr("aria-expanded","true"):e.attr("aria-expanded","false"),t.slideToggle(),"false"===t.attr("aria-hidden")?t.attr("aria-hidden","true"):t.attr("aria-hidden","false")}),o(".issue-topic__input").on("keyup",function(){var e=o(this).val(),t=[e.charAt(0).toUpperCase()+e.substr(1),e.toLowerCase()];if(o(".issue-topic__term").hide(),e)for(var n=0;n<t.length;n++)o(`.issue-topic__term:contains('${t[n]}')`).show();else o(".issue-topic__term").show()}),o(".issue-browse-select").on("change",function(){window.location.href=o(this).val()})}}}(jQuery),"object"==typeof module&&module.exports&&(module.exports=Theme.Issue),Theme||{}),Theme=(Theme.MathJax=function(e){return{ajaxInit:function(){e(".abstract-response-placeholder").length&&window.MathJax.typesetPromise([".abstract-response-placeholder"]).catch(e=>console.log(e.message))}}}(jQuery),"object"==typeof module&&module.exports&&(module.exports=Theme.MathJax),Theme||{}),Theme=(Theme.MeetingAbstractIssue=function(l){var c=l("#hfSiteURL").val(),d=0,u=0,h="icon-general_arrow-right",t="."+h,p="icon-general_arrow-down",n="."+p;return{init:function(){u=l("#hdnIssueId").val(),l(document.body).on("click",".js-cat-toggle",function(e){var t=l(e.currentTarget);e.preventDefault(),f(t)}),l(".js-show-all-toggle").on("click",function(e){e.preventDefault(),l(t).length?l(".js-cat-toggle").each(function(){l(this).find(t).length&&f(l(this),!0)}):l(".js-cat-toggle").each(function(){l(this).find(n).length&&f(l(this))})})}};function f(e,t){var n,a,i,r,o=e.siblings(".js-children-category-container"),s=e.find(".js-toggle-icon");s.hasClass(h)?(n=e,i=t,(a=o).children().length||(t=n.data("id"),n=n.data("headingtypeid"),r=`//${c}/IssueVolume/MeetingAbstractIssueChildHeadings`,t={headingId:t,issueId:u,headingTypeId:n},d++,l("body").addClass("wait"),SCM.Ajax.get(r,t).expectHtml().then(function(e){a.html(e),!0===i&&a.find(".js-cat-toggle").each(function(){f(l(this))})}).catch(console.error).finally(m)),o.show(),s.removeClass(h),s.addClass(p)):(e.find(".js-children-category-container").hide(),o.hide(),s.removeClass(p),s.addClass(h))}function m(){--d<=0&&l("body").removeClass("wait")}}(jQuery),Theme||{}),Theme=(Theme.MyInterests=function(r){let t=r("body"),e=r(".manage-interests-modal-noaccess"),n=r(".manage-interests-modal"),o=r("#successMsg"),s=r("#errorMsg");return{init:function(){r(".manage-interests-link").on("click",function(){a(n)}),r(".manage-interests-link-no-access").on("click",function(){a(e)}),r(".js-interests-modal-close").on("click",function(){i(n)}),r(".js-login-modal-close").on("click",function(){i(e)}),r(".js-interest-checkbox").on("click",function(e){var t=r(this),t=r(t.parent(".js-checkbox-label"));t.hasClass("checked")?t.removeClass("checked"):t.addClass("checked")}),r(".js-alert-checkbox").on("click",function(e){var t=r(this),t=r(t.parent(".js-alert-checkbox-label"));t.hasClass("checked")?t.removeClass("checked"):t.addClass("checked")}),r(".js-interest-savebutton").on("click",function(){var e=r(".js-checkbox-label.checked").find("input.js-interest-checkbox"),t=r(".js-alert-checkbox-label.checked").find("input.js-alert-checkbox");let n=[],a=[];var i={categoryIds:n,alertScheduleIds:a};o.addClass("hide"),s.addClass("hide"),e.each(function(e,t){n.push(r(t).data("catid"))}),t.each(function(e,t){a.push(r(t).data("scheduleid"))}),SCM.Ajax.post("/Content/UpdateMyInterest",i).expectActionResultModel().ensureSuccess().then(function(){o.removeClass("hide")}).catch(function(e){console.error(e),s.removeClass("hide")})})}};function a(e){o.addClass("hide"),s.addClass("hide"),t.addClass("on-canvas"),SCM.Utilities.Reveal.open(e),SCM.Focus.trap(e)}function i(e){SCM.Utilities.Reveal.close(e),SCM.Focus.release(e),t.removeClass("on-canvas")}}(jQuery),Theme||{}),Theme=(Theme.MyProfile=function(i){return{init:function(){n(),a()}};function n(){i(".btn-edit-userprofile").on("click",e),i(".btn-edit-useremail").on("click",m)}function a(){i(".btn-userprofile-update").on("click",r),i(".btn-userprofile-cancel").on("click",d),i(".userprofile-countries").on("change",function(){var e=i(this).find(":selected").val(),t=e;t={countryId:e},SCM.Ajax.get("/Content/UserProfileGetStates/myProfileGetStates",t).expectJson().then(h).catch(console.error)}),i("#js-radio-is-licensed-physician, #js-radio-is-not-licensed-physician").on("change",function(){var e=i(this).val(),t=e;t={isLicensedPhysician:e},SCM.Ajax.get("/Content/UserProfileGetProfessions/userProfileGetProfessions",t).expectJson().then(p).catch(console.error)}),i(".js-userprofile-professions").on("change",function(){var e=i(this).find(":selected").val(),t=e;t={professionId:e},SCM.Ajax.get("/Content/UserProfileGetSpecialties/UserProfileGetSpecialties",t).expectJson().then(f).catch(console.error)});var e=i("#extendedPasswordRequirementsEnabled");e.length&&"True"===e.val()?SCM.MyAccount.initTestPasswordWithExtendedRequirements():SCM.MyAccount.initTestPassword()}function e(){SCM.Ajax.get("/Content/EditUserProfile/editUserProfile").expectHtml().then(t).catch(console.error)}function t(e){var t=i("#myaccount-tabs-content");null!=e&&e.length&&(t.html(e).show(),a())}function r(){var e={},t=i(".js-fieldList");if(t.length)for(var n=0;n<t.length;n++)e[parseInt(t[n].dataset.cfdid)]=t[n].value;var a=i(".editable-userprofile-info"),a=(a.find("input").removeAttr("aria-invalid"),a.find(".error-message").html("").addClass("hide"),{FirstName:i("#userprofile-firstname").val(),LastName:i("#userprofile-lastname").val(),UserName:i("#userprofile-username").val(),Password:i("#Password").val(),ConfirmPassword:i("#ConfirmPassword").val(),Organization:i("#userprofile-organization").val(),HomePhone:i("#userprofile-homephone").val(),WorkPhone:i("#userprofile-workphone").val(),MobilePhone:i("#userprofile-mobilephone").val(),FaxNumber:i("#userprofile-fax").val(),Suffix:i("#userprofile-suffix").val(),Address:i("#userprofile-address").val(),Address2:i("#userprofile-address2").val(),City:i("#userprofile-city").val(),PostalCode:i("#userprofile-postalcode").val(),StateId:i(".userprofile-states :selected").val(),CountryId:i(".userprofile-countries :selected").val(),Title:i("#userprofile-title").val(),EmailAddress:i("#userprofile-emailaddress").val(),SpecialtyId:i(".js-userprofile-specialities :selected").val(),ProfessionId:i(".js-userprofile-professions :selected").val(),Specialty:i(".js-userprofile-specialities :selected").text(),Profession:i(".js-userprofile-professions :selected").text(),WorkSetting:i(".js-userprofile-work-settings :selected").text(),IsLicensedPhysician:i("#js-radio-is-licensed-physician").prop("checked"),VendorId:i("#js-user-vendor-id").val(),UserSpecificClientFields:e,CaptchaResponse:SCM.Captcha.GetCaptchaResponse(a),ReceivesMarketingEmailAlert:i("#js-radio-signed-up-for-marketing-emails").prop("checked")});SCM.Ajax.post("/UserDashboard/UpdateUserProfile/updateUserProfile",a).expectActionResultModel().ensureSuccess().then(s).catch(o)}function o(e){var t,e=e.actionResultModel,n=i(".editable-userprofile-info");null!=(t=e.ValidationErrors)&&t.length&&i.each(e.ValidationErrors,function(e,t){i("#ErrorMessage"+t.Key).removeClass("hide").html(t.Errors.join(" ")),i(".js-"+t.Key).attr("aria-invalid","true")}),SCM.Captcha.ResetCaptcha(n)}function s(e){var t=e.Html;SCM.Ajax.get("/Content/MyProfile/myProfile").expectHtml().then(l).then(function(e){c(t)}).catch(console.error)}function l(e){var t=i("#myaccount-tabs-content");null!=e&&e.length&&(t.html(e).show(),n())}function c(e){i(".success").removeClass("hide"),e.length&&i(".success").html(e)}function d(){SCM.Ajax.get("/Content/MyProfile/myProfile").expectHtml().then(u).catch(console.error)}function u(e){var t=i("#myaccount-tabs-content");null!=e&&e.length&&(t.html(e).show(),n())}function h(e){var t=i(".userprofile-states");if(t.empty(),null!=e&&e.length){for(var n in e){n=i("<option/>").attr("value",e[n].StateId).text(e[n].StateName);t.append(n)}t.removeClass("hide"),t.closest(".dataRow").removeClass("hide")}else t.removeClass("hide").addClass("hide"),t.closest(".dataRow").addClass("hide")}function p(e){var t=i(".js-userprofile-professions"),n=i(".js-userprofile-specialities");if(t.empty(),n.empty(),null!=e&&e.length){for(var a in e){a=i("<option/>").attr("value",e[a].ProfessionId).text(e[a].ProfessionName);t.append(a)}t.removeClass("hide"),t.closest(".dataRow").removeClass("hide"),n.addClass("hide")}else t.removeClass("hide").addClass("hide"),t.closest(".dataRow").addClass("hide"),n.removeClass("hide").addClass("hide");n.closest(".dataRow").addClass("hide")}function f(e){var t=i(".js-userprofile-specialities");if(t.empty(),null!=e&&e.length){for(var n in e){n=i("<option/>").attr("value",e[n].SpecialtyId).text(e[n].SpecialtyName);t.append(n)}t.removeClass("hide"),t.closest(".dataRow").removeClass("hide")}else t.removeClass("hide").addClass("hide"),t.closest(".dataRow").addClass("hide")}function m(){SCM.Ajax.get("/Content/MyEditableEmail").expectHtml().then(g).catch(console.error)}function g(e){var t=i("#myaccount-tabs-content");null!=e&&e.length&&(t.html(e).show(),i(".btn-useremail-update").on("click",v),i(".btn-useremail-cancel").on("click",d))}function v(){var e={EmailAddress:i("#useremailchange-emailaddress").val()};SCM.Ajax.post("/UserDashboard/UpdateUserEmailWithVerification/updateUserEmailWithVerification",e).expectActionResultModel().ensureSuccess().then(y).catch(C)}function C(e){var e=e.actionResultModel,t=i("#myaccount-tabs-content").find(".error-message");t.html(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(e.length){const t=i("<ul></ul>");return e.map(e=>t.append(`<li>${e}</li>`)),t}return""}(e.Messages)),t.removeClass("hide")}function y(e){var t=e.Html;SCM.Ajax.get("/Content/MyProfile/myProfile").expectHtml().then(l).then(function(e){c(t)}).catch(console.error)}}(jQuery),Theme||{}),Theme=(Theme.NewAndPopular=function(o){return{init:function(){o(".js-new-and-popular-mode").each(function(){var r=o(this);r.on("click",function(e){var t,n=r.data("mode"),a=r.data("instancename"),i=o(".js-new-and-popular-content-"+n);e.preventDefault(),o(".js-new-and-popular-mode").removeClass("active"),r.addClass("active"),i.hasClass("hasContent")||(e=n,t=i,n=a,n=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/PlatformArticle/ArticleListNewAndPopularContent/"+a,o("body").addClass("wait"),SCM.Ajax.get(n,{mode:e}).expectHtml().then(function(e){t.html(e),o("body").removeClass("wait")}).catch(function(e){console.error(e),o("body").removeClass("wait")}),i.addClass("hasContent")),o(".js-new-and-popular-content").addClass("hide"),i.removeClass("hide")})})}}}(jQuery),Theme||{}),Theme=(Theme.PeerReview=function(e){return{init:function(){e(".js-accordion-trigger").on("click",function(){e(this).toggleClass("active"),e(this).next(".js-accordion-content").toggleClass("expanded")})}}}(jQuery),Theme||{}),Theme=(Theme.RegisterUser=function(b){var w=b(".widget-RegisterUser"),e=b("#extendedPasswordRequirementsEnabled");return e.length&&"True"===e.val()?SCM.MyAccount.initTestPasswordWithExtendedRequirements():SCM.MyAccount.initTestPassword(),{init:function(){w.on("click","#showPassword",function(){w.find("#Password, #ConfirmPassword").each(function(){var e=b(this).clone();e.attr("type","text"),e.attr("autocomplete","off"),e.attr("value",b(this).val()),b(this).after(e),b(this).remove()}),b(this).hide(),b(this).siblings("#hidePassword").show()}),w.on("click","#hidePassword",function(){w.find("#Password, #ConfirmPassword").each(function(){var e=b(this).clone();e.attr("type","password"),e.removeAttr("autocomplete"),e.attr("value",b(this).val()),b(this).after(e),b(this).remove()}),b(this).hide(),b(this).siblings("#showPassword").show()}),w.on("change","#CountryList",function(){var e,t;t=(e=w).find("#CountryList").val(),e.find("#StateList").empty().prop("disabled",!0),null!=t&&t.length&&(e={countryId:t},SCM.Ajax.get("/UserDashboard/RegisterGetCountryStates",e).expectJson().then(n).catch(console.error))}),w.on("click","#registerBtn",t)}};function t(){b(".error-message").addClass("hide");var e=w.find("#UserName").val(),t=w.find("#EmailAddress").val(),n=w.find("#Password").val(),a=w.find("#ConfirmPassword").val(),i=w.find("#Title").val(),r=w.find("#FirstName").val(),o=w.find("#Lastname").val(),s=w.find("#MembershipNumber").val(),l=w.find("#VendorId").val(),c=w.find("#Address").val(),d=w.find("#City").val(),u=w.find("#StateList").val(),h=w.find("#CountryList").val(),p=w.find("#ZipCode").val(),f=w.find("#Telephone").val(),m=w.find("#Fax").val(),g=w.find("#Mobile").val(),v=w.find("#TermsOfUseAcceptance").is(":checked"),C=w.find("#PrivacyPolicyAcceptance").is(":checked"),y=w.find("#MarketingAcceptance").is(":checked"),e={UserName:e,EmailAddress:t,Password:n,ConfirmPassword:a,Title:i,FirstName:r,Lastname:o,MembershipNumber:s,VendorId:l,Address:c,City:d,State:u,Country:h,ZipCode:p,PhoneNumber:f,MobileNumber:g,FaxNumber:m,ClientFieldDefinitionList:function(){var e=b(".widget-RegisterUser").find(".js-fieldList"),n=[];0<e.length&&e.each(function(){var e=b(this).attr("data-cfdId"),t=b(this).val();n.push({ClientFieldDefinitionId:e,SpecifiedFieldValue:t})});return n}(),TermsOfUseAccepted:v,PrivacyPolicyAccepted:C,ReceivesMarketingEmailAlert:y,CaptchaResponse:SCM.Captcha.GetCaptchaResponse(w),CaptchaWidgetInstanceName:SCM.Captcha.GetCaptchaInfo().ReCaptchaWidgetControlId};SCM.Ajax.post("/UserDashboard/RegisterNewUser",e).expectActionResultModel().ensureSuccess().then(S).catch(k)}function S(e){var t;SCM.GoogleTagManagerDataLayerEvents&&(t=SCM.SiteJS.getDefaultReturnUrl(),SCM.GoogleTagManagerDataLayerEvents.logSuccessfulAction(t,"","register")),e.Data&&e.Data.ReplaceRegisterForm?(b(".register-form-content").hide(),b(".js-email-verification-message").html(e.Data.VerificationEmailSent)):SCM.SiteJS.loginReturnBack()}function k(e){var n,t,e=e.actionResultModel;null!=(t=e.ValidationErrors)&&t.length&&b.each(e.ValidationErrors,function(e,t){w.find("#ErrorMessage"+t.Key).removeClass("hide").html(t.Errors.join(" ")),b("#"+t.Key).attr("aria-invalid","true")}),null!=(t=e.Messages)&&t.length&&(n=b("<ul></ul>"),t=w.find(".at-errormessages"),b.each(e.Messages,function(e,t){n.append(`<li>${t}</li>`)}),t.html(n).removeClass("hide")),SCM.Captcha.ResetCaptcha(w)}function n(e){var n=w.find("#StateList");null!=e&&e.length&&(b.each(e,function(e,t){n.append(b(`<option value="${t.StateId}">${t.StateName}</option>`))}),n.prop("disabled",!1))}}(jQuery),Theme||{}),Theme=(Theme.CurrentBookSearch=function(a){return{init:function(){a(".js-current-book-search").on("keypress",function(e){"Enter"===e.key&&t(a(this))}),a(".js-current-book-search-submit").on("click",function(){t(a(this).prev("input"))})}};function t(e){var t=e.data("book"),e=e.val(),n=a(".hfQuickSearchUrl").val();n&&(n=n.replace("{searchQuery}",e),window.location=n+"&fl_BookID="+t)}}(jQuery),"object"==typeof module&&module.exports&&(module.exports=Theme.CurrentBookSearch),Theme||{}),Theme=(Theme.SearchWithinIssue=function(r){return{init:function(){r(".js-issue-search").on("keypress",function(e){"Enter"===e.key&&t(r(this))}),r(".js-issue-cat-search").on("click",function(){t(r(this).prev("input"))})}};function t(n){var a=n.data("issue"),i=n.data("volume"),n=n.val();{let e="/search-results?page=1&q={searchQuery}",t=r(".hfQuickSearchUrl").val();(e=t?t:e)&&(n=e.replace("{searchQuery}",n),window.location=n+`&fl_IssueNo=${a}&fl_Volume=`+i)}}}(jQuery),Theme||{}),Theme=(Theme.ShibbolethSignin=function(r){return{init:function(){r("#FederationDropdown").on("change",function(e){t(r(e.target))}),function(){let e=r("#FederationDropdown");r(window).on("pageshow",function(){e.val()&&t(e)})}(),r("#shibbolethSelectBtn").on("click",e),0<=window.location.search.indexOf("openathens=")&&r('#FederationDropdown option:contains("OpenAthens Federation")').attr("selected","selected").change()}};function t(e){e.length&&(e=e.val())&&SCM.Ajax.post("/UserDashboard/GetInstitutionsForFederation",{FederationID:e}).expectJson().then(n).catch(console.error)}function n(e){var t,n,a=r("#InstitutionDropdown"),i=e.find(e=>e.IsDefault);a.find("option:gt(0)").remove(),i?(i=i,(n=a).closest(".input_wrap").addClass("hide"),n.append(`<option value="${i.ShibbolethID}">${i.InstitutionName}</option>`),n.val(i.ShibbolethID)):(n=e,(t=a).closest(".input_wrap").removeClass("hide"),n.forEach(e=>{t.append(`<option value="${e.ShibbolethID}">${e.InstitutionName}</option>`)}))}function e(){var e=r("#InstitutionDropdown").val();e?(e={ShibbolethID:e=e},SCM.Ajax.post("/UserDashboard/RedirectToShibboleth",e).expectJson().then(a).then(i).catch(console.error)):r("#shibboleth-error").html("Please select an institution")}function a(e){var t=new URLSearchParams(document.location.search).get("returnUrl");return t&&(t=function(e){var t=decodeURIComponent(e);e===t&&(e=encodeURIComponent(e));return e}(t),document.cookie="returnUrl="+t),e}function i(e){window.location.assign(e)}}(jQuery),Theme||{}),Theme=(Theme.InstitutionSsoAuth=function(n){return{init:function(){var t;n(".inst-sso-auth-wrap").length&&(t=n(".js-error-msg"),n(".js-institution-drop-down").on("change",function(){t.text("");var e=n(this).find("option:selected");e.length&&(e=e.attr("data-loginurl"),n(".js-inst-sso-auth-login-link").attr("href",e))}))}}}(jQuery),Theme||{}),Theme=(Theme.SolrSavedSearches=function(r){var o=r("#hfSiteURL").val();return{init:function(){r(".solrSearchSaveWidget table.tablesorter").tablesorter({theme:"default",delayInit:!0,ignoreCase:!0,headers:{4:{sorter:!1}},sortList:[[0,0]]}),r(".solrSearchSaveWidget .js-save-search-delete").on("click",function(){var e,t,n,a;e=r(this),t=`//${o}/Solr/DeleteSolrSearchInfo`,e=(n=e.closest("tr")).data("usersearchid"),a=n.data("useralertid"),SCM.Ajax.post(t,{userSearchId:e,userAlertId:a}).expectActionResultModel().ensureSuccess().then(function(){n.remove()}).catch(console.error)}),r(".solrSearchSaveWidget .js-alert-frequency").on("change",function(){var e,t,n,a,i;e=r(this),t=`//${o}/Solr/UpdateUserAlert`,n=e.closest("tr"),a=n.data("usersearchid"),i=n.data("useralertid"),e=e.val(),SCM.Ajax.post(t,{userSearchId:a,userAlertId:i,scheduleId:e}).expectActionResultModel().ensureSuccess().then(function(e){n.data("useralertid",e.ReturnId)}).catch(console.error)}),r(".solrSearchSaveWidget .js-save-search-rename-rename").on("click",function(){var e=r(this).closest("td"),t=e.find(".js-save-search-name-link");t.addClass("hide"),e.find(".js-save-search-input").val(t.text()).addClass("active").focus(),e.find(".js-save-search-rename-cancel").addClass("active"),e.find(".js-save-search-rename-save").addClass("active"),r(this).addClass("hide")}),r(".solrSearchSaveWidget .js-save-search-rename-cancel").on("click",function(e){e=r(e.target).closest("td");l(e),c(e)}),r(".solrSearchSaveWidget .js-save-search-rename-save").on("click",function(e){var e=r(e.target),t=e.closest("td"),n=t.find(".js-save-search-input"),e=e.closest("tr").data("usersearchid"),n=n.val();n.length&&(i(n,e),s(t,n),l(t),c(t))}),r(".solrSearchSaveWidget .js-save-search-input").on("keypress",function(e){var t=r(e.target),n=t.closest("td"),a=n.closest("tr").data("usersearchid"),t=t.val();"Enter"===e.key&&(e.preventDefault(),t.length)&&(i(t,a),s(n,t),l(n),c(n))}),"1"===SCM.JSUtility.getParamFromHash("triggerSaveSearch")&&(r(".lnkSaveSolrSearch").trigger("click"),SCM.JSUtility.removeParamFromHash("triggerSaveSearch"))}};function i(e,t){SCM.Ajax.post(`//${o}/Solr/RenameSolrSearchInfo`,{searchName:e,userSearchId:t}).expectActionResultModel().ensureSuccess().catch(console.error)}function s(e,t){e.find(".js-save-search-name-link").text(t)}function l(e){e.find(".js-save-search-input").removeClass("active"),e.find(".js-save-search-rename-cancel").removeClass("active"),e.find(".js-save-search-rename-save").removeClass("active")}function c(e){e.find(".js-save-search-name-link").removeClass("hide"),e.find(".js-save-search-rename-rename").removeClass("hide")}}(jQuery),Theme||{}),SCM=(Theme.UserComments=function(i){var r=i("body"),t=i("#divCommentModal"),o=i(".comment-form__modal .preloader-wrap"),s=i(".js-comment-form-response"),l=i(".js-comment-form-response-success"),c=i(".js-comment-form-response-error"),d=i("#userCommentResourceType").val(),u=i("#userCommentResourceId").val(),n=i("#showUserCommentWidget").val(),a=i("#userCommentInstance").val(),h=i("#autoPublishUserComments").val(),p=i("#userCommentShowDisclosure").val(),f=i("#userCommentShowAffiliations").val(),m=i(".js-user-comment-modal-noaccess");return{init:function(){i("#comment-modal-opener").on("click",function(){var e;"True"===i(this).data("loggedin")?"True"!==n?SCM.Utilities.Reveal.open(i("#"+a)):(e=t.find("#Author"),i("#divUserCommentForm").removeClass("hide"),t.find('input[type="text"], textarea').val(""),t.find("div.captchaAlert").addClass("hide"),i('input[name="NoConflicts"]').prop("checked",!1),i('input[name="termsAndConditions"]').prop("checked",!1),i("#recaptcha_reload").trigger("click"),e.val(e.data("authorValue")),s.addClass("hide"),l.addClass("hide"),c.addClass("hide"),SCM.Utilities.Reveal.open(t),SCM.Focus.trap(t),r.addClass("on-canvas")):(r.addClass("on-canvas"),SCM.Utilities.Reveal.open(m),SCM.Focus.trap(m))}),i(document.body).on("click","#divCommentModal .btnUserCommentSubmit",function(e){var t,n,a;e.preventDefault(),function(){let e=!0;var t=document.getElementById("divUserCommentForm"),t=t.getElementsByClassName("comment-form__input");for(const i of t){var n=document.querySelector(`#${i.id} ~ .comment-form-error-span`),a=document.querySelector(`span.comment-form__input-display-span[for=${i.id}]`);i.validity.valid?(n.classList.add("hide"),n&&n.hasAttribute("aria-invalid")&&n.removeAttribute("aria-invalid"),n&&n.hasAttribute("aria-describedby")&&n.removeAttribute("aria-describedby"),a&&a.hasAttribute("aria-live")&&a.removeAttribute("aria-live")):(n.classList.remove("hide"),n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",i.id+'-error"'),a.setAttribute("aria-live","assertive"),e=!1)}return e}()&&(r.addClass("wait"),o.removeClass("hide"),t=i("#divUserCommentForm"),e="true"===f?t.find("input#AffInstitution").val():"",n="true"===p?t.find("textarea#Disclosure").val():"",a=`${App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:""}/Content/SubmitUserComment`,e={author:t.find("input#Author").val(),affInstitutions:e,disclosure:n,title:t.find("input#Title").val(),comment:t.find("textarea#Comment").val(),resourceType:d,resourceId:u,recaptchaChallege:i("#recaptcha_challenge_field").val(),recaptchaResponse:i("#recaptcha_response_field").val()},SCM.Ajax.post(a,e).expectActionResultModel().then(function(){o.addClass("hide"),t.addClass("hide"),"true"===h.toLowerCase()?location.reload():(s.removeClass("hide"),l.removeClass("hide"))}).catch(function(e){console.error(e),o.addClass("hide"),i("div.captchaAlert").removeClass("hide"),c.removeClass("hide")}).finally(function(){r.removeClass("wait")}))}),i(document.body).on("click","#divCommentModal .btnModalCancel, #divCommentModal .btnCommentModalExit, .comment-form__close",function(e){e.preventDefault(),SCM.Utilities.Reveal.close(t),SCM.Focus.release(t),r.removeClass("on-canvas")}),i(".js-login-modal-close").on("click",function(){var e;e=m,SCM.Utilities.Reveal.close(e),SCM.Focus.release(e),r.removeClass("on-canvas")}),i(document.body).on("change",'input[name="NoConflicts"]',function(){var e=i(".disclosureBox"),t=i('textarea[id="Disclosure"]');i(this).is(":checked")?(e.removeClass("hide"),t.prop("required",!0)):(e.addClass("hide"),t.prop("required",!1))}),function(){var e=i(".submitCommentPlaceHolder"),t=i(".widget-UserComment");e.append(t)}()}}}(jQuery),SCM||{}),Theme=(SCM.TermsAndConditions=function(t){const n=t(".widget-TermsAndConditionsViewModel"),e=n.find(".terms-conditions-modal-backdrop"),a=n.find(".js-terms-conditions"),i=a.find(".js-terms-conditions-agree"),r=a.find(".js-terms-conditions-decline"),o="hide";return{init:function(){n.length&&(i.on("click",s),r.on("click",l),d(!0))}};function s(){var e=t(this).data("ajax-url");e.length&&(SCM.Ajax.post(e).expectActionResultModel().catch(e=>console.log(e)),c())}function l(){var e=n.find("#hfShowErrorOnDecline").val();e&&"true"===e.toLowerCase()?(e=n.find(".js-terms-conditions-error")).length&&(e.removeClass(o),r.blur()):c()}function c(){a.removeClass("open"),d(!1),e.length&&e.addClass(o)}function d(e){e?SCM.Focus.trap(n):SCM.Focus.release(n)}}(jQuery),Theme||{}),SCM=(Theme.ToolboxEbook=function(a){return{downloadEbookChapterPage:function(){a(".js-epub-download-link").on("click",function(e){e.preventDefault();var t=a(this).attr("href"),e={resourceId:a(this).data("parent-resource-id"),resourceTypeId:a(this).data("parent-resource-type"),multimediaType:a(this).data("multimedia-type")},n=SCM.Common.getQueryStringValue(t,"guestAccessKey");SCM.Common.isDefined(n)&&(e.guestAccessKey=n),SCM.Ajax.post("/toolbox/CheckEpubDownloadAccess",e).expectJson().then(e=>{if(!e.AccessGranted)throw(null==e?void 0:e.AccessDeniedMessage)??"The PDF for this content cannot be accessed at this time.";window.location=t}).catch(e=>{e=null!=e&&e.AccessDeniedMessage?e.AccessDeniedMessage:e;SCM.Modals.showModal(e)})})}}}(jQuery),SCM||{}),SCM=(SCM.AdobeAnalytics=(jQuery,{sendAdobeAnalyticsProductData:function(e){SCM.Ajax.get("/ThirdParty/GetAdobeAnalyticsProductDataForArticleAbstract",{articleId:e}).expectJson().then(function(e){digitalData.products.push({productInfo:{sku:e.SKU,issueDate:e.IssueDate,format:e.Format,articleTitle:e.ArticleTitle,abstractValues:e.AbstractValue,societyName:e.SocietyName,collectionName:e.CollectionName,issue:e.Issue,volume:e.Volume,journalTitle:e.JournalTitle,accensionNumber:e.AccensionNumber,authors:e.Authors,doi:e.Doi,viewType:e.ViewType,articleKeywords:e.ArticleKeywords,articleMetadata:e.ArticleMetadata}}),_satellite.track("HTML Abstract View")}).catch(function(e){console.error("Error logging Adobe Analytics Product data",e)})},sendAdobeAnalyticsArticleData:function(e,t,n){SCM.Ajax.get("/ThirdParty/GetAdobeAnalyticsProductDataForArticlePage",{articleId:e,isAbstractPage:t,collectionId:n}).expectJson().then(function(e){digitalData.products.push({productInfo:{sku:e.SKU,issueDate:e.IssueDate,format:e.Format,articleTitle:e.ArticleTitle,abstractValues:e.AbstractValue,societyName:e.SocietyName,collectionName:e.CollectionName,issue:e.Issue,volume:e.Volume,journalTitle:e.JournalTitle,accensionNumber:e.AccensionNumber,authors:e.Authors,doi:e.Doi,viewType:e.ViewType,articleKeywords:e.ArticleKeywords,articleMetadata:e.ArticleMetadata}}),_satellite.track("HTML Full Text View")}).catch(function(e){console.error("Error logging Adobe Analytics Product data",e)})}}),"object"==typeof module&&module.exports&&(module.exports=SCM.AdobeAnalytics),SCM||{}),SCM=(SCM.Captcha=function(){var n="#txtCaptchaInputId",a=".g-recaptcha-response";return{Init:function(e){return void 0!==window.grecaptcha&&null!==window.grecaptcha&&(window.grecaptcha.render("captcha",{sitekey:e,"error-callback":t}),!0)},GetCaptchaResponse:function(e){var t=e.find(n);if(t.is(":visible"))return t.val();if((t=e.find(a)).length)return t.val();return""},GetCaptchaInfo:function(){var e=$("#recaptchaUseV3").val(),t=i(a);return{ReCaptchaV3Token:"True"===e?t:"",ReCaptchaV2Token:"False"===e?t:"",SimpleCaptchaToken:i(n),ReCaptchaWidgetControlId:i("#recaptchaWidgetInstance"),UserEmail:$(".js-captchaUserEmail").val()}},ResetCaptcha:function(e){e.find(a).length&&window.grecaptcha.reset()}};function t(){SCM.Ajax.get("/ThirdParty/ReCaptcha/Captcha_FallBackToSimpleCaptcha").expectHtml().then(e).catch(console.error)}function e(e){var t=$(".widget-ReCaptcha");null!=e&&e.length&&t.replaceWith(e)}function i(e){e=$(e).val();return void 0===e||0==e.length?"":e}}(),SCM||{}),Theme=(!function(e,o){e.init=function(){var e=o(".widget-SeeAlso");e.length&&e.each(function(){var e=o(this);let t=e.find(".js-view-more-div"),n=e.find(".js-view-less-div");var a=e.find(".js-view-more-div > .js-view-more-a"),i=e.find(".js-view-less-div > .js-view-less-a");let r=e.find("li.js-more");a.length&&a.on("click",function(){r.removeClass("hide"),n.removeClass("hide"),t.addClass("hide")}),i.length&&i.on("click",function(){r.addClass("hide"),n.addClass("hide"),t.removeClass("hide")})})}}(SCM.SeeAlso=SCM.SeeAlso||{},jQuery),Theme||{}),Theme=(Theme.GuestCheckout=function(r){return{init:function(){r(document.body).on("click",".guest-checkout-form .js-btn-guest-checkout",function(e){var t,n=r(this).closest(".guest-checkout-form");e.preventDefault(),e.stopPropagation(),t=n,o(e=r(".guest-email").val())?(r(".error").hide(),r.post("/store/GuestLogin/Ajax",{guestEmail:e}).then(function(e){e.Success?window.location="/store/reviewcart":e.Messages.length&&t.find(".error").html(e.Messages[0]).show()}).catch(function(){t.find(".error").html(result.Messages[0]).show()})):t.find(".error").show()}),r(document.body).on("click",".restore-access-form .js-btn-restore-guest-access",function(e){var t,n,a,i=r(this).closest(".restore-access-form");e.preventDefault(),e.stopPropagation(),t=i,e=r(".restore-guest-email").val(),i=r("#resourceId").val(),n=r("#resourceTypeId").val(),a=window.location.href,o(e)?(r(".error").hide(),r.post("/store/SendRestoreAccessLink/Ajax",{guestEmail:e,resourceUrl:a,resourceId:i,resourceType:n}).then(function(e){e.Success?r(".restore-access-form").html('<p style="color:green;">'+e.Messages[0]+"</p >"):e.Messages.length&&t.find(".error").html(e.Messages[0]).show()}).catch(function(){t.find(".error").html(result.Messages[0]).show()})):t.find(".error").show()})}};function o(e){return e.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)}}(jQuery),Theme||{}),Theme=(Theme.StoreCheckoutOptions=function(t){return{init:function(){t(document.body).on("click",".checkout-option-buttons .js-btn-store-login",function(e){e.preventDefault(),e.stopPropagation(),SCM.Ajax.get("/signin/LoginForm").expectHtml().then(function(e){t(".widget-CheckoutOptions").hide(),t("#sign-in-page").html(e)}).catch(console.error)}),t(document.body).on("click",".checkout-option-buttons .js-btn-continue-as-guest",function(e){e.preventDefault(),e.stopPropagation(),SCM.Ajax.get("/store/GuestCheckout").expectHtml().then(function(e){t(".widget-CheckoutOptions").hide(),t("#guest-checkout-form").html(e)}).catch(console.error)})}}}(jQuery),Theme||{}),SCM=(Theme.OrcidId=function(n){return{init:function(){n(".js-remove-orcid").length&&(n(document).ready(function(){n("#removeOrcidIdDiv .js-cancel-orcid").click(function(e){e.preventDefault(),a()})}),n(document).on("click",".js-remove-orcid",function(){SCM.Ajax.post("/UserDashboard/RemoveOrcidId").expectJson().then(function(e){var t;e.Success?window.location.reload():0<e.Messages.length&&((t=n(".error-message")).html(e.Messages[0]),t.removeClass("hide"),a())})}))}};function a(){n("#removeOrcidIdDiv").removeClass("open")}}(jQuery),SCM||{}),SCM=(SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.TrendMD=function(n){return{init:function(){{var e,t;n(".widget-TrendMD").addClass("hide"),n(".widget-Hum").addClass("hide"),0<n("#hum").length&&function(){var e=document.cookie.split("; ");for(var t of e)if(t.startsWith("hum_"))return 1;return}()?(e=Number(n("#hum").data("humWait")),t=Number(n("#hum").data("humRetry")),SCM.Retry.policy().handleResult(function(e){return!e}).waitAndRetry(t,e).execute(i).then(a).catch(()=>{r()})):r()}}};function a(){var e=n(".widget-TrendMD .options").data("suppress-if-hum-is-present");e&&"false"===e.toLowerCase()&&i()?(n(".widget-TrendMD").removeClass("hide"),n(".widget-Hum").removeClass("hide")):i()?n(".widget-Hum").removeClass("hide"):r()}function i(){return 0<n("#hum .hum-recommendations").length}function r(){n(".widget-TrendMD").removeClass("hide")}}(jQuery),SCM=SCM||{},SCM.BookPartTitleFacet=function(i){return{init:function(){i(".pg_book .js-bookparttitle-facet").length&&(o(),i(document).on("click",".js-bookparttitle-arrow",e),i(document).on("click",".js-bookparttitle-label:not(.js-bookparttitle-checkbox)",t),i(document).on("click",".js-bookparttitle-checkbox",n))},showAllItems:function(){i(".js-bookparttitle-child-list-item").removeClass("hide")},toggleBookPartTitleParent:o};function e(){var e,t,n,a=i(this).find(".js-bookparttitle-arrow-icon");(a=a.length?a:i(this).parent().find(".js-bookparttitle-arrow-icon")).length?(e=(n=a.closest(".js-bookparttitle-child-list-item")).find("ul.bookparttitle-child-list"),t=n.find(".js-bookparttitle-checkbox"),n=n.find(".js-bookparttitle-headings-placeholder"),a.hasClass("icon-general-arrow-filled-right")?(a.removeClass("icon-general-arrow-filled-right"),a.addClass("icon-general-arrow-filled-down"),e.attr("aria-expanded","true"),t.attr("aria-expanded","true")):a.hasClass("icon-general-arrow-filled-down")&&(a.removeClass("icon-general-arrow-filled-down"),a.addClass("icon-general-arrow-filled-right"),e.attr("aria-expanded","false"),t.attr("aria-expanded","false")),n.toggleClass("hide")):console.error(".js-bookparttitle-arrow-icon not found")}function t(e){var t=i(this).closest(".js-bookparttitle-item").find(".js-bookparttitle-checkbox").first(),n=((n=t).is(":checked")?n.prop("checked",!1):n.prop("checked",!0),i(this).closest(".js-bookparttitle-child-list-item"));r(t,n,".js-bookparttitle-checkbox"),a()}function n(){var e=i(this).closest(".js-bookparttitle-child-list-item");r(i(this),e,".js-bookparttitle-checkbox"),a()}function a(){e=i("#BookPartTitleCurrentDataUrl").val();var e=decodeURIComponent(e);t=[],i(".js-bookparttitle-facet").find(".js-bookparttitle-checkbox:checked").each(function(){var e=i(this).parents(".js-parent");e.length&&((e=e.find(".js-bookparttitle-checkbox:first:checked")).length?(e=e.data("facetvalue"),-1===t.indexOf(e)&&t.push(e)):t.push(i(this).data("facetvalue")))});var t,e=function(e,t){var n=-1!==e.indexOf("f_BookPartTitle=");{var a;!n&&0<t.length?e+="&f_BookPartTitle="+t.join("AND"):n&&(n=SCM.JSUtility.getSearchParamByName("f_BookPartTitle").replace(/ /g,"+"))&&""!==n&&(e=0<t.length?(t="f_BookPartTitle="+t.join("AND"),e.replace("f_BookPartTitle="+n,t)):(t="f_BookPartTitle="+n,n=e.indexOf(t),a=n+t.length,"&"===e.charAt(n-1)?t="&"+t:"&"===e.charAt(a+1)&&(t+="&"),e.replace(t,"")))}return e}(e,t);SCM.SearchResults.doSolrSearch({queryString:e})}function r(e,t,n){var a=e.closest(".js-parent");a.length&&(e=e.is(":checked"),a[0]===t[0]?a.find(n).prop("checked",e):(t=n,n=(e=a).find("li "+t),a=e.find("li "+t+":checked"),e.find(t+":first").prop("checked",n.length===a.length)))}function o(){0<($checkedItems=i(".bookparttitle-checkbox:checked")).length&&$checkedItems.parents(".js-bookparttitle-child-list-item").each(function(){var e,t;e=(e=i(this)).find(".js-bookparttitle-arrow").first(),t=e.children(".js-bookparttitle-arrow-icon"),e&&e.length&&t.hasClass("icon-general-arrow-filled-right")&&(e.parent(".js-bookparttitle-item").children(".js-bookparttitle-headings-placeholder").toggleClass("hide"),t.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"))})}}(jQuery),SCM=SCM||{},SCM.CollectionFacet=function(i){return{init:function(){i(".pg_SearchResults .js-collection-facet").length&&(c(),i(document).on("click",".js-collection-arrow",e),i(document).on("click",".js-collection-label:not(.js-collection-checkbox)",t),i(document).on("click",".js-collection-checkbox",n))},showAllItems:function(){i(".js-collection-child-list-item").removeClass("hide")},toggleCollectionParent:c,updateFacetDescendantCheckboxes:l,getUpdateQueryStringUrl:r};function e(){var e,t,n,a=i(this).find(".js-collection-arrow-icon");(a=a.length?a:i(this).parent().find(".js-collection-arrow-icon")).length?a.data("siteid")?(e=(n=a.closest(".js-collection-child-list-item")).find("ul.collections-child-list"),t=n.find(".js-collection-checkbox"),n=n.find(".js-collection-headings-placeholder"),a.hasClass("icon-general-arrow-filled-right")?(a.removeClass("icon-general-arrow-filled-right"),a.addClass("icon-general-arrow-filled-down"),e.attr("aria-expanded","true"),t.attr("aria-expanded","true")):a.hasClass("icon-general-arrow-filled-down")&&(a.removeClass("icon-general-arrow-filled-down"),a.addClass("icon-general-arrow-filled-right"),e.attr("aria-expanded","false"),t.attr("aria-expanded","false")),n.toggleClass("hide")):console.error("siteid not found"):console.error(".js-collection-arrow-icon not found")}function t(e){var t=i(this).closest(".js-collection-item").find(".js-collection-checkbox").first(),n=((n=t).is(":checked")?n.prop("checked",!1):n.prop("checked",!0),i(this).closest(".js-collection-child-list-item"));l(t,n,".js-collection-checkbox"),a()}function n(){var e=i(this).closest(".js-collection-child-list-item");l(i(this),e,".js-collection-checkbox"),a()}function a(){var e=r();SCM.SearchResults.doSolrSearch({queryString:e})}function r(){e=i("#CollectionCurrentDataUrl").val();var e=s(decodeURIComponent(e),o("siteid"),"collection");return s(e,o("bookid"),"subcollection")}function o(n){var a=[];return i(".js-collection-facet").find(".js-collection-checkbox:checked").each(function(){var e,t=i(this).parents(".js-parent");t.length&&((t=t.find(".js-collection-checkbox:first:checked")).length?0<(e=t.data(n))&&-1===a.indexOf(e)&&a.push(e):0<(e=i(this).data(n))&&a.push(e))}),a}function s(e,t,n){var a=n+"=",i="&"+n+"=",n=SCM.JSUtility.getSearchParamByName(n),r=null!==n&&""!==n;return!r&&0<t.length?e+=i+t.join(","):r&&(e=0<t.length?(i=a+t.join(","),e.replace(a+n,i)):(i=(t=e.indexOf(r=a+n))+r.length,"&"===e.charAt(t-1)?r="&"+r:"&"===e.charAt(i+1)&&(r+="&"),e.replace(r,""))),e}function l(e,t,n){var a=e.is(":checked");a=a,t.find(n).prop("checked",a);for(var i=n,r=e.closest("li").parent().closest("li").find(i+":first");r.length;){var o=r.closest("li"),s=o.find("ul li "+i),l=o.find("ul li "+i+":checked");0<s.length&&(s=s.length===l.length,r.prop("checked",s)),r=o.parent().closest("li").find(i+":first")}}function c(){0<($checkedItems=i(".js-collection-checkbox:checked")).length&&$checkedItems.parents(".js-collection-child-list-item").each(function(){var e,t;e=(e=i(this)).find(".js-collection-arrow").first(),t=e.children(".js-collection-arrow-icon"),e&&e.length&&t.hasClass("icon-general-arrow-filled-right")&&(e.parent(".js-collection-item").children(".js-collection-headings-placeholder").toggleClass("hide"),t.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"))})}}(jQuery),SCM=SCM||{},SCM.SearchAccessibility=function(g){return{init:function(){(g(".pg_searchresults, .js-nbnj-left-rail, .js-alerts-sign-up-wrapper, .js-journals-alerts-sign-up-wrapper, .js-content-alert-modal").find(".js-facet-accessibility, .js-taxonomy-facet-accessibility").length||g(".js-alerts-sign-up-wrapper").length)&&(C=0,v=-1,g(document).on("keydown",".js-facet-accessibility,.js-taxonomy-facet-accessibility",function(e){var t,n,a,i,r,o=g(this),s=o.find("ul.js-taxonomy-child-list,ul.collections-child-list,ul.bookparttitle-child-list"),l=o.hasClass("js-taxonomy-facet-accessibility"),c=o.children("li:visible");switch(o.is(":focus")&&(v=-1),c.removeAttr("tabindex"),c.find(".js-pub-label,.js-focus-element").attr("tabindex",-1),c.find("button").attr("tabindex",-1),c.find("a.js-focus-element,label.js-focus-element").attr("tabindex",-1),c.find(".js-availability-label").removeAttr("tabindex"),g(".sf-facet-list").children(".sf-facet-child").find(".js-availability-label").removeAttr("tabindex"),t=(l?function n(e,a,i){i=i||[];a=void 0===a?-1:a;e.children("li:visible").each(function(){var e=g(this),t=e.find("a.js-taxonomy-label,label.js-taxonomy-label").first(),t=(t.length&&i.push({id:C++,element:t,parentId:a}),e.hasClass("facetMoreLess")?e.find("button").each(function(){i.push({id:C++,element:g(this),parentId:a})}):e.find("a").hasClass("facetShowMore")&&e.find("a").each(function(){i.push({id:C++,element:g(this),parentId:a})}),e.children("ul.js-taxonomy-child-list"));t.length&&n(t,C-1,i)});return i}:function a(e,i,r){r=r||[];i=void 0===i?-1:i;e.children("li:visible").each(function(){var n=g(this);if(n){n.hasClass("facetMoreLess")?n.find("button").each(function(){r.push({id:C++,element:g(this),parentId:i})}):n.find("a").hasClass("facetShowMore")?n.find("a").each(function(){r.push({id:C++,element:g(this),parentId:i})}):r.push({id:C++,element:n,parentId:i});let e=n.find("ul.collections-child-list").first(),t=(e.length&&a(e,C-1,r),(e=n.find("ul.bookparttitle-child-list").first()).length&&a(e,C-1,r),n.siblings(".sf-facet-list"));t.length&&a(t,C-1,r)}});return r})(o),C=0,e.key){case"ArrowDown":e.preventDefault(),y(t,"forward");break;case"ArrowUp":e.preventDefault(),y(t,"backward");break;case"ArrowRight":e.preventDefault(),s&&(u=S(u=t,v))&&(u=u.element.closest(".js-taxonomy-child-list-item,.js-collection-child-list-item,.js-bookparttitle-child-list-item"),d=u.find("ul.js-taxonomy-child-list,ul.collections-child-list,ul.bookparttitle-child-list").first(),(h=u.find(".js-taxonomy-icon,.js-collection-arrow-icon,.js-bookparttitle-arrow-icon").first()).hasClass("icon-general-arrow-filled-right")&&(h.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"),h.find(".screenreader-text").text("Collapse")),d.removeClass("hide"),(h=u.find(".js-taxonomy-label, .js-collection-checkbox, .js-bookparttitle-checkbox").first()).length)&&h.attr("aria-expanded","true");break;case"ArrowLeft":if(e.preventDefault(),s){var d=t,u=S(d,v);if(u){var h=u.element;let e=h.closest(".js-taxonomy-child-list-item,.js-collection-child-list-item,.js-bookparttitle-child-list-item");var p=e.find("ul.js-taxonomy-child-list,ul.collections-child-list,ul.bookparttitle-child-list").first();let t=e.find(".js-taxonomy-icon,.js-collection-arrow-icon,.js-bookparttitle-arrow-icon").first();var f=t.find(".screenreader-text");!h.is("button")&&t.hasClass("icon-general-arrow-filled-down")?(t.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"),f.text("Expand"),p.addClass("hide"),e.find("a.js-taxonomy-label, .js-taxonomy-checkbox, .js-collection-checkbox, .js-bookparttitle-checkbox").attr("aria-expanded","false")):void 0!==(p=S(d,u.parentId))&&(d=p.element,u=h.closest(".js-taxonomy-child-list,.collections-child-list,.bookparttitle-child-list"),e=u.closest(".js-taxonomy-child-list-item,.js-collection-child-list-item,.js-bookparttitle-child-list-item"),t=e.find(".js-taxonomy-icon,.js-collection-arrow-icon,.js-bookparttitle-arrow-icon"),u.addClass("hide"),e.find("a.js-taxonomy-label, .js-taxonomy-checkbox, .js-collection-checkbox, .js-bookparttitle-checkbox").attr("aria-expanded","false"),t.hasClass("icon-general-arrow-filled-down")&&(t.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"),f.text("Expand")),w(b(d).first()),v=p.id)}}break;case"Tab":v=-1;break;case" ":e.preventDefault();f=t;(f=S(f,v))&&(f=f.element,(p=f.find('input[type="checkbox"]')).length||(f=f.closest(".js-taxonomy-child-list-item"),p=f.find('input[type="checkbox"]').first()),p.length)&&(p.click(),p.is(":checked")?p.attr("aria-selected",!0):p.attr("aria-selected",!1));break;case"Enter":e.preventDefault();var m=g(e.target);a=o,m=m,(i=S(n=t,v))?(r=i.element,n=S(n,i.parentId),a=void 0!==n?n.element:a,r.is(".facetShowMore")?(i=function(e){var t,n=(t=0!==e.find(".highlighted").length)?"li.highlighted:hidden":"li:hidden";let a=e.children(n),i;a.length?i=a.first().find(".js-focus-element"):(e=e.closest(".js-taxonomy-child-list-item")).length&&(e=e.find("ul.js-taxonomy-child-list"),t=0!==e.find(".highlighted").length,n=t?"li.highlighted:hidden":"li:hidden",a=e.children(n),i=a.first().find(".js-focus-element"));return i}(a),r.click(),w(i||a)):r.is(".facetShowLess")?(r.click(),v=void 0!==n?n.id:-1,w(a)):r.is("a")?r.click():w(r.find(".js-availability-label"))):m.is("a.facetShowMore")&&(m.click(),(i=m.closest("ul.js-facet-accessibility")).length)&&w(i)}}))}};var v,C;function y(e,t){w(b(S(e,v=function(e,t,n){let a=0;a="forward"===n?t<e.length-1?t+1:e.length-1:0<t?t-1:0;return a}(e,v,t)).element).first())}function b(e){var t=e.find(".js-availability-label,.js-pub-label,.js-focus-element");return t.length?t:e.is("button, a, label")?e:(t=e.find('input[type="checkbox"]')).length?t:void 0}function w(e){e.attr("tabindex",0),e.focus()}function S(e,t){return g.grep(e,function(e){return e.id===t})[0]}}(jQuery),SCM||{}),SCM=(SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.Scite=function(s){return{init:function(){(l=s(".scite-badge")).on("focusin",function(e){c=a(l,c)}),l.on("keydown",function(e){var t;"Enter"!==(t=e).key&&" "!==t.key||c.has(e.target).length?"Escape"!==(t=e).key&&t.keyCode!==n||(e.preventDefault(),r(c)):(e.preventDefault(),i(c))}),l.hover(e,t)}};const n=void 0;var l,c;function e(){i(c=a(l,c))}function t(){r(c=a(l,c))}function a(e,t){return t||((t=e.children().eq(1)).on("focusout",function(e){t.has(e.relatedTarget).length||r(t)}),o(t)),t}function i(e){var t,n,a,i,r,o;0<c.parents('[class*="SplitView"]').length&&(r=(t=e).css("transform"),o=/^(matrix\(1, ?0, ?0, ?1, ?)(-?\d+(.\d+)?), ?(-?\d+(.\d+)?)\)$/.exec(r))&&2<=o.length&&(a=l.width()+50,n=-100,s(window).width()<768&&(a=0,n=50),a=(i=l.position()).left+a,i=i.top+n,r=o[1]+a+","+i+")",t.css("transform",r)),e.addClass("scite-tooltip-visible");e.find("a").removeAttr("tabindex")}function r(e){e.removeClass("scite-tooltip-visible"),o(e)}function o(e){e.find("a").attr("tabindex","-1")}}(jQuery),SCM||{}),SCM=(SCM.FocusRestore=function(n){const a="focusedElementSelector",i=36e5,e=10,t=100,r=500;let o=null,s=!1;return{init:function(){n(document).on("keydown",function(e){"Tab"!==e.key&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(s=!0,SCM.wait(t).then(()=>{s=!1}))}),n(document).on("focusin",function(){SCM.wait(e).then(()=>{var e=document.activeElement;s&&l(o=function(e){if(!e||e===document)return"document";var t=[];let n=e;for(;n&&n!==document;){var a=function(e){let t=e.tagName.toLowerCase();{var n;e.id?t+="#"+e.id:((n=function(e){e=Array.from(e.classList).filter(e=>"focus-visible"!==e);return 0<e.length?"."+e.join("."):""}(e))&&(t+=n),(n=function(t){var e=t.parentNode;if(e&&1<Array.from(e.children).filter(e=>e.tagName===t.tagName&&function(e,t){e=Array.from(e.classList).sort().join("."),t=Array.from(t.classList).sort().join(".");return e===t}(e,t)).length)return`:nth-child(${Array.from(e.children).indexOf(t)+1})`;return""}(e))&&(t+=n))}return t}(n);if(t.unshift(a),n.id)break;n=n.parentNode}return t.join(" > ")}(e))})}),n(window).on("beforeunload",function(){o&&l(o)}),SCM.wait(r).then(()=>{var e=function(){var e=JSON.parse(localStorage.getItem(a));if(e){var t=Date.now();if(!(t>=e.expiration)&&e.url===window.location.href)return e.selector;c()}return null}();if(e&&"document"!==e)try{var t=n(e);t.length?t.focus():c()}catch(e){c()}})}};function l(e){var t=Date.now(),e={selector:e,url:window.location.href,expiration:t+i};localStorage.setItem(a,JSON.stringify(e))}function c(){localStorage.removeItem(a)}}(jQuery),SCM||{}),SCM=(SCM.ToolboxGetCitations=function(i){var r;return{init:function(){var e;(i(".js-add-to-citation-download-manager").length||i(".js-bulk-citation-manager-add").length)&&(r=SCM.ToolboxGetCitations.DataService,(e=i("#main")).on("click",".js-add-to-citation-download-manager",function(){var e,t=i(this);(t=t).hasClass("disabled")||(e=t.data("resourceId"),t=t.data("resourceTypeId"),r.addResourceToCitationManager(e,t))}),e.on("change",".js-checkBoxClass",n),e.on("click",".js-bulk-citation-manager-add",o),e.on("click",".js-bulk-citation-manager-add-issue",s),r.getResourceIdsAlreadyInCitationManager().then(function(a){i(".js-add-to-citation-download-manager").each(function(){var e=i(this),t=e.data("resourceId"),n=e.data("resourceTypeId");-1<a.indexOf(t+"-"+n)&&(e.data("inCitationManager","true"),e.addClass("disabled"))})}))},updateAddToCMButton:c};function t(e){return a(e).length}function n(e){e=i(e.currentTarget).closest("section"),e.find(".js-bulk-citation-manager-add").prop("disabled",!t(e)),e=i(".section-container");i(".js-bulk-citation-manager-add-issue").prop("disabled",!t(e))}function a(e){return e.find(".js-checkBoxClass:checked").map(function(e,t){return{id:i(t).data("resourceId"),typeid:i(t).data("resourceTypeId")}}).get()}function o(e){l(a(i(e.currentTarget).closest("section")))}function s(e){l(a(i(".section-container")))}function l(a){Array.isArray(a)&&a.length&&r.getResourceIdsAlreadyInCitationManager().then(function(t){var e,n=a.filter(function(e){return!t.includes(e.id)});n.length?(e=n,r.addResourcesToCitationManager(e).then(function(){e.forEach(function(e){c(e.id,e.typeid)})}).catch(function(e){console.error("Failed to add resources to cart.",e)})):alert("No selected resources can be added to your Citation Manager")}).catch(function(e){console.error("Failed to get resourceIds in cart.",e)})}function c(e,t){i(".js-add-to-citation-download-manager[data-resource-id="+e+"][data-resource-type-id="+t+"]").addClass("disabled")}}(jQuery),SCM.ToolboxGetCitations.DataService=function(e){return{addResourceToCitationManager:n,getResourceIdsAlreadyInCitationManager:function(){return e.ajax({type:"POST",url:"/Citation/GetResourcesInCitationManager",cache:!1}).promise().then(function(e){return e.Success?Array.isArray(e.Messages)?e.Messages.length?e.Messages[0].split(","):[]:Promise.reject("Action did not return expected response"):Promise.reject("Action return non-success status")})},addResourcesToCitationManager:function(e){var t;return Array.isArray(e)&&e.length?(t=[],e.forEach(function(e){t.push(n(e.id,e.typeid))}),Promise.all(t).then(function(e){return Array.isArray(e)?e.sort(function(e,t){return t-e}).shift():e})):Promise.reject("No resources provided")}};function n(t,n){t&&n&&e.ajax({type:"POST",url:"/Citation/AddToCitationManagerAjax",dataType:"text",data:{resourceId:t,resourceTypeId:n}}).done(function(e){(e=JSON.parse(e)).Success||console.error("Cannot add citation"),SCM.ToolboxGetCitations.updateAddToCMButton(t,n)})}}(jQuery),SCM||{}),SCM=(!function(e,n){function t(e){var t;e.preventDefault(),SCM.CitationDownloadManager.getSelectedCitations().length&&(e=n(this).data("citation-format"),e=(t=n(".js-download-citation")).data("action-format")+e,t.attr("action",e),e=SCM.CitationDownloadManager?JSON.stringify(SCM.CitationDownloadManager.getSelectedCitationsData()):"",n(".js-download-citation-data").attr("value",e),t.submit())}e.registerDownload=function(){n(".js-citation-format").on("click",t)}}(SCM.CitationDownloadSelector=SCM.CitationDownloadSelector||{},jQuery),jQuery(SCM.CitationDownloadSelector.registerDownload()),SCM||{}),SCM=(!function(a,n){function e(e){return SCM.CitationDownloadManager.setCheckboxesCheckedTo(this.checked),s(),!1}function t(e){var t;if(a.getSelectedCitations().length)return t={citations:JSON.stringify(SCM.CitationDownloadManager.getSelectedCitationsData())},n.ajax({type:"POST",url:"/Citation/RemoveFromCitationManager",dataType:"text",data:t}).done(function(e){(result=JSON.parse(e)).Success?window.location.reload():console.warn("Could not remove citation(s). "+e)}),!1}function i(e){var t,n;if(a.getSelectedCitations().length)return t=SCM.CitationDownloadManager.getSelectedCitationsData().length,(n=document.getElementById("js-prompt"))&&(n.textContent=t),!1}function r(t,e,n){e=document.querySelectorAll(e);e.length&&e.forEach(function(e){e.addEventListener(t,n)})}function o(e){var t;s(),this.classList.contains("js-select-all")||(t=document.querySelectorAll(".js-select-all")).length&&(this.checked?a.getSelectedCitations().length===n(".js-citation-checkbox").length&&t.forEach(function(e){e.checked=!0}):t.forEach(function(e){e.checked=!1}))}function s(){var e=n(".js-download-selected");a.getSelectedCitations().length?(e.removeClass("disabled"),e.attr("data-reveal-id","getCitations"),n(".js-remove-selected").removeClass("disabled")):(e.addClass("disabled"),e.attr("data-reveal-id",""),n(".js-remove-selected").addClass("disabled"))}a.getSelectedCitations=function(){return n(".js-citation-checkbox:checked")},a.setCheckboxesCheckedTo=function(t){var e=document.querySelectorAll(".js-citation-checkbox");e.length&&(e.forEach(function(e){e.checked=t}),(e=document.querySelectorAll(".js-select-all")).length)&&e.forEach(function(e){e.checked!==t&&(e.checked=t)})},a.registerEventHandlers=function(){r("click",".js-citation-checkbox",o),r("click",".js-select-all",e),r("click",".js-remove-selected",t),r("click",".js-download-selected",i)},a.getSelectedCitationsData=function(){return a.getSelectedCitations().map(function(){return{ResourceId:this.dataset.resourceid,ResourceType:this.dataset.resourcetype,AddedTime:this.dataset.addedtime,GeoRefId:this.dataset.georefid,CustomCitationUrl:this.dataset.customcitationurl}}).get()}}(SCM.CitationDownloadManager=SCM.CitationDownloadManager||{},jQuery),jQuery(function(){SCM.CitationDownloadManager.setCheckboxesCheckedTo(!1),SCM.CitationDownloadManager.registerEventHandlers()}),SCM||{}),Theme=(SCM.Utilities=SCM.Utilities||{},!function(e,n){function t(e){var t;e.length&&(e.each(function(){var e=n(this);e.attr("data-video-id",encodeURIComponent(e.attr("data-video-id")).replace("ref%3A","ref:"))}),t=e.data("player"),e=e.data("account"),n.getScript("//players.brightcove.net/"+e+"/"+t+"_default/index.min.js",function(){}))}e.init=function(){t(n(".brightcove-wrapper video.video-js")),t(n(".brightcove-wrapper-audio video.video-js"))}}(SCM.Utilities.Brightcove=SCM.Utilities.Brightcove||{},jQuery),Theme||{}),Theme=(Theme.Utilities=Theme.Utilities||{},Theme.Utilities.Cadmore=function(o){var t=!1;return{init:function(){!function(e){{var t,n,a,i;e.length&&(t=o(".js-cadmore-data").data("videoaccess"),n=o(".js-cadmore-data").data("embedformat"),a=o(".js-cadmore-data").data("embedsource"),i=o(".js-cadmore-data").data("useembedformat"),e.each(function(){l(o(this),t,n,i)}),s(a))}}(o(".js-cadmore-embed-placeholder"))},loadCadmoreVideos:function(e,t){var n,a,i,r;e.length&&t&&(e=e.find(".js-cadmore-embed-placeholder")).length&&(n=t.accessCodes,a=t.embedtemplate,i=t.embedsource,r=t.useEmbedTemplate,e.each(function(){l(o(this),n,a,r)}),s(i))}};function s(e){t||(o.getScript(e),t=!0)}function l(e,t,n,a){var i,r=e.data("cadmoreid"),t=(i=r,t.filter(function(e){return e.id==i}).map(function(e){return e.access}).shift());"true"===a.toLowerCase()?(n=(n=n.replace("{altId}",r)).replace("{accessCode}",t),e.html(n)):(a=e.find("iframe"),(r=new URL(a.attr("src"))).searchParams.append("token",t),a.attr("src",r.toString()))}}(jQuery),Theme||{}),ArtMetric=(Theme.Utilities=Theme.Utilities||{},Theme.Utilities.YouTube=function(a){var i=[];return{init:function(){a(".youtube-embed").length&&!function(){var e=document.createElement("script"),e=(e.src="https://www.youtube.com/iframe_api",document.head.appendChild(e),document.getElementsByClassName("youtube-embed"));Array.prototype.forEach.call(e,function(e){var t=e.getAttribute("src").split("/"),t=t[t.length-1].split("?"),t=t[t.length-2],n="player-container-"+t;e.id=n,i.push({videoId:t,containerId:n})}),window.onYouTubeIframeAPIReady=function(){i.forEach(function(e){var t,n;t=e.videoId,n=e.containerId,new YT.Player(n,{videoId:t,events:{onStateChange:function(e){e.data!=YT.PlayerState.PLAYING||a("#"+n).data("played")||(SCM.ClientStatsMaster.logPlayActionStats(a("#"+n)),a("#"+n).data("played",!0))}}})})}}()}}}(jQuery),{});function getWidgetInstanceName(e){var t="",e=$(e).attr("class"),n=e.indexOf("widget-instance-");return t=0<=n?e.substr(n).split("-")[2]:t}ArtMetric.fullVersion=function($dest,routeUrl){var baseSiteUrl;$dest.find(".widget-ArticleLevelMetrics").length<1&&(baseSiteUrl=$("#hfSiteURL"),void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(routeUrl="//"+baseSiteUrl.val()+routeUrl),$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.prepend(e),setTimeout(function(){void 0!==window.ChartistData&&ArtMetric.createChart(".ct-chart",window.ChartistData.data,{lineSmooth:!1,showArea:!0,low:0},[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e}}}]])},200),ArtMetric.reloadDimensionsBadge()},error:function(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}}))},ArtMetric.reloadDimensionsBadge=function(){($(".contentmet-dimensions").length||$(".artmet-dimensions").length)&&window.__dimensions_embed&&window.__dimensions_embed.addBadges&&($(".__dimensions_badge_embed__").length&&($(".__dimensions_badge_embed__").removeAttr("data-dimensions-badge-installed"),$(".__dimensions_badge_embed__").empty()),window.__dimensions_embed.addBadges())},ArtMetric.limitLabels=function(){var e=$(".ct-horizontal.ct-label"),t=e.length,n=Math.ceil(t/8),a=1;e.not(":eq(0)").each(function(){a%n!=0&&$(this).hide(),a++})},ArtMetric.createChart=function(e,t,n,a){var e=new Chartist.Line(e,t,n,a),i=0;e.on("created",function(){i=0,ArtMetric.limitLabels()}),e.on("draw",function(e){"line"!==e.type&&"point"!==e.type&&"area"!==e.type||i++,"line"===e.type?e.element.animate({opacity:{begin:25*i+150,dur:250,from:0,to:1}}):"point"===e.type?e.element.animate({x1:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},x2:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},opacity:{begin:25*i,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===e.type&&e.element.animate({opacity:{begin:25*i+250,dur:300,from:0,to:1}})})},ArtMetric.lastActiveElement=null,ArtMetric.triggerModal=function(e,t){var n=$(".artmet-dimensions").length?"true":"false",a="/ThirdParty/ArticleLevelMetricsDetails",i=getWidgetInstanceName(".widget-ArticleLevelMetrics"),i=(0<i.length&&(a+="/"+i),ArtMetric.fullVersion(e,a+="?articleId="+t+"&showDimensionsBadge="+n),$(".artmet-modal")),r=(i.css({display:"block",opacity:1}),i.attr("aria-hidden","false"),i.find(".js-metric-full-wrap").attr("aria-hidden","false"),$("body").addClass("metrics-modal-open"),ArtMetric.lastActiveElement=document.activeElement,i.find('a[href], button, textarea, input:not([type="hidden"]), select').filter(":visible:not(:disabled)")),o=r.first(),s=r.last();(o.length?o:i.attr("tabindex","0")).focus(),i.on("keydown.metricsModalTrap",function(e){"Tab"===e.key?e.shiftKey?document.activeElement!==o[0]&&r.is(document.activeElement)||(e.preventDefault(),s.focus()):document.activeElement!==s[0]&&r.is(document.activeElement)||(e.preventDefault(),o.focus()):"Escape"===e.key&&ArtMetric.closeModal()})},ArtMetric.closeModal=function(){var e=$(".artmet-modal:visible");e.attr("aria-hidden","true"),e.attr("style",""),e.find(".js-metric-full-wrap").attr("aria-hidden","true"),e.off("keydown.metricsModalTrap"),$("body").removeClass("metrics-modal-open"),ArtMetric.lastActiveElement&&(ArtMetric.lastActiveElement.focus(),ArtMetric.lastActiveElement=null)},ArtMetric.eventsToClose=function(){$(".js-artmet-close-modal").on("click keydown",function(e){"click"!==e.type&&("keydown"!==e.type||"Enter"!==e.key&&"Space"!==e.key)||(e.preventDefault(),ArtMetric.closeModal())}),$(".js-artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})},$(document).ready(function(){$(".artmet-modal-trigger, .artmet-condensed-stats .artmet-views").click(function(){var e=$(".artmet-modal-trigger").attr("data-article-id");ArtMetric.triggerModal($(".artmet-modal-contents"),e)}),ArtMetric.eventsToClose(),$(".__dimensions_badge_embed__").on("dimensions_embed:show",function(){$(".__dimensions_badge_embed__").closest(".artmet-item").removeClass("hide"),$(".__dimensions_badge_embed__").closest(".contentmet-citations").removeClass("hide")}),$(".altmetric-embed").on("altmetric:show",function(){$(".altmetric-embed").closest(".artmet-item").removeClass("hide")})});var SCM=SCM||{};function insertArticleLinksIntoReferences(){var a,t,e=$("#js-hfArticleLinksReferencesDoiRegex").val();e&&(a=new RegExp(e,"g"),(t=$(".ref-list").children("div").map(function(e,t){var n=$(t).html().match(a);return n&&n.length?{elem:t,doi:n[0]}:null}).filter(function(e,t){return!!t&&!!t.elem&&!!t.doi})).length)&&(e=t.map(function(e,t){return t.doi}).get().filter(function(e,t,n){return n.indexOf(e)===t}))&&e.length&&$.post("/Article/ArticleUrlsByDoi",{dois:e.toString()}).promise().then(function(a){var e;if(!a||!a.Success)return(e=$.Deferred()).reject(a.Messages&&a.Messages.length?a.Messages[0]:"Unknown error"),e;t.each(function(e,t){var n;t.elem&&t.doi&&a.Result[t.doi]&&(n=$(t.elem).find(".js-ref-link").first(),t=$("<div>").addClass("article-ref-link js-ref-link").html($("<a>").attr("href",a.Result[t.doi]).html("Article")),n.before(t))})}).then(null,function(e){console.error("Unable to look up resource URLs for DOIs"),console.error(e)})}SCM.Utilities=SCM.Utilities||{},!function(e,t){var n=t("#ArticleFullTextWrap"),a=!1;n&&n.attr("data-userHasAccess")&&(a="true"===n.attr("data-userHasAccess").toLowerCase()),e.replaceContentLinks=function(){a||n.find("a[data-reveal-id]").each(function(){t(this).replaceWith(function(){return"<span>"+this.innerHTML+"</span>"})})},e.init=function(){e.replaceContentLinks(),SCM.Utilities.Brightcove&&SCM.Utilities.Brightcove.init(),SCM.InstitutionOpenUrl&&SCM.InstitutionOpenUrl.init()},insertArticleLinksIntoReferences()}(SCM.ArticleFulltext=SCM.ArticleFulltext||{},jQuery);var SCM=SCM||{},SCM=(SCM.ArticleMainView=function(r){return{init:function(){r("#articleMainView-articleId").length&&SCM.Retry.policy().handleResult(function(e){return!e}).waitAndRetry(5,500).execute(function(){return window.digitalData}).then(function(e){var t,n,a,i;!function(){if(document.referrer){var e=document.referrer.match(/:\/\/(.[^/]+)/),t=window.location.hostname;if(e&&e[1]===t)return 1}return}()||(t=r("#articleMainView-articleId").data("articleid"),n=window.location.href.includes("abstract"),a=document.referrer.match(/\/collection\/(\d+)/),i=-1,a&&(i=a[1]),SCM.AdobeAnalytics.sendAdobeAnalyticsArticleData(t,n,i))}).catch(function(e){console.error("Timed out waiting for Adobe Analytics to be ready.")})}}}(jQuery),SCM||{}),Theme=(!function(e,o){e.init=function(){var e=o(".widget-ArticleLinks");e.length&&e.each(function(){var e=o(this),t=e.find(".js-view-more-div"),n=e.find(".js-view-less-div"),a=e.find(".js-view-more-div > .js-view-more-a"),i=e.find(".js-view-less-div > .js-view-less-a"),r=e.find(".cc-row.js-more");a.length&&a.on("click",function(){r.removeClass("hide"),n.removeClass("hide"),t.addClass("hide")}),i.length&&i.on("click",function(){r.addClass("hide"),n.addClass("hide"),t.removeClass("hide")})})}}(SCM.ArticleLinks=SCM.ArticleLinks||{},jQuery),Theme||{}),SCM=(Theme.ConferencesBrowseByYear=function(i){var r=i("#hfSiteURL").val();return{init:function(){i(".master-main").on("click",".js-bby-decade",e),i(".master-main").on("click",".js-bby-year",t),i(".master-main").on("click",".js-conference-list-item",n)}};function e(e){var e=i(e.currentTarget),t=e.data("decade"),n=i(".js-bby-decade"),t=i(".js-bby-decadeYears").find(`[data-decade="${t}"]`),a=t.children(".js-bby-year").last();e.hasClass("selected")||(o(n,e),n=t,e=a,i(".js-bby-years").addClass("hide"),n.length&&n.removeClass("hide"),i(".js-bby-year").removeClass("selected"),e.length&&e.trigger("click"))}function t(e){var e=i(e.currentTarget),t=e.data("year"),n=i(".js-bby-year");e.hasClass("selected")||(o(n,e),n=`//${r}/Proceeding/ConferenceListByYear`,e={year:e=t},SCM.Ajax.get(n,e).expectHtml().then(function(e){var t=i(".js-bby-conferenceList");e.length?t.html(e):t.html("No conferences were found for the selected year.")}).catch(console.error))}function o(e,t){e.removeClass("selected"),t.toggleClass("selected")}function n(e){var e=i(e.currentTarget),a=e.closest(".js-conference-list-resources-item").attr("data-conferenceId"),t=i(`.js-conference-volume-list[data-conferenceId="${a}"]`);if(0==t.html().trim().length){let t=i(`.js-conference-volume-list[data-conferenceId="${a}"]`),e=`//${r}/Proceeding/ConferenceVolumeListResources`,n={conferenceId:a};SCM.Ajax.get(e,n).expectHtml().then(function(e){i(t).html(e)}).catch(console.error)}e.find("i").toggleClass("icon-general-add icon-general_minus"),t.toggleClass("hide")}}(jQuery),SCM||{}),AdButler=AdButler||{},SCM=(AdButler.ads=AdButler.ads||[],!function(s,l){s.HandleMobile=function(e,t){},s.SetupAd=function(t,n,a,i,e){var r=window.abkw||"";AdButler.ads.push({handler:function(e){AdButler.register(i,t,n[0],a,e)},opt:{place:a,keywords:r,domain:"servedbyadbutler.com",click:"CLICK_MACRO_PLACEHOLDER"}}),AdButler.addEventListener("adbutlerOnLoad",s.adFinishedLoading)},s.Init=function(){var o=SCM.SplitScreen&&SCM.SplitScreen.getDocWidth()<767;return l(".hfAdBlockInfo[data-adprovider-typeid=2]").each(function(e,t){var t=l(t),n=t.data("targetname"),a=t.data("slotname"),i=t.data("sizes"),r=t.data("divid"),t=t.data("enabled-on-mobile");if(o&&"False"==t)return!1;a&&i&&r&&s.SetupAd(a,i,r,n,t)}),!0},s.showAdvertisementText=function(){l(".js-adblock-advertisement-text").each(function(){var e=l(this).siblings(".js-adblock");e&&e.is(":visible")&&1<e.find("*").length&&l(this).removeClass("hide")})},s.addClassToSplitView=function(){l(".js-ad-banner .js-adblock").children().length&&l(".js-splitview-wrapper").addClass("ad-banner-visible")},s.adFinishedLoading=function(){s.showAdvertisementText(),s.addClassToSplitView()},l(function(){s.Init()})}(SCM.AdButlerAds=SCM.AdButlerAds||{},jQuery),SCM||{}),ados=ados||{},SCM=(ados.run=ados.run||[],SCM.WPSKevelAds=function(h){return{init:function(){var c=SCM.SplitScreen&&SCM.SplitScreen.getDocWidth()<767,d=(window.abkw||"").split(",").filter(function(e){return""!=e.trim()}).join(","),u=[];h(".hfAdBlockInfo[data-adprovider-typeid=5]").each(function(e,t){var t=h(t),n=t.data("divid"),a=t.data("enabled-on-mobile"),i=t.data("wps-adsize-number"),r=t.data("wps-position-keyword"),o=t.data("wps-network-id"),s=t.data("wps-site-id"),l=t.data("wps-zone-ids"),t=t.data("wps-brandlock-keyword");c&&"False"==a||n&&r&&0<o&&0<s&&0<i&&u.push(new p(n,o,s,i,r,l,t,d))}),function(e){var n;e&&0!=e.length&&(n=[],ados.run.push(function(){e.forEach(function(e){var t;a(e.brandlockKeyword,n),a(e.positionKeyword,n),a(e.titleKeywords,n),e.zoneIds?(t=e.zoneIds.split(","),ados_add_placement(e.networkId,e.siteId,e.divId,e.adSizeNumber).setZone(t)):ados_add_placement(e.networkId,e.siteId,e.divId,e.adSizeNumber)}),ados_setKeywords(n.join(",")),ados_load()}))}(u)}};function p(e,t,n,a,i,r,o,s){this.divId=e,this.networkId=t,this.siteId=n,this.adSizeNumber=a,this.positionKeyword=i,this.zoneIds=r,this.brandlockKeyword=o,this.titleKeywords=s}function a(e,t){e&&!t.includes(e)&&t.push(e)}}(jQuery),SCM||{}),App=(!function(a,o){a.init=function(){var e,t,n=o("#articlefulltext_figshare");n.length&&(e=o('meta[name="citation_doi"]').attr("content"))&&(t=o(".widget-ArticleFulltext")).length&&(a.initMount(t,n),a.loadFigShare(e,n))},a.loadFigShare=function(t,a){figshare.load(a.data("widgetname"),function(e){e=new e({version:"3",width:a.width(),showStats:"true"===a.data("showstats").toLowerCase(),showPageInfo:"true"===a.data("showpageinfo").toLowerCase(),showShareButton:"true"===a.data("showsharebutton").toLowerCase(),showFileDetails:"true"===a.data("showfiledetails").toLowerCase(),["true"===a.data("loaddoisbycollection").toLowerCase()?"collection":"item"]:{resourceDOI:t}});e.on("loading",function(){var t=0,n=setInterval(function(){var e;10===(t+=1)?clearInterval(n):a.find("figshare-widget").html().trim().length&&(clearInterval(n),a.addClass("hascontent"),(e=o(".js-splitview-aside").find("[class*=supplement]")).length)&&(e.addClass("js-hascontent"),e.show())},500)}),e.initialize(),e.mount(a[0])})},a.initMount=function(e,t){var n,a,i,r=e.closest(".widget-SplitView").find(".js-splitview-aside");r.length&&(n=r.find("[class*=supplement]"),i=r.find('.dynamic-widget-inner-wrap[role="tabpanel"]').has("div[class*=supplement]"),a=i.find(".widget-dynamic-inner-wrap")),a&&a.length?(i=r.find('*[role="tabpanel"][aria-hidden="false"]').width())&&(r=o('<div class="position:relative"></div>').appendTo("body"),t.css({position:"absolute",top:-9999,left:-9999,width:i}).detach().appendTo(r),n.on("click",function(){0===t.parent(".widget-dynamic-inner-wrap").length&&t.detach().prependTo(a[0]).css({position:"static",top:0,left:0})})):(i=e.find(".backreferences-title"),1===(i="true"===(null==(r=o("#ShowFigShareInDataSupplements").val())?void 0:r.toLowerCase())?o(".article-body").find(".dataSuppLink:first"):i).length&&t.detach().insertBefore(i))}}(SCM.FigShare=SCM.FigShare||{},jQuery),$(function(){SCM.FigShare.init()}),App||{}),Theme=(!function(e,i){function r(e,t){e.removeClass("open"),i("body").removeClass("on-canvas"),o(e,!1,t.attr("id")),SCM.Focus.release(e),t.focus(),i(document.body).off("click.contentModals keyup.contentModals")}function o(e,t,n){var a;e&&e.length&&(t?(e.attr("aria-hidden","false"),e.attr("aria-live","assertive"),(t=e.find(".label").first()).length?((a=t.attr("id"))||t.attr("id",a="modal-label-"+n),e.attr("aria-labelledby",a)):e.removeAttr("aria-labelledby")):(e.attr("aria-hidden","true"),e.removeAttr("aria-live"),e.removeAttr("aria-labelledby")))}e.mobileContentNav=function(){i(".toggle-left-col").click(function(e){e.stopPropagation(),i("body").addClass("on-canvas"),i(".page-column--left").addClass("expanded")}),i(".toggle-left-col__close, .info-widget-wrap a, .mobile-mask").click(function(){i(".page-column--left").removeClass("expanded"),i("body").removeClass("on-canvas")})},e.contentModals=function(){i(".pg_ArticleSplitView, .pg_articlesplitview").length||(i(".reveal-modal").attr("aria-hidden","true"),i("a[reveal-id]").each(function(){var t,n,a=i(this);a.hasClass("xref-fn")?(a.click(function(){var e=i(this).attr("reveal-id"),t=i('.fn[content-id="'+e+'"]').html(),n=(i("body").addClass("on-canvas"),i(t).clone().appendTo("#revealModal #revealContent").addClass("ref-modal"),i(".ref-modal").closest(".reveal-modal"));n.addClass("open"),SCM.Focus.trap(n),o(n,!0,e),n.attr("tabindex","-1"),n.focus(),n.scrollTop(0),i(document.body).off("keyup.contentModals"),i(document.body).on("keyup.contentModals",function(e){e&&e.code&&"escape"===e.code.toLowerCase()&&n.hasClass("open")&&(i(".ref-modal").html("").removeClass("ref-modal"),r(n,a))})}),i(".close-reveal-modal").on("click.contentModalsClose",function(){var e=i(this).closest(".reveal-modal");e.hasClass("open")&&(i(".ref-modal").html("").removeClass("ref-modal"),i(this).off("click.contentModalsClose"),r(e,a))})):(t=a.attr("reveal-id"),n=i('.reveal-modal[content-id="'+t+'"]'),a.click(function(e){n.length&&(e.stopPropagation(),i("body").addClass("on-canvas"),n.addClass("open"),SCM.Focus.trap(n),o(n,!0,t),n.attr("tabindex","-1"),n.focus(),n.scrollTop(0),i(document.body).off("click.contentModals keyup.contentModals"),i(document.body).on("click.contentModals",function(){n.hasClass("open")&&r(n,a)}),i(document.body).on("keyup.contentModals",function(e){e&&e.code&&"escape"===e.code.toLowerCase()&&n.hasClass("open")&&r(n,a)}),i(".close-reveal-modal").on("click.contentModalsClose",function(){var e=i(this).closest(".reveal-modal");e.hasClass("open")&&(i(".ref-modal").html("").removeClass("ref-modal"),i(this).off("click.contentModalsClose"),r(e,a))}))}))}))},e.init=function(){e.mobileContentNav()},e.windowLoadInit=function(){e.contentModals()}}(App.SiteJS=App.SiteJS||{},jQuery),!function(e){e(document).ready(function(){App.SiteJS.init(),!0===e("body").hasClass("pg_Chapter")&&SCM.SplitScreen.init()}),e(window).on("load",function(){App.SiteJS.windowLoadInit()}),e(window).on("resize",function(){})}(jQuery),Theme||{}),SCM=(Theme.PdfCoverPage=function(n){return{init:function(){!function(){var e=new URLSearchParams(window.location.search),t=e.has("pdfCoverIconEvent");if(t)switch(e.get("pdfCoverIconEvent")){case"cite":n(".js-item-cite a").trigger("click");break;case"crossmark":document.CROSSMARK&&document.CROSSMARK.show()}}()}}}(jQuery),SCM||{}),Theme=(SCM.SharedWidgets=SCM.SharedWidgets||{},!function(e,a){e.init=function(){a(".js-open-ailayabstract").one("click",function(){var t,n,e=a(".js-ai-layabstract-wrap").data("articleid");t=".js-ai-generated-abstract",n=".js-ai-generated-response-wrap",SCM.Ajax.get("/Ai/ArticleAiLayAbstractAjax",{articleId:e}).expectJson().then(function(e){a(t).html(e),a(n).show()}).catch(function(e){console.log(e),a(t).html("Please try again later."),a(n).show()})}),a(".js-open-ailayabstract").on("click",function(){a(".js-ai-generated-response-wrap").toggle()})}}(SCM.SharedWidgets.ArticleAiLayAbstract=SCM.SharedWidgets.ArticleAiLayAbstract||{},jQuery),Theme||{});Theme.Utilities=Theme.Utilities||{},Theme.Utilities.VimeoVideo=function(a){return{init:function(){a(".vimeoplayer-wrapper").length&&!function(e){var t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js",t.onload=function(){"function"==typeof e&&e()},document.head.appendChild(t)}(e)}};function e(){var e;"undefined"!=typeof Vimeo&&Vimeo.Player?(e=document.querySelectorAll(".vimeoplayer-wrapper"),Array.prototype.forEach.call(e,function(n){var e=n.querySelector("iframe");e&&new Vimeo.Player(e).on("play",function(e){var t;(t=a(n)).data("played")||(console.log(t),SCM.ClientStatsMaster.logPlayActionStats(t),t.data("played",!0))})})):console.error("Vimeo Player object is not available.")}}(jQuery),!function a(i,r,o){function s(t,e){if(!r[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=r[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,a,i,r,o)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";e=(e=e("./scm.ecmascript-testbed"))&&e.__esModule?e:{default:e};try{e.default.runTestsOnJsDebug()}catch(e){console.error("One or more ES feature tests failed:",e)}},{"./scm.ecmascript-testbed":2}],2:[function(e,t,n){"use strict";function a(){console.log(" *****  Performing EcmaScript Feature Tests  *****");var e,t=performance.now(),n=[],a=(n.push("val"),console.log("Let and Const work","changed",n),(new class{testMethod(){console.log("Classes work")}}).testMethod(),console.log("Arrow functions work."),console.log("Interpolated Strings work","This is some stuff"),0);for(e of[1,2,3,4,5])a+=e;console.log("for...of loop works",a),Promise.resolve("works").then(function(e){console.log("Promises work",e)});var i,n=new Map,r=(n.set("a",1),console.log("Map works",n.get("a")),0);for(i of function*(e,t,n){for(;e<t;)yield e,e+=n}(0,10,2))r+=i;if(console.log("Generators work",r),!Symbol||!Symbol.iterator)throw new Error("Symbol.iterator is not defined");var n={from:1,to:5};if(n[Symbol.iterator]=function(){return{current:this.from,last:this.to,next(){return this.current<=this.last?{done:!1,value:this.current++}:{done:!0}}}},!Array.from(n).length)throw new Error("Test Object is not iterable");if((n=new Map).set("a",1),!(n=Array.from(n)).length)throw new Error("Map is not iterable");console.log("Test Object and Map are iterable",n),console.log("Exponent operator works",27),async function(){return Promise.resolve("foo")}().then(function(e){console.log("async/await works",e)});var[n,o]=[1,2],n=(console.log("Destructuring Assignment works",n,o,[3,4,5]),{a:1,b:2,c:3}),o=Object.values(n),s=Object.entries(n),n=Object.getOwnPropertyDescriptors(n),o=(console.log("New Object methods work",o,s,n),"123".padStart(5,"0")),s="123".padEnd(5,"0"),o=(console.log("String padding works",o,s),n=[u.name],console.log("There are known failures for ES 2017",n),[1,2,3,4,5,6]);console.log("Spread operator works",o),function(e,t){for(var n=arguments.length,a=new Array(2<n?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];console.log("Rest parameters work",e,t,a)}(1,2,3,4,5,6),Promise.reject("test").catch(function(){}).finally(function(){console.log("Promise.finally works")});{const d={[Symbol.asyncIterator](){return{i:0,next(){return this.i<3?Promise.resolve({value:this.i++,done:!1}):Promise.resolve({done:!0})}}}};!async function(){var e,t=[];for await(e of d)t.push(e);return t}().then(function(e){console.log("for await...of works",e)})}var s=[0,1,2,[3,4]].flat(),n=(console.log("Array.prototype.flat works",s),[0,1,2,3,4].flatMap(function(e){return[2*e]})),o=(console.log("Array.prototype.flatMap works",n),Object.fromEntries([["foo","bar"],["baz",42]])),s=(console.log("Object.fromEntries works",o),console.log("Nullish Coelescing Operator works","foo","baz"),{prop1:"foo",arr1:[1,2,3]}),n=null===s?void 0:s.prop1,o=null==(o=s.arr1)?void 0:o.pop(),l=null===s?void 0:s.noSuchProp,c=null==(c=(s=s.arr1).noSuchMethod)?void 0:c.call(s),s=(console.log("Optional Chaining Operator works",n,o,l,c),globalThis.prototype),o=(console.log("globalThis works",s),n=[h.name],console.log("There are known failures for ES 2020",n),"aabcdaaefgaa".replaceAll("aa","zz")),l=(console.log("String.prototype.replaceAll works",o),null),c=(l=l??"foo",null),s=(c=c||"bar","baz"),n=(s=s&&"jenga",console.log("Logical Assignment Operators work",l,c,s),console.log("Numeric Literal Separators work",1234),Promise.any([Promise.resolve("test1"),Promise.resolve("test2")]).then(function(e){console.log("Promise.any works",e)}),new AggregateError([new Error("err1"),new Error("err2")],"test aggregate error"));console.log("AggregateError works",n);l=(o=new URLSearchParams("param1=val1&param2=val2")).get("param1"),o=o.get("param2"),console.log("URLSearchParams works",l,o),c=performance.now()-t;console.log(" ***** EcmaScript Feature Tests completed in: "+c+"ms")}function u(){var e=Int32Array.from([123,456,789,234,567]),e=Atomics.xor(e,2,123);console.log("Atomics work",e)}function h(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={runTests:a,runTestsOnJsDebug:function(){window&&window.location&&window.location.search&&-1<window.location.search.toLowerCase().indexOf("jsdebug=true")&&a()}}},{}]},{},[1]);
//# sourceMappingURL=site.min.js.map
